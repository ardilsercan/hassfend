{"ast":null,"code":"export const subscribeRenderTemplate = (conn, onChange, params) => conn.subscribeMessage(msg => onChange(msg), {\n  type: \"render_template\",\n  ...params\n});\nexport const subscribePreviewTemplate = (hass, flow_id, flow_type, user_input, callback) => hass.connection.subscribeMessage(callback, {\n  type: \"template/start_preview\",\n  flow_id,\n  flow_type,\n  user_input\n});","map":{"version":3,"names":["subscribeRenderTemplate","conn","onChange","params","subscribeMessage","msg","type","subscribePreviewTemplate","hass","flow_id","flow_type","user_input","callback","connection"],"sources":["/workspaces/frontend/src/data/ws-templates.ts"],"sourcesContent":["import { Connection, UnsubscribeFunc } from \"home-assistant-js-websocket\";\nimport { HomeAssistant } from \"../types\";\n\nexport interface RenderTemplateResult {\n  result: string;\n  listeners: TemplateListeners;\n}\n\nexport interface RenderTemplateError {\n  error: string;\n  level: \"ERROR\" | \"WARNING\";\n}\n\nexport interface TemplateListeners {\n  all: boolean;\n  domains: string[];\n  entities: string[];\n  time: boolean;\n}\n\nexport type TemplatePreview = TemplatePreviewState | TemplatePreviewError;\n\ninterface TemplatePreviewState {\n  state: string;\n  attributes: Record<string, any>;\n  listeners: TemplateListeners;\n}\n\ninterface TemplatePreviewError {\n  error: string;\n}\n\nexport const subscribeRenderTemplate = (\n  conn: Connection,\n  onChange: (result: RenderTemplateResult | RenderTemplateError) => void,\n  params: {\n    template: string;\n    entity_ids?: string | string[];\n    variables?: Record<string, unknown>;\n    timeout?: number;\n    strict?: boolean;\n    report_errors?: boolean;\n  }\n): Promise<UnsubscribeFunc> =>\n  conn.subscribeMessage(\n    (msg: RenderTemplateResult | RenderTemplateError) => onChange(msg),\n    {\n      type: \"render_template\",\n      ...params,\n    }\n  );\n\nexport const subscribePreviewTemplate = (\n  hass: HomeAssistant,\n  flow_id: string,\n  flow_type: \"config_flow\" | \"options_flow\",\n  user_input: Record<string, any>,\n  callback: (preview: TemplatePreview) => void\n): Promise<UnsubscribeFunc> =>\n  hass.connection.subscribeMessage(callback, {\n    type: \"template/start_preview\",\n    flow_id,\n    flow_type,\n    user_input,\n  });\n"],"mappings":"AAgCA,OAAO,MAAMA,uBAAuB,GAAGA,CACrCC,IAAgB,EAChBC,QAAsE,EACtEC,MAOC,KAEDF,IAAI,CAACG,gBAAgB,CAClBC,GAA+C,IAAKH,QAAQ,CAACG,GAAG,CAAC,EAClE;EACEC,IAAI,EAAE,iBAAiB;EACvB,GAAGH;AACL,CACF,CAAC;AAEH,OAAO,MAAMI,wBAAwB,GAAGA,CACtCC,IAAmB,EACnBC,OAAe,EACfC,SAAyC,EACzCC,UAA+B,EAC/BC,QAA4C,KAE5CJ,IAAI,CAACK,UAAU,CAACT,gBAAgB,CAACQ,QAAQ,EAAE;EACzCN,IAAI,EAAE,wBAAwB;EAC9BG,OAAO;EACPC,SAAS;EACTC;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}