{"ast":null,"code":"import { toUTCDate } from './to-utc-date.js';\nfunction getNormalizedDate(weekNumberType, date) {\n  const fy = date.getUTCFullYear();\n  const m = date.getUTCMonth();\n  const d = date.getUTCDate();\n  const wd = date.getUTCDay();\n  let offset = wd;\n  if (weekNumberType === 'first-4-day-week') offset = 3;\n  if (weekNumberType === 'first-day-of-year') offset = 6;\n  if (weekNumberType === 'first-full-week') offset = 0;\n  return toUTCDate(fy, m, d - wd + offset);\n}\nexport function getWeekNumber(weekNumberType, date) {\n  const normalizedDate = getNormalizedDate(weekNumberType, date);\n  const firstDayOfYear = toUTCDate(normalizedDate.getUTCFullYear(), 0, 1);\n  const numDays = 1 + (+normalizedDate - +firstDayOfYear) / 864e5;\n  return Math.ceil(numDays / 7);\n}","map":{"version":3,"names":["toUTCDate","getNormalizedDate","weekNumberType","date","fy","getUTCFullYear","m","getUTCMonth","d","getUTCDate","wd","getUTCDay","offset","getWeekNumber","normalizedDate","firstDayOfYear","numDays","Math","ceil"],"sources":["../../../src/calendar/helpers/get-week-number.ts"],"sourcesContent":["import type { WeekNumberType } from '../typings.js';\nimport { toUTCDate } from './to-utc-date.js';\n\nfunction getNormalizedDate(weekNumberType: WeekNumberType, date: Date): Date {\n  const fy = date.getUTCFullYear();\n  const m = date.getUTCMonth();\n  const d = date.getUTCDate();\n  const wd = date.getUTCDay();\n\n  let offset = wd;\n\n  if (weekNumberType === 'first-4-day-week') offset = 3;\n  if (weekNumberType === 'first-day-of-year') offset = 6;\n  if (weekNumberType === 'first-full-week') offset = 0;\n\n  return toUTCDate(fy, m, d - wd + offset);\n}\n\n/**\n * {@link https://bit.ly/2UvEN2y Compute week number by type}\n */\nexport function getWeekNumber(weekNumberType: WeekNumberType, date: Date): number {\n  const normalizedDate = getNormalizedDate(weekNumberType, date);\n  const firstDayOfYear = toUTCDate(normalizedDate.getUTCFullYear(), 0, 1);\n  const numDays = 1 + ((+normalizedDate - +firstDayOfYear) / 864e5);\n\n  return Math.ceil(numDays / 7);\n}\n"],"mappings":"AACA,SAASA,SAAS,QAAQ,kBAAkB;AAE5C,SAASC,iBAAiBA,CAACC,cAA8B,EAAEC,IAAU;EACnE,MAAMC,EAAE,GAAGD,IAAI,CAACE,cAAc,EAAE;EAChC,MAAMC,CAAC,GAAGH,IAAI,CAACI,WAAW,EAAE;EAC5B,MAAMC,CAAC,GAAGL,IAAI,CAACM,UAAU,EAAE;EAC3B,MAAMC,EAAE,GAAGP,IAAI,CAACQ,SAAS,EAAE;EAE3B,IAAIC,MAAM,GAAGF,EAAE;EAEf,IAAIR,cAAc,KAAK,kBAAkB,EAAEU,MAAM,GAAG,CAAC;EACrD,IAAIV,cAAc,KAAK,mBAAmB,EAAEU,MAAM,GAAG,CAAC;EACtD,IAAIV,cAAc,KAAK,iBAAiB,EAAEU,MAAM,GAAG,CAAC;EAEpD,OAAOZ,SAAS,CAACI,EAAE,EAAEE,CAAC,EAAEE,CAAC,GAAGE,EAAE,GAAGE,MAAM,CAAC;AAC1C;AAKA,OAAM,SAAUC,aAAaA,CAACX,cAA8B,EAAEC,IAAU;EACtE,MAAMW,cAAc,GAAGb,iBAAiB,CAACC,cAAc,EAAEC,IAAI,CAAC;EAC9D,MAAMY,cAAc,GAAGf,SAAS,CAACc,cAAc,CAACT,cAAc,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;EACvE,MAAMW,OAAO,GAAG,CAAC,GAAI,CAAC,CAACF,cAAc,GAAG,CAACC,cAAc,IAAI,KAAM;EAEjE,OAAOE,IAAI,CAACC,IAAI,CAACF,OAAO,GAAG,CAAC,CAAC;AAC/B"},"metadata":{},"sourceType":"module","externalDependencies":[]}