{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/helpers/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13;\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"@material/mwc-button/mwc-button\";\nimport { css, html, LitElement } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { nestedArrayMove } from \"../../../common/util/array-move\";\nimport \"../../../components/ha-alert\";\nimport \"../../../components/ha-blueprint-picker\";\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-circular-progress\";\nimport \"../../../components/ha-markdown\";\nimport \"../../../components/ha-selector/ha-selector\";\nimport \"../../../components/ha-settings-row\";\nimport { fetchBlueprints } from \"../../../data/blueprint\";\nimport { haStyle } from \"../../../resources/styles\";\nimport \"../ha-config-section\";\nexport var HaBlueprintAutomationEditor = _decorate([customElement(\"blueprint-automation-editor\")], function (_initialize, _LitElement) {\n  var HaBlueprintAutomationEditor = /*#__PURE__*/function (_LitElement2) {\n    _inherits(HaBlueprintAutomationEditor, _LitElement2);\n    function HaBlueprintAutomationEditor() {\n      var _this;\n      _classCallCheck(this, HaBlueprintAutomationEditor);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _callSuper(this, HaBlueprintAutomationEditor, [].concat(args));\n      _initialize(_assertThisInitialized(_this));\n      return _this;\n    }\n    return _createClass(HaBlueprintAutomationEditor);\n  }(_LitElement);\n  return {\n    F: HaBlueprintAutomationEditor,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"isWide\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"disabled\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean,\n        reflect: true\n      })],\n      key: \"narrow\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"config\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"stateObj\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_blueprints\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"firstUpdated\",\n      value: function firstUpdated(changedProps) {\n        _get(_getPrototypeOf(HaBlueprintAutomationEditor.prototype), \"firstUpdated\", this).call(this, changedProps);\n        this._getBlueprints();\n      }\n    }, {\n      kind: \"get\",\n      key: \"_blueprint\",\n      value: function _blueprint() {\n        if (!this._blueprints) {\n          return undefined;\n        }\n        return this._blueprints[this.config.use_blueprint.path];\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        var _this$stateObj,\n          _blueprint$metadata,\n          _this2 = this;\n        var blueprint = this._blueprint;\n        return html(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      \", \"\\n      \", \"\\n      \", \"\\n      <ha-card\\n        outlined\\n        class=\\\"blueprint\\\"\\n        .header=\", \"\\n      >\\n        <div class=\\\"blueprint-picker-container\\\">\\n          \", \"\\n        </div>\\n\\n        \", \"\\n      </ha-card>\\n    \"])), this.disabled ? html(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"<ha-alert alert-type=\\\"warning\\\">\\n            \", \"\\n            <mwc-button slot=\\\"action\\\" @click=\", \">\\n              \", \"\\n            </mwc-button>\\n          </ha-alert>\"])), this.hass.localize(\"ui.panel.config.automation.editor.read_only\"), this._duplicate, this.hass.localize(\"ui.panel.config.automation.editor.migrate\")) : \"\", ((_this$stateObj = this.stateObj) === null || _this$stateObj === void 0 ? void 0 : _this$stateObj.state) === \"off\" ? html(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n            <ha-alert alert-type=\\\"info\\\">\\n              \", \"\\n              <mwc-button slot=\\\"action\\\" @click=\", \">\\n                \", \"\\n              </mwc-button>\\n            </ha-alert>\\n          \"])), this.hass.localize(\"ui.panel.config.automation.editor.disabled\"), this._enable, this.hass.localize(\"ui.panel.config.automation.editor.enable\")) : \"\", this.config.description ? html(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"<p class=\\\"description\\\">\", \"</p>\"])), this.config.description) : \"\", this.hass.localize(\"ui.panel.config.automation.editor.blueprint.header\"), this._blueprints ? Object.keys(this._blueprints).length ? html(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n                  <ha-blueprint-picker\\n                    .hass=\", \"\\n                    .label=\", \"\\n                    .blueprints=\", \"\\n                    .value=\", \"\\n                    .disabled=\", \"\\n                    @value-changed=\", \"\\n                  ></ha-blueprint-picker>\\n                \"])), this.hass, this.hass.localize(\"ui.panel.config.automation.editor.blueprint.blueprint_to_use\"), this._blueprints, this.config.use_blueprint.path, this.disabled, this._blueprintChanged) : this.hass.localize(\"ui.panel.config.automation.editor.blueprint.no_blueprints\") : html(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"<ha-circular-progress indeterminate></ha-circular-progress>\"]))), this.config.use_blueprint.path ? blueprint && \"error\" in blueprint ? html(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"<p class=\\\"warning padding\\\">\\n                There is an error in this Blueprint: \", \"\\n              </p>\"])), blueprint.error) : html(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\", \"\\n              \", \"\"])), blueprint !== null && blueprint !== void 0 && blueprint.metadata.description ? html(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"<ha-markdown\\n                    class=\\\"card-content\\\"\\n                    breaks\\n                    .content=\", \"\\n                  ></ha-markdown>\"])), blueprint.metadata.description) : \"\", blueprint !== null && blueprint !== void 0 && (_blueprint$metadata = blueprint.metadata) !== null && _blueprint$metadata !== void 0 && _blueprint$metadata.input && Object.keys(blueprint.metadata.input).length ? Object.entries(blueprint.metadata.input).map(function (_ref) {\n          var _value$selector;\n          var _ref2 = _slicedToArray(_ref, 2),\n            key = _ref2[0],\n            value = _ref2[1];\n          var selector = (_value$selector = value === null || value === void 0 ? void 0 : value.selector) !== null && _value$selector !== void 0 ? _value$selector : {\n            text: undefined\n          };\n          var type = Object.keys(selector)[0];\n          var enhancedSelector = [\"action\", \"condition\", \"trigger\"].includes(type) ? _defineProperty({}, type, Object.assign(Object.assign({}, selector[type]), {}, {\n            path: [key]\n          })) : selector;\n          return html(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"<ha-settings-row .narrow=\", \">\\n                        <span slot=\\\"heading\\\">\", \"</span>\\n                        <ha-markdown\\n                          slot=\\\"description\\\"\\n                          class=\\\"card-content\\\"\\n                          breaks\\n                          .content=\", \"\\n                        ></ha-markdown>\\n                        \", \"\\n                      </ha-settings-row>\"])), _this2.narrow, (value === null || value === void 0 ? void 0 : value.name) || key, value === null || value === void 0 ? void 0 : value.description, html(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\"<ha-selector\\n                          .hass=\", \"\\n                          .selector=\", \"\\n                          .key=\", \"\\n                          .disabled=\", \"\\n                          .required=\", \"\\n                          .placeholder=\", \"\\n                          .value=\", \"\\n                          @value-changed=\", \"\\n                          @item-moved=\", \"\\n                        ></ha-selector>\"])), _this2.hass, enhancedSelector, key, _this2.disabled, (value === null || value === void 0 ? void 0 : value.default) === undefined, value === null || value === void 0 ? void 0 : value.default, _this2.config.use_blueprint.input && key in _this2.config.use_blueprint.input ? _this2.config.use_blueprint.input[key] : value === null || value === void 0 ? void 0 : value.default, _this2._inputChanged, _this2._itemMoved));\n        }) : html(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"<p class=\\\"padding\\\">\\n                    \", \"\\n                  </p>\"])), this.hass.localize(\"ui.panel.config.automation.editor.blueprint.no_inputs\"))) : \"\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getBlueprints\",\n      value: function () {\n        var _getBlueprints2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetchBlueprints(this.hass, \"automation\");\n              case 2:\n                this._blueprints = _context.sent;\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee, this);\n        }));\n        function _getBlueprints() {\n          return _getBlueprints2.apply(this, arguments);\n        }\n        return _getBlueprints;\n      }()\n    }, {\n      kind: \"method\",\n      key: \"_blueprintChanged\",\n      value: function _blueprintChanged(ev) {\n        ev.stopPropagation();\n        if (this.config.use_blueprint.path === ev.detail.value) {\n          return;\n        }\n        fireEvent(this, \"value-changed\", {\n          value: Object.assign(Object.assign({}, this.config), {}, {\n            use_blueprint: {\n              path: ev.detail.value\n            }\n          })\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_inputChanged\",\n      value: function _inputChanged(ev) {\n        ev.stopPropagation();\n        var target = ev.target;\n        var key = target.key;\n        var value = ev.detail ? ev.detail.value : target.value;\n        if (this.config.use_blueprint.input && this.config.use_blueprint.input[key] === value || !this.config.use_blueprint.input && value === \"\") {\n          return;\n        }\n        var input = Object.assign(Object.assign({}, this.config.use_blueprint.input), {}, _defineProperty({}, key, value));\n        fireEvent(this, \"value-changed\", {\n          value: Object.assign(Object.assign({}, this.config), {}, {\n            use_blueprint: Object.assign(Object.assign({}, this.config.use_blueprint), {}, {\n              input: input\n            })\n          })\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_itemMoved\",\n      value: function _itemMoved(ev) {\n        ev.stopPropagation();\n        var _ev$detail = ev.detail,\n          oldIndex = _ev$detail.oldIndex,\n          newIndex = _ev$detail.newIndex,\n          oldPath = _ev$detail.oldPath,\n          newPath = _ev$detail.newPath;\n        var input = nestedArrayMove(this.config.use_blueprint.input, oldIndex, newIndex, oldPath, newPath);\n        fireEvent(this, \"value-changed\", {\n          value: Object.assign(Object.assign({}, this.config), {}, {\n            use_blueprint: Object.assign(Object.assign({}, this.config.use_blueprint), {}, {\n              input: input\n            })\n          })\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_enable\",\n      value: function () {\n        var _enable2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n          return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n            while (1) switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(!this.hass || !this.stateObj)) {\n                  _context2.next = 2;\n                  break;\n                }\n                return _context2.abrupt(\"return\");\n              case 2:\n                _context2.next = 4;\n                return this.hass.callService(\"automation\", \"turn_on\", {\n                  entity_id: this.stateObj.entity_id\n                });\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }, _callee2, this);\n        }));\n        function _enable() {\n          return _enable2.apply(this, arguments);\n        }\n        return _enable;\n      }()\n    }, {\n      kind: \"method\",\n      key: \"_duplicate\",\n      value: function _duplicate() {\n        fireEvent(this, \"duplicate\");\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return [haStyle, css(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([\"\\n        :host {\\n          display: block;\\n        }\\n        ha-card.blueprint {\\n          margin: 0 auto;\\n        }\\n        .padding {\\n          padding: 16px;\\n        }\\n        .link-button-row {\\n          padding: 14px;\\n        }\\n        .blueprint-picker-container {\\n          padding: 0 16px 16px;\\n        }\\n        ha-textfield,\\n        ha-blueprint-picker {\\n          display: block;\\n        }\\n        h3 {\\n          margin: 16px;\\n        }\\n        .introduction {\\n          margin-top: 0;\\n          margin-bottom: 12px;\\n        }\\n        .introduction a {\\n          color: var(--primary-color);\\n        }\\n        p {\\n          margin-bottom: 0;\\n        }\\n        .description {\\n          margin-bottom: 16px;\\n        }\\n        ha-settings-row {\\n          --paper-time-input-justify-content: flex-end;\\n          --settings-row-content-width: 100%;\\n          --settings-row-prefix-display: contents;\\n          border-top: 1px solid var(--divider-color);\\n        }\\n        ha-alert {\\n          margin-bottom: 16px;\\n          display: block;\\n        }\\n        ha-alert.re-order {\\n          border-radius: var(--ha-card-border-radius, 12px);\\n          overflow: hidden;\\n        }\\n      \"])))];\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["css","html","LitElement","customElement","property","state","fireEvent","nestedArrayMove","fetchBlueprints","haStyle","HaBlueprintAutomationEditor","_decorate","_initialize","_LitElement","_LitElement2","_inherits","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","_assertThisInitialized","_createClass","F","d","kind","decorators","attribute","key","value","type","Boolean","reflect","firstUpdated","changedProps","_get","_getPrototypeOf","prototype","call","_getBlueprints","_blueprint","_blueprints","undefined","config","use_blueprint","path","render","_this$stateObj","_blueprint$metadata","_this2","blueprint","_templateObject","_taggedTemplateLiteral","disabled","_templateObject2","hass","localize","_duplicate","stateObj","_templateObject3","_enable","description","_templateObject4","Object","keys","_templateObject5","_blueprintChanged","_templateObject6","_templateObject7","error","_templateObject8","metadata","_templateObject9","input","entries","map","_ref","_value$selector","_ref2","_slicedToArray","selector","text","enhancedSelector","includes","_defineProperty","assign","_templateObject10","narrow","name","_templateObject11","default","_inputChanged","_itemMoved","_templateObject12","_getBlueprints2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","sent","stop","apply","ev","stopPropagation","detail","target","_ev$detail","oldIndex","newIndex","oldPath","newPath","_enable2","_callee2","_callee2$","_context2","abrupt","callService","entity_id","static","styles","_templateObject13"],"sources":["/workspaces/frontend/src/panels/config/automation/blueprint-automation-editor.ts"],"sourcesContent":["import \"@material/mwc-button/mwc-button\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { css, CSSResultGroup, html, LitElement } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { nestedArrayMove } from \"../../../common/util/array-move\";\nimport \"../../../components/ha-alert\";\nimport \"../../../components/ha-blueprint-picker\";\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-circular-progress\";\nimport \"../../../components/ha-markdown\";\nimport \"../../../components/ha-selector/ha-selector\";\nimport \"../../../components/ha-settings-row\";\nimport { BlueprintAutomationConfig } from \"../../../data/automation\";\nimport {\n  BlueprintOrError,\n  Blueprints,\n  fetchBlueprints,\n} from \"../../../data/blueprint\";\nimport { haStyle } from \"../../../resources/styles\";\nimport { HomeAssistant } from \"../../../types\";\nimport \"../ha-config-section\";\n\n@customElement(\"blueprint-automation-editor\")\nexport class HaBlueprintAutomationEditor extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean }) public isWide = false;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean, reflect: true }) public narrow = false;\n\n  @property({ attribute: false }) public config!: BlueprintAutomationConfig;\n\n  @property({ attribute: false }) public stateObj?: HassEntity;\n\n  @state() private _blueprints?: Blueprints;\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    this._getBlueprints();\n  }\n\n  private get _blueprint(): BlueprintOrError | undefined {\n    if (!this._blueprints) {\n      return undefined;\n    }\n    return this._blueprints[this.config.use_blueprint.path];\n  }\n\n  protected render() {\n    const blueprint = this._blueprint;\n    return html`\n      ${this.disabled\n        ? html`<ha-alert alert-type=\"warning\">\n            ${this.hass.localize(\"ui.panel.config.automation.editor.read_only\")}\n            <mwc-button slot=\"action\" @click=${this._duplicate}>\n              ${this.hass.localize(\"ui.panel.config.automation.editor.migrate\")}\n            </mwc-button>\n          </ha-alert>`\n        : \"\"}\n      ${this.stateObj?.state === \"off\"\n        ? html`\n            <ha-alert alert-type=\"info\">\n              ${this.hass.localize(\n                \"ui.panel.config.automation.editor.disabled\"\n              )}\n              <mwc-button slot=\"action\" @click=${this._enable}>\n                ${this.hass.localize(\n                  \"ui.panel.config.automation.editor.enable\"\n                )}\n              </mwc-button>\n            </ha-alert>\n          `\n        : \"\"}\n      ${this.config.description\n        ? html`<p class=\"description\">${this.config.description}</p>`\n        : \"\"}\n      <ha-card\n        outlined\n        class=\"blueprint\"\n        .header=${this.hass.localize(\n          \"ui.panel.config.automation.editor.blueprint.header\"\n        )}\n      >\n        <div class=\"blueprint-picker-container\">\n          ${this._blueprints\n            ? Object.keys(this._blueprints).length\n              ? html`\n                  <ha-blueprint-picker\n                    .hass=${this.hass}\n                    .label=${this.hass.localize(\n                      \"ui.panel.config.automation.editor.blueprint.blueprint_to_use\"\n                    )}\n                    .blueprints=${this._blueprints}\n                    .value=${this.config.use_blueprint.path}\n                    .disabled=${this.disabled}\n                    @value-changed=${this._blueprintChanged}\n                  ></ha-blueprint-picker>\n                `\n              : this.hass.localize(\n                  \"ui.panel.config.automation.editor.blueprint.no_blueprints\"\n                )\n            : html`<ha-circular-progress indeterminate></ha-circular-progress>`}\n        </div>\n\n        ${this.config.use_blueprint.path\n          ? blueprint && \"error\" in blueprint\n            ? html`<p class=\"warning padding\">\n                There is an error in this Blueprint: ${blueprint.error}\n              </p>`\n            : html`${blueprint?.metadata.description\n                ? html`<ha-markdown\n                    class=\"card-content\"\n                    breaks\n                    .content=${blueprint.metadata.description}\n                  ></ha-markdown>`\n                : \"\"}\n              ${blueprint?.metadata?.input &&\n              Object.keys(blueprint.metadata.input).length\n                ? Object.entries(blueprint.metadata.input).map(\n                    ([key, value]) => {\n                      const selector = value?.selector ?? { text: undefined };\n                      const type = Object.keys(selector)[0];\n                      const enhancedSelector = [\n                        \"action\",\n                        \"condition\",\n                        \"trigger\",\n                      ].includes(type)\n                        ? {\n                            [type]: {\n                              ...selector[type],\n                              path: [key],\n                            },\n                          }\n                        : selector;\n\n                      return html`<ha-settings-row .narrow=${this.narrow}>\n                        <span slot=\"heading\">${value?.name || key}</span>\n                        <ha-markdown\n                          slot=\"description\"\n                          class=\"card-content\"\n                          breaks\n                          .content=${value?.description}\n                        ></ha-markdown>\n                        ${html`<ha-selector\n                          .hass=${this.hass}\n                          .selector=${enhancedSelector}\n                          .key=${key}\n                          .disabled=${this.disabled}\n                          .required=${value?.default === undefined}\n                          .placeholder=${value?.default}\n                          .value=${this.config.use_blueprint.input &&\n                          key in this.config.use_blueprint.input\n                            ? this.config.use_blueprint.input[key]\n                            : value?.default}\n                          @value-changed=${this._inputChanged}\n                          @item-moved=${this._itemMoved}\n                        ></ha-selector>`}\n                      </ha-settings-row>`;\n                    }\n                  )\n                : html`<p class=\"padding\">\n                    ${this.hass.localize(\n                      \"ui.panel.config.automation.editor.blueprint.no_inputs\"\n                    )}\n                  </p>`}`\n          : \"\"}\n      </ha-card>\n    `;\n  }\n\n  private async _getBlueprints() {\n    this._blueprints = await fetchBlueprints(this.hass, \"automation\");\n  }\n\n  private _blueprintChanged(ev) {\n    ev.stopPropagation();\n    if (this.config.use_blueprint.path === ev.detail.value) {\n      return;\n    }\n    fireEvent(this, \"value-changed\", {\n      value: {\n        ...this.config,\n        use_blueprint: {\n          path: ev.detail.value,\n        },\n      },\n    });\n  }\n\n  private _inputChanged(ev) {\n    ev.stopPropagation();\n    const target = ev.target as any;\n    const key = target.key;\n    const value = ev.detail ? ev.detail.value : target.value;\n    if (\n      (this.config.use_blueprint.input &&\n        this.config.use_blueprint.input[key] === value) ||\n      (!this.config.use_blueprint.input && value === \"\")\n    ) {\n      return;\n    }\n    const input = { ...this.config.use_blueprint.input, [key]: value };\n\n    fireEvent(this, \"value-changed\", {\n      value: {\n        ...this.config,\n        use_blueprint: {\n          ...this.config.use_blueprint,\n          input,\n        },\n      },\n    });\n  }\n\n  private _itemMoved(ev) {\n    ev.stopPropagation();\n    const { oldIndex, newIndex, oldPath, newPath } = ev.detail;\n\n    const input = nestedArrayMove(\n      this.config.use_blueprint.input,\n      oldIndex,\n      newIndex,\n      oldPath,\n      newPath\n    );\n\n    fireEvent(this, \"value-changed\", {\n      value: {\n        ...this.config,\n        use_blueprint: {\n          ...this.config.use_blueprint,\n          input,\n        },\n      },\n    });\n  }\n\n  private async _enable(): Promise<void> {\n    if (!this.hass || !this.stateObj) {\n      return;\n    }\n    await this.hass.callService(\"automation\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  private _duplicate() {\n    fireEvent(this, \"duplicate\");\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      css`\n        :host {\n          display: block;\n        }\n        ha-card.blueprint {\n          margin: 0 auto;\n        }\n        .padding {\n          padding: 16px;\n        }\n        .link-button-row {\n          padding: 14px;\n        }\n        .blueprint-picker-container {\n          padding: 0 16px 16px;\n        }\n        ha-textfield,\n        ha-blueprint-picker {\n          display: block;\n        }\n        h3 {\n          margin: 16px;\n        }\n        .introduction {\n          margin-top: 0;\n          margin-bottom: 12px;\n        }\n        .introduction a {\n          color: var(--primary-color);\n        }\n        p {\n          margin-bottom: 0;\n        }\n        .description {\n          margin-bottom: 16px;\n        }\n        ha-settings-row {\n          --paper-time-input-justify-content: flex-end;\n          --settings-row-content-width: 100%;\n          --settings-row-prefix-display: contents;\n          border-top: 1px solid var(--divider-color);\n        }\n        ha-alert {\n          margin-bottom: 16px;\n          display: block;\n        }\n        ha-alert.re-order {\n          border-radius: var(--ha-card-border-radius, 12px);\n          overflow: hidden;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"blueprint-automation-editor\": HaBlueprintAutomationEditor;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}