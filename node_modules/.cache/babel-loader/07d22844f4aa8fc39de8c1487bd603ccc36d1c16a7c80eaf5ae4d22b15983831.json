{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nvar _templateObject, _templateObject2, _templateObject3;\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.fill.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport { DIRECTION_ALL, Manager, Pan, Tap } from \"@egjs/hammerjs\";\nimport { css, html, LitElement, svg } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { styleMap } from \"lit/directives/style-map\";\nimport { hsv2rgb, rgb2hex } from \"../common/color/convert-color\";\nimport { rgbw2rgb, rgbww2rgb } from \"../common/color/convert-light-color\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nfunction xy2polar(x, y) {\n  var r = Math.sqrt(x * x + y * y);\n  var phi = Math.atan2(y, x);\n  return [r, phi];\n}\nfunction polar2xy(r, phi) {\n  var x = Math.cos(phi) * r;\n  var y = Math.sin(phi) * r;\n  return [x, y];\n}\nfunction rad2deg(rad) {\n  return rad / (2 * Math.PI) * 360;\n}\nfunction deg2rad(deg) {\n  return deg / 360 * 2 * Math.PI;\n}\nfunction adjustRgb(rgb, wv, cw, ww, minKelvin, maxKelvin) {\n  if (wv != null) {\n    return rgbw2rgb([].concat(_toConsumableArray(rgb), [wv]));\n  }\n  if (cw != null && ww !== null) {\n    return rgbww2rgb([].concat(_toConsumableArray(rgb), [cw, ww]), minKelvin, maxKelvin);\n  }\n  return rgb;\n}\nfunction drawColorWheel(ctx) {\n  var colorBrightness = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 255;\n  var wv = arguments.length > 2 ? arguments[2] : undefined;\n  var cw = arguments.length > 3 ? arguments[3] : undefined;\n  var ww = arguments.length > 4 ? arguments[4] : undefined;\n  var minKelvin = arguments.length > 5 ? arguments[5] : undefined;\n  var maxKelvin = arguments.length > 6 ? arguments[6] : undefined;\n  var radius = ctx.canvas.width / 2;\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  ctx.beginPath();\n  var cX = ctx.canvas.width / 2;\n  var cY = ctx.canvas.width / 2;\n  for (var angle = 0; angle < 360; angle += 1) {\n    var startAngle = deg2rad(angle - 0.5);\n    var endAngle = deg2rad(angle + 1.5);\n    ctx.beginPath();\n    ctx.moveTo(cX, cY);\n    ctx.arc(cX, cY, radius, startAngle, endAngle);\n    ctx.closePath();\n    var gradient = ctx.createRadialGradient(cX, cY, 0, cX, cY, radius);\n    var start = rgb2hex(adjustRgb(hsv2rgb([angle, 0, colorBrightness]), wv, cw, ww, minKelvin, maxKelvin));\n    var end = rgb2hex(adjustRgb(hsv2rgb([angle, 1, colorBrightness]), wv, cw, ww, minKelvin, maxKelvin));\n    gradient.addColorStop(0, start);\n    gradient.addColorStop(1, end);\n    ctx.fillStyle = gradient;\n    ctx.fill();\n  }\n}\nvar HaHsColorPicker = _decorate([customElement(\"ha-hs-color-picker\")], function (_initialize, _LitElement) {\n  var HaHsColorPicker = /*#__PURE__*/function (_LitElement2) {\n    _inherits(HaHsColorPicker, _LitElement2);\n    function HaHsColorPicker() {\n      var _this;\n      _classCallCheck(this, HaHsColorPicker);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _callSuper(this, HaHsColorPicker, [].concat(args));\n      _initialize(_assertThisInitialized(_this));\n      return _this;\n    }\n    return _createClass(HaHsColorPicker);\n  }(_LitElement);\n  return {\n    F: HaHsColorPicker,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean,\n        reflect: true\n      })],\n      key: \"disabled\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Number,\n        attribute: false\n      })],\n      key: \"renderSize\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Array\n      })],\n      key: \"value\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Number\n      })],\n      key: \"colorBrightness\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Number\n      })],\n      key: \"wv\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Number\n      })],\n      key: \"cw\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Number\n      })],\n      key: \"ww\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Number\n      })],\n      key: \"minKelvin\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Number\n      })],\n      key: \"maxKelvin\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [query(\"#canvas\")],\n      key: \"_canvas\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_mc\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_pressed\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_cursorPosition\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_localValue\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"firstUpdated\",\n      value: function firstUpdated(changedProps) {\n        _get(_getPrototypeOf(HaHsColorPicker.prototype), \"firstUpdated\", this).call(this, changedProps);\n        this._setupListeners();\n        this._generateColorWheel();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_generateColorWheel\",\n      value: function _generateColorWheel() {\n        var ctx = this._canvas.getContext(\"2d\");\n        drawColorWheel(ctx, this.colorBrightness, this.wv, this.cw, this.ww, this.minKelvin, this.maxKelvin);\n      }\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(HaHsColorPicker.prototype), \"connectedCallback\", this).call(this);\n        this._setupListeners();\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(HaHsColorPicker.prototype), \"disconnectedCallback\", this).call(this);\n        this._destroyListeners();\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProps) {\n        _get(_getPrototypeOf(HaHsColorPicker.prototype), \"updated\", this).call(this, changedProps);\n        if (changedProps.has(\"colorBrightness\") || changedProps.has(\"wv\") || changedProps.has(\"ww\") || changedProps.has(\"cw\") || changedProps.has(\"minKelvin\") || changedProps.has(\"maxKelvin\")) {\n          this._generateColorWheel();\n        }\n        if (changedProps.has(\"value\")) {\n          var _this$_localValue, _this$value, _this$_localValue2, _this$value2;\n          if (((_this$_localValue = this._localValue) === null || _this$_localValue === void 0 ? void 0 : _this$_localValue[0]) !== ((_this$value = this.value) === null || _this$value === void 0 ? void 0 : _this$value[0]) || ((_this$_localValue2 = this._localValue) === null || _this$_localValue2 === void 0 ? void 0 : _this$_localValue2[1]) !== ((_this$value2 = this.value) === null || _this$value2 === void 0 ? void 0 : _this$value2[1])) {\n            this._resetPosition();\n          }\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_setupListeners\",\n      value: function _setupListeners() {\n        var _this2 = this;\n        if (this._canvas && !this._mc) {\n          this._mc = new Manager(this._canvas);\n          this._mc.add(new Pan({\n            direction: DIRECTION_ALL,\n            enable: true\n          }));\n          this._mc.add(new Tap({\n            event: \"singletap\"\n          }));\n          var savedPosition;\n          this._mc.on(\"panstart\", function (e) {\n            if (_this2.disabled) return;\n            _this2._pressed = e.pointerType;\n            savedPosition = _this2._cursorPosition;\n          });\n          this._mc.on(\"pancancel\", function () {\n            if (_this2.disabled) return;\n            _this2._pressed = undefined;\n            _this2._cursorPosition = savedPosition;\n          });\n          this._mc.on(\"panmove\", function (e) {\n            if (_this2.disabled) return;\n            _this2._cursorPosition = _this2._getPositionFromEvent(e);\n            _this2._localValue = _this2._getValueFromCoord.apply(_this2, _toConsumableArray(_this2._cursorPosition));\n            fireEvent(_this2, \"cursor-moved\", {\n              value: _this2._localValue\n            });\n          });\n          this._mc.on(\"panend\", function (e) {\n            if (_this2.disabled) return;\n            _this2._pressed = undefined;\n            _this2._cursorPosition = _this2._getPositionFromEvent(e);\n            _this2._localValue = _this2._getValueFromCoord.apply(_this2, _toConsumableArray(_this2._cursorPosition));\n            fireEvent(_this2, \"cursor-moved\", {\n              value: undefined\n            });\n            fireEvent(_this2, \"value-changed\", {\n              value: _this2._localValue\n            });\n          });\n          this._mc.on(\"singletap\", function (e) {\n            if (_this2.disabled) return;\n            _this2._cursorPosition = _this2._getPositionFromEvent(e);\n            _this2._localValue = _this2._getValueFromCoord.apply(_this2, _toConsumableArray(_this2._cursorPosition));\n            fireEvent(_this2, \"value-changed\", {\n              value: _this2._localValue\n            });\n          });\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_resetPosition\",\n      value: function _resetPosition() {\n        if (this.value === undefined) {\n          this._cursorPosition = undefined;\n          this._localValue = undefined;\n          return;\n        }\n        this._cursorPosition = this._getCoordsFromValue(this.value);\n        this._localValue = this.value;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_getCoordsFromValue\",\n      value: function value() {\n        return function (value) {\n          var phi = deg2rad(value[0]);\n          var r = Math.min(value[1], 1);\n          var _polar2xy = polar2xy(r, phi),\n            _polar2xy2 = _slicedToArray(_polar2xy, 2),\n            x = _polar2xy2[0],\n            y = _polar2xy2[1];\n          return [x, y];\n        };\n      }\n    }, {\n      kind: \"field\",\n      key: \"_getValueFromCoord\",\n      value: function value() {\n        return function (x, y) {\n          var _xy2polar = xy2polar(x, y),\n            _xy2polar2 = _slicedToArray(_xy2polar, 2),\n            r = _xy2polar2[0],\n            phi = _xy2polar2[1];\n          var deg = Math.round(rad2deg(phi)) % 360;\n          var hue = (deg + 360) % 360;\n          var saturation = Math.round(Math.min(r, 1) * 100) / 100;\n          return [hue, saturation];\n        };\n      }\n    }, {\n      kind: \"field\",\n      key: \"_getPositionFromEvent\",\n      value: function value() {\n        return function (e) {\n          var x = e.center.x;\n          var y = e.center.y;\n          var boundingRect = e.target.getBoundingClientRect();\n          var offsetX = boundingRect.left;\n          var offsetY = boundingRect.top;\n          var maxX = e.target.clientWidth;\n          var maxY = e.target.clientHeight;\n          var _x = 2 * (x - offsetX) / maxX - 1;\n          var _y = 2 * (y - offsetY) / maxY - 1;\n          var _xy2polar3 = xy2polar(_x, _y),\n            _xy2polar4 = _slicedToArray(_xy2polar3, 2),\n            r = _xy2polar4[0],\n            phi = _xy2polar4[1];\n          var _polar2xy3 = polar2xy(Math.min(1, r), phi),\n            _polar2xy4 = _slicedToArray(_polar2xy3, 2),\n            __x = _polar2xy4[0],\n            __y = _polar2xy4[1];\n          return [__x, __y];\n        };\n      }\n    }, {\n      kind: \"method\",\n      key: \"_destroyListeners\",\n      value: function _destroyListeners() {\n        if (this._mc) {\n          this._mc.destroy();\n          this._mc = undefined;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        var _this$colorBrightness, _this$_cursorPosition;\n        var size = this.renderSize || 400;\n        var canvasSize = size * window.devicePixelRatio;\n        var rgb = this._localValue !== undefined ? adjustRgb(hsv2rgb([this._localValue[0], this._localValue[1], (_this$colorBrightness = this.colorBrightness) !== null && _this$colorBrightness !== void 0 ? _this$colorBrightness : 255]), this.wv, this.cw, this.ww) : [255, 255, 255];\n        var _ref = (_this$_cursorPosition = this._cursorPosition) !== null && _this$_cursorPosition !== void 0 ? _this$_cursorPosition : [0, 0],\n          _ref2 = _slicedToArray(_ref, 2),\n          x = _ref2[0],\n          y = _ref2[1];\n        var cx = (x + 1) * size / 2;\n        var cy = (y + 1) * size / 2;\n        var markerPosition = \"\".concat(cx, \"px, \").concat(cy, \"px\");\n        var markerScale = this._pressed ? this._pressed === \"touch\" ? \"2.5\" : \"1.5\" : \"1\";\n        var markerOffset = this._pressed === \"touch\" ? \"0px, -\".concat(size / 16, \"px\") : \"0px, 0px\";\n        return html(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      <div class=\\\"container \", \"\\\">\\n        <canvas id=\\\"canvas\\\" .width=\", \" .height=\", \"></canvas>\\n        <svg id=\\\"interaction\\\" viewBox=\\\"0 0 \", \" \", \"\\\" overflow=\\\"visible\\\">\\n          <defs>\", \"</defs>\\n          <g\\n            style=\", \"\\n            class=\\\"cursor\\\"\\n          >\\n            <circle\\n              cx=\\\"0\\\"\\n              cy=\\\"0\\\"\\n              r=\\\"16\\\"\\n              style=\", \"\\n            ></circle>\\n          </g>\\n        </svg>\\n      </div>\\n    \"])), classMap({\n          pressed: Boolean(this._pressed)\n        }), canvasSize, canvasSize, size, size, this.renderSVGFilter(), styleMap({\n          fill: rgb2hex(rgb),\n          transform: \"translate(\".concat(markerPosition, \")\")\n        }), styleMap({\n          fill: rgb2hex(rgb),\n          transform: \"translate(\".concat(markerOffset, \") scale(\").concat(markerScale, \")\"),\n          visibility: this._cursorPosition ? undefined : \"hidden\"\n        }));\n      }\n    }, {\n      kind: \"method\",\n      key: \"renderSVGFilter\",\n      value: function renderSVGFilter() {\n        return svg(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n      <filter\\n        id=\\\"marker-shadow\\\"\\n        x=\\\"-50%\\\"\\n        y=\\\"-50%\\\"\\n        width=\\\"200%\\\"\\n        height=\\\"200%\\\"\\n        filterUnits=\\\"objectBoundingBox\\\"\\n      >\\n        <feDropShadow dx=\\\"0\\\" dy=\\\"1\\\" stdDeviation=\\\"2\\\" flood-opacity=\\\"0.3\\\" flood-color=\\\"rgba(0, 0, 0, 1)\\\"/>\\n        <feDropShadow dx=\\\"0\\\" dy=\\\"1\\\" stdDeviation=\\\"3\\\" flood-opacity=\\\"0.15\\\" flood-color=\\\"rgba(0, 0, 0, 1)\\\"/>\\n      </filter>\\n    \"])));\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return css(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n      :host {\\n        display: block;\\n        outline: none;\\n      }\\n      .container {\\n        position: relative;\\n        width: 100%;\\n        height: 100%;\\n        display: flex;\\n      }\\n      canvas {\\n        width: 100%;\\n        height: 100%;\\n        object-fit: contain;\\n        border-radius: 50%;\\n        cursor: pointer;\\n      }\\n      svg {\\n        position: absolute;\\n        top: 0;\\n        left: 0;\\n        width: 100%;\\n        height: 100%;\\n        pointer-events: none;\\n      }\\n      circle {\\n        fill: black;\\n        stroke: white;\\n        stroke-width: 2;\\n        filter: url(#marker-shadow);\\n      }\\n      .container:not(.pressed) circle {\\n        transition:\\n          transform 100ms ease-in-out,\\n          fill 100ms ease-in-out;\\n      }\\n      .container:not(.pressed) .cursor {\\n        transition: transform 200ms ease-in-out;\\n      }\\n    \"])));\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["DIRECTION_ALL","Manager","Pan","Tap","css","html","LitElement","svg","customElement","property","query","state","classMap","styleMap","hsv2rgb","rgb2hex","rgbw2rgb","rgbww2rgb","fireEvent","xy2polar","x","y","r","Math","sqrt","phi","atan2","polar2xy","cos","sin","rad2deg","rad","PI","deg2rad","deg","adjustRgb","rgb","wv","cw","ww","minKelvin","maxKelvin","concat","_toConsumableArray","drawColorWheel","ctx","colorBrightness","arguments","length","undefined","radius","canvas","width","clearRect","height","beginPath","cX","cY","angle","startAngle","endAngle","moveTo","arc","closePath","gradient","createRadialGradient","start","end","addColorStop","fillStyle","fill","HaHsColorPicker","_decorate","_initialize","_LitElement","_LitElement2","_inherits","_this","_classCallCheck","_len","args","Array","_key","_callSuper","_assertThisInitialized","_createClass","F","d","kind","decorators","type","Boolean","reflect","key","value","Number","attribute","firstUpdated","changedProps","_get","_getPrototypeOf","prototype","call","_setupListeners","_generateColorWheel","_canvas","getContext","connectedCallback","disconnectedCallback","_destroyListeners","updated","has","_this$_localValue","_this$value","_this$_localValue2","_this$value2","_localValue","_resetPosition","_this2","_mc","add","direction","enable","event","savedPosition","on","e","disabled","_pressed","pointerType","_cursorPosition","_getPositionFromEvent","_getValueFromCoord","apply","_getCoordsFromValue","min","_polar2xy","_polar2xy2","_slicedToArray","_xy2polar","_xy2polar2","round","hue","saturation","center","boundingRect","target","getBoundingClientRect","offsetX","left","offsetY","top","maxX","clientWidth","maxY","clientHeight","_x","_y","_xy2polar3","_xy2polar4","_polar2xy3","_polar2xy4","__x","__y","destroy","render","_this$colorBrightness","_this$_cursorPosition","size","renderSize","canvasSize","window","devicePixelRatio","_ref","_ref2","cx","cy","markerPosition","markerScale","markerOffset","_templateObject","_taggedTemplateLiteral","pressed","renderSVGFilter","transform","visibility","_templateObject2","static","styles","_templateObject3"],"sources":["/workspaces/frontend/src/components/ha-hs-color-picker.ts"],"sourcesContent":["import { DIRECTION_ALL, Manager, Pan, Tap } from \"@egjs/hammerjs\";\nimport { css, html, LitElement, PropertyValues, svg } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { styleMap } from \"lit/directives/style-map\";\nimport { hsv2rgb, rgb2hex } from \"../common/color/convert-color\";\nimport { rgbw2rgb, rgbww2rgb } from \"../common/color/convert-light-color\";\nimport { fireEvent } from \"../common/dom/fire_event\";\n\ndeclare global {\n  interface HASSDomEvents {\n    \"cursor-moved\": { value?: any };\n  }\n}\n\nfunction xy2polar(x: number, y: number) {\n  const r = Math.sqrt(x * x + y * y);\n  const phi = Math.atan2(y, x);\n  return [r, phi];\n}\n\nfunction polar2xy(r: number, phi: number) {\n  const x = Math.cos(phi) * r;\n  const y = Math.sin(phi) * r;\n  return [x, y];\n}\n\nfunction rad2deg(rad: number) {\n  return (rad / (2 * Math.PI)) * 360;\n}\n\nfunction deg2rad(deg: number) {\n  return (deg / 360) * 2 * Math.PI;\n}\n\nfunction adjustRgb(\n  rgb: [number, number, number],\n  wv?: number,\n  cw?: number,\n  ww?: number,\n  minKelvin?: number,\n  maxKelvin?: number\n) {\n  if (wv != null) {\n    return rgbw2rgb([...rgb, wv] as [number, number, number, number]);\n  }\n  if (cw != null && ww !== null) {\n    return rgbww2rgb(\n      [...rgb, cw, ww] as [number, number, number, number, number],\n      minKelvin,\n      maxKelvin\n    );\n  }\n  return rgb;\n}\n\nfunction drawColorWheel(\n  ctx: CanvasRenderingContext2D,\n  colorBrightness = 255,\n  wv?: number,\n  cw?: number,\n  ww?: number,\n  minKelvin?: number,\n  maxKelvin?: number\n) {\n  const radius = ctx.canvas.width / 2;\n\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  ctx.beginPath();\n\n  const cX = ctx.canvas.width / 2;\n  const cY = ctx.canvas.width / 2;\n  for (let angle = 0; angle < 360; angle += 1) {\n    const startAngle = deg2rad(angle - 0.5);\n    const endAngle = deg2rad(angle + 1.5);\n\n    ctx.beginPath();\n    ctx.moveTo(cX, cY);\n    ctx.arc(cX, cY, radius, startAngle, endAngle);\n    ctx.closePath();\n\n    const gradient = ctx.createRadialGradient(cX, cY, 0, cX, cY, radius);\n    const start = rgb2hex(\n      adjustRgb(\n        hsv2rgb([angle, 0, colorBrightness]),\n        wv,\n        cw,\n        ww,\n        minKelvin,\n        maxKelvin\n      )\n    );\n    const end = rgb2hex(\n      adjustRgb(\n        hsv2rgb([angle, 1, colorBrightness]),\n        wv,\n        cw,\n        ww,\n        minKelvin,\n        maxKelvin\n      )\n    );\n    gradient.addColorStop(0, start);\n    gradient.addColorStop(1, end);\n    ctx.fillStyle = gradient;\n    ctx.fill();\n  }\n}\n\n@customElement(\"ha-hs-color-picker\")\nclass HaHsColorPicker extends LitElement {\n  @property({ type: Boolean, reflect: true })\n  public disabled = false;\n\n  @property({ type: Number, attribute: false })\n  public renderSize?: number;\n\n  @property({ type: Array })\n  public value?: [number, number];\n\n  @property({ type: Number })\n  public colorBrightness?: number;\n\n  @property({ type: Number })\n  public wv?: number;\n\n  @property({ type: Number })\n  public cw?: number;\n\n  @property({ type: Number })\n  public ww?: number;\n\n  @property({ type: Number })\n  public minKelvin?: number;\n\n  @property({ type: Number })\n  public maxKelvin?: number;\n\n  @query(\"#canvas\") private _canvas!: HTMLCanvasElement;\n\n  private _mc?: HammerManager;\n\n  @state()\n  private _pressed?: string;\n\n  @state()\n  private _cursorPosition?: [number, number];\n\n  @state()\n  private _localValue?: [number, number];\n\n  protected firstUpdated(changedProps: PropertyValues): void {\n    super.firstUpdated(changedProps);\n    this._setupListeners();\n    this._generateColorWheel();\n  }\n\n  private _generateColorWheel() {\n    const ctx = this._canvas.getContext(\"2d\")!;\n    drawColorWheel(\n      ctx,\n      this.colorBrightness,\n      this.wv,\n      this.cw,\n      this.ww,\n      this.minKelvin,\n      this.maxKelvin\n    );\n  }\n\n  connectedCallback(): void {\n    super.connectedCallback();\n    this._setupListeners();\n  }\n\n  disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._destroyListeners();\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n    if (\n      changedProps.has(\"colorBrightness\") ||\n      changedProps.has(\"wv\") ||\n      changedProps.has(\"ww\") ||\n      changedProps.has(\"cw\") ||\n      changedProps.has(\"minKelvin\") ||\n      changedProps.has(\"maxKelvin\")\n    ) {\n      this._generateColorWheel();\n    }\n    if (changedProps.has(\"value\")) {\n      if (\n        this._localValue?.[0] !== this.value?.[0] ||\n        this._localValue?.[1] !== this.value?.[1]\n      ) {\n        this._resetPosition();\n      }\n    }\n  }\n\n  _setupListeners() {\n    if (this._canvas && !this._mc) {\n      this._mc = new Manager(this._canvas);\n      this._mc.add(\n        new Pan({\n          direction: DIRECTION_ALL,\n          enable: true,\n        })\n      );\n\n      this._mc.add(new Tap({ event: \"singletap\" }));\n\n      let savedPosition;\n      this._mc.on(\"panstart\", (e) => {\n        if (this.disabled) return;\n        this._pressed = e.pointerType;\n        savedPosition = this._cursorPosition;\n      });\n      this._mc.on(\"pancancel\", () => {\n        if (this.disabled) return;\n        this._pressed = undefined;\n        this._cursorPosition = savedPosition;\n      });\n      this._mc.on(\"panmove\", (e) => {\n        if (this.disabled) return;\n        this._cursorPosition = this._getPositionFromEvent(e);\n        this._localValue = this._getValueFromCoord(...this._cursorPosition);\n        fireEvent(this, \"cursor-moved\", { value: this._localValue });\n      });\n      this._mc.on(\"panend\", (e) => {\n        if (this.disabled) return;\n        this._pressed = undefined;\n        this._cursorPosition = this._getPositionFromEvent(e);\n        this._localValue = this._getValueFromCoord(...this._cursorPosition);\n        fireEvent(this, \"cursor-moved\", { value: undefined });\n        fireEvent(this, \"value-changed\", { value: this._localValue });\n      });\n\n      this._mc.on(\"singletap\", (e) => {\n        if (this.disabled) return;\n        this._cursorPosition = this._getPositionFromEvent(e);\n        this._localValue = this._getValueFromCoord(...this._cursorPosition);\n        fireEvent(this, \"value-changed\", { value: this._localValue });\n      });\n    }\n  }\n\n  private _resetPosition() {\n    if (this.value === undefined) {\n      this._cursorPosition = undefined;\n      this._localValue = undefined;\n      return;\n    }\n    this._cursorPosition = this._getCoordsFromValue(this.value);\n    this._localValue = this.value;\n  }\n\n  private _getCoordsFromValue = (value: [number, number]): [number, number] => {\n    const phi = deg2rad(value[0]);\n\n    const r = Math.min(value[1], 1);\n\n    const [x, y] = polar2xy(r, phi);\n\n    return [x, y];\n  };\n\n  private _getValueFromCoord = (x: number, y: number): [number, number] => {\n    const [r, phi] = xy2polar(x, y);\n\n    const deg = Math.round(rad2deg(phi)) % 360;\n\n    const hue = (deg + 360) % 360;\n    const saturation = Math.round(Math.min(r, 1) * 100) / 100;\n\n    return [hue, saturation];\n  };\n\n  private _getPositionFromEvent = (e: HammerInput): [number, number] => {\n    const x = e.center.x;\n    const y = e.center.y;\n    const boundingRect = e.target.getBoundingClientRect();\n    const offsetX = boundingRect.left;\n    const offsetY = boundingRect.top;\n    const maxX = e.target.clientWidth;\n    const maxY = e.target.clientHeight;\n\n    const _x = (2 * (x - offsetX)) / maxX - 1;\n    const _y = (2 * (y - offsetY)) / maxY - 1;\n\n    const [r, phi] = xy2polar(_x, _y);\n    const [__x, __y] = polar2xy(Math.min(1, r), phi);\n    return [__x, __y];\n  };\n\n  _destroyListeners() {\n    if (this._mc) {\n      this._mc.destroy();\n      this._mc = undefined;\n    }\n  }\n\n  render() {\n    const size = this.renderSize || 400;\n    const canvasSize = size * window.devicePixelRatio;\n\n    const rgb =\n      this._localValue !== undefined\n        ? adjustRgb(\n            hsv2rgb([\n              this._localValue[0],\n              this._localValue[1],\n              this.colorBrightness ?? 255,\n            ]),\n            this.wv,\n            this.cw,\n            this.ww\n          )\n        : ([255, 255, 255] as [number, number, number]);\n\n    const [x, y] = this._cursorPosition ?? [0, 0];\n\n    const cx = ((x + 1) * size) / 2;\n    const cy = ((y + 1) * size) / 2;\n\n    const markerPosition = `${cx}px, ${cy}px`;\n    const markerScale = this._pressed\n      ? this._pressed === \"touch\"\n        ? \"2.5\"\n        : \"1.5\"\n      : \"1\";\n    const markerOffset =\n      this._pressed === \"touch\" ? `0px, -${size / 16}px` : \"0px, 0px\";\n\n    return html`\n      <div class=\"container ${classMap({ pressed: Boolean(this._pressed) })}\">\n        <canvas id=\"canvas\" .width=${canvasSize} .height=${canvasSize}></canvas>\n        <svg id=\"interaction\" viewBox=\"0 0 ${size} ${size}\" overflow=\"visible\">\n          <defs>${this.renderSVGFilter()}</defs>\n          <g\n            style=${styleMap({\n              fill: rgb2hex(rgb),\n              transform: `translate(${markerPosition})`,\n            })}\n            class=\"cursor\"\n          >\n            <circle\n              cx=\"0\"\n              cy=\"0\"\n              r=\"16\"\n              style=${styleMap({\n                fill: rgb2hex(rgb),\n                transform: `translate(${markerOffset}) scale(${markerScale})`,\n                visibility: this._cursorPosition ? undefined : \"hidden\",\n              })}\n            ></circle>\n          </g>\n        </svg>\n      </div>\n    `;\n  }\n\n  renderSVGFilter() {\n    return svg`\n      <filter\n        id=\"marker-shadow\"\n        x=\"-50%\"\n        y=\"-50%\"\n        width=\"200%\"\n        height=\"200%\"\n        filterUnits=\"objectBoundingBox\"\n      >\n        <feDropShadow dx=\"0\" dy=\"1\" stdDeviation=\"2\" flood-opacity=\"0.3\" flood-color=\"rgba(0, 0, 0, 1)\"/>\n        <feDropShadow dx=\"0\" dy=\"1\" stdDeviation=\"3\" flood-opacity=\"0.15\" flood-color=\"rgba(0, 0, 0, 1)\"/>\n      </filter>\n    `;\n  }\n\n  static get styles() {\n    return css`\n      :host {\n        display: block;\n        outline: none;\n      }\n      .container {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        display: flex;\n      }\n      canvas {\n        width: 100%;\n        height: 100%;\n        object-fit: contain;\n        border-radius: 50%;\n        cursor: pointer;\n      }\n      svg {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        pointer-events: none;\n      }\n      circle {\n        fill: black;\n        stroke: white;\n        stroke-width: 2;\n        filter: url(#marker-shadow);\n      }\n      .container:not(.pressed) circle {\n        transition:\n          transform 100ms ease-in-out,\n          fill 100ms ease-in-out;\n      }\n      .container:not(.pressed) .cursor {\n        transition: transform 200ms ease-in-out;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-hs-color-picker\": HaHsColorPicker;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}