{"ast":null,"code":"class RecorderProcessor extends AudioWorkletProcessor {\n  process(inputList, _outputList, _parameters) {\n    if (inputList[0].length < 1) {\n      return true;\n    }\n    const float32Data = inputList[0][0];\n    const int16Data = new Int16Array(float32Data.length);\n    for (let i = 0; i < float32Data.length; i++) {\n      const s = Math.max(-1, Math.min(1, float32Data[i]));\n      int16Data[i] = s < 0 ? s * 0x8000 : s * 0x7fff;\n    }\n    this.port.postMessage(int16Data);\n    return true;\n  }\n}\nregisterProcessor(\"recorder.worklet\", RecorderProcessor);","map":{"version":3,"names":["RecorderProcessor","AudioWorkletProcessor","process","inputList","_outputList","_parameters","length","float32Data","int16Data","Int16Array","i","s","Math","max","min","port","postMessage","registerProcessor"],"sources":["/workspaces/frontend/src/util/recorder.worklet.js"],"sourcesContent":["class RecorderProcessor extends AudioWorkletProcessor {\n  process(inputList, _outputList, _parameters) {\n    if (inputList[0].length < 1) {\n      return true;\n    }\n\n    const float32Data = inputList[0][0];\n    const int16Data = new Int16Array(float32Data.length);\n\n    for (let i = 0; i < float32Data.length; i++) {\n      const s = Math.max(-1, Math.min(1, float32Data[i]));\n      int16Data[i] = s < 0 ? s * 0x8000 : s * 0x7fff;\n    }\n\n    this.port.postMessage(int16Data);\n\n    return true;\n  }\n}\n\nregisterProcessor(\"recorder.worklet\", RecorderProcessor);\n"],"mappings":"AAAA,MAAMA,iBAAiB,SAASC,qBAAqB,CAAC;EACpDC,OAAOA,CAACC,SAAS,EAAEC,WAAW,EAAEC,WAAW,EAAE;IAC3C,IAAIF,SAAS,CAAC,CAAC,CAAC,CAACG,MAAM,GAAG,CAAC,EAAE;MAC3B,OAAO,IAAI;IACb;IAEA,MAAMC,WAAW,GAAGJ,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACnC,MAAMK,SAAS,GAAG,IAAIC,UAAU,CAACF,WAAW,CAACD,MAAM,CAAC;IAEpD,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,WAAW,CAACD,MAAM,EAAEI,CAAC,EAAE,EAAE;MAC3C,MAAMC,CAAC,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEP,WAAW,CAACG,CAAC,CAAC,CAAC,CAAC;MACnDF,SAAS,CAACE,CAAC,CAAC,GAAGC,CAAC,GAAG,CAAC,GAAGA,CAAC,GAAG,MAAM,GAAGA,CAAC,GAAG,MAAM;IAChD;IAEA,IAAI,CAACI,IAAI,CAACC,WAAW,CAACR,SAAS,CAAC;IAEhC,OAAO,IAAI;EACb;AACF;AAEAS,iBAAiB,CAAC,kBAAkB,EAAEjB,iBAAiB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}