{"ast":null,"code":"import { canToggleDomain } from \"./can_toggle_domain\";\nimport { computeStateDomain } from \"./compute_state_domain\";\nimport { supportsFeature } from \"./supports-feature\";\nexport const canToggleState = (hass, stateObj) => {\n  const domain = computeStateDomain(stateObj);\n  if (domain === \"group\") {\n    var _stateObj$attributes;\n    if ((_stateObj$attributes = stateObj.attributes) !== null && _stateObj$attributes !== void 0 && (_stateObj$attributes = _stateObj$attributes.entity_id) !== null && _stateObj$attributes !== void 0 && _stateObj$attributes.some(entity => {\n      const entityStateObj = hass.states[entity];\n      if (!entityStateObj) {\n        return false;\n      }\n      const entityDomain = computeStateDomain(entityStateObj);\n      return canToggleDomain(hass, entityDomain);\n    })) {\n      return stateObj.state === \"on\" || stateObj.state === \"off\";\n    }\n    return false;\n  }\n  if (domain === \"climate\") {\n    return supportsFeature(stateObj, 4096);\n  }\n  return canToggleDomain(hass, domain);\n};","map":{"version":3,"names":["canToggleDomain","computeStateDomain","supportsFeature","canToggleState","hass","stateObj","domain","_stateObj$attributes","attributes","entity_id","some","entity","entityStateObj","states","entityDomain","state"],"sources":["/workspaces/frontend/src/common/entity/can_toggle_state.ts"],"sourcesContent":["import type { HassEntity } from \"home-assistant-js-websocket\";\nimport type { HomeAssistant } from \"../../types\";\nimport { canToggleDomain } from \"./can_toggle_domain\";\nimport { computeStateDomain } from \"./compute_state_domain\";\nimport { supportsFeature } from \"./supports-feature\";\n\nexport const canToggleState = (hass: HomeAssistant, stateObj: HassEntity) => {\n  const domain = computeStateDomain(stateObj);\n\n  if (domain === \"group\") {\n    if (\n      stateObj.attributes?.entity_id?.some((entity) => {\n        const entityStateObj = hass.states[entity];\n        if (!entityStateObj) {\n          return false;\n        }\n\n        const entityDomain = computeStateDomain(entityStateObj);\n        return canToggleDomain(hass, entityDomain);\n      })\n    ) {\n      return stateObj.state === \"on\" || stateObj.state === \"off\";\n    }\n\n    return false;\n  }\n\n  if (domain === \"climate\") {\n    return supportsFeature(stateObj, 4096);\n  }\n\n  return canToggleDomain(hass, domain);\n};\n"],"mappings":"AAEA,SAASA,eAAe,QAAQ,qBAAqB;AACrD,SAASC,kBAAkB,QAAQ,wBAAwB;AAC3D,SAASC,eAAe,QAAQ,oBAAoB;AAEpD,OAAO,MAAMC,cAAc,GAAGA,CAACC,IAAmB,EAAEC,QAAoB,KAAK;EAC3E,MAAMC,MAAM,GAAGL,kBAAkB,CAACI,QAAQ,CAAC;EAE3C,IAAIC,MAAM,KAAK,OAAO,EAAE;IAAA,IAAAC,oBAAA;IACtB,KAAAA,oBAAA,GACEF,QAAQ,CAACG,UAAU,cAAAD,oBAAA,gBAAAA,oBAAA,GAAnBA,oBAAA,CAAqBE,SAAS,cAAAF,oBAAA,eAA9BA,oBAAA,CAAgCG,IAAI,CAAEC,MAAM,IAAK;MAC/C,MAAMC,cAAc,GAAGR,IAAI,CAACS,MAAM,CAACF,MAAM,CAAC;MAC1C,IAAI,CAACC,cAAc,EAAE;QACnB,OAAO,KAAK;MACd;MAEA,MAAME,YAAY,GAAGb,kBAAkB,CAACW,cAAc,CAAC;MACvD,OAAOZ,eAAe,CAACI,IAAI,EAAEU,YAAY,CAAC;IAC5C,CAAC,CAAC,EACF;MACA,OAAOT,QAAQ,CAACU,KAAK,KAAK,IAAI,IAAIV,QAAQ,CAACU,KAAK,KAAK,KAAK;IAC5D;IAEA,OAAO,KAAK;EACd;EAEA,IAAIT,MAAM,KAAK,SAAS,EAAE;IACxB,OAAOJ,eAAe,CAACG,QAAQ,EAAE,IAAI,CAAC;EACxC;EAEA,OAAOL,eAAe,CAACI,IAAI,EAAEE,MAAM,CAAC;AACtC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}