{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/helpers/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { atLeastVersion } from \"../../common/config/version\";\nimport { hassioApiResultExtractor } from \"./common\";\nexport var fetchHassioResolution = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(hass) {\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!atLeastVersion(hass.config.version, 2021, 2, 4)) {\n            _context.next = 2;\n            break;\n          }\n          return _context.abrupt(\"return\", hass.callWS({\n            type: \"supervisor/api\",\n            endpoint: \"/resolution/info\",\n            method: \"get\"\n          }));\n        case 2:\n          _context.t0 = hassioApiResultExtractor;\n          _context.next = 5;\n          return hass.callApi(\"GET\", \"hassio/resolution/info\");\n        case 5:\n          _context.t1 = _context.sent;\n          return _context.abrupt(\"return\", (0, _context.t0)(_context.t1));\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function fetchHassioResolution(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["atLeastVersion","hassioApiResultExtractor","fetchHassioResolution","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","hass","wrap","_callee$","_context","prev","next","config","version","abrupt","callWS","type","endpoint","method","t0","callApi","t1","sent","stop","_x","apply","arguments"],"sources":["/workspaces/frontend/src/data/hassio/resolution.ts"],"sourcesContent":["import { atLeastVersion } from \"../../common/config/version\";\nimport { HomeAssistant, TranslationDict } from \"../../types\";\nimport { hassioApiResultExtractor, HassioResponse } from \"./common\";\n\nexport interface HassioResolution {\n  unsupported: (keyof TranslationDict[\"supervisor\"][\"system\"][\"supervisor\"][\"unsupported_reason\"])[];\n  unhealthy: (keyof TranslationDict[\"supervisor\"][\"system\"][\"supervisor\"][\"unhealthy_reason\"])[];\n  issues: string[];\n  suggestions: string[];\n}\n\nexport const fetchHassioResolution = async (\n  hass: HomeAssistant\n): Promise<HassioResolution> => {\n  if (atLeastVersion(hass.config.version, 2021, 2, 4)) {\n    return hass.callWS({\n      type: \"supervisor/api\",\n      endpoint: \"/resolution/info\",\n      method: \"get\",\n    });\n  }\n\n  return hassioApiResultExtractor(\n    await hass.callApi<HassioResponse<HassioResolution>>(\n      \"GET\",\n      \"hassio/resolution/info\"\n    )\n  );\n};\n"],"mappings":";;AAAA,SAASA,cAAc,QAAQ,6BAA6B;AAE5D,SAASC,wBAAwB,QAAwB,UAAU;AASnE,OAAO,IAAMC,qBAAqB;EAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QACnCC,IAAmB;IAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAA,KAEfb,cAAc,CAACQ,IAAI,CAACM,MAAM,CAACC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;YAAAJ,QAAA,CAAAE,IAAA;YAAA;UAAA;UAAA,OAAAF,QAAA,CAAAK,MAAA,WAC1CR,IAAI,CAACS,MAAM,CAAC;YACjBC,IAAI,EAAE,gBAAgB;YACtBC,QAAQ,EAAE,kBAAkB;YAC5BC,MAAM,EAAE;UACV,CAAC,CAAC;QAAA;UAAAT,QAAA,CAAAU,EAAA,GAGGpB,wBAAwB;UAAAU,QAAA,CAAAE,IAAA;UAAA,OACvBL,IAAI,CAACc,OAAO,CAChB,KAAK,EACL,wBACF,CAAC;QAAA;UAAAX,QAAA,CAAAY,EAAA,GAAAZ,QAAA,CAAAa,IAAA;UAAA,OAAAb,QAAA,CAAAK,MAAA,eAAAL,QAAA,CAAAU,EAAA,EAAAV,QAAA,CAAAY,EAAA;QAAA;QAAA;UAAA,OAAAZ,QAAA,CAAAc,IAAA;MAAA;IAAA,GAAAlB,OAAA;EAAA,CAEJ;EAAA,gBAjBYL,qBAAqBA,CAAAwB,EAAA;IAAA,OAAAvB,IAAA,CAAAwB,KAAA,OAAAC,SAAA;EAAA;AAAA,GAiBjC"},"metadata":{},"sourceType":"module","externalDependencies":[]}