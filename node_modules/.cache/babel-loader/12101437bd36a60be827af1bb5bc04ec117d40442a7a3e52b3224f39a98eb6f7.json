{"ast":null,"code":"/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nexport class SizeCache {\n  constructor(config) {\n    this._map = new Map();\n    this._roundAverageSize = false;\n    this.totalSize = 0;\n    if ((config === null || config === void 0 ? void 0 : config.roundAverageSize) === true) {\n      this._roundAverageSize = true;\n    }\n  }\n  set(index, value) {\n    const prev = this._map.get(index) || 0;\n    this._map.set(index, value);\n    this.totalSize += value - prev;\n  }\n  get averageSize() {\n    if (this._map.size > 0) {\n      const average = this.totalSize / this._map.size;\n      return this._roundAverageSize ? Math.round(average) : average;\n    }\n    return 0;\n  }\n  getSize(index) {\n    return this._map.get(index);\n  }\n  clear() {\n    this._map.clear();\n    this.totalSize = 0;\n  }\n}","map":{"version":3,"names":["SizeCache","constructor","config","_map","Map","_roundAverageSize","totalSize","roundAverageSize","set","index","value","prev","get","averageSize","size","average","Math","round","getSize","clear"],"sources":["../../src/layouts/shared/SizeCache.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nexport interface SizeCacheConfig {\n  roundAverageSize?: boolean;\n}\n\nexport class SizeCache {\n  private _map = new Map<number | string, number>();\n  private _roundAverageSize = false;\n  totalSize = 0;\n\n  constructor(config?: SizeCacheConfig) {\n    if (config?.roundAverageSize === true) {\n      this._roundAverageSize = true;\n    }\n  }\n\n  set(index: number | string, value: number): void {\n    const prev = this._map.get(index) || 0;\n    this._map.set(index, value);\n    this.totalSize += value - prev;\n  }\n\n  get averageSize(): number {\n    if (this._map.size > 0) {\n      const average = this.totalSize / this._map.size;\n      return this._roundAverageSize ? Math.round(average) : average;\n    }\n    return 0;\n  }\n\n  getSize(index: number | string) {\n    return this._map.get(index);\n  }\n\n  clear() {\n    this._map.clear();\n    this.totalSize = 0;\n  }\n}\n"],"mappings":"AAAA;;;;;AAUA,OAAM,MAAOA,SAAS;EAKpBC,YAAYC,MAAwB;IAJ5B,KAAAC,IAAI,GAAG,IAAIC,GAAG,EAA2B;IACzC,KAAAC,iBAAiB,GAAG,KAAK;IACjC,KAAAC,SAAS,GAAG,CAAC;IAGX,IAAI,CAAAJ,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEK,gBAAgB,MAAK,IAAI,EAAE;MACrC,IAAI,CAACF,iBAAiB,GAAG,IAAI;;EAEjC;EAEAG,GAAGA,CAACC,KAAsB,EAAEC,KAAa;IACvC,MAAMC,IAAI,GAAG,IAAI,CAACR,IAAI,CAACS,GAAG,CAACH,KAAK,CAAC,IAAI,CAAC;IACtC,IAAI,CAACN,IAAI,CAACK,GAAG,CAACC,KAAK,EAAEC,KAAK,CAAC;IAC3B,IAAI,CAACJ,SAAS,IAAII,KAAK,GAAGC,IAAI;EAChC;EAEA,IAAIE,WAAWA,CAAA;IACb,IAAI,IAAI,CAACV,IAAI,CAACW,IAAI,GAAG,CAAC,EAAE;MACtB,MAAMC,OAAO,GAAG,IAAI,CAACT,SAAS,GAAG,IAAI,CAACH,IAAI,CAACW,IAAI;MAC/C,OAAO,IAAI,CAACT,iBAAiB,GAAGW,IAAI,CAACC,KAAK,CAACF,OAAO,CAAC,GAAGA,OAAO;;IAE/D,OAAO,CAAC;EACV;EAEAG,OAAOA,CAACT,KAAsB;IAC5B,OAAO,IAAI,CAACN,IAAI,CAACS,GAAG,CAACH,KAAK,CAAC;EAC7B;EAEAU,KAAKA,CAAA;IACH,IAAI,CAAChB,IAAI,CAACgB,KAAK,EAAE;IACjB,IAAI,CAACb,SAAS,GAAG,CAAC;EACpB"},"metadata":{},"sourceType":"module","externalDependencies":[]}