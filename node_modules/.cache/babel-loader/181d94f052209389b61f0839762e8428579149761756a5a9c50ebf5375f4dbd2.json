{"ast":null,"code":"import \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport { getCollection } from \"home-assistant-js-websocket\";\nimport { debounce } from \"../common/util/debounce\";\nimport { domainToName } from \"./integration\";\nexport var DISCOVERY_SOURCES = [\"bluetooth\", \"dhcp\", \"discovery\", \"hardware\", \"hassio\", \"homekit\", \"integration_discovery\", \"mqtt\", \"ssdp\", \"unignore\", \"usb\", \"zeroconf\"];\nexport var ATTENTION_SOURCES = [\"reauth\"];\nvar HEADERS = {\n  \"HA-Frontend-Base\": \"\".concat(location.protocol, \"//\").concat(location.host)\n};\nexport var createConfigFlow = function createConfigFlow(hass, handler) {\n  var _hass$userData;\n  return hass.callApi(\"POST\", \"config/config_entries/flow\", {\n    handler: handler,\n    show_advanced_options: Boolean((_hass$userData = hass.userData) === null || _hass$userData === void 0 ? void 0 : _hass$userData.showAdvanced)\n  }, HEADERS);\n};\nexport var fetchConfigFlow = function fetchConfigFlow(hass, flowId) {\n  return hass.callApi(\"GET\", \"config/config_entries/flow/\".concat(flowId), undefined, HEADERS);\n};\nexport var handleConfigFlowStep = function handleConfigFlowStep(hass, flowId, data) {\n  return hass.callApi(\"POST\", \"config/config_entries/flow/\".concat(flowId), data, HEADERS);\n};\nexport var ignoreConfigFlow = function ignoreConfigFlow(hass, flowId, title) {\n  return hass.callWS({\n    type: \"config_entries/ignore_flow\",\n    flow_id: flowId,\n    title: title\n  });\n};\nexport var deleteConfigFlow = function deleteConfigFlow(hass, flowId) {\n  return hass.callApi(\"DELETE\", \"config/config_entries/flow/\".concat(flowId));\n};\nexport var getConfigFlowHandlers = function getConfigFlowHandlers(hass, type) {\n  return hass.callApi(\"GET\", \"config/config_entries/flow_handlers\".concat(type ? \"?type=\".concat(type) : \"\"));\n};\nexport var fetchConfigFlowInProgress = function fetchConfigFlowInProgress(conn) {\n  return conn.sendMessagePromise({\n    type: \"config_entries/flow/progress\"\n  });\n};\nvar subscribeConfigFlowInProgressUpdates = function subscribeConfigFlowInProgressUpdates(conn, store) {\n  return conn.subscribeEvents(debounce(function () {\n    return fetchConfigFlowInProgress(conn).then(function (flows) {\n      return store.setState(flows, true);\n    });\n  }, 500, true), \"config_entry_discovered\");\n};\nexport var getConfigFlowInProgressCollection = function getConfigFlowInProgressCollection(conn) {\n  return getCollection(conn, \"_configFlowProgress\", fetchConfigFlowInProgress, subscribeConfigFlowInProgressUpdates);\n};\nexport var subscribeConfigFlowInProgress = function subscribeConfigFlowInProgress(hass, onChange) {\n  return getConfigFlowInProgressCollection(hass.connection).subscribe(onChange);\n};\nexport var localizeConfigFlowTitle = function localizeConfigFlowTitle(localize, flow) {\n  if (!flow.context.title_placeholders || Object.keys(flow.context.title_placeholders).length === 0) {\n    return domainToName(localize, flow.handler);\n  }\n  return localize(\"component.\".concat(flow.handler, \".config.flow_title\"), flow.context.title_placeholders) || (\"name\" in flow.context.title_placeholders ? flow.context.title_placeholders.name : domainToName(localize, flow.handler));\n};","map":{"version":3,"names":["getCollection","debounce","domainToName","DISCOVERY_SOURCES","ATTENTION_SOURCES","HEADERS","concat","location","protocol","host","createConfigFlow","hass","handler","_hass$userData","callApi","show_advanced_options","Boolean","userData","showAdvanced","fetchConfigFlow","flowId","undefined","handleConfigFlowStep","data","ignoreConfigFlow","title","callWS","type","flow_id","deleteConfigFlow","getConfigFlowHandlers","fetchConfigFlowInProgress","conn","sendMessagePromise","subscribeConfigFlowInProgressUpdates","store","subscribeEvents","then","flows","setState","getConfigFlowInProgressCollection","subscribeConfigFlowInProgress","onChange","connection","subscribe","localizeConfigFlowTitle","localize","flow","context","title_placeholders","Object","keys","length","name"],"sources":["/Users/sercanardil/Desktop/frontend/src/data/config_flow.ts"],"sourcesContent":["import { Connection, getCollection } from \"home-assistant-js-websocket\";\nimport { LocalizeFunc } from \"../common/translations/localize\";\nimport { debounce } from \"../common/util/debounce\";\nimport { HomeAssistant } from \"../types\";\nimport { DataEntryFlowProgress, DataEntryFlowStep } from \"./data_entry_flow\";\nimport { domainToName, IntegrationType } from \"./integration\";\n\nexport const DISCOVERY_SOURCES = [\n  \"bluetooth\",\n  \"dhcp\",\n  \"discovery\",\n  \"hardware\",\n  \"hassio\",\n  \"homekit\",\n  \"integration_discovery\",\n  \"mqtt\",\n  \"ssdp\",\n  \"unignore\",\n  \"usb\",\n  \"zeroconf\",\n];\n\nexport const ATTENTION_SOURCES = [\"reauth\"];\n\nconst HEADERS = {\n  \"HA-Frontend-Base\": `${location.protocol}//${location.host}`,\n};\n\nexport const createConfigFlow = (hass: HomeAssistant, handler: string) =>\n  hass.callApi<DataEntryFlowStep>(\n    \"POST\",\n    \"config/config_entries/flow\",\n    {\n      handler,\n      show_advanced_options: Boolean(hass.userData?.showAdvanced),\n    },\n    HEADERS\n  );\n\nexport const fetchConfigFlow = (hass: HomeAssistant, flowId: string) =>\n  hass.callApi<DataEntryFlowStep>(\n    \"GET\",\n    `config/config_entries/flow/${flowId}`,\n    undefined,\n    HEADERS\n  );\n\nexport const handleConfigFlowStep = (\n  hass: HomeAssistant,\n  flowId: string,\n  data: Record<string, any>\n) =>\n  hass.callApi<DataEntryFlowStep>(\n    \"POST\",\n    `config/config_entries/flow/${flowId}`,\n    data,\n    HEADERS\n  );\n\nexport const ignoreConfigFlow = (\n  hass: HomeAssistant,\n  flowId: string,\n  title: string\n) =>\n  hass.callWS({ type: \"config_entries/ignore_flow\", flow_id: flowId, title });\n\nexport const deleteConfigFlow = (hass: HomeAssistant, flowId: string) =>\n  hass.callApi(\"DELETE\", `config/config_entries/flow/${flowId}`);\n\nexport const getConfigFlowHandlers = (\n  hass: HomeAssistant,\n  type?: IntegrationType[]\n) =>\n  hass.callApi<string[]>(\n    \"GET\",\n    `config/config_entries/flow_handlers${type ? `?type=${type}` : \"\"}`\n  );\n\nexport const fetchConfigFlowInProgress = (\n  conn: Connection\n): Promise<DataEntryFlowProgress[]> =>\n  conn.sendMessagePromise({\n    type: \"config_entries/flow/progress\",\n  });\n\nconst subscribeConfigFlowInProgressUpdates = (conn: Connection, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchConfigFlowInProgress(conn).then((flows: DataEntryFlowProgress[]) =>\n          store.setState(flows, true)\n        ),\n      500,\n      true\n    ),\n    \"config_entry_discovered\"\n  );\n\nexport const getConfigFlowInProgressCollection = (conn: Connection) =>\n  getCollection<DataEntryFlowProgress[]>(\n    conn,\n    \"_configFlowProgress\",\n    fetchConfigFlowInProgress,\n    subscribeConfigFlowInProgressUpdates\n  );\n\nexport const subscribeConfigFlowInProgress = (\n  hass: HomeAssistant,\n  onChange: (flows: DataEntryFlowProgress[]) => void\n) => getConfigFlowInProgressCollection(hass.connection).subscribe(onChange);\n\nexport const localizeConfigFlowTitle = (\n  localize: LocalizeFunc,\n  flow: DataEntryFlowProgress\n) => {\n  if (\n    !flow.context.title_placeholders ||\n    Object.keys(flow.context.title_placeholders).length === 0\n  ) {\n    return domainToName(localize, flow.handler);\n  }\n  return (\n    localize(\n      `component.${flow.handler}.config.flow_title`,\n      flow.context.title_placeholders\n    ) ||\n    (\"name\" in flow.context.title_placeholders\n      ? flow.context.title_placeholders.name\n      : domainToName(localize, flow.handler))\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}