{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4;\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"@material/mwc-list/mwc-list-item\";\nimport { css, html, LitElement } from \"lit\";\nimport { property } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { stringCompare } from \"../../common/string/compare\";\nimport { fetchUsers } from \"../../data/user\";\nimport \"../ha-select\";\nimport \"./ha-user-badge\";\nimport \"../ha-list-item\";\nvar HaUserPicker = _decorate(null, function (_initialize, _LitElement) {\n  var HaUserPicker = /*#__PURE__*/function (_LitElement2) {\n    _inherits(HaUserPicker, _LitElement2);\n    function HaUserPicker() {\n      var _this;\n      _classCallCheck(this, HaUserPicker);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _callSuper(this, HaUserPicker, [].concat(args));\n      _initialize(_assertThisInitialized(_this));\n      return _this;\n    }\n    return _createClass(HaUserPicker);\n  }(_LitElement);\n  return {\n    F: HaUserPicker,\n    d: [{\n      kind: \"field\",\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"label\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"noUserLabel\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"value\",\n      value: function value() {\n        return \"\";\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"users\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"disabled\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_sortedUsers\",\n      value: function value() {\n        var _this2 = this;\n        return memoizeOne(function (users) {\n          if (!users) {\n            return [];\n          }\n          return users.filter(function (user) {\n            return !user.system_generated;\n          }).sort(function (a, b) {\n            return stringCompare(a.name, b.name, _this2.hass.locale.language);\n          });\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        var _this$users,\n          _this$hass,\n          _this3 = this;\n        return html(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      <ha-select\\n        .label=\", \"\\n        .disabled=\", \"\\n        .value=\", \"\\n        @selected=\", \"\\n      >\\n        \", \"\\n        \", \"\\n      </ha-select>\\n    \"])), this.label, this.disabled, this.value, this._userChanged, ((_this$users = this.users) === null || _this$users === void 0 ? void 0 : _this$users.length) === 0 ? html(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"<mwc-list-item value=\\\"\\\">\\n              \", \"\\n            </mwc-list-item>\"])), this.noUserLabel || ((_this$hass = this.hass) === null || _this$hass === void 0 ? void 0 : _this$hass.localize(\"ui.components.user-picker.no_user\"))) : \"\", this._sortedUsers(this.users).map(function (user) {\n          return html(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n            <ha-list-item graphic=\\\"avatar\\\" .value=\", \">\\n              <ha-user-badge\\n                .hass=\", \"\\n                .user=\", \"\\n                slot=\\\"graphic\\\"\\n              ></ha-user-badge>\\n              \", \"\\n            </ha-list-item>\\n          \"])), user.id, _this3.hass, user, user.name);\n        }));\n      }\n    }, {\n      kind: \"method\",\n      key: \"firstUpdated\",\n      value: function firstUpdated(changedProps) {\n        var _this4 = this;\n        _get(_getPrototypeOf(HaUserPicker.prototype), \"firstUpdated\", this).call(this, changedProps);\n        if (this.users === undefined) {\n          fetchUsers(this.hass).then(function (users) {\n            _this4.users = users;\n          });\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_userChanged\",\n      value: function _userChanged(ev) {\n        var _this5 = this;\n        var newValue = ev.target.value;\n        if (newValue !== this.value) {\n          this.value = newValue;\n          setTimeout(function () {\n            fireEvent(_this5, \"value-changed\", {\n              value: newValue\n            });\n            fireEvent(_this5, \"change\");\n          }, 0);\n        }\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return css(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n      :host {\\n        display: inline-block;\\n      }\\n      mwc-list {\\n        display: block;\\n      }\\n    \"])));\n      }\n    }]\n  };\n}, LitElement);\ncustomElements.define(\"ha-user-picker\", HaUserPicker);","map":{"version":3,"names":["css","html","LitElement","property","memoizeOne","fireEvent","stringCompare","fetchUsers","HaUserPicker","_decorate","_initialize","_LitElement","_LitElement2","_inherits","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","_assertThisInitialized","_createClass","F","d","kind","key","value","decorators","attribute","type","Boolean","_this2","users","filter","user","system_generated","sort","a","b","name","hass","locale","language","render","_this$users","_this$hass","_this3","_templateObject","_taggedTemplateLiteral","label","disabled","_userChanged","_templateObject2","noUserLabel","localize","_sortedUsers","map","_templateObject3","id","firstUpdated","changedProps","_this4","_get","_getPrototypeOf","prototype","call","undefined","then","ev","_this5","newValue","target","setTimeout","static","styles","_templateObject4","customElements","define"],"sources":["/workspaces/frontend/src/components/user/ha-user-picker.ts"],"sourcesContent":["import \"@material/mwc-list/mwc-list-item\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { property } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { stringCompare } from \"../../common/string/compare\";\nimport { fetchUsers, User } from \"../../data/user\";\nimport { HomeAssistant } from \"../../types\";\nimport \"../ha-select\";\nimport \"./ha-user-badge\";\nimport \"../ha-list-item\";\n\nclass HaUserPicker extends LitElement {\n  public hass?: HomeAssistant;\n\n  @property() public label?: string;\n\n  @property() public noUserLabel?: string;\n\n  @property() public value = \"\";\n\n  @property({ attribute: false }) public users?: User[];\n\n  @property({ type: Boolean }) public disabled = false;\n\n  private _sortedUsers = memoizeOne((users?: User[]) => {\n    if (!users) {\n      return [];\n    }\n\n    return users\n      .filter((user) => !user.system_generated)\n      .sort((a, b) =>\n        stringCompare(a.name, b.name, this.hass!.locale.language)\n      );\n  });\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-select\n        .label=${this.label}\n        .disabled=${this.disabled}\n        .value=${this.value}\n        @selected=${this._userChanged}\n      >\n        ${this.users?.length === 0\n          ? html`<mwc-list-item value=\"\">\n              ${this.noUserLabel ||\n              this.hass?.localize(\"ui.components.user-picker.no_user\")}\n            </mwc-list-item>`\n          : \"\"}\n        ${this._sortedUsers(this.users).map(\n          (user) => html`\n            <ha-list-item graphic=\"avatar\" .value=${user.id}>\n              <ha-user-badge\n                .hass=${this.hass}\n                .user=${user}\n                slot=\"graphic\"\n              ></ha-user-badge>\n              ${user.name}\n            </ha-list-item>\n          `\n        )}\n      </ha-select>\n    `;\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    if (this.users === undefined) {\n      fetchUsers(this.hass!).then((users) => {\n        this.users = users;\n      });\n    }\n  }\n\n  private _userChanged(ev) {\n    const newValue = ev.target.value;\n\n    if (newValue !== this.value) {\n      this.value = newValue;\n      setTimeout(() => {\n        fireEvent(this, \"value-changed\", { value: newValue });\n        fireEvent(this, \"change\");\n      }, 0);\n    }\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        display: inline-block;\n      }\n      mwc-list {\n        display: block;\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"ha-user-picker\", HaUserPicker);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-user-picker\": HaUserPicker;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}