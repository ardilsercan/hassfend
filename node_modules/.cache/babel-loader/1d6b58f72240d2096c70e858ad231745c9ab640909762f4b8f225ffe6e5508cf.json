{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport { BarElement } from \"chart.js\";\nimport { hex2rgb } from \"../../../common/color/convert-color\";\nimport { luminosity } from \"../../../common/color/rgb\";\nexport var TextBarElement = /*#__PURE__*/function (_BarElement) {\n  _inherits(TextBarElement, _BarElement);\n  function TextBarElement() {\n    _classCallCheck(this, TextBarElement);\n    return _callSuper(this, TextBarElement, arguments);\n  }\n  _createClass(TextBarElement, [{\n    key: \"draw\",\n    value: function draw(ctx) {\n      _get(_getPrototypeOf(TextBarElement.prototype), \"draw\", this).call(this, ctx);\n      var options = this.options;\n      var _getProps = this.getProps([\"x\", \"y\", \"base\", \"width\", \"text\"]),\n        x = _getProps.x,\n        y = _getProps.y,\n        base = _getProps.base,\n        width = _getProps.width,\n        text = _getProps.text;\n      if (!text) {\n        return;\n      }\n      ctx.beginPath();\n      var textRect = ctx.measureText(text);\n      if (textRect.width === 0 || textRect.width + (options.textPad || 4) + 2 > width) {\n        return;\n      }\n      var textColor = options.textColor || ((options === null || options === void 0 ? void 0 : options.backgroundColor) === \"transparent\" ? \"transparent\" : luminosity(hex2rgb(options.backgroundColor)) > 0.5 ? \"#000\" : \"#fff\");\n\n      // ctx.font = \"12px arial\";\n      ctx.fillStyle = textColor;\n      ctx.lineWidth = 0;\n      ctx.strokeStyle = textColor;\n      ctx.textBaseline = \"middle\";\n      ctx.fillText(text, x - width / 2 + (options.textPad || 4), y + (base - y) / 2);\n    }\n  }, {\n    key: \"tooltipPosition\",\n    value: function tooltipPosition(useFinalPosition) {\n      var _this$getProps = this.getProps([\"x\", \"y\", \"base\"], useFinalPosition),\n        x = _this$getProps.x,\n        y = _this$getProps.y,\n        base = _this$getProps.base;\n      return {\n        x: x,\n        y: y + (base - y) / 2\n      };\n    }\n  }]);\n  return TextBarElement;\n}(BarElement);\nTextBarElement.id = \"textbar\";","map":{"version":3,"names":["BarElement","hex2rgb","luminosity","TextBarElement","_BarElement","_inherits","_classCallCheck","_callSuper","arguments","_createClass","key","value","draw","ctx","_get","_getPrototypeOf","prototype","call","options","_getProps","getProps","x","y","base","width","text","beginPath","textRect","measureText","textPad","textColor","backgroundColor","fillStyle","lineWidth","strokeStyle","textBaseline","fillText","tooltipPosition","useFinalPosition","_this$getProps","id"],"sources":["/Users/sercanardil/Desktop/frontend/src/components/chart/timeline-chart/textbar-element.ts"],"sourcesContent":["import { BarElement, BarOptions, BarProps } from \"chart.js\";\nimport { hex2rgb } from \"../../../common/color/convert-color\";\nimport { luminosity } from \"../../../common/color/rgb\";\n\nexport interface TextBarProps extends BarProps {\n  text?: string | null;\n  options?: Partial<TextBaroptions>;\n}\n\nexport interface TextBaroptions extends BarOptions {\n  textPad?: number;\n  textColor?: string;\n  backgroundColor: string;\n}\n\nexport class TextBarElement extends BarElement {\n  static id = \"textbar\";\n\n  draw(ctx: CanvasRenderingContext2D) {\n    super.draw(ctx);\n    const options = this.options as TextBaroptions;\n    const { x, y, base, width, text } = (\n      this as BarElement<TextBarProps, TextBaroptions>\n    ).getProps([\"x\", \"y\", \"base\", \"width\", \"text\"]);\n\n    if (!text) {\n      return;\n    }\n\n    ctx.beginPath();\n    const textRect = ctx.measureText(text);\n    if (\n      textRect.width === 0 ||\n      textRect.width + (options.textPad || 4) + 2 > width\n    ) {\n      return;\n    }\n    const textColor =\n      options.textColor ||\n      (options?.backgroundColor === \"transparent\"\n        ? \"transparent\"\n        : luminosity(hex2rgb(options.backgroundColor)) > 0.5\n          ? \"#000\"\n          : \"#fff\");\n\n    // ctx.font = \"12px arial\";\n    ctx.fillStyle = textColor;\n    ctx.lineWidth = 0;\n    ctx.strokeStyle = textColor;\n    ctx.textBaseline = \"middle\";\n    ctx.fillText(\n      text,\n      x - width / 2 + (options.textPad || 4),\n      y + (base - y) / 2\n    );\n  }\n\n  tooltipPosition(useFinalPosition: boolean) {\n    const { x, y, base } = this.getProps([\"x\", \"y\", \"base\"], useFinalPosition);\n    return { x, y: y + (base - y) / 2 };\n  }\n}\n"],"mappings":";;;;;;AAAA,SAASA,UAAU,QAA8B,UAAU;AAC3D,SAASC,OAAO,QAAQ,qCAAqC;AAC7D,SAASC,UAAU,QAAQ,2BAA2B;AAatD,WAAaC,cAAc,0BAAAC,WAAA;EAAAC,SAAA,CAAAF,cAAA,EAAAC,WAAA;EAAA,SAAAD,eAAA;IAAAG,eAAA,OAAAH,cAAA;IAAA,OAAAI,UAAA,OAAAJ,cAAA,EAAAK,SAAA;EAAA;EAAAC,YAAA,CAAAN,cAAA;IAAAO,GAAA;IAAAC,KAAA,EAGzB,SAAAC,KAAKC,GAA6B,EAAE;MAClCC,IAAA,CAAAC,eAAA,CAAAZ,cAAA,CAAAa,SAAA,iBAAAC,IAAA,OAAWJ,GAAG;MACd,IAAMK,OAAO,GAAG,IAAI,CAACA,OAAyB;MAC9C,IAAAC,SAAA,GACE,IAAI,CACJC,QAAQ,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;QAFvCC,CAAC,GAAAF,SAAA,CAADE,CAAC;QAAEC,CAAC,GAAAH,SAAA,CAADG,CAAC;QAAEC,IAAI,GAAAJ,SAAA,CAAJI,IAAI;QAAEC,KAAK,GAAAL,SAAA,CAALK,KAAK;QAAEC,IAAI,GAAAN,SAAA,CAAJM,IAAI;MAI/B,IAAI,CAACA,IAAI,EAAE;QACT;MACF;MAEAZ,GAAG,CAACa,SAAS,CAAC,CAAC;MACf,IAAMC,QAAQ,GAAGd,GAAG,CAACe,WAAW,CAACH,IAAI,CAAC;MACtC,IACEE,QAAQ,CAACH,KAAK,KAAK,CAAC,IACpBG,QAAQ,CAACH,KAAK,IAAIN,OAAO,CAACW,OAAO,IAAI,CAAC,CAAC,GAAG,CAAC,GAAGL,KAAK,EACnD;QACA;MACF;MACA,IAAMM,SAAS,GACbZ,OAAO,CAACY,SAAS,KAChB,CAAAZ,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEa,eAAe,MAAK,aAAa,GACvC,aAAa,GACb7B,UAAU,CAACD,OAAO,CAACiB,OAAO,CAACa,eAAe,CAAC,CAAC,GAAG,GAAG,GAChD,MAAM,GACN,MAAM,CAAC;;MAEf;MACAlB,GAAG,CAACmB,SAAS,GAAGF,SAAS;MACzBjB,GAAG,CAACoB,SAAS,GAAG,CAAC;MACjBpB,GAAG,CAACqB,WAAW,GAAGJ,SAAS;MAC3BjB,GAAG,CAACsB,YAAY,GAAG,QAAQ;MAC3BtB,GAAG,CAACuB,QAAQ,CACVX,IAAI,EACJJ,CAAC,GAAGG,KAAK,GAAG,CAAC,IAAIN,OAAO,CAACW,OAAO,IAAI,CAAC,CAAC,EACtCP,CAAC,GAAG,CAACC,IAAI,GAAGD,CAAC,IAAI,CACnB,CAAC;IACH;EAAC;IAAAZ,GAAA;IAAAC,KAAA,EAED,SAAA0B,gBAAgBC,gBAAyB,EAAE;MACzC,IAAAC,cAAA,GAAuB,IAAI,CAACnB,QAAQ,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,EAAEkB,gBAAgB,CAAC;QAAlEjB,CAAC,GAAAkB,cAAA,CAADlB,CAAC;QAAEC,CAAC,GAAAiB,cAAA,CAADjB,CAAC;QAAEC,IAAI,GAAAgB,cAAA,CAAJhB,IAAI;MAClB,OAAO;QAAEF,CAAC,EAADA,CAAC;QAAEC,CAAC,EAAEA,CAAC,GAAG,CAACC,IAAI,GAAGD,CAAC,IAAI;MAAE,CAAC;IACrC;EAAC;EAAA,OAAAnB,cAAA;AAAA,EA7CiCH,UAAU;AAAjCG,cAAc,CAClBqC,EAAE,GAAG,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}