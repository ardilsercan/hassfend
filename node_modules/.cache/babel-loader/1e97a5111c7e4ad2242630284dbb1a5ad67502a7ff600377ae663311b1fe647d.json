{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\nvar _a, _b;\nimport { __decorate } from \"tslib\";\n// Style preference for leading underscores.\n// tslint:disable:strip-private-property-underscore\nimport { property } from 'lit/decorators.js';\nimport { addHasRemoveClass, BaseElement } from './base-element.js';\nexport { addHasRemoveClass, BaseElement };\n// ShadyDOM should submit <input> elements in component internals\nvar USING_SHADY_DOM = (_b = (_a = window.ShadyDOM) === null || _a === void 0 ? void 0 : _a.inUse) !== null && _b !== void 0 ? _b : false;\n/** @soyCompatible */\nexport var FormElement = /*#__PURE__*/function (_BaseElement) {\n  _inherits(FormElement, _BaseElement);\n  function FormElement() {\n    var _this;\n    _classCallCheck(this, FormElement);\n    _this = _callSuper(this, FormElement, arguments);\n    /**\n     * Disabled state for the component. When `disabled` is set to `true`, the\n     * component will not be added to form submission.\n     */\n    _this.disabled = false;\n    /**\n     * Form element that contains this element\n     */\n    _this.containingForm = null;\n    _this.formDataListener = function (ev) {\n      if (!_this.disabled) {\n        _this.setFormData(ev.formData);\n      }\n    };\n    return _this;\n  }\n  _createClass(FormElement, [{\n    key: \"findFormElement\",\n    value: function findFormElement() {\n      // If the component internals are not in Shadow DOM, subscribing to form\n      // data events could lead to duplicated data, which may not work correctly\n      // on the server side.\n      if (!this.shadowRoot || USING_SHADY_DOM) {\n        return null;\n      }\n      var root = this.getRootNode();\n      var forms = root.querySelectorAll('form');\n      for (var _i = 0, _Array$from = Array.from(forms); _i < _Array$from.length; _i++) {\n        var form = _Array$from[_i];\n        if (form.contains(this)) {\n          return form;\n        }\n      }\n      return null;\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      var _a;\n      _get(_getPrototypeOf(FormElement.prototype), \"connectedCallback\", this).call(this);\n      this.containingForm = this.findFormElement();\n      (_a = this.containingForm) === null || _a === void 0 ? void 0 : _a.addEventListener('formdata', this.formDataListener);\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      var _a;\n      _get(_getPrototypeOf(FormElement.prototype), \"disconnectedCallback\", this).call(this);\n      (_a = this.containingForm) === null || _a === void 0 ? void 0 : _a.removeEventListener('formdata', this.formDataListener);\n      this.containingForm = null;\n    }\n  }, {\n    key: \"click\",\n    value: function click() {\n      if (this.formElement && !this.disabled) {\n        this.formElement.focus();\n        this.formElement.click();\n      }\n    }\n  }, {\n    key: \"firstUpdated\",\n    value: function firstUpdated() {\n      var _this2 = this;\n      _get(_getPrototypeOf(FormElement.prototype), \"firstUpdated\", this).call(this);\n      if (this.shadowRoot) {\n        this.mdcRoot.addEventListener('change', function (e) {\n          _this2.dispatchEvent(new Event('change', e));\n        });\n      }\n    }\n  }]);\n  return FormElement;\n}(BaseElement);\nFormElement.shadowRootOptions = {\n  mode: 'open',\n  delegatesFocus: true\n};\n__decorate([property({\n  type: Boolean\n})], FormElement.prototype, \"disabled\", void 0);","map":{"version":3,"names":["property","addHasRemoveClass","BaseElement","USING_SHADY_DOM","_b","_a","window","ShadyDOM","inUse","FormElement","_BaseElement","_inherits","_this","_classCallCheck","disabled","containingForm","formDataListener","ev","setFormData","formData","_createClass","key","value","findFormElement","shadowRoot","root","getRootNode","forms","querySelectorAll","_i","_Array$from","Array","from","length","form","contains","connectedCallback","_get","_getPrototypeOf","prototype","call","addEventListener","disconnectedCallback","removeEventListener","click","formElement","focus","firstUpdated","_this2","mdcRoot","e","dispatchEvent","Event","shadowRootOptions","mode","delegatesFocus","__decorate","type","Boolean"],"sources":["form-element.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Style preference for leading underscores.\n// tslint:disable:strip-private-property-underscore\n\n\nimport {property} from 'lit/decorators.js';\n\nimport {addHasRemoveClass, BaseElement, CustomEventListener, EventType, SpecificEventListener} from './base-element.js';\nimport {RippleInterface} from './utils.js';\n\nexport {\n  addHasRemoveClass,\n  BaseElement,\n  CustomEventListener,\n  EventType,\n  RippleInterface,\n  SpecificEventListener\n};\n\ndeclare global {\n  interface FormDataEvent extends Event {\n    readonly formData: FormData;\n  }\n\n  interface HTMLElementEventMap {\n    formdata: FormDataEvent;\n  }\n}\n\n// ShadyDOM should submit <input> elements in component internals\nconst USING_SHADY_DOM = window.ShadyDOM?.inUse ?? false;\n\n/** @soyCompatible */\nexport abstract class FormElement extends BaseElement {\n  static override shadowRootOptions:\n      ShadowRootInit = {mode: 'open', delegatesFocus: true};\n\n  /**\n   * Form-capable element in the component ShadowRoot.\n   *\n   * Define in your component with the `@query` decorator\n   */\n  protected abstract formElement: HTMLElement;\n\n  /**\n   * Disabled state for the component. When `disabled` is set to `true`, the\n   * component will not be added to form submission.\n   */\n  @property({type: Boolean}) disabled = false;\n\n  /**\n   * Implement ripple getter for Ripple integration with mwc-formfield\n   */\n  readonly ripple?: Promise<RippleInterface|null>;\n\n  /**\n   * Form element that contains this element\n   */\n  protected containingForm: HTMLFormElement|null = null;\n  protected formDataListener = (ev: FormDataEvent) => {\n    if (!this.disabled) {\n      this.setFormData(ev.formData);\n    }\n  };\n\n  protected findFormElement(): HTMLFormElement|null {\n    // If the component internals are not in Shadow DOM, subscribing to form\n    // data events could lead to duplicated data, which may not work correctly\n    // on the server side.\n    if (!this.shadowRoot || USING_SHADY_DOM) {\n      return null;\n    }\n    const root = this.getRootNode() as HTMLElement;\n    const forms = root.querySelectorAll('form');\n    for (const form of Array.from(forms)) {\n      if (form.contains(this)) {\n        return form;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Implement this callback to submit form data\n   */\n  protected abstract setFormData(formData: FormData): void;\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this.containingForm = this.findFormElement();\n    this.containingForm?.addEventListener('formdata', this.formDataListener);\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    this.containingForm?.removeEventListener('formdata', this.formDataListener);\n    this.containingForm = null;\n  }\n\n  override click() {\n    if (this.formElement && !this.disabled) {\n      this.formElement.focus();\n      this.formElement.click();\n    }\n  }\n\n  protected override firstUpdated() {\n    super.firstUpdated();\n    if (this.shadowRoot) {\n      this.mdcRoot.addEventListener('change', (e) => {\n        this.dispatchEvent(new Event('change', e));\n      });\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}