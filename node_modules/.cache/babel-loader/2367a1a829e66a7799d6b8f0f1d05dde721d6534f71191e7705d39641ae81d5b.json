{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { nothing } from 'lit/html.js';\nimport { directive, PartType } from 'lit/directive.js';\nimport { AsyncDirective } from 'lit/async-directive.js';\nvar positionedPoints = ['top', 'right', 'bottom', 'left'];\nexport var Position = /*#__PURE__*/function (_AsyncDirective) {\n  _inherits(Position, _AsyncDirective);\n  function Position(part) {\n    var _this;\n    _classCallCheck(this, Position);\n    _this = _callSuper(this, Position, [part]);\n    if (part.type !== PartType.ELEMENT) {\n      throw new Error('The `position` directive must be used in attribute position.');\n    }\n    return _this;\n  }\n  _createClass(Position, [{\n    key: \"render\",\n    value: function render(_targetCallbackOrRef, _positions) {\n      return nothing;\n    }\n  }, {\n    key: \"update\",\n    value: function update(part, _ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        target = _ref2[0],\n        positions = _ref2[1];\n      if (this._host === undefined) {\n        var _part$options;\n        this._host = (_part$options = part.options) === null || _part$options === void 0 ? void 0 : _part$options.host;\n        this._host.addController(this);\n      }\n      this._element = part.element;\n      this._targetCallbackOrRef = target;\n      this._positions = positions !== null && positions !== void 0 ? positions : ['left', 'top', 'width', 'height'];\n      return this.render(target, positions);\n    }\n  }, {\n    key: \"hostUpdated\",\n    value: function hostUpdated() {\n      this._position();\n    }\n  }, {\n    key: \"_position\",\n    value: function _position() {\n      var _this$_targetCallback,\n        _this$_positions,\n        _this2 = this;\n      var target = typeof this._targetCallbackOrRef === 'function' ? this._targetCallbackOrRef() : (_this$_targetCallback = this._targetCallbackOrRef) === null || _this$_targetCallback === void 0 ? void 0 : _this$_targetCallback.value;\n      var parent = target.offsetParent;\n      if (target === undefined || !parent) {\n        return;\n      }\n      var tr = target.getBoundingClientRect();\n      var pr = parent.getBoundingClientRect();\n      (_this$_positions = this._positions) === null || _this$_positions === void 0 || _this$_positions.forEach(function (p) {\n        var x = positionedPoints.includes(p) ? tr[p] - pr[p] : tr[p];\n        _this2._element.style[p] = \"\".concat(x, \"px\");\n      });\n    }\n  }]);\n  return Position;\n}(AsyncDirective);\n/**\n * Positions and sizes the element on which the `position()` directive is used\n * relative to the given target element.\n */\nexport var position = directive(Position);","map":{"version":3,"names":["nothing","directive","PartType","AsyncDirective","positionedPoints","Position","_AsyncDirective","_inherits","part","_this","_classCallCheck","_callSuper","type","ELEMENT","Error","_createClass","key","value","render","_targetCallbackOrRef","_positions","update","_ref","_ref2","_slicedToArray","target","positions","_host","undefined","_part$options","options","host","addController","_element","element","hostUpdated","_position","_this$_targetCallback","_this$_positions","_this2","parent","offsetParent","tr","getBoundingClientRect","pr","forEach","p","x","includes","style","concat","position"],"sources":["../src/position.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nimport {LitElement} from 'lit';\nimport {nothing, AttributePart} from 'lit/html.js';\nimport {directive, PartInfo, PartType} from 'lit/directive.js';\nimport {AsyncDirective} from 'lit/async-directive.js';\n\ninterface Positionables {\n  readonly bottom: number;\n  readonly height: number;\n  readonly left: number;\n  readonly right: number;\n  readonly top: number;\n  readonly width: number;\n}\n\ntype Ref = {value: HTMLElement};\nexport type TargetCallbackOrRef = (() => HTMLElement) | Ref;\n\nexport type Positions = Array<keyof Positionables>;\n\nconst positionedPoints = ['top', 'right', 'bottom', 'left'];\n\nexport class Position extends AsyncDirective {\n  private _host?: LitElement;\n  private _element?: Element;\n  private _targetCallbackOrRef!: TargetCallbackOrRef;\n  private _positions?: Positions;\n\n  constructor(part: PartInfo) {\n    super(part);\n    if (part.type !== PartType.ELEMENT) {\n      throw new Error(\n        'The `position` directive must be used in attribute position.'\n      );\n    }\n  }\n\n  render(_targetCallbackOrRef: TargetCallbackOrRef, _positions: Positions) {\n    return nothing;\n  }\n\n  override update(\n    part: AttributePart,\n    [target, positions]: Parameters<this['render']>\n  ) {\n    if (this._host === undefined) {\n      this._host = part.options?.host as LitElement;\n      this._host.addController(this);\n    }\n    this._element = part.element;\n    this._targetCallbackOrRef = target;\n    this._positions = positions ?? ['left', 'top', 'width', 'height'];\n    return this.render(target, positions);\n  }\n\n  hostUpdated() {\n    this._position();\n  }\n\n  private _position() {\n    const target =\n      typeof this._targetCallbackOrRef === 'function'\n        ? this._targetCallbackOrRef()\n        : this._targetCallbackOrRef?.value;\n    const parent = target.offsetParent;\n    if (target === undefined || !parent) {\n      return;\n    }\n    const tr = target.getBoundingClientRect();\n    const pr = parent.getBoundingClientRect();\n    this._positions?.forEach((p) => {\n      const x = positionedPoints.includes(p) ? tr[p] - pr[p] : tr[p];\n      (this._element as HTMLElement).style[p] = `${x}px`;\n    });\n  }\n}\n\n/**\n * Positions and sizes the element on which the `position()` directive is used\n * relative to the given target element.\n */\nexport const position = directive(Position);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}