{"ast":null,"code":"import _decorate from \"@babel/runtime/helpers/decorate\";\nimport \"@material/mwc-button/mwc-button\";\nconst mdiDelete = \"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z\";\nimport { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../../../../../common/dom/fire_event\";\nimport \"../../../../../components/ha-circular-progress\";\nimport { createCloseHeading } from \"../../../../../components/ha-dialog\";\nimport \"../../../../../components/ha-qr-code\";\nimport { getMatterNodeDiagnostics, removeMatterFabric } from \"../../../../../data/matter\";\nimport { showAlertDialog, showConfirmationDialog } from \"../../../../../dialogs/generic/show-dialog-box\";\nimport { haStyleDialog } from \"../../../../../resources/styles\";\nconst NABUCASA_FABRIC = 4939;\nlet DialogMatterManageFabrics = _decorate([customElement(\"dialog-matter-manage-fabrics\")], function (_initialize, _LitElement) {\n  class DialogMatterManageFabrics extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: DialogMatterManageFabrics,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"device_id\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_nodeDiagnostics\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"showDialog\",\n      value: async function showDialog(params) {\n        this.device_id = params.device_id;\n        this._fetchNodeDetails();\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (!this.device_id) {\n          return nothing;\n        }\n        return html`\n      <ha-dialog\n        open\n        hideActions\n        @closed=${this.closeDialog}\n        .heading=${createCloseHeading(this.hass, this.hass.localize(\"ui.panel.config.matter.manage_fabrics.title\"))}\n      >\n        <p>\n          ${this.hass.localize(\"ui.panel.config.matter.manage_fabrics.fabrics\")}\n        </p>\n        ${this._nodeDiagnostics ? html`<mwc-list>\n              ${this._nodeDiagnostics.active_fabrics.map(fabric => {\n          var _this$_nodeDiagnostic;\n          return html`<ha-list-item\n                    noninteractive\n                    .hasMeta=${((_this$_nodeDiagnostic = this._nodeDiagnostics) === null || _this$_nodeDiagnostic === void 0 ? void 0 : _this$_nodeDiagnostic.available) && fabric.vendor_id !== NABUCASA_FABRIC}\n                    >${fabric.vendor_name || fabric.fabric_label || fabric.vendor_id}\n                    <ha-icon-button\n                      @click=${this._removeFabric}\n                      slot=\"meta\"\n                      .fabric=${fabric}\n                      .path=${mdiDelete}\n                    ></ha-icon-button>\n                  </ha-list-item>`;\n        })}\n            </mwc-list>` : html`<div class=\"center\">\n              <ha-circular-progress indeterminate></ha-circular-progress>\n            </div>`}\n      </ha-dialog>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_fetchNodeDetails\",\n      value: async function _fetchNodeDetails() {\n        if (!this.device_id) {\n          return;\n        }\n        try {\n          this._nodeDiagnostics = await getMatterNodeDiagnostics(this.hass, this.device_id);\n        } catch (err) {\n          this._nodeDiagnostics = undefined;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_removeFabric\",\n      value: async function _removeFabric(ev) {\n        const fabric = ev.target.fabric;\n        const fabricName = fabric.vendor_name || fabric.fabric_label || fabric.vendor_id.toString();\n        const confirm = await showConfirmationDialog(this, {\n          title: this.hass.localize(\"ui.panel.config.matter.manage_fabrics.remove_fabric_confirm_header\", {\n            fabric: fabricName\n          }),\n          text: this.hass.localize(\"ui.panel.config.matter.manage_fabrics.remove_fabric_confirm_text\", {\n            fabric: fabricName\n          }),\n          warning: true\n        });\n        if (!confirm) {\n          return;\n        }\n        try {\n          await removeMatterFabric(this.hass, this.device_id, fabric.fabric_index);\n          this._fetchNodeDetails();\n        } catch (err) {\n          showAlertDialog(this, {\n            title: this.hass.localize(\"ui.panel.config.matter.manage_fabrics.remove_fabric_failed_header\", {\n              fabric: fabricName\n            }),\n            text: this.hass.localize(\"ui.panel.config.matter.manage_fabrics.remove_fabric_failed_text\")\n          });\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"closeDialog\",\n      value: function closeDialog() {\n        this.device_id = undefined;\n        this._nodeDiagnostics = undefined;\n        fireEvent(this, \"dialog-closed\", {\n          dialog: this.localName\n        });\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return [haStyleDialog, css`\n        ha-dialog {\n          --dialog-content-padding: 0;\n          --mdc-list-side-padding: 24px;\n          --mdc-list-side-padding-right: 16px;\n          --mdc-list-item-meta-size: 48px;\n        }\n        p {\n          margin: 8px 24px;\n        }\n        .center {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n      `];\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["mdiDelete","LitElement","css","html","nothing","customElement","property","state","fireEvent","createCloseHeading","getMatterNodeDiagnostics","removeMatterFabric","showAlertDialog","showConfirmationDialog","haStyleDialog","NABUCASA_FABRIC","DialogMatterManageFabrics","_decorate","_initialize","_LitElement","constructor","args","F","d","kind","decorators","attribute","key","value","showDialog","params","device_id","_fetchNodeDetails","render","closeDialog","hass","localize","_nodeDiagnostics","active_fabrics","map","fabric","_this$_nodeDiagnostic","available","vendor_id","vendor_name","fabric_label","_removeFabric","err","undefined","ev","target","fabricName","toString","confirm","title","text","warning","fabric_index","dialog","localName","static","styles"],"sources":["/Users/sercanardil/Desktop/frontend/src/panels/config/integrations/integration-panels/matter/dialog-matter-manage-fabrics.ts"],"sourcesContent":["import \"@material/mwc-button/mwc-button\";\nimport { mdiDelete } from \"@mdi/js\";\nimport { CSSResultGroup, LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../../../../../common/dom/fire_event\";\nimport \"../../../../../components/ha-circular-progress\";\nimport { createCloseHeading } from \"../../../../../components/ha-dialog\";\nimport \"../../../../../components/ha-qr-code\";\nimport {\n  MatterFabricData,\n  MatterNodeDiagnostics,\n  getMatterNodeDiagnostics,\n  removeMatterFabric,\n} from \"../../../../../data/matter\";\nimport {\n  showAlertDialog,\n  showConfirmationDialog,\n} from \"../../../../../dialogs/generic/show-dialog-box\";\nimport { haStyleDialog } from \"../../../../../resources/styles\";\nimport { HomeAssistant } from \"../../../../../types\";\nimport { MatterManageFabricsDialogParams } from \"./show-dialog-matter-manage-fabrics\";\n\nconst NABUCASA_FABRIC = 4939;\n\n@customElement(\"dialog-matter-manage-fabrics\")\nclass DialogMatterManageFabrics extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @state() private device_id?: string;\n\n  @state() private _nodeDiagnostics?: MatterNodeDiagnostics;\n\n  public async showDialog(\n    params: MatterManageFabricsDialogParams\n  ): Promise<void> {\n    this.device_id = params.device_id;\n    this._fetchNodeDetails();\n  }\n\n  protected render() {\n    if (!this.device_id) {\n      return nothing;\n    }\n\n    return html`\n      <ha-dialog\n        open\n        hideActions\n        @closed=${this.closeDialog}\n        .heading=${createCloseHeading(\n          this.hass,\n          this.hass.localize(\"ui.panel.config.matter.manage_fabrics.title\")\n        )}\n      >\n        <p>\n          ${this.hass.localize(\"ui.panel.config.matter.manage_fabrics.fabrics\")}\n        </p>\n        ${this._nodeDiagnostics\n          ? html`<mwc-list>\n              ${this._nodeDiagnostics.active_fabrics.map(\n                (fabric) =>\n                  html`<ha-list-item\n                    noninteractive\n                    .hasMeta=${this._nodeDiagnostics?.available &&\n                    fabric.vendor_id !== NABUCASA_FABRIC}\n                    >${fabric.vendor_name ||\n                    fabric.fabric_label ||\n                    fabric.vendor_id}\n                    <ha-icon-button\n                      @click=${this._removeFabric}\n                      slot=\"meta\"\n                      .fabric=${fabric}\n                      .path=${mdiDelete}\n                    ></ha-icon-button>\n                  </ha-list-item>`\n              )}\n            </mwc-list>`\n          : html`<div class=\"center\">\n              <ha-circular-progress indeterminate></ha-circular-progress>\n            </div>`}\n      </ha-dialog>\n    `;\n  }\n\n  private async _fetchNodeDetails() {\n    if (!this.device_id) {\n      return;\n    }\n\n    try {\n      this._nodeDiagnostics = await getMatterNodeDiagnostics(\n        this.hass,\n        this.device_id\n      );\n    } catch (err: any) {\n      this._nodeDiagnostics = undefined;\n    }\n  }\n\n  private async _removeFabric(ev) {\n    const fabric: MatterFabricData = ev.target.fabric;\n    const fabricName =\n      fabric.vendor_name || fabric.fabric_label || fabric.vendor_id.toString();\n    const confirm = await showConfirmationDialog(this, {\n      title: this.hass.localize(\n        \"ui.panel.config.matter.manage_fabrics.remove_fabric_confirm_header\",\n        { fabric: fabricName }\n      ),\n      text: this.hass.localize(\n        \"ui.panel.config.matter.manage_fabrics.remove_fabric_confirm_text\",\n        { fabric: fabricName }\n      ),\n      warning: true,\n    });\n\n    if (!confirm) {\n      return;\n    }\n\n    try {\n      await removeMatterFabric(this.hass, this.device_id!, fabric.fabric_index);\n      this._fetchNodeDetails();\n    } catch (err: any) {\n      showAlertDialog(this, {\n        title: this.hass.localize(\n          \"ui.panel.config.matter.manage_fabrics.remove_fabric_failed_header\",\n          { fabric: fabricName }\n        ),\n        text: this.hass.localize(\n          \"ui.panel.config.matter.manage_fabrics.remove_fabric_failed_text\"\n        ),\n      });\n    }\n  }\n\n  public closeDialog(): void {\n    this.device_id = undefined;\n    this._nodeDiagnostics = undefined;\n    fireEvent(this, \"dialog-closed\", { dialog: this.localName });\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyleDialog,\n      css`\n        ha-dialog {\n          --dialog-content-padding: 0;\n          --mdc-list-side-padding: 24px;\n          --mdc-list-side-padding-right: 16px;\n          --mdc-list-item-meta-size: 48px;\n        }\n        p {\n          margin: 8px 24px;\n        }\n        .center {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"dialog-matter-manage-fabrics\": DialogMatterManageFabrics;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}