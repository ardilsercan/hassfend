{"ast":null,"code":"import { BarElement } from \"chart.js\";\nimport { hex2rgb } from \"../../../common/color/convert-color\";\nimport { luminosity } from \"../../../common/color/rgb\";\nexport class TextBarElement extends BarElement {\n  draw(ctx) {\n    super.draw(ctx);\n    const options = this.options;\n    const {\n      x,\n      y,\n      base,\n      width,\n      text\n    } = this.getProps([\"x\", \"y\", \"base\", \"width\", \"text\"]);\n    if (!text) {\n      return;\n    }\n    ctx.beginPath();\n    const textRect = ctx.measureText(text);\n    if (textRect.width === 0 || textRect.width + (options.textPad || 4) + 2 > width) {\n      return;\n    }\n    const textColor = options.textColor || ((options === null || options === void 0 ? void 0 : options.backgroundColor) === \"transparent\" ? \"transparent\" : luminosity(hex2rgb(options.backgroundColor)) > 0.5 ? \"#000\" : \"#fff\");\n\n    // ctx.font = \"12px arial\";\n    ctx.fillStyle = textColor;\n    ctx.lineWidth = 0;\n    ctx.strokeStyle = textColor;\n    ctx.textBaseline = \"middle\";\n    ctx.fillText(text, x - width / 2 + (options.textPad || 4), y + (base - y) / 2);\n  }\n  tooltipPosition(useFinalPosition) {\n    const {\n      x,\n      y,\n      base\n    } = this.getProps([\"x\", \"y\", \"base\"], useFinalPosition);\n    return {\n      x,\n      y: y + (base - y) / 2\n    };\n  }\n}\nTextBarElement.id = \"textbar\";","map":{"version":3,"names":["BarElement","hex2rgb","luminosity","TextBarElement","draw","ctx","options","x","y","base","width","text","getProps","beginPath","textRect","measureText","textPad","textColor","backgroundColor","fillStyle","lineWidth","strokeStyle","textBaseline","fillText","tooltipPosition","useFinalPosition","id"],"sources":["/Users/sercanardil/Desktop/frontend/src/components/chart/timeline-chart/textbar-element.ts"],"sourcesContent":["import { BarElement, BarOptions, BarProps } from \"chart.js\";\nimport { hex2rgb } from \"../../../common/color/convert-color\";\nimport { luminosity } from \"../../../common/color/rgb\";\n\nexport interface TextBarProps extends BarProps {\n  text?: string | null;\n  options?: Partial<TextBaroptions>;\n}\n\nexport interface TextBaroptions extends BarOptions {\n  textPad?: number;\n  textColor?: string;\n  backgroundColor: string;\n}\n\nexport class TextBarElement extends BarElement {\n  static id = \"textbar\";\n\n  draw(ctx: CanvasRenderingContext2D) {\n    super.draw(ctx);\n    const options = this.options as TextBaroptions;\n    const { x, y, base, width, text } = (\n      this as BarElement<TextBarProps, TextBaroptions>\n    ).getProps([\"x\", \"y\", \"base\", \"width\", \"text\"]);\n\n    if (!text) {\n      return;\n    }\n\n    ctx.beginPath();\n    const textRect = ctx.measureText(text);\n    if (\n      textRect.width === 0 ||\n      textRect.width + (options.textPad || 4) + 2 > width\n    ) {\n      return;\n    }\n    const textColor =\n      options.textColor ||\n      (options?.backgroundColor === \"transparent\"\n        ? \"transparent\"\n        : luminosity(hex2rgb(options.backgroundColor)) > 0.5\n          ? \"#000\"\n          : \"#fff\");\n\n    // ctx.font = \"12px arial\";\n    ctx.fillStyle = textColor;\n    ctx.lineWidth = 0;\n    ctx.strokeStyle = textColor;\n    ctx.textBaseline = \"middle\";\n    ctx.fillText(\n      text,\n      x - width / 2 + (options.textPad || 4),\n      y + (base - y) / 2\n    );\n  }\n\n  tooltipPosition(useFinalPosition: boolean) {\n    const { x, y, base } = this.getProps([\"x\", \"y\", \"base\"], useFinalPosition);\n    return { x, y: y + (base - y) / 2 };\n  }\n}\n"],"mappings":"AAAA,SAASA,UAAU,QAA8B,UAAU;AAC3D,SAASC,OAAO,QAAQ,qCAAqC;AAC7D,SAASC,UAAU,QAAQ,2BAA2B;AAatD,OAAO,MAAMC,cAAc,SAASH,UAAU,CAAC;EAG7CI,IAAIA,CAACC,GAA6B,EAAE;IAClC,KAAK,CAACD,IAAI,CAACC,GAAG,CAAC;IACf,MAAMC,OAAO,GAAG,IAAI,CAACA,OAAyB;IAC9C,MAAM;MAAEC,CAAC;MAAEC,CAAC;MAAEC,IAAI;MAAEC,KAAK;MAAEC;IAAK,CAAC,GAC/B,IAAI,CACJC,QAAQ,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;IAE/C,IAAI,CAACD,IAAI,EAAE;MACT;IACF;IAEAN,GAAG,CAACQ,SAAS,CAAC,CAAC;IACf,MAAMC,QAAQ,GAAGT,GAAG,CAACU,WAAW,CAACJ,IAAI,CAAC;IACtC,IACEG,QAAQ,CAACJ,KAAK,KAAK,CAAC,IACpBI,QAAQ,CAACJ,KAAK,IAAIJ,OAAO,CAACU,OAAO,IAAI,CAAC,CAAC,GAAG,CAAC,GAAGN,KAAK,EACnD;MACA;IACF;IACA,MAAMO,SAAS,GACbX,OAAO,CAACW,SAAS,KAChB,CAAAX,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEY,eAAe,MAAK,aAAa,GACvC,aAAa,GACbhB,UAAU,CAACD,OAAO,CAACK,OAAO,CAACY,eAAe,CAAC,CAAC,GAAG,GAAG,GAChD,MAAM,GACN,MAAM,CAAC;;IAEf;IACAb,GAAG,CAACc,SAAS,GAAGF,SAAS;IACzBZ,GAAG,CAACe,SAAS,GAAG,CAAC;IACjBf,GAAG,CAACgB,WAAW,GAAGJ,SAAS;IAC3BZ,GAAG,CAACiB,YAAY,GAAG,QAAQ;IAC3BjB,GAAG,CAACkB,QAAQ,CACVZ,IAAI,EACJJ,CAAC,GAAGG,KAAK,GAAG,CAAC,IAAIJ,OAAO,CAACU,OAAO,IAAI,CAAC,CAAC,EACtCR,CAAC,GAAG,CAACC,IAAI,GAAGD,CAAC,IAAI,CACnB,CAAC;EACH;EAEAgB,eAAeA,CAACC,gBAAyB,EAAE;IACzC,MAAM;MAAElB,CAAC;MAAEC,CAAC;MAAEC;IAAK,CAAC,GAAG,IAAI,CAACG,QAAQ,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,EAAEa,gBAAgB,CAAC;IAC1E,OAAO;MAAElB,CAAC;MAAEC,CAAC,EAAEA,CAAC,GAAG,CAACC,IAAI,GAAGD,CAAC,IAAI;IAAE,CAAC;EACrC;AACF;AA9CaL,cAAc,CAClBuB,EAAE,GAAG,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}