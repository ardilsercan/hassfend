{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/helpers/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _templateObject, _templateObject2, _templateObject3;\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.array-buffer.slice.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.typed-array.uint8-array.js\";\nimport \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.copy-within.js\";\nimport \"core-js/modules/es.typed-array.every.js\";\nimport \"core-js/modules/es.typed-array.fill.js\";\nimport \"core-js/modules/es.typed-array.filter.js\";\nimport \"core-js/modules/es.typed-array.find.js\";\nimport \"core-js/modules/es.typed-array.find-index.js\";\nimport \"core-js/modules/es.typed-array.find-last.js\";\nimport \"core-js/modules/es.typed-array.find-last-index.js\";\nimport \"core-js/modules/es.typed-array.for-each.js\";\nimport \"core-js/modules/es.typed-array.includes.js\";\nimport \"core-js/modules/es.typed-array.index-of.js\";\nimport \"core-js/modules/es.typed-array.iterator.js\";\nimport \"core-js/modules/es.typed-array.join.js\";\nimport \"core-js/modules/es.typed-array.last-index-of.js\";\nimport \"core-js/modules/es.typed-array.map.js\";\nimport \"core-js/modules/es.typed-array.reduce.js\";\nimport \"core-js/modules/es.typed-array.reduce-right.js\";\nimport \"core-js/modules/es.typed-array.reverse.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/es.typed-array.slice.js\";\nimport \"core-js/modules/es.typed-array.some.js\";\nimport \"core-js/modules/es.typed-array.sort.js\";\nimport \"core-js/modules/es.typed-array.subarray.js\";\nimport \"core-js/modules/es.typed-array.to-locale-string.js\";\nimport \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.to-string.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport \"core-js/modules/esnext.array-buffer.detached.js\";\nimport \"core-js/modules/esnext.array-buffer.transfer.js\";\nimport \"core-js/modules/esnext.array-buffer.transfer-to-fixed-length.js\";\nimport \"core-js/modules/web.btoa.js\";\nimport \"core-js/modules/web.dom-exception.constructor.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport \"core-js/modules/web.dom-exception.to-string-tag.js\";\nvar mdiCog = \"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z\";\nvar mdiContentCopy = \"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\";\nimport { css, html, LitElement } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../../../../../common/dom/fire_event\";\nimport { slugify } from \"../../../../../common/string/slugify\";\nimport { copyToClipboard } from \"../../../../../common/util/copy-clipboard\";\nimport \"../../../../../components/ha-button-menu\";\nimport \"../../../../../components/ha-check-list-item\";\nimport \"../../../../../components/ha-icon-button\";\nimport \"../../../../../components/ha-textfield\";\nimport { showToast } from \"../../../../../util/toast\";\nimport { handleChangeEvent } from \"../ha-automation-trigger-row\";\nvar SUPPORTED_METHODS = [\"GET\", \"HEAD\", \"POST\", \"PUT\"];\nvar DEFAULT_METHODS = [\"POST\", \"PUT\"];\nvar DEFAULT_WEBHOOK_ID = \"\";\nexport var HaWebhookTrigger = _decorate([customElement(\"ha-automation-trigger-webhook\")], function (_initialize, _LitElement) {\n  var HaWebhookTrigger = /*#__PURE__*/function (_LitElement2) {\n    _inherits(HaWebhookTrigger, _LitElement2);\n    function HaWebhookTrigger() {\n      var _this;\n      _classCallCheck(this, HaWebhookTrigger);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _callSuper(this, HaWebhookTrigger, [].concat(args));\n      _initialize(_assertThisInitialized(_this));\n      return _this;\n    }\n    return _createClass(HaWebhookTrigger);\n  }(_LitElement);\n  return {\n    F: HaWebhookTrigger,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"trigger\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"disabled\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_config\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_unsub\",\n      value: void 0\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"defaultConfig\",\n      value: function defaultConfig() {\n        return {\n          allowed_methods: [].concat(DEFAULT_METHODS),\n          local_only: true,\n          webhook_id: DEFAULT_WEBHOOK_ID\n        };\n      }\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        var _this2 = this;\n        _get(_getPrototypeOf(HaWebhookTrigger.prototype), \"connectedCallback\", this).call(this);\n        var details = {\n          callback: function callback(config) {\n            _this2._config = config;\n          }\n        };\n        fireEvent(this, \"subscribe-automation-config\", details);\n        this._unsub = details.unsub;\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(HaWebhookTrigger.prototype), \"disconnectedCallback\", this).call(this);\n        if (this._unsub) {\n          this._unsub();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_generateWebhookId\",\n      value: function _generateWebhookId() {\n        var _this$_config;\n        // The webhook_id should be treated like a password. Generate a default\n        // value that would be hard for someone to guess. This generates a\n        // 144-bit random value. The output is a 24 character url-safe string.\n        var randomBytes = crypto.getRandomValues(new Uint8Array(18));\n        var base64Str = btoa(String.fromCharCode.apply(String, _toConsumableArray(randomBytes)));\n        var urlSafeId = base64Str.replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n\n        // Include the automation name to give the user context about what the\n        // webhook_id is used for.\n        var urlSafeAlias = slugify(((_this$_config = this._config) === null || _this$_config === void 0 ? void 0 : _this$_config.alias) || \"\", \"-\");\n        return \"\".concat(urlSafeAlias, \"-\").concat(urlSafeId);\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProperties) {\n        _get(_getPrototypeOf(HaWebhookTrigger.prototype), \"willUpdate\", this).call(this, changedProperties);\n        if (changedProperties.has(\"trigger\")) {\n          if (this.trigger.allowed_methods === undefined) {\n            this.trigger.allowed_methods = [].concat(DEFAULT_METHODS);\n          }\n          if (this.trigger.local_only === undefined) {\n            this.trigger.local_only = true;\n          }\n          if (this.trigger.webhook_id === DEFAULT_WEBHOOK_ID) {\n            this.trigger.webhook_id = this._generateWebhookId();\n          }\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        var _this3 = this;\n        var _this$trigger = this.trigger,\n          allowedMethods = _this$trigger.allowed_methods,\n          localOnly = _this$trigger.local_only,\n          webhookId = _this$trigger.webhook_id;\n        return html(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      <div class=\\\"flex\\\">\\n        <ha-textfield\\n          name=\\\"webhook_id\\\"\\n          .label=\", \"\\n          .helper=\", \"\\n          .disabled=\", \"\\n          iconTrailing\\n          .value=\", \"\\n          @input=\", \"\\n        >\\n          <ha-icon-button\\n            @click=\", \"\\n            slot=\\\"trailingIcon\\\"\\n            .label=\", \"\\n            .path=\", \"\\n          ></ha-icon-button>\\n        </ha-textfield>\\n        <ha-button-menu multi>\\n          <ha-icon-button\\n            slot=\\\"trigger\\\"\\n            .label=\", \"\\n            .path=\", \"\\n          ></ha-icon-button>\\n          \", \"\\n          <li divider role=\\\"separator\\\"></li>\\n          <ha-check-list-item\\n            left\\n            @request-selected=\", \"\\n            .selected=\", \"\\n          >\\n            \", \"\\n          </ha-check-list-item>\\n        </ha-button-menu>\\n      </div>\\n    \"])), this.hass.localize(\"ui.panel.config.automation.editor.triggers.type.webhook.webhook_id\"), this.hass.localize(\"ui.panel.config.automation.editor.triggers.type.webhook.webhook_id_helper\"), this.disabled, webhookId || \"\", this._valueChanged, this._copyUrl, this.hass.localize(\"ui.panel.config.automation.editor.triggers.type.webhook.copy_url\"), mdiContentCopy, this.hass.localize(\"ui.panel.config.automation.editor.triggers.type.webhook.webhook_settings\"), mdiCog, SUPPORTED_METHODS.map(function (method) {\n          return html(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n              <ha-check-list-item\\n                left\\n                .value=\", \"\\n                @request-selected=\", \"\\n                .selected=\", \"\\n              >\\n                \", \"\\n              </ha-check-list-item>\\n            \"])), method, _this3._allowedMethodsChanged, allowedMethods.includes(method), method);\n        }), this._localOnlyChanged, localOnly, this.hass.localize(\"ui.panel.config.automation.editor.triggers.type.webhook.local_only\"));\n      }\n    }, {\n      kind: \"method\",\n      key: \"_valueChanged\",\n      value: function _valueChanged(ev) {\n        handleChangeEvent(this, ev);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_localOnlyChanged\",\n      value: function _localOnlyChanged(ev) {\n        ev.stopPropagation();\n        if (this.trigger.local_only === ev.detail.selected) {\n          return;\n        }\n        var newTrigger = Object.assign(Object.assign({}, this.trigger), {}, {\n          local_only: ev.detail.selected\n        });\n        fireEvent(this, \"value-changed\", {\n          value: newTrigger\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_allowedMethodsChanged\",\n      value: function _allowedMethodsChanged(ev) {\n        var _this$trigger$allowed, _this$trigger$allowed2;\n        ev.stopPropagation();\n        var method = ev.target.value;\n        var selected = ev.detail.selected;\n        if (selected === ((_this$trigger$allowed = this.trigger.allowed_methods) === null || _this$trigger$allowed === void 0 ? void 0 : _this$trigger$allowed.includes(method))) {\n          return;\n        }\n        var methods = (_this$trigger$allowed2 = this.trigger.allowed_methods) !== null && _this$trigger$allowed2 !== void 0 ? _this$trigger$allowed2 : [];\n        var newMethods = _toConsumableArray(methods);\n        if (selected) {\n          newMethods.push(method);\n        } else {\n          newMethods.splice(newMethods.indexOf(method), 1);\n        }\n        var newTrigger = Object.assign(Object.assign({}, this.trigger), {}, {\n          allowed_methods: newMethods\n        });\n        fireEvent(this, \"value-changed\", {\n          value: newTrigger\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_copyUrl\",\n      value: function () {\n        var _copyUrl2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(ev) {\n          var inputElement, url;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                inputElement = ev.target.parentElement;\n                url = this.hass.hassUrl(\"/api/webhook/\".concat(inputElement.value));\n                _context.next = 4;\n                return copyToClipboard(url);\n              case 4:\n                showToast(this, {\n                  message: this.hass.localize(\"ui.common.copied_clipboard\")\n                });\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee, this);\n        }));\n        function _copyUrl(_x) {\n          return _copyUrl2.apply(this, arguments);\n        }\n        return _copyUrl;\n      }()\n    }, {\n      kind: \"field\",\n      static: true,\n      key: \"styles\",\n      value: function value() {\n        return css(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n    .flex {\\n      display: flex;\\n    }\\n\\n    ha-textfield {\\n      flex: 1;\\n    }\\n\\n    ha-textfield > ha-icon-button {\\n      --mdc-icon-button-size: 24px;\\n      --mdc-icon-size: 18px;\\n    }\\n\\n    ha-button-menu {\\n      padding-top: 4px;\\n    }\\n  \"])));\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["css","html","LitElement","customElement","property","state","fireEvent","slugify","copyToClipboard","showToast","handleChangeEvent","SUPPORTED_METHODS","DEFAULT_METHODS","DEFAULT_WEBHOOK_ID","HaWebhookTrigger","_decorate","_initialize","_LitElement","_LitElement2","_inherits","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","_assertThisInitialized","_createClass","F","d","kind","decorators","attribute","key","value","type","Boolean","static","defaultConfig","allowed_methods","local_only","webhook_id","connectedCallback","_this2","_get","_getPrototypeOf","prototype","call","details","callback","config","_config","_unsub","unsub","disconnectedCallback","_generateWebhookId","_this$_config","randomBytes","crypto","getRandomValues","Uint8Array","base64Str","btoa","String","fromCharCode","apply","_toConsumableArray","urlSafeId","replace","urlSafeAlias","alias","willUpdate","changedProperties","has","trigger","undefined","render","_this3","_this$trigger","allowedMethods","localOnly","webhookId","_templateObject","_taggedTemplateLiteral","hass","localize","disabled","_valueChanged","_copyUrl","mdiContentCopy","mdiCog","map","method","_templateObject2","_allowedMethodsChanged","includes","_localOnlyChanged","ev","stopPropagation","detail","selected","newTrigger","Object","assign","_this$trigger$allowed","_this$trigger$allowed2","target","methods","newMethods","push","splice","indexOf","_copyUrl2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","inputElement","url","wrap","_callee$","_context","prev","next","parentElement","hassUrl","message","stop","_x","_templateObject3"],"sources":["/workspaces/frontend/src/panels/config/automation/trigger/types/ha-automation-trigger-webhook.ts"],"sourcesContent":["import type { RequestSelectedDetail } from \"@material/mwc-list/mwc-list-item\";\nimport { mdiCog, mdiContentCopy } from \"@mdi/js\";\nimport { UnsubscribeFunc } from \"home-assistant-js-websocket\";\nimport { css, html, LitElement, PropertyValues } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../../../../../common/dom/fire_event\";\nimport { slugify } from \"../../../../../common/string/slugify\";\nimport { copyToClipboard } from \"../../../../../common/util/copy-clipboard\";\nimport \"../../../../../components/ha-button-menu\";\nimport \"../../../../../components/ha-check-list-item\";\nimport \"../../../../../components/ha-icon-button\";\nimport \"../../../../../components/ha-textfield\";\nimport type { HaTextField } from \"../../../../../components/ha-textfield\";\nimport {\n  AutomationConfig,\n  WebhookTrigger,\n} from \"../../../../../data/automation\";\nimport { HomeAssistant } from \"../../../../../types\";\nimport { showToast } from \"../../../../../util/toast\";\nimport { handleChangeEvent } from \"../ha-automation-trigger-row\";\n\nconst SUPPORTED_METHODS = [\"GET\", \"HEAD\", \"POST\", \"PUT\"];\nconst DEFAULT_METHODS = [\"POST\", \"PUT\"];\nconst DEFAULT_WEBHOOK_ID = \"\";\n\n@customElement(\"ha-automation-trigger-webhook\")\nexport class HaWebhookTrigger extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public trigger!: WebhookTrigger;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @state() private _config?: AutomationConfig;\n\n  private _unsub?: UnsubscribeFunc;\n\n  public static get defaultConfig() {\n    return {\n      allowed_methods: [...DEFAULT_METHODS],\n      local_only: true,\n      webhook_id: DEFAULT_WEBHOOK_ID,\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    const details = {\n      callback: (config) => {\n        this._config = config;\n      },\n    };\n    fireEvent(this, \"subscribe-automation-config\", details);\n    this._unsub = (details as any).unsub;\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._unsub) {\n      this._unsub();\n    }\n  }\n\n  private _generateWebhookId(): string {\n    // The webhook_id should be treated like a password. Generate a default\n    // value that would be hard for someone to guess. This generates a\n    // 144-bit random value. The output is a 24 character url-safe string.\n    const randomBytes = crypto.getRandomValues(new Uint8Array(18));\n    const base64Str = btoa(String.fromCharCode(...randomBytes));\n    const urlSafeId = base64Str.replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n\n    // Include the automation name to give the user context about what the\n    // webhook_id is used for.\n    const urlSafeAlias = slugify(this._config?.alias || \"\", \"-\");\n\n    return `${urlSafeAlias}-${urlSafeId}`;\n  }\n\n  public willUpdate(changedProperties: PropertyValues) {\n    super.willUpdate(changedProperties);\n    if (changedProperties.has(\"trigger\")) {\n      if (this.trigger.allowed_methods === undefined) {\n        this.trigger.allowed_methods = [...DEFAULT_METHODS];\n      }\n      if (this.trigger.local_only === undefined) {\n        this.trigger.local_only = true;\n      }\n      if (this.trigger.webhook_id === DEFAULT_WEBHOOK_ID) {\n        this.trigger.webhook_id = this._generateWebhookId();\n      }\n    }\n  }\n\n  protected render() {\n    const {\n      allowed_methods: allowedMethods,\n      local_only: localOnly,\n      webhook_id: webhookId,\n    } = this.trigger;\n\n    return html`\n      <div class=\"flex\">\n        <ha-textfield\n          name=\"webhook_id\"\n          .label=${this.hass.localize(\n            \"ui.panel.config.automation.editor.triggers.type.webhook.webhook_id\"\n          )}\n          .helper=${this.hass.localize(\n            \"ui.panel.config.automation.editor.triggers.type.webhook.webhook_id_helper\"\n          )}\n          .disabled=${this.disabled}\n          iconTrailing\n          .value=${webhookId || \"\"}\n          @input=${this._valueChanged}\n        >\n          <ha-icon-button\n            @click=${this._copyUrl}\n            slot=\"trailingIcon\"\n            .label=${this.hass.localize(\n              \"ui.panel.config.automation.editor.triggers.type.webhook.copy_url\"\n            )}\n            .path=${mdiContentCopy}\n          ></ha-icon-button>\n        </ha-textfield>\n        <ha-button-menu multi>\n          <ha-icon-button\n            slot=\"trigger\"\n            .label=${this.hass!.localize(\n              \"ui.panel.config.automation.editor.triggers.type.webhook.webhook_settings\"\n            )}\n            .path=${mdiCog}\n          ></ha-icon-button>\n          ${SUPPORTED_METHODS.map(\n            (method) => html`\n              <ha-check-list-item\n                left\n                .value=${method}\n                @request-selected=${this._allowedMethodsChanged}\n                .selected=${allowedMethods!.includes(method)}\n              >\n                ${method}\n              </ha-check-list-item>\n            `\n          )}\n          <li divider role=\"separator\"></li>\n          <ha-check-list-item\n            left\n            @request-selected=${this._localOnlyChanged}\n            .selected=${localOnly!}\n          >\n            ${this.hass!.localize(\n              \"ui.panel.config.automation.editor.triggers.type.webhook.local_only\"\n            )}\n          </ha-check-list-item>\n        </ha-button-menu>\n      </div>\n    `;\n  }\n\n  private _valueChanged(ev: CustomEvent): void {\n    handleChangeEvent(this, ev);\n  }\n\n  private _localOnlyChanged(ev: CustomEvent<RequestSelectedDetail>): void {\n    ev.stopPropagation();\n    if (this.trigger.local_only === ev.detail.selected) {\n      return;\n    }\n    const newTrigger = {\n      ...this.trigger,\n      local_only: ev.detail.selected,\n    };\n    fireEvent(this, \"value-changed\", { value: newTrigger });\n  }\n\n  private _allowedMethodsChanged(ev: CustomEvent<RequestSelectedDetail>): void {\n    ev.stopPropagation();\n    const method = (ev.target as any).value;\n    const selected = ev.detail.selected;\n\n    if (selected === this.trigger.allowed_methods?.includes(method)) {\n      return;\n    }\n\n    const methods = this.trigger.allowed_methods ?? [];\n    const newMethods = [...methods];\n\n    if (selected) {\n      newMethods.push(method);\n    } else {\n      newMethods.splice(newMethods.indexOf(method), 1);\n    }\n    const newTrigger = { ...this.trigger, allowed_methods: newMethods };\n    fireEvent(this, \"value-changed\", { value: newTrigger });\n  }\n\n  private async _copyUrl(ev): Promise<void> {\n    const inputElement = ev.target.parentElement as HaTextField;\n    const url = this.hass.hassUrl(`/api/webhook/${inputElement.value}`);\n\n    await copyToClipboard(url);\n    showToast(this, {\n      message: this.hass.localize(\"ui.common.copied_clipboard\"),\n    });\n  }\n\n  static styles = css`\n    .flex {\n      display: flex;\n    }\n\n    ha-textfield {\n      flex: 1;\n    }\n\n    ha-textfield > ha-icon-button {\n      --mdc-icon-button-size: 24px;\n      --mdc-icon-size: 18px;\n    }\n\n    ha-button-menu {\n      padding-top: 4px;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-automation-trigger-webhook\": HaWebhookTrigger;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}