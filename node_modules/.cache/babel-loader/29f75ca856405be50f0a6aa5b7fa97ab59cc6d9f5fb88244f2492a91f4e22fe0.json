{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13, _templateObject14, _templateObject15, _templateObject16, _templateObject17, _templateObject18, _templateObject19, _templateObject20, _templateObject21, _templateObject22;\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/esnext.iterator.some.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"@material/mwc-button\";\nimport \"@material/mwc-list/mwc-list-item\";\nvar mdiCodeBraces = \"M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z\";\nvar mdiCommentProcessingOutline = \"M9,22A1,1 0 0,1 8,21V18H4A2,2 0 0,1 2,16V4C2,2.89 2.9,2 4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H13.9L10.2,21.71C10,21.9 9.75,22 9.5,22V22H9M10,16V19.08L13.08,16H20V4H4V16H10M17,11H15V9H17V11M13,11H11V9H13V11M9,11H7V9H9V11Z\";\nvar mdiDotsVertical = \"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z\";\nvar mdiFileMultiple = \"M15,7H20.5L15,1.5V7M8,0H16L22,6V18A2,2 0 0,1 20,20H8C6.89,20 6,19.1 6,18V2A2,2 0 0,1 8,0M4,4V22H20V24H4A2,2 0 0,1 2,22V4H4Z\";\nvar mdiFormatListBulletedTriangle = \"M5,15.5L7.5,20H2.5L5,15.5M9,19H21V17H9V19M5,9.5L7.5,14H2.5L5,9.5M9,13H21V11H9V13M5,3.5L7.5,8H2.5L5,3.5M9,7H21V5H9V7Z\";\nvar mdiHelpCircle = \"M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z\";\nvar mdiMagnify = \"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z\";\nvar mdiPencil = \"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z\";\nvar mdiPlus = \"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z\";\nvar mdiRefresh = \"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z\";\nvar mdiShape = \"M11,13.5V21.5H3V13.5H11M12,2L17.5,11H6.5L12,2M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13Z\";\nvar mdiViewDashboard = \"M13,3V9H21V3M13,21H21V11H13M3,21H11V15H3M3,13H11V3H3V13Z\";\nimport \"@polymer/paper-tabs/paper-tab\";\nimport \"@polymer/paper-tabs/paper-tabs\";\nimport { LitElement, css, html } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { ifDefined } from \"lit/directives/if-defined\";\nimport memoizeOne from \"memoize-one\";\nimport { isComponentLoaded } from \"../../common/config/is_component_loaded\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { shouldHandleRequestSelectedEvent } from \"../../common/mwc/handle-request-selected-event\";\nimport { navigate } from \"../../common/navigate\";\nimport { constructUrlCurrentPath } from \"../../common/url/construct-url\";\nimport { addSearchParam, extractSearchParamsObject, removeSearchParam } from \"../../common/url/search-params\";\nimport { computeRTLDirection } from \"../../common/util/compute_rtl\";\nimport { debounce } from \"../../common/util/debounce\";\nimport { afterNextRender } from \"../../common/util/render-status\";\nimport \"../../components/ha-button-menu\";\nimport \"../../components/ha-icon\";\nimport \"../../components/ha-icon-button\";\nimport \"../../components/ha-icon-button-arrow-next\";\nimport \"../../components/ha-icon-button-arrow-prev\";\nimport \"../../components/ha-menu-button\";\nimport \"../../components/ha-svg-icon\";\nimport \"../../components/ha-tabs\";\nimport { showAlertDialog, showConfirmationDialog } from \"../../dialogs/generic/show-dialog-box\";\nimport { showQuickBar } from \"../../dialogs/quick-bar/show-dialog-quick-bar\";\nimport { showVoiceCommandDialog } from \"../../dialogs/voice-command-dialog/show-ha-voice-command-dialog\";\nimport { haStyle } from \"../../resources/styles\";\nimport { documentationUrl } from \"../../util/documentation-url\";\nimport { swapView } from \"./editor/config-util\";\nimport { showEditLovelaceDialog } from \"./editor/lovelace-editor/show-edit-lovelace-dialog\";\nimport { showEditViewDialog } from \"./editor/view-editor/show-edit-view-dialog\";\nimport { showDashboardStrategyEditorDialog } from \"./strategies/device-registry-detail/show-dialog-dashboard-strategy-editor\";\nimport \"./views/hui-view\";\nimport { isStrategyDashboard } from \"../../data/lovelace/config/types\";\nimport { showSaveDialog } from \"./editor/show-save-config-dialog\";\nimport { isLegacyStrategyConfig } from \"./strategies/legacy-strategy\";\nvar HUIRoot = _decorate([customElement(\"hui-root\")], function (_initialize, _LitElement) {\n  var HUIRoot = /*#__PURE__*/function (_LitElement2) {\n    _inherits(HUIRoot, _LitElement2);\n    function HUIRoot() {\n      var _this;\n      _classCallCheck(this, HUIRoot);\n      _this = _callSuper(this, HUIRoot);\n      // The view can trigger a re-render when it knows that certain\n      // web components have been loaded.\n      _initialize(_assertThisInitialized(_this));\n      _this._debouncedConfigChanged = debounce(function () {\n        return _this._selectView(_this._curView, true);\n      }, 100, false);\n      return _this;\n    }\n    return _createClass(HUIRoot);\n  }(_LitElement);\n  return {\n    F: HUIRoot,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"lovelace\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"narrow\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"route\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_curView\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_viewCache\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_debouncedConfigChanged\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_conversation\",\n      value: function value() {\n        var _this2 = this;\n        return memoizeOne(function (_components) {\n          return isComponentLoaded(_this2.hass, \"conversation\");\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderActionItems\",\n      value: function _renderActionItems() {\n        var _this$hass$userData,\n          _this$hass$panels$lov,\n          _user,\n          _this3 = this;\n        var result = [];\n        if (this._editMode) {\n          result.push(html(_templateObject || (_templateObject = _taggedTemplateLiteral([\"<mwc-button\\n            outlined\\n            class=\\\"exit-edit-mode\\\"\\n            .label=\", \"\\n            @click=\", \"\\n          ></mwc-button>\\n          <a\\n            href=\", \"\\n            rel=\\\"noreferrer\\\"\\n            class=\\\"menu-link\\\"\\n            target=\\\"_blank\\\"\\n          >\\n            <ha-icon-button\\n              .label=\", \"\\n              .path=\", \"\\n            ></ha-icon-button>\\n          </a>\"])), this.hass.localize(\"ui.panel.lovelace.menu.exit_edit_mode\"), this._editModeDisable, documentationUrl(this.hass, \"/dashboards/\"), this.hass.localize(\"ui.panel.lovelace.menu.help\"), mdiHelpCircle));\n        }\n        var items = [{\n          icon: mdiFormatListBulletedTriangle,\n          key: \"ui.panel.lovelace.unused_entities.title\",\n          overflowAction: this._handleUnusedEntities,\n          visible: this._editMode && !__DEMO__,\n          overflow: true\n        }, {\n          icon: mdiCodeBraces,\n          key: \"ui.panel.lovelace.editor.menu.raw_editor\",\n          overflowAction: this._handleRawEditor,\n          visible: this._editMode,\n          overflow: true\n        }, {\n          icon: mdiViewDashboard,\n          key: \"ui.panel.lovelace.editor.menu.manage_dashboards\",\n          overflowAction: this._handleManageDashboards,\n          visible: this._editMode && !__DEMO__,\n          overflow: true\n        }, {\n          icon: mdiFileMultiple,\n          key: \"ui.panel.lovelace.editor.menu.manage_resources\",\n          overflowAction: this._handleManageResources,\n          visible: this._editMode && ((_this$hass$userData = this.hass.userData) === null || _this$hass$userData === void 0 ? void 0 : _this$hass$userData.showAdvanced),\n          overflow: true\n        }, {\n          icon: mdiMagnify,\n          key: \"ui.panel.lovelace.menu.search\",\n          buttonAction: this._showQuickBar,\n          overflowAction: this._handleShowQuickBar,\n          visible: !this._editMode,\n          overflow: this.narrow\n        }, {\n          icon: mdiCommentProcessingOutline,\n          key: \"ui.panel.lovelace.menu.assist\",\n          buttonAction: this._showVoiceCommandDialog,\n          overflowAction: this._handleShowVoiceCommandDialog,\n          visible: !this._editMode && this._conversation(this.hass.config.components),\n          overflow: this.narrow\n        }, {\n          icon: mdiRefresh,\n          key: \"ui.common.refresh\",\n          overflowAction: this._handleRefresh,\n          visible: !this._editMode && this._yamlMode,\n          overflow: true\n        }, {\n          icon: mdiShape,\n          key: \"ui.panel.lovelace.unused_entities.title\",\n          overflowAction: this._handleUnusedEntities,\n          visible: !this._editMode && this._yamlMode,\n          overflow: true\n        }, {\n          icon: mdiRefresh,\n          key: \"ui.panel.lovelace.menu.reload_resources\",\n          overflowAction: this._handleReloadResources,\n          visible: !this._editMode && ((_this$hass$panels$lov = this.hass.panels.lovelace) === null || _this$hass$panels$lov === void 0 || (_this$hass$panels$lov = _this$hass$panels$lov.config) === null || _this$hass$panels$lov === void 0 ? void 0 : _this$hass$panels$lov.mode) === \"yaml\",\n          overflow: true\n        }, {\n          icon: mdiPencil,\n          key: \"ui.panel.lovelace.menu.configure_ui\",\n          overflowAction: this._handleEnableEditMode,\n          buttonAction: this._enableEditMode,\n          visible: !this._editMode && ((_user = this.hass.user) === null || _user === void 0 ? void 0 : _user.is_admin) && !this.hass.config.recovery_mode,\n          overflow: true,\n          overflow_can_promote: true\n        }];\n        var overflowItems = items.filter(function (i) {\n          return i.visible && i.overflow;\n        });\n        var overflowCanPromote = overflowItems.length === 1 && overflowItems[0].overflow_can_promote;\n        var buttonItems = items.filter(function (i) {\n          return i.visible && (!i.overflow || overflowCanPromote);\n        });\n        buttonItems.forEach(function (i) {\n          result.push(html(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"<ha-icon-button\\n          slot=\\\"actionItems\\\"\\n          .label=\", \"\\n          .path=\", \"\\n          @click=\", \"\\n        ></ha-icon-button>\"])), _this3.hass.localize(i.key), i.icon, i.buttonAction));\n        });\n        if (overflowItems.length && !overflowCanPromote) {\n          var listItems = [];\n          overflowItems.forEach(function (i) {\n            listItems.push(html(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"<mwc-list-item\\n            graphic=\\\"icon\\\"\\n            @request-selected=\", \"\\n          >\\n            \", \"\\n            <ha-svg-icon slot=\\\"graphic\\\" .path=\", \"></ha-svg-icon>\\n          </mwc-list-item>\"])), i.overflowAction, _this3.hass.localize(i.key), i.icon));\n          });\n          result.push(html(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"<ha-button-menu slot=\\\"actionItems\\\">\\n          <ha-icon-button\\n            slot=\\\"trigger\\\"\\n            .label=\", \"\\n            .path=\", \"\\n          ></ha-icon-button>\\n          \", \"\\n        </ha-button-menu>\"])), this.hass.localize(\"ui.panel.lovelace.editor.menu.open\"), mdiDotsVertical, listItems));\n        }\n        return html(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\", \"\"])), result);\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        var _this$lovelace$config,\n          _this$lovelace,\n          _this4 = this;\n        var views = (_this$lovelace$config = (_this$lovelace = this.lovelace) === null || _this$lovelace === void 0 ? void 0 : _this$lovelace.config.views) !== null && _this$lovelace$config !== void 0 ? _this$lovelace$config : [];\n        var curViewConfig = typeof this._curView === \"number\" ? views[this._curView] : undefined;\n        return html(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n      <div\\n        class=\", \"\\n      >\\n        <div class=\\\"header\\\">\\n          <div class=\\\"toolbar\\\">\\n            \", \"\\n          </div>\\n          \", \"\\n        </div>\\n        <div id=\\\"view\\\" @ll-rebuild=\", \"></div>\\n      </div>\\n    \"])), classMap({\n          \"edit-mode\": this._editMode\n        }), this._editMode ? html(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\\n                  <div class=\\\"main-title\\\">\\n                    \", \"\\n                    <ha-icon-button\\n                      slot=\\\"actionItems\\\"\\n                      .label=\", \"\\n                      .path=\", \"\\n                      class=\\\"edit-icon\\\"\\n                      @click=\", \"\\n                    ></ha-icon-button>\\n                  </div>\\n                  <div class=\\\"action-items\\\">\", \"</div>\\n                \"])), this.config.title || this.hass.localize(\"ui.panel.lovelace.editor.header\"), this.hass.localize(\"ui.panel.lovelace.editor.edit_lovelace.edit_title\"), mdiPencil, this._editLovelace, this._renderActionItems()) : html(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n                  \", \"\\n                  \", \"\\n                  <div class=\\\"action-items\\\">\", \"</div>\\n                \"])), curViewConfig !== null && curViewConfig !== void 0 && curViewConfig.subview ? html(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"\\n                        <ha-icon-button-arrow-prev\\n                          slot=\\\"navigationIcon\\\"\\n                          @click=\", \"\\n                        ></ha-icon-button-arrow-prev>\\n                      \"])), this._goBack) : html(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"\\n                        <ha-menu-button\\n                          slot=\\\"navigationIcon\\\"\\n                          .hass=\", \"\\n                          .narrow=\", \"\\n                        ></ha-menu-button>\\n                      \"])), this.hass, this.narrow), curViewConfig !== null && curViewConfig !== void 0 && curViewConfig.subview ? html(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\"<div class=\\\"main-title\\\">\", \"</div>\"])), curViewConfig.title) : views.filter(function (view) {\n          return !view.subview;\n        }).length > 1 ? html(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"\\n                          <ha-tabs\\n                            slot=\\\"title\\\"\\n                            scrollable\\n                            .selected=\", \"\\n                            @iron-activate=\", \"\\n                            dir=\", \"\\n                          >\\n                            \", \"\\n                          </ha-tabs>\\n                        \"])), this._curView, this._handleViewSelected, computeRTLDirection(this.hass), views.map(function (view) {\n          return html(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([\"\\n                                <paper-tab\\n                                  aria-label=\", \"\\n                                  class=\", \"\\n                                >\\n                                  \", \"\\n                                </paper-tab>\\n                              \"])), ifDefined(view.title), classMap({\n            \"hide-tab\": Boolean(view.subview || view.visible !== undefined && (Array.isArray(view.visible) && !view.visible.some(function (e) {\n              var _user2;\n              return e.user === ((_user2 = _this4.hass.user) === null || _user2 === void 0 ? void 0 : _user2.id);\n            }) || view.visible === false))\n          }), view.icon ? html(_templateObject14 || (_templateObject14 = _taggedTemplateLiteral([\"\\n                                        <ha-icon\\n                                          title=\", \"\\n                                          .icon=\", \"\\n                                        ></ha-icon>\\n                                      \"])), ifDefined(view.title), view.icon) : view.title || \"Unnamed view\");\n        })) : html(_templateObject15 || (_templateObject15 = _taggedTemplateLiteral([\"<div class=\\\"main-title\\\">\\n                          \", \"\\n                        </div>\"])), this.config.title), this._renderActionItems()), this._editMode ? html(_templateObject16 || (_templateObject16 = _taggedTemplateLiteral([\"\\n                <paper-tabs\\n                  scrollable\\n                  .selected=\", \"\\n                  @iron-activate=\", \"\\n                  dir=\", \"\\n                >\\n                  \", \"\\n                  \", \"\\n                </paper-tabs>\\n              \"])), this._curView, this._handleViewSelected, computeRTLDirection(this.hass), views.map(function (view) {\n          return html(_templateObject17 || (_templateObject17 = _taggedTemplateLiteral([\"\\n                      <paper-tab\\n                        aria-label=\", \"\\n                        class=\", \"\\n                      >\\n                        \", \"\\n                        \", \"\\n                        \", \"\\n                      </paper-tab>\\n                    \"])), ifDefined(view.title), classMap({\n            \"hide-tab\": Boolean(!_this4._editMode && view.visible !== undefined && (Array.isArray(view.visible) && !view.visible.some(function (e) {\n              var _user3;\n              return e.user === ((_user3 = _this4.hass.user) === null || _user3 === void 0 ? void 0 : _user3.id);\n            }) || view.visible === false))\n          }), _this4._editMode ? html(_templateObject18 || (_templateObject18 = _taggedTemplateLiteral([\"\\n                              <ha-icon-button-arrow-prev\\n                                .hass=\", \"\\n                                .label=\", \"\\n                                class=\\\"edit-icon view\\\"\\n                                @click=\", \"\\n                                ?disabled=\", \"\\n                              ></ha-icon-button-arrow-prev>\\n                            \"])), _this4.hass, _this4.hass.localize(\"ui.panel.lovelace.editor.edit_view.move_left\"), _this4._moveViewLeft, _this4._curView === 0) : \"\", view.icon ? html(_templateObject19 || (_templateObject19 = _taggedTemplateLiteral([\"\\n                              <ha-icon\\n                                class=\", \"\\n                                title=\", \"\\n                                .icon=\", \"\\n                              ></ha-icon>\\n                            \"])), classMap({\n            \"child-view-icon\": Boolean(view.subview)\n          }), ifDefined(view.title), view.icon) : view.title || \"Unnamed view\", _this4._editMode ? html(_templateObject20 || (_templateObject20 = _taggedTemplateLiteral([\"\\n                              <ha-svg-icon\\n                                title=\", \"\\n                                class=\\\"edit-icon view\\\"\\n                                .path=\", \"\\n                                @click=\", \"\\n                              ></ha-svg-icon>\\n                              <ha-icon-button-arrow-next\\n                                .hass=\", \"\\n                                .label=\", \"\\n                                class=\\\"edit-icon view\\\"\\n                                @click=\", \"\\n                                ?disabled=\", \"\\n                              ></ha-icon-button-arrow-next>\\n                            \"])), _this4.hass.localize(\"ui.panel.lovelace.editor.edit_view.edit\"), mdiPencil, _this4._editView, _this4.hass, _this4.hass.localize(\"ui.panel.lovelace.editor.edit_view.move_right\"), _this4._moveViewRight, _this4._curView + 1 === views.length) : \"\");\n        }), this._editMode ? html(_templateObject21 || (_templateObject21 = _taggedTemplateLiteral([\"\\n                        <ha-icon-button\\n                          id=\\\"add-view\\\"\\n                          @click=\", \"\\n                          .label=\", \"\\n                          .path=\", \"\\n                        ></ha-icon-button>\\n                      \"])), this._addView, this.hass.localize(\"ui.panel.lovelace.editor.edit_view.add\"), mdiPlus) : \"\") : \"\", this._debouncedConfigChanged);\n      }\n    }, {\n      kind: \"field\",\n      key: \"_handleWindowScroll\",\n      value: function value() {\n        var _this5 = this;\n        return function () {\n          _this5.toggleAttribute(\"scrolled\", window.scrollY !== 0);\n        };\n      }\n    }, {\n      kind: \"field\",\n      key: \"_isVisible\",\n      value: function value() {\n        var _this6 = this;\n        return function (view) {\n          return Boolean(_this6._editMode || view.visible === undefined || view.visible === true || Array.isArray(view.visible) && view.visible.some(function (show) {\n            var _user4;\n            return show.user === ((_user4 = _this6.hass.user) === null || _user4 === void 0 ? void 0 : _user4.id);\n          }));\n        };\n      }\n    }, {\n      kind: \"method\",\n      key: \"_clearParam\",\n      value: function _clearParam(param) {\n        window.history.replaceState(null, \"\", constructUrlCurrentPath(removeSearchParam(param)));\n      }\n    }, {\n      kind: \"method\",\n      key: \"firstUpdated\",\n      value: function firstUpdated(changedProps) {\n        _get(_getPrototypeOf(HUIRoot.prototype), \"firstUpdated\", this).call(this, changedProps);\n        // Check for requested edit mode\n        var searchParams = extractSearchParamsObject();\n        if (searchParams.edit === \"1\") {\n          var _user5;\n          this._clearParam(\"edit\");\n          if ((_user5 = this.hass.user) !== null && _user5 !== void 0 && _user5.is_admin && this.lovelace.mode === \"storage\") {\n            this.lovelace.setEditMode(true);\n          }\n        } else if (searchParams.conversation === \"1\") {\n          this._clearParam(\"conversation\");\n          this._showVoiceCommandDialog();\n        }\n        window.addEventListener(\"scroll\", this._handleWindowScroll, {\n          passive: true\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(HUIRoot.prototype), \"disconnectedCallback\", this).call(this);\n        window.removeEventListener(\"scroll\", this._handleWindowScroll);\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProperties) {\n        var _this7 = this;\n        _get(_getPrototypeOf(HUIRoot.prototype), \"updated\", this).call(this, changedProperties);\n        var view = this._viewRoot;\n        var huiView = view.lastChild;\n        if (changedProperties.has(\"hass\") && huiView) {\n          huiView.hass = this.hass;\n        }\n        if (changedProperties.has(\"narrow\") && huiView) {\n          huiView.narrow = this.narrow;\n        }\n        var newSelectView;\n        var force = false;\n        var viewPath = this.route.path.split(\"/\")[1];\n        viewPath = viewPath ? decodeURI(viewPath) : undefined;\n        if (changedProperties.has(\"route\")) {\n          var views = this.config.views;\n          if (!viewPath && views.length) {\n            newSelectView = views.findIndex(this._isVisible);\n            this._navigateToView(views[newSelectView].path || newSelectView, true);\n          } else if (viewPath === \"hass-unused-entities\") {\n            newSelectView = \"hass-unused-entities\";\n          } else if (viewPath) {\n            var selectedView = viewPath;\n            var selectedViewInt = Number(selectedView);\n            var index = 0;\n            for (var i = 0; i < views.length; i++) {\n              if (views[i].path === selectedView || i === selectedViewInt) {\n                index = i;\n                break;\n              }\n            }\n            newSelectView = index;\n          }\n\n          // Will allow to override history scroll restoration when using back button\n          setTimeout(function () {\n            return scrollTo({\n              behavior: \"auto\",\n              top: 0\n            });\n          }, 1);\n        }\n        if (changedProperties.has(\"lovelace\")) {\n          var oldLovelace = changedProperties.get(\"lovelace\");\n          if (!oldLovelace || oldLovelace.config !== this.lovelace.config) {\n            // On config change, recreate the current view from scratch.\n            force = true;\n          }\n          if (!oldLovelace || oldLovelace.editMode !== this.lovelace.editMode) {\n            var _views = this.config && this.config.views;\n\n            // Leave unused entities when leaving edit mode\n            if (this.lovelace.mode === \"storage\" && viewPath === \"hass-unused-entities\") {\n              newSelectView = _views.findIndex(this._isVisible);\n              this._navigateToView(_views[newSelectView].path || newSelectView, true);\n            }\n          }\n          if (!force && huiView) {\n            huiView.lovelace = this.lovelace;\n          }\n        }\n        if (newSelectView !== undefined || force) {\n          if (force && newSelectView === undefined) {\n            newSelectView = this._curView;\n          }\n          // Will allow for ripples to start rendering\n          afterNextRender(function () {\n            return _this7._selectView(newSelectView, force);\n          });\n        }\n      }\n    }, {\n      kind: \"get\",\n      key: \"config\",\n      value: function config() {\n        return this.lovelace.config;\n      }\n    }, {\n      kind: \"get\",\n      key: \"_yamlMode\",\n      value: function _yamlMode() {\n        return this.lovelace.mode === \"yaml\";\n      }\n    }, {\n      kind: \"get\",\n      key: \"_editMode\",\n      value: function _editMode() {\n        return this.lovelace.editMode;\n      }\n    }, {\n      kind: \"get\",\n      key: \"_viewRoot\",\n      value: function _viewRoot() {\n        return this.shadowRoot.getElementById(\"view\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleRefresh\",\n      value: function _handleRefresh(ev) {\n        if (!shouldHandleRequestSelectedEvent(ev)) {\n          return;\n        }\n        fireEvent(this, \"config-refresh\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleReloadResources\",\n      value: function _handleReloadResources(ev) {\n        if (!shouldHandleRequestSelectedEvent(ev)) {\n          return;\n        }\n        this.hass.callService(\"lovelace\", \"reload_resources\");\n        showConfirmationDialog(this, {\n          title: this.hass.localize(\"ui.panel.lovelace.reload_resources.refresh_header\"),\n          text: this.hass.localize(\"ui.panel.lovelace.reload_resources.refresh_body\"),\n          confirmText: this.hass.localize(\"ui.common.refresh\"),\n          dismissText: this.hass.localize(\"ui.common.not_now\"),\n          confirm: function confirm() {\n            return location.reload();\n          }\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleShowQuickBar\",\n      value: function _handleShowQuickBar(ev) {\n        if (!shouldHandleRequestSelectedEvent(ev)) {\n          return;\n        }\n        this._showQuickBar();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_showQuickBar\",\n      value: function _showQuickBar() {\n        showQuickBar(this, {\n          commandMode: false,\n          hint: this.hass.localize(\"ui.tips.key_e_hint\")\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_goBack\",\n      value: function _goBack() {\n        var _this$lovelace$config2, _this$lovelace2;\n        var views = (_this$lovelace$config2 = (_this$lovelace2 = this.lovelace) === null || _this$lovelace2 === void 0 ? void 0 : _this$lovelace2.config.views) !== null && _this$lovelace$config2 !== void 0 ? _this$lovelace$config2 : [];\n        var curViewConfig = typeof this._curView === \"number\" ? views[this._curView] : undefined;\n        if ((curViewConfig === null || curViewConfig === void 0 ? void 0 : curViewConfig.back_path) != null) {\n          navigate(curViewConfig.back_path, {\n            replace: true\n          });\n        } else if (history.length > 1) {\n          history.back();\n        } else if (!views[0].subview) {\n          navigate(this.route.prefix, {\n            replace: true\n          });\n        } else {\n          navigate(\"/\");\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleRawEditor\",\n      value: function _handleRawEditor(ev) {\n        if (!shouldHandleRequestSelectedEvent(ev)) {\n          return;\n        }\n        this.lovelace.enableFullEditMode();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleManageDashboards\",\n      value: function _handleManageDashboards(ev) {\n        if (!shouldHandleRequestSelectedEvent(ev)) {\n          return;\n        }\n        navigate(\"/config/lovelace/dashboards\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleManageResources\",\n      value: function _handleManageResources(ev) {\n        if (!shouldHandleRequestSelectedEvent(ev)) {\n          return;\n        }\n        navigate(\"/config/lovelace/resources\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleUnusedEntities\",\n      value: function _handleUnusedEntities(ev) {\n        var _this$route;\n        if (!shouldHandleRequestSelectedEvent(ev)) {\n          return;\n        }\n        navigate(\"\".concat((_this$route = this.route) === null || _this$route === void 0 ? void 0 : _this$route.prefix, \"/hass-unused-entities\"));\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleShowVoiceCommandDialog\",\n      value: function _handleShowVoiceCommandDialog(ev) {\n        if (!shouldHandleRequestSelectedEvent(ev)) {\n          return;\n        }\n        this._showVoiceCommandDialog();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_showVoiceCommandDialog\",\n      value: function _showVoiceCommandDialog() {\n        showVoiceCommandDialog(this, this.hass, {\n          pipeline_id: \"last_used\"\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleEnableEditMode\",\n      value: function _handleEnableEditMode(ev) {\n        if (!shouldHandleRequestSelectedEvent(ev)) {\n          return;\n        }\n        this._enableEditMode();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_enableEditMode\",\n      value: function _enableEditMode() {\n        var _this8 = this;\n        if (this._yamlMode) {\n          showAlertDialog(this, {\n            text: this.hass.localize(\"ui.panel.lovelace.editor.yaml_unsupported\")\n          });\n          return;\n        }\n        if (isStrategyDashboard(this.lovelace.rawConfig) && !isLegacyStrategyConfig(this.lovelace.rawConfig.strategy)) {\n          showDashboardStrategyEditorDialog(this, {\n            config: this.lovelace.rawConfig,\n            saveConfig: this.lovelace.saveConfig,\n            takeControl: function takeControl() {\n              showSaveDialog(_this8, {\n                lovelace: _this8.lovelace,\n                mode: \"storage\",\n                narrow: _this8.narrow\n              });\n            },\n            showRawConfigEditor: function showRawConfigEditor() {\n              _this8.lovelace.enableFullEditMode();\n            }\n          });\n          return;\n        }\n        this.lovelace.setEditMode(true);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_editModeDisable\",\n      value: function _editModeDisable() {\n        this.lovelace.setEditMode(false);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_editLovelace\",\n      value: function _editLovelace() {\n        showEditLovelaceDialog(this, this.lovelace);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_navigateToView\",\n      value: function _navigateToView(path, replace) {\n        var url = this.lovelace.editMode ? \"\".concat(this.route.prefix, \"/\").concat(path, \"?\").concat(addSearchParam({\n          edit: \"1\"\n        })) : \"\".concat(this.route.prefix, \"/\").concat(path).concat(location.search);\n        var currentUrl = \"\".concat(location.pathname).concat(location.search);\n        if (currentUrl !== url) {\n          navigate(url, {\n            replace: replace\n          });\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_editView\",\n      value: function _editView() {\n        showEditViewDialog(this, {\n          lovelace: this.lovelace,\n          viewIndex: this._curView\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_moveViewLeft\",\n      value: function _moveViewLeft(ev) {\n        ev.stopPropagation();\n        if (this._curView === 0) {\n          return;\n        }\n        var lovelace = this.lovelace;\n        var oldIndex = this._curView;\n        var newIndex = this._curView - 1;\n        this._curView = newIndex;\n        if (!this.config.views[oldIndex].path) {\n          this._navigateToView(newIndex, true);\n        }\n        lovelace.saveConfig(swapView(lovelace.config, oldIndex, newIndex));\n      }\n    }, {\n      kind: \"method\",\n      key: \"_moveViewRight\",\n      value: function _moveViewRight(ev) {\n        ev.stopPropagation();\n        if (this._curView + 1 === this.lovelace.config.views.length) {\n          return;\n        }\n        var lovelace = this.lovelace;\n        var oldIndex = this._curView;\n        var newIndex = this._curView + 1;\n        this._curView = newIndex;\n        if (!this.config.views[oldIndex].path) {\n          this._navigateToView(newIndex, true);\n        }\n        lovelace.saveConfig(swapView(lovelace.config, oldIndex, newIndex));\n      }\n    }, {\n      kind: \"method\",\n      key: \"_addView\",\n      value: function _addView() {\n        var _this9 = this;\n        showEditViewDialog(this, {\n          lovelace: this.lovelace,\n          saveCallback: function saveCallback(viewIndex, viewConfig) {\n            var path = viewConfig.path || viewIndex;\n            _this9._navigateToView(path);\n          }\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleViewSelected\",\n      value: function _handleViewSelected(ev) {\n        ev.preventDefault();\n        var viewIndex = ev.detail.selected;\n        if (viewIndex !== this._curView) {\n          var path = this.config.views[viewIndex].path || viewIndex;\n          this._navigateToView(path);\n        } else if (!this._editMode) {\n          scrollTo({\n            behavior: \"smooth\",\n            top: 0\n          });\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_selectView\",\n      value: function _selectView(viewIndex, force) {\n        var _this10 = this;\n        if (!force && this._curView === viewIndex) {\n          return;\n        }\n        viewIndex = viewIndex === undefined ? 0 : viewIndex;\n        this._curView = viewIndex;\n        if (force) {\n          this._viewCache = {};\n        }\n\n        // Recreate a new element to clear the applied themes.\n        var root = this._viewRoot;\n        if (root.lastChild) {\n          root.removeChild(root.lastChild);\n        }\n        if (viewIndex === \"hass-unused-entities\") {\n          var unusedEntities = document.createElement(\"hui-unused-entities\");\n          // Wait for promise to resolve so that the element has been upgraded.\n          import(\"./editor/unused-entities/hui-unused-entities\").then(function () {\n            unusedEntities.hass = _this10.hass;\n            unusedEntities.lovelace = _this10.lovelace;\n            unusedEntities.narrow = _this10.narrow;\n          });\n          root.appendChild(unusedEntities);\n          return;\n        }\n        var view;\n        var viewConfig = this.config.views[viewIndex];\n        if (!viewConfig) {\n          this.lovelace.setEditMode(true);\n          return;\n        }\n        if (!force && this._viewCache[viewIndex]) {\n          view = this._viewCache[viewIndex];\n        } else {\n          view = document.createElement(\"hui-view\");\n          view.index = viewIndex;\n          this._viewCache[viewIndex] = view;\n        }\n        view.lovelace = this.lovelace;\n        view.hass = this.hass;\n        view.narrow = this.narrow;\n        var configBackground = viewConfig.background || this.config.background;\n        if (configBackground) {\n          this.style.setProperty(\"--lovelace-background\", configBackground);\n        } else {\n          this.style.removeProperty(\"--lovelace-background\");\n        }\n        root.appendChild(view);\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return [haStyle, css(_templateObject22 || (_templateObject22 = _taggedTemplateLiteral([\"\\n        :host {\\n          -ms-user-select: none;\\n          -webkit-user-select: none;\\n          -moz-user-select: none;\\n        }\\n        .header {\\n          background-color: var(--app-header-background-color);\\n          color: var(--app-header-text-color, white);\\n          border-bottom: var(--app-header-border-bottom, none);\\n          position: fixed;\\n          top: 0;\\n          width: var(--mdc-top-app-bar-width, 100%);\\n          padding-top: env(safe-area-inset-top);\\n          z-index: 4;\\n          transition: box-shadow 200ms linear;\\n        }\\n        :host([scrolled]) .header {\\n          box-shadow: var(\\n            --mdc-top-app-bar-fixed-box-shadow,\\n            0px 2px 4px -1px rgba(0, 0, 0, 0.2),\\n            0px 4px 5px 0px rgba(0, 0, 0, 0.14),\\n            0px 1px 10px 0px rgba(0, 0, 0, 0.12)\\n          );\\n        }\\n        .edit-mode .header {\\n          background-color: var(--app-header-edit-background-color, #455a64);\\n          color: var(--app-header-edit-text-color, white);\\n        }\\n        .toolbar {\\n          height: var(--header-height);\\n          display: flex;\\n          align-items: center;\\n          font-size: 20px;\\n          padding: 0px 12px;\\n          font-weight: 400;\\n          box-sizing: border-box;\\n        }\\n        @media (max-width: 599px) {\\n          .toolbar {\\n            padding: 0 4px;\\n          }\\n        }\\n        .main-title {\\n          margin: var(--margin-title);\\n          line-height: 20px;\\n          flex-grow: 1;\\n        }\\n        .action-items {\\n          white-space: nowrap;\\n          display: flex;\\n          align-items: center;\\n        }\\n        ha-tabs {\\n          width: 100%;\\n          height: 100%;\\n          margin-left: 4px;\\n          margin-inline-start: 4px;\\n          margin-inline-end: initial;\\n        }\\n        ha-tabs,\\n        paper-tabs {\\n          --paper-tabs-selection-bar-color: var(\\n            --app-header-selection-bar-color,\\n            var(--app-header-text-color, #fff)\\n          );\\n          text-transform: uppercase;\\n        }\\n        .edit-mode div[main-title] {\\n          pointer-events: auto;\\n        }\\n        .edit-mode paper-tabs {\\n          background-color: var(--app-header-edit-background-color, #455a64);\\n          color: var(--app-header-edit-text-color, #fff);\\n        }\\n        paper-tab.iron-selected .edit-icon {\\n          display: inline-flex;\\n        }\\n        .edit-icon {\\n          color: var(--accent-color);\\n          padding-left: 8px;\\n          padding-inline-start: 8px;\\n          vertical-align: middle;\\n          --mdc-theme-text-disabled-on-light: var(--disabled-text-color);\\n          direction: var(--direction);\\n        }\\n        .edit-icon.view {\\n          display: none;\\n        }\\n        #add-view {\\n          position: absolute;\\n          height: 44px;\\n        }\\n        #add-view ha-svg-icon {\\n          background-color: var(--accent-color);\\n          border-radius: 4px;\\n        }\\n        a {\\n          color: var(--text-primary-color, white);\\n        }\\n        mwc-button.warning:not([disabled]) {\\n          color: var(--error-color);\\n        }\\n        #view {\\n          position: relative;\\n          display: flex;\\n          padding-top: calc(var(--header-height) + env(safe-area-inset-top));\\n          min-height: 100vh;\\n          box-sizing: border-box;\\n          padding-left: env(safe-area-inset-left);\\n          padding-right: env(safe-area-inset-right);\\n          padding-inline-start: env(safe-area-inset-left);\\n          padding-inline-end: env(safe-area-inset-right);\\n          padding-bottom: env(safe-area-inset-bottom);\\n        }\\n        hui-view {\\n          background: var(\\n            --lovelace-background,\\n            var(--primary-background-color)\\n          );\\n        }\\n        #view > * {\\n          flex: 1 1 100%;\\n          max-width: 100%;\\n        }\\n        /**\\n         * In edit mode we have the tab bar on a new line *\\n         */\\n        .edit-mode #view {\\n          padding-top: calc(\\n            var(--header-height) + 48px + env(safe-area-inset-top)\\n          );\\n        }\\n        .hide-tab {\\n          display: none;\\n        }\\n        .menu-link {\\n          text-decoration: none;\\n        }\\n        .exit-edit-mode {\\n          --mdc-theme-primary: var(--app-header-edit-text-color, #fff);\\n          --mdc-button-outline-color: var(--app-header-edit-text-color, #fff);\\n          --mdc-typography-button-font-size: 14px;\\n        }\\n        .child-view-icon {\\n          opacity: 0.5;\\n        }\\n      \"])))];\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["mdiCodeBraces","mdiCommentProcessingOutline","mdiDotsVertical","mdiFileMultiple","mdiFormatListBulletedTriangle","mdiHelpCircle","mdiMagnify","mdiPencil","mdiPlus","mdiRefresh","mdiShape","mdiViewDashboard","LitElement","css","html","customElement","property","state","classMap","ifDefined","memoizeOne","isComponentLoaded","fireEvent","shouldHandleRequestSelectedEvent","navigate","constructUrlCurrentPath","addSearchParam","extractSearchParamsObject","removeSearchParam","computeRTLDirection","debounce","afterNextRender","showAlertDialog","showConfirmationDialog","showQuickBar","showVoiceCommandDialog","haStyle","documentationUrl","swapView","showEditLovelaceDialog","showEditViewDialog","showDashboardStrategyEditorDialog","isStrategyDashboard","showSaveDialog","isLegacyStrategyConfig","HUIRoot","_decorate","_initialize","_LitElement","_LitElement2","_inherits","_this","_classCallCheck","_callSuper","_assertThisInitialized","_debouncedConfigChanged","_selectView","_curView","_createClass","F","d","kind","decorators","attribute","key","value","type","Boolean","_this2","_components","hass","_renderActionItems","_this$hass$userData","_this$hass$panels$lov","_user","_this3","result","_editMode","push","_templateObject","_taggedTemplateLiteral","localize","_editModeDisable","items","icon","overflowAction","_handleUnusedEntities","visible","__DEMO__","overflow","_handleRawEditor","_handleManageDashboards","_handleManageResources","userData","showAdvanced","buttonAction","_showQuickBar","_handleShowQuickBar","narrow","_showVoiceCommandDialog","_handleShowVoiceCommandDialog","_conversation","config","components","_handleRefresh","_yamlMode","_handleReloadResources","panels","lovelace","mode","_handleEnableEditMode","_enableEditMode","user","is_admin","recovery_mode","overflow_can_promote","overflowItems","filter","i","overflowCanPromote","length","buttonItems","forEach","_templateObject2","listItems","_templateObject3","_templateObject4","_templateObject5","render","_this$lovelace$config","_this$lovelace","_this4","views","curViewConfig","undefined","_templateObject6","_templateObject7","title","_editLovelace","_templateObject8","subview","_templateObject9","_goBack","_templateObject10","_templateObject11","view","_templateObject12","_handleViewSelected","map","_templateObject13","Array","isArray","some","e","_user2","id","_templateObject14","_templateObject15","_templateObject16","_templateObject17","_user3","_templateObject18","_moveViewLeft","_templateObject19","_templateObject20","_editView","_moveViewRight","_templateObject21","_addView","_this5","toggleAttribute","window","scrollY","_this6","show","_user4","_clearParam","param","history","replaceState","firstUpdated","changedProps","_get","_getPrototypeOf","prototype","call","searchParams","edit","_user5","setEditMode","conversation","addEventListener","_handleWindowScroll","passive","disconnectedCallback","removeEventListener","updated","changedProperties","_this7","_viewRoot","huiView","lastChild","has","newSelectView","force","viewPath","route","path","split","decodeURI","findIndex","_isVisible","_navigateToView","selectedView","selectedViewInt","Number","index","setTimeout","scrollTo","behavior","top","oldLovelace","get","editMode","shadowRoot","getElementById","ev","callService","text","confirmText","dismissText","confirm","location","reload","commandMode","hint","_this$lovelace$config2","_this$lovelace2","back_path","replace","back","prefix","enableFullEditMode","_this$route","concat","pipeline_id","_this8","rawConfig","strategy","saveConfig","takeControl","showRawConfigEditor","url","search","currentUrl","pathname","viewIndex","stopPropagation","oldIndex","newIndex","_this9","saveCallback","viewConfig","preventDefault","detail","selected","_this10","_viewCache","root","removeChild","unusedEntities","document","createElement","then","appendChild","configBackground","background","style","setProperty","removeProperty","static","styles","_templateObject22"],"sources":["/Users/sercanardil/Desktop/frontend/src/panels/lovelace/hui-root.ts"],"sourcesContent":["import \"@material/mwc-button\";\nimport \"@material/mwc-list/mwc-list-item\";\nimport type { RequestSelectedDetail } from \"@material/mwc-list/mwc-list-item\";\nimport {\n  mdiCodeBraces,\n  mdiCommentProcessingOutline,\n  mdiDotsVertical,\n  mdiFileMultiple,\n  mdiFormatListBulletedTriangle,\n  mdiHelpCircle,\n  mdiMagnify,\n  mdiPencil,\n  mdiPlus,\n  mdiRefresh,\n  mdiShape,\n  mdiViewDashboard,\n} from \"@mdi/js\";\nimport \"@polymer/paper-tabs/paper-tab\";\nimport \"@polymer/paper-tabs/paper-tabs\";\nimport {\n  CSSResultGroup,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  css,\n  html,\n} from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { ifDefined } from \"lit/directives/if-defined\";\nimport memoizeOne from \"memoize-one\";\nimport { isComponentLoaded } from \"../../common/config/is_component_loaded\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { shouldHandleRequestSelectedEvent } from \"../../common/mwc/handle-request-selected-event\";\nimport { navigate } from \"../../common/navigate\";\nimport { constructUrlCurrentPath } from \"../../common/url/construct-url\";\nimport {\n  addSearchParam,\n  extractSearchParamsObject,\n  removeSearchParam,\n} from \"../../common/url/search-params\";\nimport { computeRTLDirection } from \"../../common/util/compute_rtl\";\nimport { debounce } from \"../../common/util/debounce\";\nimport { afterNextRender } from \"../../common/util/render-status\";\nimport \"../../components/ha-button-menu\";\nimport \"../../components/ha-icon\";\nimport \"../../components/ha-icon-button\";\nimport \"../../components/ha-icon-button-arrow-next\";\nimport \"../../components/ha-icon-button-arrow-prev\";\nimport \"../../components/ha-menu-button\";\nimport \"../../components/ha-svg-icon\";\nimport \"../../components/ha-tabs\";\nimport type { LovelacePanelConfig } from \"../../data/lovelace\";\nimport {\n  showAlertDialog,\n  showConfirmationDialog,\n} from \"../../dialogs/generic/show-dialog-box\";\nimport { showQuickBar } from \"../../dialogs/quick-bar/show-dialog-quick-bar\";\nimport { showVoiceCommandDialog } from \"../../dialogs/voice-command-dialog/show-ha-voice-command-dialog\";\nimport { haStyle } from \"../../resources/styles\";\nimport type { HomeAssistant } from \"../../types\";\nimport { documentationUrl } from \"../../util/documentation-url\";\nimport { swapView } from \"./editor/config-util\";\nimport { showEditLovelaceDialog } from \"./editor/lovelace-editor/show-edit-lovelace-dialog\";\nimport { showEditViewDialog } from \"./editor/view-editor/show-edit-view-dialog\";\nimport { showDashboardStrategyEditorDialog } from \"./strategies/device-registry-detail/show-dialog-dashboard-strategy-editor\";\nimport type { Lovelace } from \"./types\";\nimport \"./views/hui-view\";\nimport type { HUIView } from \"./views/hui-view\";\nimport { LovelaceViewConfig } from \"../../data/lovelace/config/view\";\nimport {\n  LovelaceConfig,\n  isStrategyDashboard,\n} from \"../../data/lovelace/config/types\";\nimport { showSaveDialog } from \"./editor/show-save-config-dialog\";\nimport { isLegacyStrategyConfig } from \"./strategies/legacy-strategy\";\nimport { LocalizeKeys } from \"../../common/translations/localize\";\n\n@customElement(\"hui-root\")\nclass HUIRoot extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public lovelace?: Lovelace;\n\n  @property({ type: Boolean }) public narrow = false;\n\n  @property({ attribute: false }) public route?: {\n    path: string;\n    prefix: string;\n  };\n\n  @state() private _curView?: number | \"hass-unused-entities\";\n\n  private _viewCache?: { [viewId: string]: HUIView };\n\n  private _debouncedConfigChanged: () => void;\n\n  private _conversation = memoizeOne((_components) =>\n    isComponentLoaded(this.hass, \"conversation\")\n  );\n\n  constructor() {\n    super();\n    // The view can trigger a re-render when it knows that certain\n    // web components have been loaded.\n    this._debouncedConfigChanged = debounce(\n      () => this._selectView(this._curView, true),\n      100,\n      false\n    );\n  }\n\n  private _renderActionItems(): TemplateResult {\n    const result: TemplateResult[] = [];\n    if (this._editMode) {\n      result.push(\n        html`<mwc-button\n            outlined\n            class=\"exit-edit-mode\"\n            .label=${this.hass!.localize(\n              \"ui.panel.lovelace.menu.exit_edit_mode\"\n            )}\n            @click=${this._editModeDisable}\n          ></mwc-button>\n          <a\n            href=${documentationUrl(this.hass, \"/dashboards/\")}\n            rel=\"noreferrer\"\n            class=\"menu-link\"\n            target=\"_blank\"\n          >\n            <ha-icon-button\n              .label=${this.hass!.localize(\"ui.panel.lovelace.menu.help\")}\n              .path=${mdiHelpCircle}\n            ></ha-icon-button>\n          </a>`\n      );\n    }\n\n    const items: {\n      icon: string;\n      key: LocalizeKeys;\n      overflowAction?: any;\n      buttonAction?: any;\n      visible: boolean | undefined;\n      overflow: boolean;\n      overflow_can_promote?: boolean;\n    }[] = [\n      {\n        icon: mdiFormatListBulletedTriangle,\n        key: \"ui.panel.lovelace.unused_entities.title\",\n        overflowAction: this._handleUnusedEntities,\n        visible: this._editMode && !__DEMO__,\n        overflow: true,\n      },\n      {\n        icon: mdiCodeBraces,\n        key: \"ui.panel.lovelace.editor.menu.raw_editor\",\n        overflowAction: this._handleRawEditor,\n        visible: this._editMode,\n        overflow: true,\n      },\n      {\n        icon: mdiViewDashboard,\n        key: \"ui.panel.lovelace.editor.menu.manage_dashboards\",\n        overflowAction: this._handleManageDashboards,\n        visible: this._editMode && !__DEMO__,\n        overflow: true,\n      },\n      {\n        icon: mdiFileMultiple,\n        key: \"ui.panel.lovelace.editor.menu.manage_resources\",\n        overflowAction: this._handleManageResources,\n        visible: this._editMode && this.hass.userData?.showAdvanced,\n        overflow: true,\n      },\n      {\n        icon: mdiMagnify,\n        key: \"ui.panel.lovelace.menu.search\",\n        buttonAction: this._showQuickBar,\n        overflowAction: this._handleShowQuickBar,\n        visible: !this._editMode,\n        overflow: this.narrow,\n      },\n      {\n        icon: mdiCommentProcessingOutline,\n        key: \"ui.panel.lovelace.menu.assist\",\n        buttonAction: this._showVoiceCommandDialog,\n        overflowAction: this._handleShowVoiceCommandDialog,\n        visible:\n          !this._editMode && this._conversation(this.hass.config.components),\n        overflow: this.narrow,\n      },\n      {\n        icon: mdiRefresh,\n        key: \"ui.common.refresh\",\n        overflowAction: this._handleRefresh,\n        visible: !this._editMode && this._yamlMode,\n        overflow: true,\n      },\n      {\n        icon: mdiShape,\n        key: \"ui.panel.lovelace.unused_entities.title\",\n        overflowAction: this._handleUnusedEntities,\n        visible: !this._editMode && this._yamlMode,\n        overflow: true,\n      },\n      {\n        icon: mdiRefresh,\n        key: \"ui.panel.lovelace.menu.reload_resources\",\n        overflowAction: this._handleReloadResources,\n        visible:\n          !this._editMode &&\n          (this.hass.panels.lovelace?.config as LovelacePanelConfig)?.mode ===\n            \"yaml\",\n        overflow: true,\n      },\n      {\n        icon: mdiPencil,\n        key: \"ui.panel.lovelace.menu.configure_ui\",\n        overflowAction: this._handleEnableEditMode,\n        buttonAction: this._enableEditMode,\n        visible:\n          !this._editMode &&\n          this.hass!.user?.is_admin &&\n          !this.hass!.config.recovery_mode,\n        overflow: true,\n        overflow_can_promote: true,\n      },\n    ];\n\n    const overflowItems = items.filter((i) => i.visible && i.overflow);\n    const overflowCanPromote =\n      overflowItems.length === 1 && overflowItems[0].overflow_can_promote;\n    const buttonItems = items.filter(\n      (i) => i.visible && (!i.overflow || overflowCanPromote)\n    );\n\n    buttonItems.forEach((i) => {\n      result.push(\n        html`<ha-icon-button\n          slot=\"actionItems\"\n          .label=${this.hass!.localize(i.key)}\n          .path=${i.icon}\n          @click=${i.buttonAction}\n        ></ha-icon-button>`\n      );\n    });\n    if (overflowItems.length && !overflowCanPromote) {\n      const listItems: TemplateResult[] = [];\n      overflowItems.forEach((i) => {\n        listItems.push(\n          html`<mwc-list-item\n            graphic=\"icon\"\n            @request-selected=${i.overflowAction}\n          >\n            ${this.hass!.localize(i.key)}\n            <ha-svg-icon slot=\"graphic\" .path=${i.icon}></ha-svg-icon>\n          </mwc-list-item>`\n        );\n      });\n      result.push(\n        html`<ha-button-menu slot=\"actionItems\">\n          <ha-icon-button\n            slot=\"trigger\"\n            .label=${this.hass!.localize(\"ui.panel.lovelace.editor.menu.open\")}\n            .path=${mdiDotsVertical}\n          ></ha-icon-button>\n          ${listItems}\n        </ha-button-menu>`\n      );\n    }\n    return html`${result}`;\n  }\n\n  protected render(): TemplateResult {\n    const views = this.lovelace?.config.views ?? [];\n\n    const curViewConfig =\n      typeof this._curView === \"number\" ? views[this._curView] : undefined;\n\n    return html`\n      <div\n        class=${classMap({\n          \"edit-mode\": this._editMode,\n        })}\n      >\n        <div class=\"header\">\n          <div class=\"toolbar\">\n            ${this._editMode\n              ? html`\n                  <div class=\"main-title\">\n                    ${this.config.title ||\n                    this.hass!.localize(\"ui.panel.lovelace.editor.header\")}\n                    <ha-icon-button\n                      slot=\"actionItems\"\n                      .label=${this.hass!.localize(\n                        \"ui.panel.lovelace.editor.edit_lovelace.edit_title\"\n                      )}\n                      .path=${mdiPencil}\n                      class=\"edit-icon\"\n                      @click=${this._editLovelace}\n                    ></ha-icon-button>\n                  </div>\n                  <div class=\"action-items\">${this._renderActionItems()}</div>\n                `\n              : html`\n                  ${curViewConfig?.subview\n                    ? html`\n                        <ha-icon-button-arrow-prev\n                          slot=\"navigationIcon\"\n                          @click=${this._goBack}\n                        ></ha-icon-button-arrow-prev>\n                      `\n                    : html`\n                        <ha-menu-button\n                          slot=\"navigationIcon\"\n                          .hass=${this.hass}\n                          .narrow=${this.narrow}\n                        ></ha-menu-button>\n                      `}\n                  ${curViewConfig?.subview\n                    ? html`<div class=\"main-title\">${curViewConfig.title}</div>`\n                    : views.filter((view) => !view.subview).length > 1\n                      ? html`\n                          <ha-tabs\n                            slot=\"title\"\n                            scrollable\n                            .selected=${this._curView}\n                            @iron-activate=${this._handleViewSelected}\n                            dir=${computeRTLDirection(this.hass!)}\n                          >\n                            ${views.map(\n                              (view) => html`\n                                <paper-tab\n                                  aria-label=${ifDefined(view.title)}\n                                  class=${classMap({\n                                    \"hide-tab\": Boolean(\n                                      view.subview ||\n                                        (view.visible !== undefined &&\n                                          ((Array.isArray(view.visible) &&\n                                            !view.visible.some(\n                                              (e) =>\n                                                e.user === this.hass!.user?.id\n                                            )) ||\n                                            view.visible === false))\n                                    ),\n                                  })}\n                                >\n                                  ${view.icon\n                                    ? html`\n                                        <ha-icon\n                                          title=${ifDefined(view.title)}\n                                          .icon=${view.icon}\n                                        ></ha-icon>\n                                      `\n                                    : view.title || \"Unnamed view\"}\n                                </paper-tab>\n                              `\n                            )}\n                          </ha-tabs>\n                        `\n                      : html`<div class=\"main-title\">\n                          ${this.config.title}\n                        </div>`}\n                  <div class=\"action-items\">${this._renderActionItems()}</div>\n                `}\n          </div>\n          ${this._editMode\n            ? html`\n                <paper-tabs\n                  scrollable\n                  .selected=${this._curView}\n                  @iron-activate=${this._handleViewSelected}\n                  dir=${computeRTLDirection(this.hass!)}\n                >\n                  ${views.map(\n                    (view) => html`\n                      <paper-tab\n                        aria-label=${ifDefined(view.title)}\n                        class=${classMap({\n                          \"hide-tab\": Boolean(\n                            !this._editMode &&\n                              view.visible !== undefined &&\n                              ((Array.isArray(view.visible) &&\n                                !view.visible.some(\n                                  (e) => e.user === this.hass!.user?.id\n                                )) ||\n                                view.visible === false)\n                          ),\n                        })}\n                      >\n                        ${this._editMode\n                          ? html`\n                              <ha-icon-button-arrow-prev\n                                .hass=${this.hass}\n                                .label=${this.hass!.localize(\n                                  \"ui.panel.lovelace.editor.edit_view.move_left\"\n                                )}\n                                class=\"edit-icon view\"\n                                @click=${this._moveViewLeft}\n                                ?disabled=${this._curView === 0}\n                              ></ha-icon-button-arrow-prev>\n                            `\n                          : \"\"}\n                        ${view.icon\n                          ? html`\n                              <ha-icon\n                                class=${classMap({\n                                  \"child-view-icon\": Boolean(view.subview),\n                                })}\n                                title=${ifDefined(view.title)}\n                                .icon=${view.icon}\n                              ></ha-icon>\n                            `\n                          : view.title || \"Unnamed view\"}\n                        ${this._editMode\n                          ? html`\n                              <ha-svg-icon\n                                title=${this.hass!.localize(\n                                  \"ui.panel.lovelace.editor.edit_view.edit\"\n                                )}\n                                class=\"edit-icon view\"\n                                .path=${mdiPencil}\n                                @click=${this._editView}\n                              ></ha-svg-icon>\n                              <ha-icon-button-arrow-next\n                                .hass=${this.hass}\n                                .label=${this.hass!.localize(\n                                  \"ui.panel.lovelace.editor.edit_view.move_right\"\n                                )}\n                                class=\"edit-icon view\"\n                                @click=${this._moveViewRight}\n                                ?disabled=${(this._curView! as number) + 1 ===\n                                views.length}\n                              ></ha-icon-button-arrow-next>\n                            `\n                          : \"\"}\n                      </paper-tab>\n                    `\n                  )}\n                  ${this._editMode\n                    ? html`\n                        <ha-icon-button\n                          id=\"add-view\"\n                          @click=${this._addView}\n                          .label=${this.hass!.localize(\n                            \"ui.panel.lovelace.editor.edit_view.add\"\n                          )}\n                          .path=${mdiPlus}\n                        ></ha-icon-button>\n                      `\n                    : \"\"}\n                </paper-tabs>\n              `\n            : \"\"}\n        </div>\n        <div id=\"view\" @ll-rebuild=${this._debouncedConfigChanged}></div>\n      </div>\n    `;\n  }\n\n  private _handleWindowScroll = () => {\n    this.toggleAttribute(\"scrolled\", window.scrollY !== 0);\n  };\n\n  private _isVisible = (view: LovelaceViewConfig) =>\n    Boolean(\n      this._editMode ||\n        view.visible === undefined ||\n        view.visible === true ||\n        (Array.isArray(view.visible) &&\n          view.visible.some((show) => show.user === this.hass!.user?.id))\n    );\n\n  private _clearParam(param: string) {\n    window.history.replaceState(\n      null,\n      \"\",\n      constructUrlCurrentPath(removeSearchParam(param))\n    );\n  }\n\n  protected firstUpdated(changedProps: PropertyValues) {\n    super.firstUpdated(changedProps);\n    // Check for requested edit mode\n    const searchParams = extractSearchParamsObject();\n    if (searchParams.edit === \"1\") {\n      this._clearParam(\"edit\");\n      if (this.hass!.user?.is_admin && this.lovelace!.mode === \"storage\") {\n        this.lovelace!.setEditMode(true);\n      }\n    } else if (searchParams.conversation === \"1\") {\n      this._clearParam(\"conversation\");\n      this._showVoiceCommandDialog();\n    }\n    window.addEventListener(\"scroll\", this._handleWindowScroll, {\n      passive: true,\n    });\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    window.removeEventListener(\"scroll\", this._handleWindowScroll);\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n\n    const view = this._viewRoot;\n    const huiView = view.lastChild as HUIView;\n\n    if (changedProperties.has(\"hass\") && huiView) {\n      huiView.hass = this.hass;\n    }\n\n    if (changedProperties.has(\"narrow\") && huiView) {\n      huiView.narrow = this.narrow;\n    }\n\n    let newSelectView;\n    let force = false;\n\n    let viewPath: string | undefined = this.route!.path.split(\"/\")[1];\n    viewPath = viewPath ? decodeURI(viewPath) : undefined;\n\n    if (changedProperties.has(\"route\")) {\n      const views = this.config.views;\n\n      if (!viewPath && views.length) {\n        newSelectView = views.findIndex(this._isVisible);\n        this._navigateToView(views[newSelectView].path || newSelectView, true);\n      } else if (viewPath === \"hass-unused-entities\") {\n        newSelectView = \"hass-unused-entities\";\n      } else if (viewPath) {\n        const selectedView = viewPath;\n        const selectedViewInt = Number(selectedView);\n        let index = 0;\n        for (let i = 0; i < views.length; i++) {\n          if (views[i].path === selectedView || i === selectedViewInt) {\n            index = i;\n            break;\n          }\n        }\n        newSelectView = index;\n      }\n\n      // Will allow to override history scroll restoration when using back button\n      setTimeout(() => scrollTo({ behavior: \"auto\", top: 0 }), 1);\n    }\n\n    if (changedProperties.has(\"lovelace\")) {\n      const oldLovelace = changedProperties.get(\"lovelace\") as\n        | Lovelace\n        | undefined;\n\n      if (!oldLovelace || oldLovelace.config !== this.lovelace!.config) {\n        // On config change, recreate the current view from scratch.\n        force = true;\n      }\n\n      if (!oldLovelace || oldLovelace.editMode !== this.lovelace!.editMode) {\n        const views = this.config && this.config.views;\n\n        // Leave unused entities when leaving edit mode\n        if (\n          this.lovelace!.mode === \"storage\" &&\n          viewPath === \"hass-unused-entities\"\n        ) {\n          newSelectView = views.findIndex(this._isVisible);\n          this._navigateToView(\n            views[newSelectView].path || newSelectView,\n            true\n          );\n        }\n      }\n\n      if (!force && huiView) {\n        huiView.lovelace = this.lovelace!;\n      }\n    }\n\n    if (newSelectView !== undefined || force) {\n      if (force && newSelectView === undefined) {\n        newSelectView = this._curView;\n      }\n      // Will allow for ripples to start rendering\n      afterNextRender(() => this._selectView(newSelectView, force));\n    }\n  }\n\n  private get config(): LovelaceConfig {\n    return this.lovelace!.config;\n  }\n\n  private get _yamlMode(): boolean {\n    return this.lovelace!.mode === \"yaml\";\n  }\n\n  private get _editMode() {\n    return this.lovelace!.editMode;\n  }\n\n  private get _viewRoot(): HTMLDivElement {\n    return this.shadowRoot!.getElementById(\"view\") as HTMLDivElement;\n  }\n\n  private _handleRefresh(ev: CustomEvent<RequestSelectedDetail>): void {\n    if (!shouldHandleRequestSelectedEvent(ev)) {\n      return;\n    }\n    fireEvent(this, \"config-refresh\");\n  }\n\n  private _handleReloadResources(ev: CustomEvent<RequestSelectedDetail>): void {\n    if (!shouldHandleRequestSelectedEvent(ev)) {\n      return;\n    }\n    this.hass.callService(\"lovelace\", \"reload_resources\");\n    showConfirmationDialog(this, {\n      title: this.hass!.localize(\n        \"ui.panel.lovelace.reload_resources.refresh_header\"\n      ),\n      text: this.hass!.localize(\n        \"ui.panel.lovelace.reload_resources.refresh_body\"\n      ),\n      confirmText: this.hass.localize(\"ui.common.refresh\"),\n      dismissText: this.hass.localize(\"ui.common.not_now\"),\n      confirm: () => location.reload(),\n    });\n  }\n\n  private _handleShowQuickBar(ev: CustomEvent<RequestSelectedDetail>): void {\n    if (!shouldHandleRequestSelectedEvent(ev)) {\n      return;\n    }\n    this._showQuickBar();\n  }\n\n  private _showQuickBar(): void {\n    showQuickBar(this, {\n      commandMode: false,\n      hint: this.hass.localize(\"ui.tips.key_e_hint\"),\n    });\n  }\n\n  private _goBack(): void {\n    const views = this.lovelace?.config.views ?? [];\n    const curViewConfig =\n      typeof this._curView === \"number\" ? views[this._curView] : undefined;\n\n    if (curViewConfig?.back_path != null) {\n      navigate(curViewConfig.back_path, { replace: true });\n    } else if (history.length > 1) {\n      history.back();\n    } else if (!views[0].subview) {\n      navigate(this.route!.prefix, { replace: true });\n    } else {\n      navigate(\"/\");\n    }\n  }\n\n  private _handleRawEditor(ev: CustomEvent<RequestSelectedDetail>): void {\n    if (!shouldHandleRequestSelectedEvent(ev)) {\n      return;\n    }\n    this.lovelace!.enableFullEditMode();\n  }\n\n  private _handleManageDashboards(\n    ev: CustomEvent<RequestSelectedDetail>\n  ): void {\n    if (!shouldHandleRequestSelectedEvent(ev)) {\n      return;\n    }\n    navigate(\"/config/lovelace/dashboards\");\n  }\n\n  private _handleManageResources(ev: CustomEvent<RequestSelectedDetail>): void {\n    if (!shouldHandleRequestSelectedEvent(ev)) {\n      return;\n    }\n    navigate(\"/config/lovelace/resources\");\n  }\n\n  private _handleUnusedEntities(ev: CustomEvent<RequestSelectedDetail>): void {\n    if (!shouldHandleRequestSelectedEvent(ev)) {\n      return;\n    }\n    navigate(`${this.route?.prefix}/hass-unused-entities`);\n  }\n\n  private _handleShowVoiceCommandDialog(\n    ev: CustomEvent<RequestSelectedDetail>\n  ): void {\n    if (!shouldHandleRequestSelectedEvent(ev)) {\n      return;\n    }\n    this._showVoiceCommandDialog();\n  }\n\n  private _showVoiceCommandDialog(): void {\n    showVoiceCommandDialog(this, this.hass, { pipeline_id: \"last_used\" });\n  }\n\n  private _handleEnableEditMode(ev: CustomEvent<RequestSelectedDetail>): void {\n    if (!shouldHandleRequestSelectedEvent(ev)) {\n      return;\n    }\n    this._enableEditMode();\n  }\n\n  private _enableEditMode(): void {\n    if (this._yamlMode) {\n      showAlertDialog(this, {\n        text: this.hass!.localize(\"ui.panel.lovelace.editor.yaml_unsupported\"),\n      });\n      return;\n    }\n    if (\n      isStrategyDashboard(this.lovelace!.rawConfig) &&\n      !isLegacyStrategyConfig(this.lovelace!.rawConfig.strategy)\n    ) {\n      showDashboardStrategyEditorDialog(this, {\n        config: this.lovelace!.rawConfig,\n        saveConfig: this.lovelace!.saveConfig,\n        takeControl: () => {\n          showSaveDialog(this, {\n            lovelace: this.lovelace!,\n            mode: \"storage\",\n            narrow: this.narrow!,\n          });\n        },\n        showRawConfigEditor: () => {\n          this.lovelace!.enableFullEditMode();\n        },\n      });\n      return;\n    }\n    this.lovelace!.setEditMode(true);\n  }\n\n  private _editModeDisable(): void {\n    this.lovelace!.setEditMode(false);\n  }\n\n  private _editLovelace() {\n    showEditLovelaceDialog(this, this.lovelace!);\n  }\n\n  private _navigateToView(path: string | number, replace?: boolean) {\n    const url = this.lovelace!.editMode\n      ? `${this.route!.prefix}/${path}?${addSearchParam({ edit: \"1\" })}`\n      : `${this.route!.prefix}/${path}${location.search}`;\n\n    const currentUrl = `${location.pathname}${location.search}`;\n    if (currentUrl !== url) {\n      navigate(url, { replace });\n    }\n  }\n\n  private _editView() {\n    showEditViewDialog(this, {\n      lovelace: this.lovelace!,\n      viewIndex: this._curView as number,\n    });\n  }\n\n  private _moveViewLeft(ev) {\n    ev.stopPropagation();\n    if (this._curView === 0) {\n      return;\n    }\n    const lovelace = this.lovelace!;\n    const oldIndex = this._curView as number;\n    const newIndex = (this._curView as number) - 1;\n    this._curView = newIndex;\n    if (!this.config.views[oldIndex].path) {\n      this._navigateToView(newIndex, true);\n    }\n    lovelace.saveConfig(swapView(lovelace.config, oldIndex, newIndex));\n  }\n\n  private _moveViewRight(ev) {\n    ev.stopPropagation();\n    if ((this._curView! as number) + 1 === this.lovelace!.config.views.length) {\n      return;\n    }\n    const lovelace = this.lovelace!;\n    const oldIndex = this._curView as number;\n    const newIndex = (this._curView as number) + 1;\n    this._curView = newIndex;\n    if (!this.config.views[oldIndex].path) {\n      this._navigateToView(newIndex, true);\n    }\n    lovelace.saveConfig(swapView(lovelace.config, oldIndex, newIndex));\n  }\n\n  private _addView() {\n    showEditViewDialog(this, {\n      lovelace: this.lovelace!,\n      saveCallback: (viewIndex: number, viewConfig: LovelaceViewConfig) => {\n        const path = viewConfig.path || viewIndex;\n        this._navigateToView(path);\n      },\n    });\n  }\n\n  private _handleViewSelected(ev) {\n    ev.preventDefault();\n    const viewIndex = ev.detail.selected as number;\n    if (viewIndex !== this._curView) {\n      const path = this.config.views[viewIndex].path || viewIndex;\n      this._navigateToView(path);\n    } else if (!this._editMode) {\n      scrollTo({ behavior: \"smooth\", top: 0 });\n    }\n  }\n\n  private _selectView(viewIndex: HUIRoot[\"_curView\"], force: boolean): void {\n    if (!force && this._curView === viewIndex) {\n      return;\n    }\n\n    viewIndex = viewIndex === undefined ? 0 : viewIndex;\n\n    this._curView = viewIndex;\n\n    if (force) {\n      this._viewCache = {};\n    }\n\n    // Recreate a new element to clear the applied themes.\n    const root = this._viewRoot;\n\n    if (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    if (viewIndex === \"hass-unused-entities\") {\n      const unusedEntities = document.createElement(\"hui-unused-entities\");\n      // Wait for promise to resolve so that the element has been upgraded.\n      import(\"./editor/unused-entities/hui-unused-entities\").then(() => {\n        unusedEntities.hass = this.hass!;\n        unusedEntities.lovelace = this.lovelace!;\n        unusedEntities.narrow = this.narrow;\n      });\n      root.appendChild(unusedEntities);\n      return;\n    }\n\n    let view;\n    const viewConfig = this.config.views[viewIndex];\n\n    if (!viewConfig) {\n      this.lovelace!.setEditMode(true);\n      return;\n    }\n\n    if (!force && this._viewCache![viewIndex]) {\n      view = this._viewCache![viewIndex];\n    } else {\n      view = document.createElement(\"hui-view\");\n      view.index = viewIndex;\n      this._viewCache![viewIndex] = view;\n    }\n\n    view.lovelace = this.lovelace;\n    view.hass = this.hass;\n    view.narrow = this.narrow;\n\n    const configBackground = viewConfig.background || this.config.background;\n\n    if (configBackground) {\n      this.style.setProperty(\"--lovelace-background\", configBackground);\n    } else {\n      this.style.removeProperty(\"--lovelace-background\");\n    }\n\n    root.appendChild(view);\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      css`\n        :host {\n          -ms-user-select: none;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n        }\n        .header {\n          background-color: var(--app-header-background-color);\n          color: var(--app-header-text-color, white);\n          border-bottom: var(--app-header-border-bottom, none);\n          position: fixed;\n          top: 0;\n          width: var(--mdc-top-app-bar-width, 100%);\n          padding-top: env(safe-area-inset-top);\n          z-index: 4;\n          transition: box-shadow 200ms linear;\n        }\n        :host([scrolled]) .header {\n          box-shadow: var(\n            --mdc-top-app-bar-fixed-box-shadow,\n            0px 2px 4px -1px rgba(0, 0, 0, 0.2),\n            0px 4px 5px 0px rgba(0, 0, 0, 0.14),\n            0px 1px 10px 0px rgba(0, 0, 0, 0.12)\n          );\n        }\n        .edit-mode .header {\n          background-color: var(--app-header-edit-background-color, #455a64);\n          color: var(--app-header-edit-text-color, white);\n        }\n        .toolbar {\n          height: var(--header-height);\n          display: flex;\n          align-items: center;\n          font-size: 20px;\n          padding: 0px 12px;\n          font-weight: 400;\n          box-sizing: border-box;\n        }\n        @media (max-width: 599px) {\n          .toolbar {\n            padding: 0 4px;\n          }\n        }\n        .main-title {\n          margin: var(--margin-title);\n          line-height: 20px;\n          flex-grow: 1;\n        }\n        .action-items {\n          white-space: nowrap;\n          display: flex;\n          align-items: center;\n        }\n        ha-tabs {\n          width: 100%;\n          height: 100%;\n          margin-left: 4px;\n          margin-inline-start: 4px;\n          margin-inline-end: initial;\n        }\n        ha-tabs,\n        paper-tabs {\n          --paper-tabs-selection-bar-color: var(\n            --app-header-selection-bar-color,\n            var(--app-header-text-color, #fff)\n          );\n          text-transform: uppercase;\n        }\n        .edit-mode div[main-title] {\n          pointer-events: auto;\n        }\n        .edit-mode paper-tabs {\n          background-color: var(--app-header-edit-background-color, #455a64);\n          color: var(--app-header-edit-text-color, #fff);\n        }\n        paper-tab.iron-selected .edit-icon {\n          display: inline-flex;\n        }\n        .edit-icon {\n          color: var(--accent-color);\n          padding-left: 8px;\n          padding-inline-start: 8px;\n          vertical-align: middle;\n          --mdc-theme-text-disabled-on-light: var(--disabled-text-color);\n          direction: var(--direction);\n        }\n        .edit-icon.view {\n          display: none;\n        }\n        #add-view {\n          position: absolute;\n          height: 44px;\n        }\n        #add-view ha-svg-icon {\n          background-color: var(--accent-color);\n          border-radius: 4px;\n        }\n        a {\n          color: var(--text-primary-color, white);\n        }\n        mwc-button.warning:not([disabled]) {\n          color: var(--error-color);\n        }\n        #view {\n          position: relative;\n          display: flex;\n          padding-top: calc(var(--header-height) + env(safe-area-inset-top));\n          min-height: 100vh;\n          box-sizing: border-box;\n          padding-left: env(safe-area-inset-left);\n          padding-right: env(safe-area-inset-right);\n          padding-inline-start: env(safe-area-inset-left);\n          padding-inline-end: env(safe-area-inset-right);\n          padding-bottom: env(safe-area-inset-bottom);\n        }\n        hui-view {\n          background: var(\n            --lovelace-background,\n            var(--primary-background-color)\n          );\n        }\n        #view > * {\n          flex: 1 1 100%;\n          max-width: 100%;\n        }\n        /**\n         * In edit mode we have the tab bar on a new line *\n         */\n        .edit-mode #view {\n          padding-top: calc(\n            var(--header-height) + 48px + env(safe-area-inset-top)\n          );\n        }\n        .hide-tab {\n          display: none;\n        }\n        .menu-link {\n          text-decoration: none;\n        }\n        .exit-edit-mode {\n          --mdc-theme-primary: var(--app-header-edit-text-color, #fff);\n          --mdc-button-outline-color: var(--app-header-edit-text-color, #fff);\n          --mdc-typography-button-font-size: 14px;\n        }\n        .child-view-icon {\n          opacity: 0.5;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-root\": HUIRoot;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}