{"ast":null,"code":"import { throttle } from \"../util/throttle\";\nconst throttleReplaceState = throttle(value => {\n  history.replaceState({\n    scrollPosition: value\n  }, \"\");\n}, 300);\nexport const restoreScroll = selector => element => ({\n  kind: \"method\",\n  placement: \"prototype\",\n  key: element.key,\n  descriptor: {\n    set(value) {\n      throttleReplaceState(value);\n      this[`__${String(element.key)}`] = value;\n    },\n    get() {\n      var _history$state;\n      return this[`__${String(element.key)}`] || ((_history$state = history.state) === null || _history$state === void 0 ? void 0 : _history$state.scrollPosition);\n    },\n    enumerable: true,\n    configurable: true\n  },\n  finisher(cls) {\n    const connectedCallback = cls.prototype.connectedCallback;\n    cls.prototype.connectedCallback = function () {\n      connectedCallback.call(this);\n      const scrollPos = this[element.key];\n      if (scrollPos) {\n        this.updateComplete.then(() => {\n          const target = this.renderRoot.querySelector(selector);\n          if (!target) {\n            return;\n          }\n          setTimeout(() => {\n            target.scrollTop = scrollPos;\n          }, 0);\n        });\n      }\n    };\n  }\n});","map":{"version":3,"names":["throttle","throttleReplaceState","value","history","replaceState","scrollPosition","restoreScroll","selector","element","kind","placement","key","descriptor","set","String","get","_history$state","state","enumerable","configurable","finisher","cls","connectedCallback","prototype","call","scrollPos","updateComplete","then","target","renderRoot","querySelector","setTimeout","scrollTop"],"sources":["/Users/sercanardil/Desktop/frontend/src/common/decorators/restore-scroll.ts"],"sourcesContent":["import type { LitElement } from \"lit\";\nimport type { ClassElement } from \"../../types\";\nimport { throttle } from \"../util/throttle\";\n\nconst throttleReplaceState = throttle((value) => {\n  history.replaceState({ scrollPosition: value }, \"\");\n}, 300);\n\nexport const restoreScroll =\n  (selector: string): any =>\n  (element: ClassElement) => ({\n    kind: \"method\",\n    placement: \"prototype\",\n    key: element.key,\n    descriptor: {\n      set(this: LitElement, value: number) {\n        throttleReplaceState(value);\n        this[`__${String(element.key)}`] = value;\n      },\n      get(this: LitElement) {\n        return (\n          this[`__${String(element.key)}`] || history.state?.scrollPosition\n        );\n      },\n      enumerable: true,\n      configurable: true,\n    },\n    finisher(cls: typeof LitElement) {\n      const connectedCallback = cls.prototype.connectedCallback;\n      cls.prototype.connectedCallback = function () {\n        connectedCallback.call(this);\n        const scrollPos = this[element.key];\n        if (scrollPos) {\n          this.updateComplete.then(() => {\n            const target = this.renderRoot.querySelector(selector);\n            if (!target) {\n              return;\n            }\n            setTimeout(() => {\n              target.scrollTop = scrollPos;\n            }, 0);\n          });\n        }\n      };\n    },\n  });\n"],"mappings":"AAEA,SAASA,QAAQ,QAAQ,kBAAkB;AAE3C,MAAMC,oBAAoB,GAAGD,QAAQ,CAAEE,KAAK,IAAK;EAC/CC,OAAO,CAACC,YAAY,CAAC;IAAEC,cAAc,EAAEH;EAAM,CAAC,EAAE,EAAE,CAAC;AACrD,CAAC,EAAE,GAAG,CAAC;AAEP,OAAO,MAAMI,aAAa,GACvBC,QAAgB,IAChBC,OAAqB,KAAM;EAC1BC,IAAI,EAAE,QAAQ;EACdC,SAAS,EAAE,WAAW;EACtBC,GAAG,EAAEH,OAAO,CAACG,GAAG;EAChBC,UAAU,EAAE;IACVC,GAAGA,CAAmBX,KAAa,EAAE;MACnCD,oBAAoB,CAACC,KAAK,CAAC;MAC3B,IAAI,CAAE,KAAIY,MAAM,CAACN,OAAO,CAACG,GAAG,CAAE,EAAC,CAAC,GAAGT,KAAK;IAC1C,CAAC;IACDa,GAAGA,CAAA,EAAmB;MAAA,IAAAC,cAAA;MACpB,OACE,IAAI,CAAE,KAAIF,MAAM,CAACN,OAAO,CAACG,GAAG,CAAE,EAAC,CAAC,MAAAK,cAAA,GAAIb,OAAO,CAACc,KAAK,cAAAD,cAAA,uBAAbA,cAAA,CAAeX,cAAc;IAErE,CAAC;IACDa,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAChB,CAAC;EACDC,QAAQA,CAACC,GAAsB,EAAE;IAC/B,MAAMC,iBAAiB,GAAGD,GAAG,CAACE,SAAS,CAACD,iBAAiB;IACzDD,GAAG,CAACE,SAAS,CAACD,iBAAiB,GAAG,YAAY;MAC5CA,iBAAiB,CAACE,IAAI,CAAC,IAAI,CAAC;MAC5B,MAAMC,SAAS,GAAG,IAAI,CAACjB,OAAO,CAACG,GAAG,CAAC;MACnC,IAAIc,SAAS,EAAE;QACb,IAAI,CAACC,cAAc,CAACC,IAAI,CAAC,MAAM;UAC7B,MAAMC,MAAM,GAAG,IAAI,CAACC,UAAU,CAACC,aAAa,CAACvB,QAAQ,CAAC;UACtD,IAAI,CAACqB,MAAM,EAAE;YACX;UACF;UACAG,UAAU,CAAC,MAAM;YACfH,MAAM,CAACI,SAAS,GAAGP,SAAS;UAC9B,CAAC,EAAE,CAAC,CAAC;QACP,CAAC,CAAC;MACJ;IACF,CAAC;EACH;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}