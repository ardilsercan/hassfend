{"ast":null,"code":"import { handleFetchPromise } from \"../util/hass-call-api\";\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\n\nexport const fetchOnboardingOverview = () => fetch(\"/api/onboarding\", {\n  credentials: \"same-origin\"\n});\nexport const onboardUserStep = params => handleFetchPromise(fetch(\"/api/onboarding/users\", {\n  method: \"POST\",\n  credentials: \"same-origin\",\n  body: JSON.stringify(params)\n}));\nexport const onboardCoreConfigStep = hass => hass.callApi(\"POST\", \"onboarding/core_config\");\nexport const onboardAnalyticsStep = hass => hass.callApi(\"POST\", \"onboarding/analytics\");\nexport const onboardIntegrationStep = (hass, params) => hass.callApi(\"POST\", \"onboarding/integration\", params);\nexport const fetchInstallationType = async () => {\n  const response = await fetch(\"/api/onboarding/installation_type\", {\n    method: \"GET\"\n  });\n  if (response.status === 401) {\n    throw Error(\"unauthorized\");\n  }\n  if (response.status === 404) {\n    throw Error(\"not_found\");\n  }\n  return response.json();\n};","map":{"version":3,"names":["handleFetchPromise","fetchOnboardingOverview","fetch","credentials","onboardUserStep","params","method","body","JSON","stringify","onboardCoreConfigStep","hass","callApi","onboardAnalyticsStep","onboardIntegrationStep","fetchInstallationType","response","status","Error","json"],"sources":["/workspaces/frontend/src/data/onboarding.ts"],"sourcesContent":["import { HomeAssistant } from \"../types\";\nimport { handleFetchPromise } from \"../util/hass-call-api\";\n\nexport interface InstallationType {\n  installation_type:\n    | \"Indexline Technology Operating System\"\n    | \"Indexline Technology Container\"\n    | \"Indexline Technology Supervised\"\n    | \"Indexline Technology Core\"\n    | \"Unknown\";\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface OnboardingCoreConfigStepResponse {}\n\nexport interface OnboardingUserStepResponse {\n  auth_code: string;\n}\n\nexport interface OnboardingIntegrationStepResponse {\n  auth_code: string;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface OnboardingAnalyticsStepResponse {}\n\nexport interface OnboardingResponses {\n  user: OnboardingUserStepResponse;\n  core_config: OnboardingCoreConfigStepResponse;\n  integration: OnboardingIntegrationStepResponse;\n  analytics: OnboardingAnalyticsStepResponse;\n}\n\nexport type ValidOnboardingStep = keyof OnboardingResponses;\n\nexport interface OnboardingStep {\n  step: ValidOnboardingStep;\n  done: boolean;\n}\n\nexport const fetchOnboardingOverview = () =>\n  fetch(\"/api/onboarding\", { credentials: \"same-origin\" });\n\nexport const onboardUserStep = (params: {\n  client_id: string;\n  name: string;\n  username: string;\n  password: string;\n  language: string;\n}) =>\n  handleFetchPromise<OnboardingUserStepResponse>(\n    fetch(\"/api/onboarding/users\", {\n      method: \"POST\",\n      credentials: \"same-origin\",\n      body: JSON.stringify(params),\n    })\n  );\n\nexport const onboardCoreConfigStep = (hass: HomeAssistant) =>\n  hass.callApi<OnboardingCoreConfigStepResponse>(\n    \"POST\",\n    \"onboarding/core_config\"\n  );\n\nexport const onboardAnalyticsStep = (hass: HomeAssistant) =>\n  hass.callApi<OnboardingAnalyticsStepResponse>(\"POST\", \"onboarding/analytics\");\n\nexport const onboardIntegrationStep = (\n  hass: HomeAssistant,\n  params: { client_id: string; redirect_uri: string }\n) =>\n  hass.callApi<OnboardingIntegrationStepResponse>(\n    \"POST\",\n    \"onboarding/integration\",\n    params\n  );\n\nexport const fetchInstallationType = async (): Promise<InstallationType> => {\n  const response = await fetch(\"/api/onboarding/installation_type\", {\n    method: \"GET\",\n  });\n\n  if (response.status === 401) {\n    throw Error(\"unauthorized\");\n  }\n\n  if (response.status === 404) {\n    throw Error(\"not_found\");\n  }\n\n  return response.json();\n};\n"],"mappings":"AACA,SAASA,kBAAkB,QAAQ,uBAAuB;;AAW1D;;AAWA;;AAiBA,OAAO,MAAMC,uBAAuB,GAAGA,CAAA,KACrCC,KAAK,CAAC,iBAAiB,EAAE;EAAEC,WAAW,EAAE;AAAc,CAAC,CAAC;AAE1D,OAAO,MAAMC,eAAe,GAAIC,MAM/B,IACCL,kBAAkB,CAChBE,KAAK,CAAC,uBAAuB,EAAE;EAC7BI,MAAM,EAAE,MAAM;EACdH,WAAW,EAAE,aAAa;EAC1BI,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,MAAM;AAC7B,CAAC,CACH,CAAC;AAEH,OAAO,MAAMK,qBAAqB,GAAIC,IAAmB,IACvDA,IAAI,CAACC,OAAO,CACV,MAAM,EACN,wBACF,CAAC;AAEH,OAAO,MAAMC,oBAAoB,GAAIF,IAAmB,IACtDA,IAAI,CAACC,OAAO,CAAkC,MAAM,EAAE,sBAAsB,CAAC;AAE/E,OAAO,MAAME,sBAAsB,GAAGA,CACpCH,IAAmB,EACnBN,MAAmD,KAEnDM,IAAI,CAACC,OAAO,CACV,MAAM,EACN,wBAAwB,EACxBP,MACF,CAAC;AAEH,OAAO,MAAMU,qBAAqB,GAAG,MAAAA,CAAA,KAAuC;EAC1E,MAAMC,QAAQ,GAAG,MAAMd,KAAK,CAAC,mCAAmC,EAAE;IAChEI,MAAM,EAAE;EACV,CAAC,CAAC;EAEF,IAAIU,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;IAC3B,MAAMC,KAAK,CAAC,cAAc,CAAC;EAC7B;EAEA,IAAIF,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;IAC3B,MAAMC,KAAK,CAAC,WAAW,CAAC;EAC1B;EAEA,OAAOF,QAAQ,CAACG,IAAI,CAAC,CAAC;AACxB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}