{"ast":null,"code":"import _decorate from \"@babel/runtime/helpers/decorate\";\nimport \"@material/mwc-button\";\nimport { css, html, LitElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport \"../../components/ha-card\";\nimport { showConfirmationDialog } from \"../../dialogs/generic/show-dialog-box\";\nimport { showMfaModuleSetupFlowDialog } from \"./show-ha-mfa-module-setup-flow-dialog\";\nlet HaMfaModulesCard = _decorate([customElement(\"ha-mfa-modules-card\")], function (_initialize, _LitElement) {\n  class HaMfaModulesCard extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: HaMfaModulesCard,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"mfaModules\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        return html`\n      <ha-card .header=${this.hass.localize(\"ui.panel.profile.mfa.header\")}>\n        ${this.mfaModules.map(module => html`<ha-settings-row two-line>\n              <span slot=\"heading\">${module.name}</span>\n              <span slot=\"description\">${module.id}</span>\n              ${module.enabled ? html`<mwc-button .module=${module} @click=${this._disable}\n                    >${this.hass.localize(\"ui.panel.profile.mfa.disable\")}</mwc-button\n                  >` : html`<mwc-button .module=${module} @click=${this._enable}\n                    >${this.hass.localize(\"ui.panel.profile.mfa.enable\")}</mwc-button\n                  >`}\n            </ha-settings-row>`)}\n      </ha-card>\n    `;\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return css`\n      mwc-button {\n        margin-right: -0.57em;\n        margin-inline-end: -0.57em;\n        margin-inline-start: initial;\n      }\n      ha-list-item {\n        --mdc-list-item-meta-size: auto;\n      }\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_enable\",\n      value: function _enable(ev) {\n        showMfaModuleSetupFlowDialog(this, {\n          mfaModuleId: ev.currentTarget.module.id,\n          dialogClosedCallback: () => this._refreshCurrentUser()\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_disable\",\n      value: async function _disable(ev) {\n        const mfamodule = ev.currentTarget.module;\n        if (!(await showConfirmationDialog(this, {\n          text: this.hass.localize(\"ui.panel.profile.mfa.confirm_disable\", {\n            name: mfamodule.name\n          })\n        }))) {\n          return;\n        }\n        const mfaModuleId = mfamodule.id;\n        this.hass.callWS({\n          type: \"auth/depose_mfa\",\n          mfa_module_id: mfaModuleId\n        }).then(() => {\n          this._refreshCurrentUser();\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_refreshCurrentUser\",\n      value: function _refreshCurrentUser() {\n        fireEvent(this, \"hass-refresh-current-user\");\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["css","html","LitElement","customElement","property","fireEvent","showConfirmationDialog","showMfaModuleSetupFlowDialog","HaMfaModulesCard","_decorate","_initialize","_LitElement","constructor","args","F","d","kind","decorators","attribute","key","value","render","hass","localize","mfaModules","map","module","name","id","enabled","_disable","_enable","static","styles","ev","mfaModuleId","currentTarget","dialogClosedCallback","_refreshCurrentUser","mfamodule","text","callWS","type","mfa_module_id","then"],"sources":["/workspaces/frontend/src/panels/profile/ha-mfa-modules-card.ts"],"sourcesContent":["import \"@material/mwc-button\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport \"../../components/ha-card\";\nimport { showConfirmationDialog } from \"../../dialogs/generic/show-dialog-box\";\nimport { HomeAssistant, MFAModule } from \"../../types\";\nimport { showMfaModuleSetupFlowDialog } from \"./show-ha-mfa-module-setup-flow-dialog\";\n\n@customElement(\"ha-mfa-modules-card\")\nclass HaMfaModulesCard extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public mfaModules!: MFAModule[];\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-card .header=${this.hass.localize(\"ui.panel.profile.mfa.header\")}>\n        ${this.mfaModules.map(\n          (module) =>\n            html`<ha-settings-row two-line>\n              <span slot=\"heading\">${module.name}</span>\n              <span slot=\"description\">${module.id}</span>\n              ${module.enabled\n                ? html`<mwc-button .module=${module} @click=${this._disable}\n                    >${this.hass.localize(\n                      \"ui.panel.profile.mfa.disable\"\n                    )}</mwc-button\n                  >`\n                : html`<mwc-button .module=${module} @click=${this._enable}\n                    >${this.hass.localize(\n                      \"ui.panel.profile.mfa.enable\"\n                    )}</mwc-button\n                  >`}\n            </ha-settings-row>`\n        )}\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      mwc-button {\n        margin-right: -0.57em;\n        margin-inline-end: -0.57em;\n        margin-inline-start: initial;\n      }\n      ha-list-item {\n        --mdc-list-item-meta-size: auto;\n      }\n    `;\n  }\n\n  private _enable(ev) {\n    showMfaModuleSetupFlowDialog(this, {\n      mfaModuleId: ev.currentTarget.module.id,\n      dialogClosedCallback: () => this._refreshCurrentUser(),\n    });\n  }\n\n  private async _disable(ev) {\n    const mfamodule = ev.currentTarget.module;\n    if (\n      !(await showConfirmationDialog(this, {\n        text: this.hass.localize(\"ui.panel.profile.mfa.confirm_disable\", {\n          name: mfamodule.name,\n        }),\n      }))\n    ) {\n      return;\n    }\n\n    const mfaModuleId = mfamodule.id;\n\n    this.hass\n      .callWS({\n        type: \"auth/depose_mfa\",\n        mfa_module_id: mfaModuleId,\n      })\n      .then(() => {\n        this._refreshCurrentUser();\n      });\n  }\n\n  private _refreshCurrentUser() {\n    fireEvent(this, \"hass-refresh-current-user\");\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-mfa-modules-card\": HaMfaModulesCard;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}