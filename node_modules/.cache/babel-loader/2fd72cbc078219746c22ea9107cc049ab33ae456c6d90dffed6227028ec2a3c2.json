{"ast":null,"code":"import _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport { DrawerBase } from \"@material/mwc-drawer/mwc-drawer-base\";\nimport { styles } from \"@material/mwc-drawer/mwc-drawer.css\";\nimport { css } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { mainWindow } from \"../common/dom/get_main_window\";\nconst blockingElements = document.$blockingElements;\nexport let HaDrawer = _decorate([customElement(\"ha-drawer\")], function (_initialize, _DrawerBase) {\n  class HaDrawer extends _DrawerBase {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: HaDrawer,\n    d: [{\n      kind: \"field\",\n      decorators: [property()],\n      key: \"direction\",\n      value() {\n        return \"ltr\";\n      }\n    }, {\n      kind: \"field\",\n      key: \"_mc\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_rtlStyle\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"createAdapter\",\n      value: function createAdapter() {\n        return {\n          ..._get(_getPrototypeOf(HaDrawer.prototype), \"createAdapter\", this).call(this),\n          trapFocus: () => {\n            blockingElements.push(this);\n            this.appContent.inert = true;\n            document.body.style.overflow = \"hidden\";\n          },\n          releaseFocus: () => {\n            blockingElements.remove(this);\n            this.appContent.inert = false;\n            document.body.style.overflow = \"\";\n          }\n        };\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProps) {\n        _get(_getPrototypeOf(HaDrawer.prototype), \"updated\", this).call(this, changedProps);\n        if (changedProps.has(\"direction\")) {\n          if (mainWindow.document.dir === \"rtl\") {\n            this._rtlStyle = document.createElement(\"style\");\n            this._rtlStyle.innerHTML = `\n          .mdc-drawer--animate {\n            transform: translateX(100%);\n          }\n          .mdc-drawer--opening {\n            transform: translateX(0);\n          }\n          .mdc-drawer--closing {\n            transform: translateX(100%);\n          }\n        `;\n            this.shadowRoot.appendChild(this._rtlStyle);\n          } else if (this._rtlStyle) {\n            this.shadowRoot.removeChild(this._rtlStyle);\n          }\n        }\n        if (changedProps.has(\"open\") && this.open && this.type === \"modal\") {\n          this._setupSwipe();\n        } else if (this._mc) {\n          this._mc.destroy();\n          this._mc = undefined;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_setupSwipe\",\n      value: async function _setupSwipe() {\n        const hammer = await import(\"../resources/hammer\");\n        this._mc = new hammer.Manager(document, {\n          touchAction: \"pan-y\"\n        });\n        this._mc.add(new hammer.Swipe({\n          direction: this.direction === \"rtl\" ? hammer.DIRECTION_RIGHT : hammer.DIRECTION_LEFT\n        }));\n        this._mc.on(\"swipeleft swiperight\", () => {\n          fireEvent(this, \"hass-toggle-menu\", {\n            open: false\n          });\n        });\n      }\n    }, {\n      kind: \"field\",\n      static: true,\n      key: \"styles\",\n      value() {\n        return [styles, css`\n      .mdc-drawer {\n        position: fixed;\n        top: 0;\n        border-color: var(--divider-color, rgba(0, 0, 0, 0.12));\n        inset-inline-start: 0 !important;\n        inset-inline-end: initial !important;\n      }\n      .mdc-drawer.mdc-drawer--modal.mdc-drawer--open {\n        z-index: 200;\n      }\n      .mdc-drawer-app-content {\n        overflow: unset;\n        flex: none;\n        padding-left: var(--mdc-drawer-width);\n        padding-inline-start: var(--mdc-drawer-width);\n        padding-inline-end: initial;\n        direction: var(--direction);\n        width: 100%;\n        box-sizing: border-box;\n      }\n    `];\n      }\n    }]\n  };\n}, DrawerBase);","map":{"version":3,"names":["DrawerBase","styles","css","customElement","property","fireEvent","mainWindow","blockingElements","document","$blockingElements","HaDrawer","_decorate","_initialize","_DrawerBase","constructor","args","F","d","kind","decorators","key","value","createAdapter","_get","_getPrototypeOf","prototype","call","trapFocus","push","appContent","inert","body","style","overflow","releaseFocus","remove","updated","changedProps","has","dir","_rtlStyle","createElement","innerHTML","shadowRoot","appendChild","removeChild","open","type","_setupSwipe","_mc","destroy","undefined","hammer","Manager","touchAction","add","Swipe","direction","DIRECTION_RIGHT","DIRECTION_LEFT","on","static"],"sources":["/workspaces/frontend/src/components/ha-drawer.ts"],"sourcesContent":["import { DrawerBase } from \"@material/mwc-drawer/mwc-drawer-base\";\nimport { styles } from \"@material/mwc-drawer/mwc-drawer.css\";\nimport { css, PropertyValues } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { mainWindow } from \"../common/dom/get_main_window\";\n\nconst blockingElements = (document as any).$blockingElements;\n\n@customElement(\"ha-drawer\")\nexport class HaDrawer extends DrawerBase {\n  @property() public direction: \"ltr\" | \"rtl\" = \"ltr\";\n\n  private _mc?: HammerManager;\n\n  private _rtlStyle?: HTMLElement;\n\n  protected createAdapter() {\n    return {\n      ...super.createAdapter(),\n      trapFocus: () => {\n        blockingElements.push(this);\n        this.appContent.inert = true;\n        document.body.style.overflow = \"hidden\";\n      },\n      releaseFocus: () => {\n        blockingElements.remove(this);\n        this.appContent.inert = false;\n        document.body.style.overflow = \"\";\n      },\n    };\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n    if (changedProps.has(\"direction\")) {\n      if (mainWindow.document.dir === \"rtl\") {\n        this._rtlStyle = document.createElement(\"style\");\n        this._rtlStyle.innerHTML = `\n          .mdc-drawer--animate {\n            transform: translateX(100%);\n          }\n          .mdc-drawer--opening {\n            transform: translateX(0);\n          }\n          .mdc-drawer--closing {\n            transform: translateX(100%);\n          }\n        `;\n\n        this.shadowRoot!.appendChild(this._rtlStyle);\n      } else if (this._rtlStyle) {\n        this.shadowRoot!.removeChild(this._rtlStyle);\n      }\n    }\n\n    if (changedProps.has(\"open\") && this.open && this.type === \"modal\") {\n      this._setupSwipe();\n    } else if (this._mc) {\n      this._mc.destroy();\n      this._mc = undefined;\n    }\n  }\n\n  private async _setupSwipe() {\n    const hammer = await import(\"../resources/hammer\");\n    this._mc = new hammer.Manager(document, {\n      touchAction: \"pan-y\",\n    });\n    this._mc.add(\n      new hammer.Swipe({\n        direction:\n          this.direction === \"rtl\"\n            ? hammer.DIRECTION_RIGHT\n            : hammer.DIRECTION_LEFT,\n      })\n    );\n    this._mc.on(\"swipeleft swiperight\", () => {\n      fireEvent(this, \"hass-toggle-menu\", { open: false });\n    });\n  }\n\n  static override styles = [\n    styles,\n    css`\n      .mdc-drawer {\n        position: fixed;\n        top: 0;\n        border-color: var(--divider-color, rgba(0, 0, 0, 0.12));\n        inset-inline-start: 0 !important;\n        inset-inline-end: initial !important;\n      }\n      .mdc-drawer.mdc-drawer--modal.mdc-drawer--open {\n        z-index: 200;\n      }\n      .mdc-drawer-app-content {\n        overflow: unset;\n        flex: none;\n        padding-left: var(--mdc-drawer-width);\n        padding-inline-start: var(--mdc-drawer-width);\n        padding-inline-end: initial;\n        direction: var(--direction);\n        width: 100%;\n        box-sizing: border-box;\n      }\n    `,\n  ];\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-drawer\": HaDrawer;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}