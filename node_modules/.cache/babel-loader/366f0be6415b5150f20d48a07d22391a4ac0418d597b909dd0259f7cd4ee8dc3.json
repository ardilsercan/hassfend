{"ast":null,"code":"import _decorate from \"@babel/runtime/helpers/decorate\";\nimport \"@material/mwc-list/mwc-list\";\nimport { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { relativeTime } from \"../../../common/datetime/relative_time\";\nimport { capitalizeFirstLetter } from \"../../../common/string/capitalize-first-letter\";\nimport \"../../../components/ha-alert\";\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-list-item\";\nimport \"../../../components/ha-svg-icon\";\nimport { domainToName } from \"../../../data/integration\";\nimport { fetchRepairsIssueData } from \"../../../data/repairs\";\nimport { brandsUrl } from \"../../../util/brands-url\";\nimport { showRepairsFlowDialog } from \"./show-dialog-repair-flow\";\nimport { showRepairsIssueDialog } from \"./show-repair-issue-dialog\";\nimport { showConfigFlowDialog } from \"../../../dialogs/config-flow/show-dialog-config-flow\";\nlet HaConfigRepairs = _decorate([customElement(\"ha-config-repairs\")], function (_initialize, _LitElement) {\n  class HaConfigRepairs extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: HaConfigRepairs,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"narrow\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"repairsIssues\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Number\n      })],\n      key: \"total\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        var _this$repairsIssues;\n        if (!((_this$repairsIssues = this.repairsIssues) !== null && _this$repairsIssues !== void 0 && _this$repairsIssues.length)) {\n          return nothing;\n        }\n        const issues = this.repairsIssues;\n        return html`\n      <div class=\"title\">\n        ${this.hass.localize(\"ui.panel.config.repairs.title\", {\n          count: this.total || this.repairsIssues.length\n        })}\n      </div>\n      <mwc-list>\n        ${issues.map(issue => {\n          var _this$hass$themes;\n          return html`\n            <ha-list-item\n              twoline\n              graphic=\"medium\"\n              .hasMeta=${!this.narrow}\n              .issue=${issue}\n              class=${issue.ignored ? \"ignored\" : \"\"}\n              @click=${this._openShowMoreDialog}\n            >\n              <img\n                alt=${domainToName(this.hass.localize, issue.domain)}\n                loading=\"lazy\"\n                src=${brandsUrl({\n            domain: issue.issue_domain || issue.domain,\n            type: \"icon\",\n            useFallback: true,\n            darkOptimized: (_this$hass$themes = this.hass.themes) === null || _this$hass$themes === void 0 ? void 0 : _this$hass$themes.darkMode\n          })}\n                .title=${domainToName(this.hass.localize, issue.domain)}\n                crossorigin=\"anonymous\"\n                referrerpolicy=\"no-referrer\"\n                slot=\"graphic\"\n              />\n              <span\n                >${this.hass.localize(`component.${issue.domain}.issues.${issue.translation_key || issue.issue_id}.title`, issue.translation_placeholders || {})}</span\n              >\n              <span slot=\"secondary\" class=\"secondary\">\n                ${issue.severity === \"critical\" || issue.severity === \"error\" ? html`<span class=\"error\"\n                      >${this.hass.localize(`ui.panel.config.repairs.${issue.severity}`)}</span\n                    >` : \"\"}\n                ${(issue.severity === \"critical\" || issue.severity === \"error\") && issue.created ? \" - \" : \"\"}\n                ${issue.created ? capitalizeFirstLetter(relativeTime(new Date(issue.created), this.hass.locale)) : \"\"}\n                ${issue.ignored ? ` - ${this.hass.localize(\"ui.panel.config.repairs.dialog.ignored_in_version_short\", {\n            version: issue.dismissed_version\n          })}` : \"\"}\n              </span>\n              ${!this.narrow ? html`<ha-icon-next slot=\"meta\"></ha-icon-next>` : \"\"}\n            </ha-list-item>\n          `;\n        })}\n      </mwc-list>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_openShowMoreDialog\",\n      value: async function _openShowMoreDialog(ev) {\n        const issue = ev.currentTarget.issue;\n        if (issue.is_fixable) {\n          showRepairsFlowDialog(this, issue);\n        } else if (issue.domain === \"homeassistant\" && issue.translation_key === \"config_entry_reauth\") {\n          const data = await fetchRepairsIssueData(this.hass.connection, issue.domain, issue.issue_id);\n          if (\"flow_id\" in data.issue_data) {\n            showConfigFlowDialog(this, {\n              continueFlowId: data.issue_data.flow_id\n            });\n          }\n        } else {\n          showRepairsIssueDialog(this, {\n            issue\n          });\n        }\n      }\n    }, {\n      kind: \"field\",\n      static: true,\n      key: \"styles\",\n      value() {\n        return css`\n    :host {\n      --mdc-list-vertical-padding: 0;\n    }\n    .title {\n      font-size: 16px;\n      padding: 16px;\n      padding-bottom: 0;\n    }\n    .ignored {\n      opacity: var(--light-secondary-opacity);\n    }\n    ha-list-item {\n      --mdc-list-item-graphic-size: 40px;\n    }\n    button.show-more {\n      color: var(--primary-color);\n      text-align: left;\n      cursor: pointer;\n      background: none;\n      border-width: initial;\n      border-style: none;\n      border-color: initial;\n      border-image: initial;\n      padding: 16px;\n      font: inherit;\n    }\n    button.show-more:focus {\n      outline: none;\n      text-decoration: underline;\n    }\n    ha-list-item {\n      cursor: pointer;\n      font-size: 16px;\n    }\n    .error {\n      color: var(--error-color);\n    }\n  `;\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["css","html","LitElement","nothing","customElement","property","relativeTime","capitalizeFirstLetter","domainToName","fetchRepairsIssueData","brandsUrl","showRepairsFlowDialog","showRepairsIssueDialog","showConfigFlowDialog","HaConfigRepairs","_decorate","_initialize","_LitElement","constructor","args","F","d","kind","decorators","attribute","key","value","type","Boolean","Number","render","_this$repairsIssues","repairsIssues","length","issues","hass","localize","count","total","map","issue","_this$hass$themes","narrow","ignored","_openShowMoreDialog","domain","issue_domain","useFallback","darkOptimized","themes","darkMode","translation_key","issue_id","translation_placeholders","severity","created","Date","locale","version","dismissed_version","ev","currentTarget","is_fixable","data","connection","issue_data","continueFlowId","flow_id","static"],"sources":["/Users/sercanardil/Desktop/frontend/src/panels/config/repairs/ha-config-repairs.ts"],"sourcesContent":["import \"@material/mwc-list/mwc-list\";\nimport { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { relativeTime } from \"../../../common/datetime/relative_time\";\nimport { capitalizeFirstLetter } from \"../../../common/string/capitalize-first-letter\";\nimport \"../../../components/ha-alert\";\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-list-item\";\nimport \"../../../components/ha-svg-icon\";\nimport { domainToName } from \"../../../data/integration\";\nimport {\n  fetchRepairsIssueData,\n  type RepairsIssue,\n} from \"../../../data/repairs\";\nimport type { HomeAssistant } from \"../../../types\";\nimport { brandsUrl } from \"../../../util/brands-url\";\nimport { showRepairsFlowDialog } from \"./show-dialog-repair-flow\";\nimport { showRepairsIssueDialog } from \"./show-repair-issue-dialog\";\nimport { showConfigFlowDialog } from \"../../../dialogs/config-flow/show-dialog-config-flow\";\n\n@customElement(\"ha-config-repairs\")\nclass HaConfigRepairs extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean }) public narrow = false;\n\n  @property({ attribute: false })\n  public repairsIssues?: RepairsIssue[];\n\n  @property({ type: Number })\n  public total?: number;\n\n  protected render() {\n    if (!this.repairsIssues?.length) {\n      return nothing;\n    }\n\n    const issues = this.repairsIssues;\n\n    return html`\n      <div class=\"title\">\n        ${this.hass.localize(\"ui.panel.config.repairs.title\", {\n          count: this.total || this.repairsIssues.length,\n        })}\n      </div>\n      <mwc-list>\n        ${issues.map(\n          (issue) => html`\n            <ha-list-item\n              twoline\n              graphic=\"medium\"\n              .hasMeta=${!this.narrow}\n              .issue=${issue}\n              class=${issue.ignored ? \"ignored\" : \"\"}\n              @click=${this._openShowMoreDialog}\n            >\n              <img\n                alt=${domainToName(this.hass.localize, issue.domain)}\n                loading=\"lazy\"\n                src=${brandsUrl({\n                  domain: issue.issue_domain || issue.domain,\n                  type: \"icon\",\n                  useFallback: true,\n                  darkOptimized: this.hass.themes?.darkMode,\n                })}\n                .title=${domainToName(this.hass.localize, issue.domain)}\n                crossorigin=\"anonymous\"\n                referrerpolicy=\"no-referrer\"\n                slot=\"graphic\"\n              />\n              <span\n                >${this.hass.localize(\n                  `component.${issue.domain}.issues.${\n                    issue.translation_key || issue.issue_id\n                  }.title`,\n                  issue.translation_placeholders || {}\n                )}</span\n              >\n              <span slot=\"secondary\" class=\"secondary\">\n                ${issue.severity === \"critical\" || issue.severity === \"error\"\n                  ? html`<span class=\"error\"\n                      >${this.hass.localize(\n                        `ui.panel.config.repairs.${issue.severity}`\n                      )}</span\n                    >`\n                  : \"\"}\n                ${(issue.severity === \"critical\" ||\n                  issue.severity === \"error\") &&\n                issue.created\n                  ? \" - \"\n                  : \"\"}\n                ${issue.created\n                  ? capitalizeFirstLetter(\n                      relativeTime(new Date(issue.created), this.hass.locale)\n                    )\n                  : \"\"}\n                ${issue.ignored\n                  ? ` - ${this.hass.localize(\n                      \"ui.panel.config.repairs.dialog.ignored_in_version_short\",\n                      { version: issue.dismissed_version }\n                    )}`\n                  : \"\"}\n              </span>\n              ${!this.narrow\n                ? html`<ha-icon-next slot=\"meta\"></ha-icon-next>`\n                : \"\"}\n            </ha-list-item>\n          `\n        )}\n      </mwc-list>\n    `;\n  }\n\n  private async _openShowMoreDialog(ev): Promise<void> {\n    const issue = ev.currentTarget.issue as RepairsIssue;\n    if (issue.is_fixable) {\n      showRepairsFlowDialog(this, issue);\n    } else if (\n      issue.domain === \"homeassistant\" &&\n      issue.translation_key === \"config_entry_reauth\"\n    ) {\n      const data = await fetchRepairsIssueData(\n        this.hass.connection,\n        issue.domain,\n        issue.issue_id\n      );\n      if (\"flow_id\" in data.issue_data) {\n        showConfigFlowDialog(this, {\n          continueFlowId: data.issue_data.flow_id as string,\n        });\n      }\n    } else {\n      showRepairsIssueDialog(this, {\n        issue,\n      });\n    }\n  }\n\n  static styles = css`\n    :host {\n      --mdc-list-vertical-padding: 0;\n    }\n    .title {\n      font-size: 16px;\n      padding: 16px;\n      padding-bottom: 0;\n    }\n    .ignored {\n      opacity: var(--light-secondary-opacity);\n    }\n    ha-list-item {\n      --mdc-list-item-graphic-size: 40px;\n    }\n    button.show-more {\n      color: var(--primary-color);\n      text-align: left;\n      cursor: pointer;\n      background: none;\n      border-width: initial;\n      border-style: none;\n      border-color: initial;\n      border-image: initial;\n      padding: 16px;\n      font: inherit;\n    }\n    button.show-more:focus {\n      outline: none;\n      text-decoration: underline;\n    }\n    ha-list-item {\n      cursor: pointer;\n      font-size: 16px;\n    }\n    .error {\n      color: var(--error-color);\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-config-repairs\": HaConfigRepairs;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}