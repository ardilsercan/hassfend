{"ast":null,"code":"import _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport \"@material/mwc-button/mwc-button\";\nconst mdiOpenInNew = \"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z\";\nimport { css, html, LitElement } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport \"../components/ha-analytics\";\nimport \"../components/ha-svg-icon\";\nimport { setAnalyticsPreferences } from \"../data/analytics\";\nimport { onboardAnalyticsStep } from \"../data/onboarding\";\nimport { documentationUrl } from \"../util/documentation-url\";\nimport { onBoardingStyles } from \"./styles\";\nlet OnboardingAnalytics = _decorate([customElement(\"onboarding-analytics\")], function (_initialize, _LitElement) {\n  class OnboardingAnalytics extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: OnboardingAnalytics,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"localize\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_error\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_analyticsDetails\",\n      value() {\n        return {\n          preferences: {}\n        };\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        return html`\n      <h1>${this.localize(\"ui.panel.page-onboarding.analytics.header\")}</h1>\n      <p>${this.localize(\"ui.panel.page-onboarding.analytics.intro\")}</p>\n      <p>\n        <a\n          .href=${documentationUrl(this.hass, \"/integrations/analytics/\")}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          ${this.localize(\"ui.panel.page-onboarding.analytics.learn_more\")}\n          <ha-svg-icon .path=${mdiOpenInNew}></ha-svg-icon>\n        </a>\n      </p>\n      <ha-analytics\n        translation_key_panel=\"page-onboarding\"\n        @analytics-preferences-changed=${this._preferencesChanged}\n        .localize=${this.localize}\n        .analytics=${this._analyticsDetails}\n      >\n      </ha-analytics>\n      ${this._error ? html`<div class=\"error\">${this._error}</div>` : \"\"}\n      <div class=\"footer\">\n        <mwc-button\n          unelevated\n          @click=${this._save}\n          .disabled=${!this._analyticsDetails}\n        >\n          ${this.localize(\"ui.panel.page-onboarding.analytics.finish\")}\n        </mwc-button>\n      </div>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"firstUpdated\",\n      value: function firstUpdated(changedProps) {\n        _get(_getPrototypeOf(OnboardingAnalytics.prototype), \"firstUpdated\", this).call(this, changedProps);\n        this.addEventListener(\"keypress\", ev => {\n          if (ev.key === \"Enter\") {\n            this._save(ev);\n          }\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_preferencesChanged\",\n      value: function _preferencesChanged(event) {\n        this._analyticsDetails = {\n          ...this._analyticsDetails,\n          preferences: event.detail.preferences\n        };\n      }\n    }, {\n      kind: \"method\",\n      key: \"_save\",\n      value: async function _save(ev) {\n        ev.preventDefault();\n        try {\n          await setAnalyticsPreferences(this.hass, this._analyticsDetails.preferences);\n          await onboardAnalyticsStep(this.hass);\n          fireEvent(this, \"onboarding-step\", {\n            type: \"analytics\"\n          });\n        } catch (err) {\n          alert(`Failed to save: ${err.message}`);\n        }\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return [onBoardingStyles, css`\n        .error {\n          color: var(--error-color);\n        }\n        a {\n          color: var(--primary-color);\n          text-decoration: none;\n          --mdc-icon-size: 14px;\n        }\n      `];\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["mdiOpenInNew","css","html","LitElement","customElement","property","state","fireEvent","setAnalyticsPreferences","onboardAnalyticsStep","documentationUrl","onBoardingStyles","OnboardingAnalytics","_decorate","_initialize","_LitElement","constructor","args","F","d","kind","decorators","attribute","key","value","preferences","render","localize","hass","_preferencesChanged","_analyticsDetails","_error","_save","firstUpdated","changedProps","_get","_getPrototypeOf","prototype","call","addEventListener","ev","event","detail","preventDefault","type","err","alert","message","static","styles"],"sources":["/workspaces/frontend/src/onboarding/onboarding-analytics.ts"],"sourcesContent":["import \"@material/mwc-button/mwc-button\";\nimport { mdiOpenInNew } from \"@mdi/js\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { LocalizeFunc } from \"../common/translations/localize\";\nimport \"../components/ha-analytics\";\nimport \"../components/ha-svg-icon\";\nimport { Analytics, setAnalyticsPreferences } from \"../data/analytics\";\nimport { onboardAnalyticsStep } from \"../data/onboarding\";\nimport type { HomeAssistant } from \"../types\";\nimport { documentationUrl } from \"../util/documentation-url\";\nimport { onBoardingStyles } from \"./styles\";\n\n@customElement(\"onboarding-analytics\")\nclass OnboardingAnalytics extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public localize!: LocalizeFunc;\n\n  @state() private _error?: string;\n\n  @state() private _analyticsDetails: Analytics = {\n    preferences: {},\n  };\n\n  protected render(): TemplateResult {\n    return html`\n      <h1>${this.localize(\"ui.panel.page-onboarding.analytics.header\")}</h1>\n      <p>${this.localize(\"ui.panel.page-onboarding.analytics.intro\")}</p>\n      <p>\n        <a\n          .href=${documentationUrl(this.hass, \"/integrations/analytics/\")}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          ${this.localize(\"ui.panel.page-onboarding.analytics.learn_more\")}\n          <ha-svg-icon .path=${mdiOpenInNew}></ha-svg-icon>\n        </a>\n      </p>\n      <ha-analytics\n        translation_key_panel=\"page-onboarding\"\n        @analytics-preferences-changed=${this._preferencesChanged}\n        .localize=${this.localize}\n        .analytics=${this._analyticsDetails}\n      >\n      </ha-analytics>\n      ${this._error ? html`<div class=\"error\">${this._error}</div>` : \"\"}\n      <div class=\"footer\">\n        <mwc-button\n          unelevated\n          @click=${this._save}\n          .disabled=${!this._analyticsDetails}\n        >\n          ${this.localize(\"ui.panel.page-onboarding.analytics.finish\")}\n        </mwc-button>\n      </div>\n    `;\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    this.addEventListener(\"keypress\", (ev) => {\n      if (ev.key === \"Enter\") {\n        this._save(ev);\n      }\n    });\n  }\n\n  private _preferencesChanged(event: CustomEvent): void {\n    this._analyticsDetails = {\n      ...this._analyticsDetails!,\n      preferences: event.detail.preferences,\n    };\n  }\n\n  private async _save(ev) {\n    ev.preventDefault();\n    try {\n      await setAnalyticsPreferences(\n        this.hass,\n        this._analyticsDetails!.preferences\n      );\n\n      await onboardAnalyticsStep(this.hass);\n      fireEvent(this, \"onboarding-step\", {\n        type: \"analytics\",\n      });\n    } catch (err: any) {\n      alert(`Failed to save: ${err.message}`);\n    }\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      onBoardingStyles,\n      css`\n        .error {\n          color: var(--error-color);\n        }\n        a {\n          color: var(--primary-color);\n          text-decoration: none;\n          --mdc-icon-size: 14px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"onboarding-analytics\": OnboardingAnalytics;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}