{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _decorate from \"@babel/runtime/helpers/decorate\";\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13, _templateObject14, _templateObject15, _templateObject16, _templateObject17, _templateObject18, _templateObject19, _templateObject20, _templateObject21, _templateObject22, _templateObject23, _templateObject24, _templateObject25, _templateObject26, _templateObject27, _templateObject28, _templateObject29, _templateObject30, _templateObject31, _templateObject32, _templateObject33, _templateObject34, _templateObject35, _templateObject36, _templateObject37, _templateObject38, _templateObject39, _templateObject40, _templateObject41, _templateObject42, _templateObject43, _templateObject44, _templateObject45, _templateObject46, _templateObject47, _templateObject48, _templateObject49, _templateObject50, _templateObject51, _templateObject52, _templateObject53, _templateObject54, _templateObject55, _templateObject56, _templateObject57;\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/esnext.iterator.some.js\";\n// @ts-ignore\nimport dataTableStyles from \"@material/data-table/dist/mdc.data-table.min.css\";\nimport { css, html, LitElement, unsafeCSS, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { styleMap } from \"lit/directives/style-map\";\nimport { hex2rgb, lab2rgb, rgb2hex, rgb2lab } from \"../../../../common/color/convert-color\";\nimport { labBrighten, labDarken } from \"../../../../common/color/lab\";\nimport { formatNumber } from \"../../../../common/number/format_number\";\nimport \"../../../../components/ha-card\";\nimport { energySourcesByType, getEnergyDataCollection, getEnergyGasUnit, getEnergyWaterUnit } from \"../../../../data/energy\";\nimport { calculateStatisticSumGrowth, getStatisticLabel } from \"../../../../data/recorder\";\nimport { SubscribeMixin } from \"../../../../mixins/subscribe-mixin\";\nimport { hasConfigChanged } from \"../../common/has-changed\";\nexport var HuiEnergySourcesTableCard = _decorate([customElement(\"hui-energy-sources-table-card\")], function (_initialize, _SubscribeMixin) {\n  var HuiEnergySourcesTableCard = /*#__PURE__*/function (_SubscribeMixin2) {\n    _inherits(HuiEnergySourcesTableCard, _SubscribeMixin2);\n    function HuiEnergySourcesTableCard() {\n      var _this;\n      _classCallCheck(this, HuiEnergySourcesTableCard);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _callSuper(this, HuiEnergySourcesTableCard, [].concat(args));\n      _initialize(_assertThisInitialized(_this));\n      return _this;\n    }\n    return _createClass(HuiEnergySourcesTableCard);\n  }(_SubscribeMixin);\n  return {\n    F: HuiEnergySourcesTableCard,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_config\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_data\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"hassSubscribeRequiredHostProps\",\n      value: function value() {\n        return [\"_config\"];\n      }\n    }, {\n      kind: \"method\",\n      key: \"hassSubscribe\",\n      value: function hassSubscribe() {\n        var _this$_config,\n          _this2 = this;\n        return [getEnergyDataCollection(this.hass, {\n          key: (_this$_config = this._config) === null || _this$_config === void 0 ? void 0 : _this$_config.collection_key\n        }).subscribe(function (data) {\n          _this2._data = data;\n        })];\n      }\n    }, {\n      kind: \"method\",\n      key: \"getCardSize\",\n      value: function getCardSize() {\n        return 3;\n      }\n    }, {\n      kind: \"method\",\n      key: \"setConfig\",\n      value: function setConfig(config) {\n        this._config = config;\n      }\n    }, {\n      kind: \"method\",\n      key: \"shouldUpdate\",\n      value: function shouldUpdate(changedProps) {\n        return hasConfigChanged(this, changedProps) || changedProps.size > 1 || !changedProps.has(\"hass\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getColor\",\n      value: function _getColor(computedStyles, propertyName, baseColor, idx) {\n        var color = computedStyles.getPropertyValue(propertyName + \"-\" + idx).trim();\n        if (color.length === 0) {\n          var modifiedColor = idx > 0 ? this.hass.themes.darkMode ? labBrighten(rgb2lab(hex2rgb(baseColor)), idx) : labDarken(rgb2lab(hex2rgb(baseColor)), idx) : undefined;\n          color = modifiedColor ? rgb2hex(lab2rgb(modifiedColor)) : baseColor;\n        }\n        return color;\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        var _types$grid,\n          _types$grid2,\n          _types$gas,\n          _types$water,\n          _types$solar,\n          _this3 = this,\n          _types$battery,\n          _types$grid3,\n          _types$gas2,\n          _types$water2;\n        if (!this.hass || !this._config) {\n          return nothing;\n        }\n        if (!this._data) {\n          return html(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\", \"\"])), this.hass.localize(\"ui.panel.lovelace.cards.energy.loading\"));\n        }\n        var totalGrid = 0;\n        var totalGridCost = 0;\n        var totalSolar = 0;\n        var totalBattery = 0;\n        var totalGas = 0;\n        var totalGasCost = 0;\n        var totalWater = 0;\n        var totalWaterCost = 0;\n        var hasGridCost = false;\n        var hasGasCost = false;\n        var hasWaterCost = false;\n        var totalGridCompare = 0;\n        var totalGridCostCompare = 0;\n        var totalSolarCompare = 0;\n        var totalBatteryCompare = 0;\n        var totalGasCompare = 0;\n        var totalGasCostCompare = 0;\n        var totalWaterCompare = 0;\n        var totalWaterCostCompare = 0;\n        var types = energySourcesByType(this._data.prefs);\n        var colorPropertyMap = {\n          grid_return: \"--energy-grid-return-color\",\n          grid_consumption: \"--energy-grid-consumption-color\",\n          battery_in: \"--energy-battery-in-color\",\n          battery_out: \"--energy-battery-out-color\",\n          solar: \"--energy-solar-color\",\n          gas: \"--energy-gas-color\",\n          water: \"--energy-water-color\"\n        };\n        var computedStyles = getComputedStyle(this);\n        var solarColor = computedStyles.getPropertyValue(colorPropertyMap.solar).trim();\n        var batteryFromColor = computedStyles.getPropertyValue(colorPropertyMap.battery_out).trim();\n        var batteryToColor = computedStyles.getPropertyValue(colorPropertyMap.battery_in).trim();\n        var returnColor = computedStyles.getPropertyValue(colorPropertyMap.grid_return).trim();\n        var consumptionColor = computedStyles.getPropertyValue(colorPropertyMap.grid_consumption).trim();\n        var gasColor = computedStyles.getPropertyValue(colorPropertyMap.gas).trim();\n        var waterColor = computedStyles.getPropertyValue(colorPropertyMap.water).trim();\n        var showCosts = ((_types$grid = types.grid) === null || _types$grid === void 0 ? void 0 : _types$grid[0].flow_from.some(function (flow) {\n          return flow.stat_cost || flow.entity_energy_price || flow.number_energy_price;\n        })) || ((_types$grid2 = types.grid) === null || _types$grid2 === void 0 ? void 0 : _types$grid2[0].flow_to.some(function (flow) {\n          return flow.stat_compensation || flow.entity_energy_price || flow.number_energy_price;\n        })) || ((_types$gas = types.gas) === null || _types$gas === void 0 ? void 0 : _types$gas.some(function (flow) {\n          return flow.stat_cost || flow.entity_energy_price || flow.number_energy_price;\n        })) || ((_types$water = types.water) === null || _types$water === void 0 ? void 0 : _types$water.some(function (flow) {\n          return flow.stat_cost || flow.entity_energy_price || flow.number_energy_price;\n        }));\n        var gasUnit = getEnergyGasUnit(this.hass, this._data.prefs, this._data.statsMetadata) || \"\";\n        var waterUnit = getEnergyWaterUnit(this.hass) || \"mÂ³\";\n        var compare = this._data.statsCompare !== undefined;\n        return html(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\" <ha-card>\\n      \", \"\\n      <div class=\\\"mdc-data-table\\\">\\n        <div class=\\\"mdc-data-table__table-container\\\">\\n          <table class=\\\"mdc-data-table__table\\\" aria-label=\\\"Energy sources\\\">\\n            <thead>\\n              <tr class=\\\"mdc-data-table__header-row\\\">\\n                <th class=\\\"mdc-data-table__header-cell\\\"></th>\\n                <th\\n                  class=\\\"mdc-data-table__header-cell\\\"\\n                  role=\\\"columnheader\\\"\\n                  scope=\\\"col\\\"\\n                >\\n                  \", \"\\n                </th>\\n                \", \"\\n                <th\\n                  class=\\\"mdc-data-table__header-cell mdc-data-table__header-cell--numeric\\\"\\n                  role=\\\"columnheader\\\"\\n                  scope=\\\"col\\\"\\n                >\\n                  \", \"\\n                </th>\\n                \", \"\\n              </tr>\\n            </thead>\\n            <tbody class=\\\"mdc-data-table__content\\\">\\n              \", \"\\n              \", \"\\n              \", \"\\n              \", \"\\n              \", \"\\n              \", \"\\n              \", \"\\n              \", \"\\n              \", \"\\n              \", \"\\n              \", \"\\n            </tbody>\\n          </table>\\n        </div>\\n      </div>\\n    </ha-card>\"])), this._config.title ? html(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"<h1 class=\\\"card-header\\\">\", \"</h1>\"])), this._config.title) : \"\", this.hass.localize(\"ui.panel.lovelace.cards.energy.energy_sources_table.source\"), compare ? html(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"<th\\n                        class=\\\"mdc-data-table__header-cell mdc-data-table__header-cell--numeric\\\"\\n                        role=\\\"columnheader\\\"\\n                        scope=\\\"col\\\"\\n                      >\\n                        \", \"\\n                      </th>\\n                      \", \"\"])), this.hass.localize(\"ui.panel.lovelace.cards.energy.energy_sources_table.previous_energy\"), showCosts ? html(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"<th\\n                            class=\\\"mdc-data-table__header-cell mdc-data-table__header-cell--numeric\\\"\\n                            role=\\\"columnheader\\\"\\n                            scope=\\\"col\\\"\\n                          >\\n                            \", \"\\n                          </th>\"])), this.hass.localize(\"ui.panel.lovelace.cards.energy.energy_sources_table.previous_cost\")) : \"\") : \"\", this.hass.localize(\"ui.panel.lovelace.cards.energy.energy_sources_table.energy\"), showCosts ? html(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\" <th\\n                      class=\\\"mdc-data-table__header-cell mdc-data-table__header-cell--numeric\\\"\\n                      role=\\\"columnheader\\\"\\n                      scope=\\\"col\\\"\\n                    >\\n                      \", \"\\n                    </th>\"])), this.hass.localize(\"ui.panel.lovelace.cards.energy.energy_sources_table.cost\")) : \"\", (_types$solar = types.solar) === null || _types$solar === void 0 ? void 0 : _types$solar.map(function (source, idx) {\n          var _this3$_data;\n          var energy = calculateStatisticSumGrowth(_this3._data.stats[source.stat_energy_from]) || 0;\n          totalSolar += energy;\n          var compareEnergy = compare && calculateStatisticSumGrowth(_this3._data.statsCompare[source.stat_energy_from]) || 0;\n          totalSolarCompare += compareEnergy;\n          var color = _this3._getColor(computedStyles, colorPropertyMap.solar, solarColor, idx);\n          return html(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"<tr class=\\\"mdc-data-table__row\\\">\\n                  <td class=\\\"mdc-data-table__cell cell-bullet\\\">\\n                    <div\\n                      class=\\\"bullet\\\"\\n                      style=\", \"\\n                    ></div>\\n                  </td>\\n                  <th class=\\\"mdc-data-table__cell\\\" scope=\\\"row\\\">\\n                    \", \"\\n                  </th>\\n                  \", \"\\n                  <td\\n                    class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                  >\\n                    \", \" kWh\\n                  </td>\\n                  \", \"\\n                </tr>\"])), styleMap({\n            borderColor: color,\n            backgroundColor: color + \"7F\"\n          }), getStatisticLabel(_this3.hass, source.stat_energy_from, (_this3$_data = _this3._data) === null || _this3$_data === void 0 ? void 0 : _this3$_data.statsMetadata[source.stat_energy_from]), compare ? html(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"<td\\n                          class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                        >\\n                          \", \" kWh\\n                        </td>\\n                        \", \"\"])), formatNumber(compareEnergy, _this3.hass.locale), showCosts ? html(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"<td class=\\\"mdc-data-table__cell\\\"></td>\"]))) : \"\") : \"\", formatNumber(energy, _this3.hass.locale), showCosts ? html(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"<td class=\\\"mdc-data-table__cell\\\"></td>\"]))) : \"\");\n        }), types.solar ? html(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\"<tr class=\\\"mdc-data-table__row total\\\">\\n                    <td class=\\\"mdc-data-table__cell\\\"></td>\\n                    <th class=\\\"mdc-data-table__cell\\\" scope=\\\"row\\\">\\n                      \", \"\\n                    </th>\\n                    \", \"\\n                    <td\\n                      class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                    >\\n                      \", \" kWh\\n                    </td>\\n                    \", \"\\n                  </tr>\"])), this.hass.localize(\"ui.panel.lovelace.cards.energy.energy_sources_table.solar_total\"), compare ? html(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"<td\\n                            class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                          >\\n                            \", \"\\n                            kWh\\n                          </td>\\n                          \", \"\"])), formatNumber(totalSolarCompare, this.hass.locale), showCosts ? html(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([\"<td class=\\\"mdc-data-table__cell\\\"></td>\"]))) : \"\") : \"\", formatNumber(totalSolar, this.hass.locale), showCosts ? html(_templateObject14 || (_templateObject14 = _taggedTemplateLiteral([\"<td class=\\\"mdc-data-table__cell\\\"></td>\"]))) : \"\") : \"\", (_types$battery = types.battery) === null || _types$battery === void 0 ? void 0 : _types$battery.map(function (source, idx) {\n          var _this3$_data2, _this3$_data3;\n          var energyFrom = calculateStatisticSumGrowth(_this3._data.stats[source.stat_energy_from]) || 0;\n          var energyTo = calculateStatisticSumGrowth(_this3._data.stats[source.stat_energy_to]) || 0;\n          totalBattery += energyFrom - energyTo;\n          var energyFromCompare = compare && calculateStatisticSumGrowth(_this3._data.statsCompare[source.stat_energy_from]) || 0;\n          var energyToCompare = compare && calculateStatisticSumGrowth(_this3._data.statsCompare[source.stat_energy_to]) || 0;\n          totalBatteryCompare += energyFromCompare - energyToCompare;\n          var fromColor = _this3._getColor(computedStyles, colorPropertyMap.battery_out, batteryFromColor, idx);\n          var toColor = _this3._getColor(computedStyles, colorPropertyMap.battery_in, batteryToColor, idx);\n          return html(_templateObject15 || (_templateObject15 = _taggedTemplateLiteral([\"<tr class=\\\"mdc-data-table__row\\\">\\n                    <td class=\\\"mdc-data-table__cell cell-bullet\\\">\\n                      <div\\n                        class=\\\"bullet\\\"\\n                        style=\", \"\\n                      ></div>\\n                    </td>\\n                    <th class=\\\"mdc-data-table__cell\\\" scope=\\\"row\\\">\\n                      \", \"\\n                    </th>\\n                    \", \"\\n                    <td\\n                      class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                    >\\n                      \", \" kWh\\n                    </td>\\n                    \", \"\\n                  </tr>\\n                  <tr class=\\\"mdc-data-table__row\\\">\\n                    <td class=\\\"mdc-data-table__cell cell-bullet\\\">\\n                      <div\\n                        class=\\\"bullet\\\"\\n                        style=\", \"\\n                      ></div>\\n                    </td>\\n                    <th class=\\\"mdc-data-table__cell\\\" scope=\\\"row\\\">\\n                      \", \"\\n                    </th>\\n                    \", \"\\n                    <td\\n                      class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                    >\\n                      \", \" kWh\\n                    </td>\\n                    \", \"\\n                  </tr>\"])), styleMap({\n            borderColor: fromColor,\n            backgroundColor: fromColor + \"7F\"\n          }), getStatisticLabel(_this3.hass, source.stat_energy_from, (_this3$_data2 = _this3._data) === null || _this3$_data2 === void 0 ? void 0 : _this3$_data2.statsMetadata[source.stat_energy_from]), compare ? html(_templateObject16 || (_templateObject16 = _taggedTemplateLiteral([\"<td\\n                            class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                          >\\n                            \", \"\\n                            kWh\\n                          </td>\\n                          \", \"\"])), formatNumber(energyFromCompare, _this3.hass.locale), showCosts ? html(_templateObject17 || (_templateObject17 = _taggedTemplateLiteral([\"<td class=\\\"mdc-data-table__cell\\\"></td>\"]))) : \"\") : \"\", formatNumber(energyFrom, _this3.hass.locale), showCosts ? html(_templateObject18 || (_templateObject18 = _taggedTemplateLiteral([\"<td class=\\\"mdc-data-table__cell\\\"></td>\"]))) : \"\", styleMap({\n            borderColor: toColor,\n            backgroundColor: toColor + \"7F\"\n          }), getStatisticLabel(_this3.hass, source.stat_energy_to, (_this3$_data3 = _this3._data) === null || _this3$_data3 === void 0 ? void 0 : _this3$_data3.statsMetadata[source.stat_energy_to]), compare ? html(_templateObject19 || (_templateObject19 = _taggedTemplateLiteral([\"<td\\n                            class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                          >\\n                            \", \"\\n                            kWh\\n                          </td>\\n                          \", \"\"])), formatNumber(energyToCompare * -1, _this3.hass.locale), showCosts ? html(_templateObject20 || (_templateObject20 = _taggedTemplateLiteral([\"<td class=\\\"mdc-data-table__cell\\\"></td>\"]))) : \"\") : \"\", formatNumber(energyTo * -1, _this3.hass.locale), showCosts ? html(_templateObject21 || (_templateObject21 = _taggedTemplateLiteral([\"<td class=\\\"mdc-data-table__cell\\\"></td>\"]))) : \"\");\n        }), types.battery ? html(_templateObject22 || (_templateObject22 = _taggedTemplateLiteral([\"<tr class=\\\"mdc-data-table__row total\\\">\\n                    <td class=\\\"mdc-data-table__cell\\\"></td>\\n                    <th class=\\\"mdc-data-table__cell\\\" scope=\\\"row\\\">\\n                      \", \"\\n                    </th>\\n                    \", \"\\n                    <td\\n                      class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                    >\\n                      \", \" kWh\\n                    </td>\\n                    \", \"\\n                  </tr>\"])), this.hass.localize(\"ui.panel.lovelace.cards.energy.energy_sources_table.battery_total\"), compare ? html(_templateObject23 || (_templateObject23 = _taggedTemplateLiteral([\" <td\\n                            class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                          >\\n                            \", \"\\n                            kWh\\n                          </td>\\n                          \", \"\"])), formatNumber(totalBatteryCompare, this.hass.locale), showCosts ? html(_templateObject24 || (_templateObject24 = _taggedTemplateLiteral([\"<td class=\\\"mdc-data-table__cell\\\"></td>\"]))) : \"\") : \"\", formatNumber(totalBattery, this.hass.locale), showCosts ? html(_templateObject25 || (_templateObject25 = _taggedTemplateLiteral([\"<td class=\\\"mdc-data-table__cell\\\"></td>\"]))) : \"\") : \"\", (_types$grid3 = types.grid) === null || _types$grid3 === void 0 ? void 0 : _types$grid3.map(function (source) {\n          return html(_templateObject26 || (_templateObject26 = _taggedTemplateLiteral([\"\", \"\\n                  \", \"\"])), source.flow_from.map(function (flow, idx) {\n            var _this3$_data4;\n            var energy = calculateStatisticSumGrowth(_this3._data.stats[flow.stat_energy_from]) || 0;\n            totalGrid += energy;\n            var compareEnergy = compare && calculateStatisticSumGrowth(_this3._data.statsCompare[flow.stat_energy_from]) || 0;\n            totalGridCompare += compareEnergy;\n            var cost_stat = flow.stat_cost || _this3._data.info.cost_sensors[flow.stat_energy_from];\n            var cost = cost_stat ? calculateStatisticSumGrowth(_this3._data.stats[cost_stat]) || 0 : null;\n            if (cost !== null) {\n              hasGridCost = true;\n              totalGridCost += cost;\n            }\n            var costCompare = compare && cost_stat ? calculateStatisticSumGrowth(_this3._data.statsCompare[cost_stat]) || 0 : null;\n            if (costCompare !== null) {\n              totalGridCostCompare += costCompare;\n            }\n            var color = _this3._getColor(computedStyles, colorPropertyMap.grid_consumption, consumptionColor, idx);\n            return html(_templateObject27 || (_templateObject27 = _taggedTemplateLiteral([\"<tr class=\\\"mdc-data-table__row\\\">\\n                      <td class=\\\"mdc-data-table__cell cell-bullet\\\">\\n                        <div\\n                          class=\\\"bullet\\\"\\n                          style=\", \"\\n                        ></div>\\n                      </td>\\n                      <th class=\\\"mdc-data-table__cell\\\" scope=\\\"row\\\">\\n                        \", \"\\n                      </th>\\n                      \", \"\\n                      <td\\n                        class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                      >\\n                        \", \" kWh\\n                      </td>\\n                      \", \"\\n                    </tr>\"])), styleMap({\n              borderColor: color,\n              backgroundColor: color + \"7F\"\n            }), getStatisticLabel(_this3.hass, flow.stat_energy_from, (_this3$_data4 = _this3._data) === null || _this3$_data4 === void 0 ? void 0 : _this3$_data4.statsMetadata[flow.stat_energy_from]), compare ? html(_templateObject28 || (_templateObject28 = _taggedTemplateLiteral([\"<td\\n                              class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                            >\\n                              \", \"\\n                              kWh\\n                            </td>\\n                            \", \"\"])), formatNumber(compareEnergy, _this3.hass.locale), showCosts ? html(_templateObject29 || (_templateObject29 = _taggedTemplateLiteral([\"<td\\n                                  class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                                >\\n                                  \", \"\\n                                </td>\"])), costCompare !== null ? formatNumber(costCompare, _this3.hass.locale, {\n              style: \"currency\",\n              currency: _this3.hass.config.currency\n            }) : \"\") : \"\") : \"\", formatNumber(energy, _this3.hass.locale), showCosts ? html(_templateObject30 || (_templateObject30 = _taggedTemplateLiteral([\" <td\\n                            class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                          >\\n                            \", \"\\n                          </td>\"])), cost !== null ? formatNumber(cost, _this3.hass.locale, {\n              style: \"currency\",\n              currency: _this3.hass.config.currency\n            }) : \"\") : \"\");\n          }), source.flow_to.map(function (flow, idx) {\n            var _this3$_data5;\n            var energy = (calculateStatisticSumGrowth(_this3._data.stats[flow.stat_energy_to]) || 0) * -1;\n            totalGrid += energy;\n            var cost_stat = flow.stat_compensation || _this3._data.info.cost_sensors[flow.stat_energy_to];\n            var cost = cost_stat ? (calculateStatisticSumGrowth(_this3._data.stats[cost_stat]) || 0) * -1 : null;\n            if (cost !== null) {\n              hasGridCost = true;\n              totalGridCost += cost;\n            }\n            var energyCompare = (compare && calculateStatisticSumGrowth(_this3._data.statsCompare[flow.stat_energy_to]) || 0) * -1;\n            totalGridCompare += energyCompare;\n            var costCompare = compare && cost_stat ? (calculateStatisticSumGrowth(_this3._data.statsCompare[cost_stat]) || 0) * -1 : null;\n            if (costCompare !== null) {\n              totalGridCostCompare += costCompare;\n            }\n            var color = _this3._getColor(computedStyles, colorPropertyMap.grid_return, returnColor, idx);\n            return html(_templateObject31 || (_templateObject31 = _taggedTemplateLiteral([\"<tr class=\\\"mdc-data-table__row\\\">\\n                      <td class=\\\"mdc-data-table__cell cell-bullet\\\">\\n                        <div\\n                          class=\\\"bullet\\\"\\n                          style=\", \"\\n                        ></div>\\n                      </td>\\n                      <th class=\\\"mdc-data-table__cell\\\" scope=\\\"row\\\">\\n                        \", \"\\n                      </th>\\n                      \", \"\\n                      <td\\n                        class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                      >\\n                        \", \" kWh\\n                      </td>\\n                      \", \"\\n                    </tr>\"])), styleMap({\n              borderColor: color,\n              backgroundColor: color + \"7F\"\n            }), getStatisticLabel(_this3.hass, flow.stat_energy_to, (_this3$_data5 = _this3._data) === null || _this3$_data5 === void 0 ? void 0 : _this3$_data5.statsMetadata[flow.stat_energy_to]), compare ? html(_templateObject32 || (_templateObject32 = _taggedTemplateLiteral([\"<td\\n                              class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                            >\\n                              \", \"\\n                              kWh\\n                            </td>\\n                            \", \"\"])), formatNumber(energyCompare, _this3.hass.locale), showCosts ? html(_templateObject33 || (_templateObject33 = _taggedTemplateLiteral([\"<td\\n                                  class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                                >\\n                                  \", \"\\n                                </td>\"])), costCompare !== null ? formatNumber(costCompare, _this3.hass.locale, {\n              style: \"currency\",\n              currency: _this3.hass.config.currency\n            }) : \"\") : \"\") : \"\", formatNumber(energy, _this3.hass.locale), showCosts ? html(_templateObject34 || (_templateObject34 = _taggedTemplateLiteral([\" <td\\n                            class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                          >\\n                            \", \"\\n                          </td>\"])), cost !== null ? formatNumber(cost, _this3.hass.locale, {\n              style: \"currency\",\n              currency: _this3.hass.config.currency\n            }) : \"\") : \"\");\n          }));\n        }), types.grid ? html(_templateObject35 || (_templateObject35 = _taggedTemplateLiteral([\" <tr class=\\\"mdc-data-table__row total\\\">\\n                    <td class=\\\"mdc-data-table__cell\\\"></td>\\n                    <th class=\\\"mdc-data-table__cell\\\" scope=\\\"row\\\">\\n                      \", \"\\n                    </th>\\n                    \", \"\\n                    <td\\n                      class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                    >\\n                      \", \" kWh\\n                    </td>\\n                    \", \"\\n                  </tr>\"])), this.hass.localize(\"ui.panel.lovelace.cards.energy.energy_sources_table.grid_total\"), compare ? html(_templateObject36 || (_templateObject36 = _taggedTemplateLiteral([\"<td\\n                            class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                          >\\n                            \", \"\\n                            kWh\\n                          </td>\\n                          \", \"\"])), formatNumber(totalGridCompare, this.hass.locale), showCosts ? html(_templateObject37 || (_templateObject37 = _taggedTemplateLiteral([\"<td\\n                                class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                              >\\n                                \", \"\\n                              </td>\"])), hasGridCost ? formatNumber(totalGridCostCompare, this.hass.locale, {\n          style: \"currency\",\n          currency: this.hass.config.currency\n        }) : \"\") : \"\") : \"\", formatNumber(totalGrid, this.hass.locale), showCosts ? html(_templateObject38 || (_templateObject38 = _taggedTemplateLiteral([\"<td\\n                          class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                        >\\n                          \", \"\\n                        </td>\"])), hasGridCost ? formatNumber(totalGridCost, this.hass.locale, {\n          style: \"currency\",\n          currency: this.hass.config.currency\n        }) : \"\") : \"\") : \"\", (_types$gas2 = types.gas) === null || _types$gas2 === void 0 ? void 0 : _types$gas2.map(function (source, idx) {\n          var _this3$_data6;\n          var energy = calculateStatisticSumGrowth(_this3._data.stats[source.stat_energy_from]) || 0;\n          totalGas += energy;\n          var energyCompare = compare && calculateStatisticSumGrowth(_this3._data.statsCompare[source.stat_energy_from]) || 0;\n          totalGasCompare += energyCompare;\n          var cost_stat = source.stat_cost || _this3._data.info.cost_sensors[source.stat_energy_from];\n          var cost = cost_stat ? calculateStatisticSumGrowth(_this3._data.stats[cost_stat]) || 0 : null;\n          if (cost !== null) {\n            hasGasCost = true;\n            totalGasCost += cost;\n          }\n          var costCompare = compare && cost_stat ? calculateStatisticSumGrowth(_this3._data.statsCompare[cost_stat]) || 0 : null;\n          if (costCompare !== null) {\n            totalGasCostCompare += costCompare;\n          }\n          var color = _this3._getColor(computedStyles, colorPropertyMap.gas, gasColor, idx);\n          return html(_templateObject39 || (_templateObject39 = _taggedTemplateLiteral([\"<tr class=\\\"mdc-data-table__row\\\">\\n                  <td class=\\\"mdc-data-table__cell cell-bullet\\\">\\n                    <div\\n                      class=\\\"bullet\\\"\\n                      style=\", \"\\n                    ></div>\\n                  </td>\\n                  <th class=\\\"mdc-data-table__cell\\\" scope=\\\"row\\\">\\n                    \", \"\\n                  </th>\\n                  \", \"\\n                  <td\\n                    class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                  >\\n                    \", \" \", \"\\n                  </td>\\n                  \", \"\\n                </tr>\"])), styleMap({\n            borderColor: color,\n            backgroundColor: color + \"7F\"\n          }), getStatisticLabel(_this3.hass, source.stat_energy_from, (_this3$_data6 = _this3._data) === null || _this3$_data6 === void 0 ? void 0 : _this3$_data6.statsMetadata[source.stat_energy_from]), compare ? html(_templateObject40 || (_templateObject40 = _taggedTemplateLiteral([\" <td\\n                          class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                        >\\n                          \", \"\\n                          \", \"\\n                        </td>\\n                        \", \"\"])), formatNumber(energyCompare, _this3.hass.locale), gasUnit, showCosts ? html(_templateObject41 || (_templateObject41 = _taggedTemplateLiteral([\"<td\\n                              class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                            >\\n                              \", \"\\n                            </td>\"])), costCompare !== null ? formatNumber(costCompare, _this3.hass.locale, {\n            style: \"currency\",\n            currency: _this3.hass.config.currency\n          }) : \"\") : \"\") : \"\", formatNumber(energy, _this3.hass.locale), gasUnit, showCosts ? html(_templateObject42 || (_templateObject42 = _taggedTemplateLiteral([\"<td\\n                        class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                      >\\n                        \", \"\\n                      </td>\"])), cost !== null ? formatNumber(cost, _this3.hass.locale, {\n            style: \"currency\",\n            currency: _this3.hass.config.currency\n          }) : \"\") : \"\");\n        }), types.gas ? html(_templateObject43 || (_templateObject43 = _taggedTemplateLiteral([\"<tr class=\\\"mdc-data-table__row total\\\">\\n                    <td class=\\\"mdc-data-table__cell\\\"></td>\\n                    <th class=\\\"mdc-data-table__cell\\\" scope=\\\"row\\\">\\n                      \", \"\\n                    </th>\\n                    \", \"\\n                    <td\\n                      class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                    >\\n                      \", \" \", \"\\n                    </td>\\n                    \", \"\\n                  </tr>\"])), this.hass.localize(\"ui.panel.lovelace.cards.energy.energy_sources_table.gas_total\"), compare ? html(_templateObject44 || (_templateObject44 = _taggedTemplateLiteral([\"<td\\n                            class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                          >\\n                            \", \"\\n                            \", \"\\n                          </td>\\n                          \", \"\"])), formatNumber(totalGasCompare, this.hass.locale), gasUnit, showCosts ? html(_templateObject45 || (_templateObject45 = _taggedTemplateLiteral([\"<td\\n                                class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                              >\\n                                \", \"\\n                              </td>\"])), hasGasCost ? formatNumber(totalGasCostCompare, this.hass.locale, {\n          style: \"currency\",\n          currency: this.hass.config.currency\n        }) : \"\") : \"\") : \"\", formatNumber(totalGas, this.hass.locale), gasUnit, showCosts ? html(_templateObject46 || (_templateObject46 = _taggedTemplateLiteral([\"<td\\n                          class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                        >\\n                          \", \"\\n                        </td>\"])), hasGasCost ? formatNumber(totalGasCost, this.hass.locale, {\n          style: \"currency\",\n          currency: this.hass.config.currency\n        }) : \"\") : \"\") : \"\", (_types$water2 = types.water) === null || _types$water2 === void 0 ? void 0 : _types$water2.map(function (source, idx) {\n          var _this3$_data7;\n          var energy = calculateStatisticSumGrowth(_this3._data.stats[source.stat_energy_from]) || 0;\n          totalWater += energy;\n          var energyCompare = compare && calculateStatisticSumGrowth(_this3._data.statsCompare[source.stat_energy_from]) || 0;\n          totalWaterCompare += energyCompare;\n          var cost_stat = source.stat_cost || _this3._data.info.cost_sensors[source.stat_energy_from];\n          var cost = cost_stat ? calculateStatisticSumGrowth(_this3._data.stats[cost_stat]) || 0 : null;\n          if (cost !== null) {\n            hasWaterCost = true;\n            totalWaterCost += cost;\n          }\n          var costCompare = compare && cost_stat ? calculateStatisticSumGrowth(_this3._data.statsCompare[cost_stat]) || 0 : null;\n          if (costCompare !== null) {\n            totalWaterCostCompare += costCompare;\n          }\n          var color = _this3._getColor(computedStyles, colorPropertyMap.water, waterColor, idx);\n          return html(_templateObject47 || (_templateObject47 = _taggedTemplateLiteral([\"<tr class=\\\"mdc-data-table__row\\\">\\n                  <td class=\\\"mdc-data-table__cell cell-bullet\\\">\\n                    <div\\n                      class=\\\"bullet\\\"\\n                      style=\", \"\\n                    ></div>\\n                  </td>\\n                  <th class=\\\"mdc-data-table__cell\\\" scope=\\\"row\\\">\\n                    \", \"\\n                  </th>\\n                  \", \"\\n                  <td\\n                    class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                  >\\n                    \", \" \", \"\\n                  </td>\\n                  \", \"\\n                </tr>\"])), styleMap({\n            borderColor: color,\n            backgroundColor: color + \"7F\"\n          }), getStatisticLabel(_this3.hass, source.stat_energy_from, (_this3$_data7 = _this3._data) === null || _this3$_data7 === void 0 ? void 0 : _this3$_data7.statsMetadata[source.stat_energy_from]), compare ? html(_templateObject48 || (_templateObject48 = _taggedTemplateLiteral([\" <td\\n                          class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                        >\\n                          \", \"\\n                          \", \"\\n                        </td>\\n                        \", \"\"])), formatNumber(energyCompare, _this3.hass.locale), waterUnit, showCosts ? html(_templateObject49 || (_templateObject49 = _taggedTemplateLiteral([\"<td\\n                              class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                            >\\n                              \", \"\\n                            </td>\"])), costCompare !== null ? formatNumber(costCompare, _this3.hass.locale, {\n            style: \"currency\",\n            currency: _this3.hass.config.currency\n          }) : \"\") : \"\") : \"\", formatNumber(energy, _this3.hass.locale), waterUnit, showCosts ? html(_templateObject50 || (_templateObject50 = _taggedTemplateLiteral([\"<td\\n                        class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                      >\\n                        \", \"\\n                      </td>\"])), cost !== null ? formatNumber(cost, _this3.hass.locale, {\n            style: \"currency\",\n            currency: _this3.hass.config.currency\n          }) : \"\") : \"\");\n        }), types.water ? html(_templateObject51 || (_templateObject51 = _taggedTemplateLiteral([\"<tr class=\\\"mdc-data-table__row total\\\">\\n                    <td class=\\\"mdc-data-table__cell\\\"></td>\\n                    <th class=\\\"mdc-data-table__cell\\\" scope=\\\"row\\\">\\n                      \", \"\\n                    </th>\\n                    \", \"\\n                    <td\\n                      class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                    >\\n                      \", \" \", \"\\n                    </td>\\n                    \", \"\\n                  </tr>\"])), this.hass.localize(\"ui.panel.lovelace.cards.energy.energy_sources_table.water_total\"), compare ? html(_templateObject52 || (_templateObject52 = _taggedTemplateLiteral([\"<td\\n                            class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                          >\\n                            \", \"\\n                            \", \"\\n                          </td>\\n                          \", \"\"])), formatNumber(totalWaterCompare, this.hass.locale), waterUnit, showCosts ? html(_templateObject53 || (_templateObject53 = _taggedTemplateLiteral([\"<td\\n                                class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                              >\\n                                \", \"\\n                              </td>\"])), hasWaterCost ? formatNumber(totalWaterCostCompare, this.hass.locale, {\n          style: \"currency\",\n          currency: this.hass.config.currency\n        }) : \"\") : \"\") : \"\", formatNumber(totalWater, this.hass.locale), waterUnit, showCosts ? html(_templateObject54 || (_templateObject54 = _taggedTemplateLiteral([\"<td\\n                          class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                        >\\n                          \", \"\\n                        </td>\"])), hasWaterCost ? formatNumber(totalWaterCost, this.hass.locale, {\n          style: \"currency\",\n          currency: this.hass.config.currency\n        }) : \"\") : \"\") : \"\", [hasGasCost, hasWaterCost, hasGridCost].filter(Boolean).length > 1 ? html(_templateObject55 || (_templateObject55 = _taggedTemplateLiteral([\"<tr class=\\\"mdc-data-table__row total\\\">\\n                    <td class=\\\"mdc-data-table__cell\\\"></td>\\n                    <th class=\\\"mdc-data-table__cell\\\" scope=\\\"row\\\">\\n                      \", \"\\n                    </th>\\n                    \", \"\\n                    <td class=\\\"mdc-data-table__cell\\\"></td>\\n                    <td\\n                      class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                    >\\n                      \", \"\\n                    </td>\\n                  </tr>\"])), this.hass.localize(\"ui.panel.lovelace.cards.energy.energy_sources_table.total_costs\"), compare ? html(_templateObject56 || (_templateObject56 = _taggedTemplateLiteral([\"<td class=\\\"mdc-data-table__cell\\\"></td>\\n                          <td\\n                            class=\\\"mdc-data-table__cell mdc-data-table__cell--numeric\\\"\\n                          >\\n                            \", \"\\n                          </td>\"])), formatNumber(totalGasCostCompare + totalGridCostCompare + totalWaterCostCompare, this.hass.locale, {\n          style: \"currency\",\n          currency: this.hass.config.currency\n        })) : \"\", formatNumber(totalGasCost + totalGridCost + totalWaterCost, this.hass.locale, {\n          style: \"currency\",\n          currency: this.hass.config.currency\n        })) : \"\");\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return css(_templateObject57 || (_templateObject57 = _taggedTemplateLiteral([\"\\n      \", \"\\n      .mdc-data-table {\\n        width: 100%;\\n        border: 0;\\n      }\\n      .mdc-data-table__header-cell,\\n      .mdc-data-table__cell {\\n        color: var(--primary-text-color);\\n        border-bottom-color: var(--divider-color);\\n        text-align: var(--float-start);\\n      }\\n      .mdc-data-table__row:not(.mdc-data-table__row--selected):hover {\\n        background-color: rgba(var(--rgb-primary-text-color), 0.04);\\n      }\\n      .total {\\n        --mdc-typography-body2-font-weight: 500;\\n      }\\n      .total .mdc-data-table__cell {\\n        border-top: 1px solid var(--divider-color);\\n      }\\n      ha-card {\\n        height: 100%;\\n        overflow: hidden;\\n      }\\n      .card-header {\\n        padding-bottom: 0;\\n      }\\n      .content {\\n        padding: 16px;\\n      }\\n      .has-header {\\n        padding-top: 0;\\n      }\\n      .cell-bullet {\\n        width: 32px;\\n        padding-right: 0;\\n        padding-inline-end: 0;\\n        padding-inline-start: 16px;\\n        direction: var(--direction);\\n      }\\n      .bullet {\\n        border-width: 1px;\\n        border-style: solid;\\n        border-radius: 4px;\\n        height: 16px;\\n        width: 32px;\\n      }\\n      .mdc-data-table__cell--numeric {\\n        direction: ltr;\\n      }\\n    \"])), unsafeCSS(dataTableStyles));\n      }\n    }]\n  };\n}, SubscribeMixin(LitElement));","map":{"version":3,"names":["dataTableStyles","css","html","LitElement","unsafeCSS","nothing","customElement","property","state","styleMap","hex2rgb","lab2rgb","rgb2hex","rgb2lab","labBrighten","labDarken","formatNumber","energySourcesByType","getEnergyDataCollection","getEnergyGasUnit","getEnergyWaterUnit","calculateStatisticSumGrowth","getStatisticLabel","SubscribeMixin","hasConfigChanged","HuiEnergySourcesTableCard","_decorate","_initialize","_SubscribeMixin","_SubscribeMixin2","_inherits","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","_assertThisInitialized","_createClass","F","d","kind","decorators","attribute","key","value","hassSubscribe","_this$_config","_this2","hass","_config","collection_key","subscribe","data","_data","getCardSize","setConfig","config","shouldUpdate","changedProps","size","has","_getColor","computedStyles","propertyName","baseColor","idx","color","getPropertyValue","trim","modifiedColor","themes","darkMode","undefined","render","_types$grid","_types$grid2","_types$gas","_types$water","_types$solar","_this3","_types$battery","_types$grid3","_types$gas2","_types$water2","_templateObject","_taggedTemplateLiteral","localize","totalGrid","totalGridCost","totalSolar","totalBattery","totalGas","totalGasCost","totalWater","totalWaterCost","hasGridCost","hasGasCost","hasWaterCost","totalGridCompare","totalGridCostCompare","totalSolarCompare","totalBatteryCompare","totalGasCompare","totalGasCostCompare","totalWaterCompare","totalWaterCostCompare","types","prefs","colorPropertyMap","grid_return","grid_consumption","battery_in","battery_out","solar","gas","water","getComputedStyle","solarColor","batteryFromColor","batteryToColor","returnColor","consumptionColor","gasColor","waterColor","showCosts","grid","flow_from","some","flow","stat_cost","entity_energy_price","number_energy_price","flow_to","stat_compensation","gasUnit","statsMetadata","waterUnit","compare","statsCompare","_templateObject2","title","_templateObject3","_templateObject4","_templateObject5","_templateObject6","map","source","_this3$_data","energy","stats","stat_energy_from","compareEnergy","_templateObject7","borderColor","backgroundColor","_templateObject8","locale","_templateObject9","_templateObject10","_templateObject11","_templateObject12","_templateObject13","_templateObject14","battery","_this3$_data2","_this3$_data3","energyFrom","energyTo","stat_energy_to","energyFromCompare","energyToCompare","fromColor","toColor","_templateObject15","_templateObject16","_templateObject17","_templateObject18","_templateObject19","_templateObject20","_templateObject21","_templateObject22","_templateObject23","_templateObject24","_templateObject25","_templateObject26","_this3$_data4","cost_stat","info","cost_sensors","cost","costCompare","_templateObject27","_templateObject28","_templateObject29","style","currency","_templateObject30","_this3$_data5","energyCompare","_templateObject31","_templateObject32","_templateObject33","_templateObject34","_templateObject35","_templateObject36","_templateObject37","_templateObject38","_this3$_data6","_templateObject39","_templateObject40","_templateObject41","_templateObject42","_templateObject43","_templateObject44","_templateObject45","_templateObject46","_this3$_data7","_templateObject47","_templateObject48","_templateObject49","_templateObject50","_templateObject51","_templateObject52","_templateObject53","_templateObject54","filter","Boolean","_templateObject55","_templateObject56","static","styles","_templateObject57"],"sources":["/workspaces/frontend/src/panels/lovelace/cards/energy/hui-energy-sources-table-card.ts"],"sourcesContent":["// @ts-ignore\nimport dataTableStyles from \"@material/data-table/dist/mdc.data-table.min.css\";\nimport { UnsubscribeFunc } from \"home-assistant-js-websocket\";\nimport {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  unsafeCSS,\n  nothing,\n  PropertyValues,\n} from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { styleMap } from \"lit/directives/style-map\";\nimport {\n  hex2rgb,\n  lab2rgb,\n  rgb2hex,\n  rgb2lab,\n} from \"../../../../common/color/convert-color\";\nimport { labBrighten, labDarken } from \"../../../../common/color/lab\";\nimport { formatNumber } from \"../../../../common/number/format_number\";\nimport \"../../../../components/ha-card\";\nimport {\n  EnergyData,\n  energySourcesByType,\n  getEnergyDataCollection,\n  getEnergyGasUnit,\n  getEnergyWaterUnit,\n} from \"../../../../data/energy\";\nimport {\n  calculateStatisticSumGrowth,\n  getStatisticLabel,\n} from \"../../../../data/recorder\";\nimport { SubscribeMixin } from \"../../../../mixins/subscribe-mixin\";\nimport { HomeAssistant } from \"../../../../types\";\nimport { LovelaceCard } from \"../../types\";\nimport { EnergySourcesTableCardConfig } from \"../types\";\nimport { hasConfigChanged } from \"../../common/has-changed\";\n\n@customElement(\"hui-energy-sources-table-card\")\nexport class HuiEnergySourcesTableCard\n  extends SubscribeMixin(LitElement)\n  implements LovelaceCard\n{\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @state() private _config?: EnergySourcesTableCardConfig;\n\n  @state() private _data?: EnergyData;\n\n  protected hassSubscribeRequiredHostProps = [\"_config\"];\n\n  public hassSubscribe(): UnsubscribeFunc[] {\n    return [\n      getEnergyDataCollection(this.hass, {\n        key: this._config?.collection_key,\n      }).subscribe((data) => {\n        this._data = data;\n      }),\n    ];\n  }\n\n  public getCardSize(): Promise<number> | number {\n    return 3;\n  }\n\n  public setConfig(config: EnergySourcesTableCardConfig): void {\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return (\n      hasConfigChanged(this, changedProps) ||\n      changedProps.size > 1 ||\n      !changedProps.has(\"hass\")\n    );\n  }\n\n  private _getColor(\n    computedStyles: CSSStyleDeclaration,\n    propertyName: string,\n    baseColor: string,\n    idx: number\n  ): string {\n    let color = computedStyles\n      .getPropertyValue(propertyName + \"-\" + idx)\n      .trim();\n    if (color.length === 0) {\n      const modifiedColor =\n        idx > 0\n          ? this.hass.themes.darkMode\n            ? labBrighten(rgb2lab(hex2rgb(baseColor)), idx)\n            : labDarken(rgb2lab(hex2rgb(baseColor)), idx)\n          : undefined;\n      color = modifiedColor ? rgb2hex(lab2rgb(modifiedColor)) : baseColor;\n    }\n    return color;\n  }\n\n  protected render() {\n    if (!this.hass || !this._config) {\n      return nothing;\n    }\n\n    if (!this._data) {\n      return html`${this.hass.localize(\n        \"ui.panel.lovelace.cards.energy.loading\"\n      )}`;\n    }\n\n    let totalGrid = 0;\n    let totalGridCost = 0;\n    let totalSolar = 0;\n    let totalBattery = 0;\n    let totalGas = 0;\n    let totalGasCost = 0;\n    let totalWater = 0;\n    let totalWaterCost = 0;\n\n    let hasGridCost = false;\n    let hasGasCost = false;\n    let hasWaterCost = false;\n\n    let totalGridCompare = 0;\n    let totalGridCostCompare = 0;\n    let totalSolarCompare = 0;\n    let totalBatteryCompare = 0;\n    let totalGasCompare = 0;\n    let totalGasCostCompare = 0;\n    let totalWaterCompare = 0;\n    let totalWaterCostCompare = 0;\n\n    const types = energySourcesByType(this._data.prefs);\n\n    const colorPropertyMap = {\n      grid_return: \"--energy-grid-return-color\",\n      grid_consumption: \"--energy-grid-consumption-color\",\n      battery_in: \"--energy-battery-in-color\",\n      battery_out: \"--energy-battery-out-color\",\n      solar: \"--energy-solar-color\",\n      gas: \"--energy-gas-color\",\n      water: \"--energy-water-color\",\n    };\n\n    const computedStyles = getComputedStyle(this);\n    const solarColor = computedStyles\n      .getPropertyValue(colorPropertyMap.solar)\n      .trim();\n    const batteryFromColor = computedStyles\n      .getPropertyValue(colorPropertyMap.battery_out)\n      .trim();\n    const batteryToColor = computedStyles\n      .getPropertyValue(colorPropertyMap.battery_in)\n      .trim();\n    const returnColor = computedStyles\n      .getPropertyValue(colorPropertyMap.grid_return)\n      .trim();\n    const consumptionColor = computedStyles\n      .getPropertyValue(colorPropertyMap.grid_consumption)\n      .trim();\n    const gasColor = computedStyles\n      .getPropertyValue(colorPropertyMap.gas)\n      .trim();\n    const waterColor = computedStyles\n      .getPropertyValue(colorPropertyMap.water)\n      .trim();\n\n    const showCosts =\n      types.grid?.[0].flow_from.some(\n        (flow) =>\n          flow.stat_cost || flow.entity_energy_price || flow.number_energy_price\n      ) ||\n      types.grid?.[0].flow_to.some(\n        (flow) =>\n          flow.stat_compensation ||\n          flow.entity_energy_price ||\n          flow.number_energy_price\n      ) ||\n      types.gas?.some(\n        (flow) =>\n          flow.stat_cost || flow.entity_energy_price || flow.number_energy_price\n      ) ||\n      types.water?.some(\n        (flow) =>\n          flow.stat_cost || flow.entity_energy_price || flow.number_energy_price\n      );\n\n    const gasUnit =\n      getEnergyGasUnit(this.hass, this._data.prefs, this._data.statsMetadata) ||\n      \"\";\n\n    const waterUnit = getEnergyWaterUnit(this.hass) || \"mÂ³\";\n\n    const compare = this._data.statsCompare !== undefined;\n\n    return html` <ha-card>\n      ${this._config.title\n        ? html`<h1 class=\"card-header\">${this._config.title}</h1>`\n        : \"\"}\n      <div class=\"mdc-data-table\">\n        <div class=\"mdc-data-table__table-container\">\n          <table class=\"mdc-data-table__table\" aria-label=\"Energy sources\">\n            <thead>\n              <tr class=\"mdc-data-table__header-row\">\n                <th class=\"mdc-data-table__header-cell\"></th>\n                <th\n                  class=\"mdc-data-table__header-cell\"\n                  role=\"columnheader\"\n                  scope=\"col\"\n                >\n                  ${this.hass.localize(\n                    \"ui.panel.lovelace.cards.energy.energy_sources_table.source\"\n                  )}\n                </th>\n                ${compare\n                  ? html`<th\n                        class=\"mdc-data-table__header-cell mdc-data-table__header-cell--numeric\"\n                        role=\"columnheader\"\n                        scope=\"col\"\n                      >\n                        ${this.hass.localize(\n                          \"ui.panel.lovelace.cards.energy.energy_sources_table.previous_energy\"\n                        )}\n                      </th>\n                      ${showCosts\n                        ? html`<th\n                            class=\"mdc-data-table__header-cell mdc-data-table__header-cell--numeric\"\n                            role=\"columnheader\"\n                            scope=\"col\"\n                          >\n                            ${this.hass.localize(\n                              \"ui.panel.lovelace.cards.energy.energy_sources_table.previous_cost\"\n                            )}\n                          </th>`\n                        : \"\"}`\n                  : \"\"}\n                <th\n                  class=\"mdc-data-table__header-cell mdc-data-table__header-cell--numeric\"\n                  role=\"columnheader\"\n                  scope=\"col\"\n                >\n                  ${this.hass.localize(\n                    \"ui.panel.lovelace.cards.energy.energy_sources_table.energy\"\n                  )}\n                </th>\n                ${showCosts\n                  ? html` <th\n                      class=\"mdc-data-table__header-cell mdc-data-table__header-cell--numeric\"\n                      role=\"columnheader\"\n                      scope=\"col\"\n                    >\n                      ${this.hass.localize(\n                        \"ui.panel.lovelace.cards.energy.energy_sources_table.cost\"\n                      )}\n                    </th>`\n                  : \"\"}\n              </tr>\n            </thead>\n            <tbody class=\"mdc-data-table__content\">\n              ${types.solar?.map((source, idx) => {\n                const energy =\n                  calculateStatisticSumGrowth(\n                    this._data!.stats[source.stat_energy_from]\n                  ) || 0;\n                totalSolar += energy;\n\n                const compareEnergy =\n                  (compare &&\n                    calculateStatisticSumGrowth(\n                      this._data!.statsCompare[source.stat_energy_from]\n                    )) ||\n                  0;\n                totalSolarCompare += compareEnergy;\n\n                const color = this._getColor(\n                  computedStyles,\n                  colorPropertyMap.solar,\n                  solarColor,\n                  idx\n                );\n\n                return html`<tr class=\"mdc-data-table__row\">\n                  <td class=\"mdc-data-table__cell cell-bullet\">\n                    <div\n                      class=\"bullet\"\n                      style=${styleMap({\n                        borderColor: color,\n                        backgroundColor: color + \"7F\",\n                      })}\n                    ></div>\n                  </td>\n                  <th class=\"mdc-data-table__cell\" scope=\"row\">\n                    ${getStatisticLabel(\n                      this.hass,\n                      source.stat_energy_from,\n                      this._data?.statsMetadata[source.stat_energy_from]\n                    )}\n                  </th>\n                  ${compare\n                    ? html`<td\n                          class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                        >\n                          ${formatNumber(compareEnergy, this.hass.locale)} kWh\n                        </td>\n                        ${showCosts\n                          ? html`<td class=\"mdc-data-table__cell\"></td>`\n                          : \"\"}`\n                    : \"\"}\n                  <td\n                    class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                  >\n                    ${formatNumber(energy, this.hass.locale)} kWh\n                  </td>\n                  ${showCosts\n                    ? html`<td class=\"mdc-data-table__cell\"></td>`\n                    : \"\"}\n                </tr>`;\n              })}\n              ${types.solar\n                ? html`<tr class=\"mdc-data-table__row total\">\n                    <td class=\"mdc-data-table__cell\"></td>\n                    <th class=\"mdc-data-table__cell\" scope=\"row\">\n                      ${this.hass.localize(\n                        \"ui.panel.lovelace.cards.energy.energy_sources_table.solar_total\"\n                      )}\n                    </th>\n                    ${compare\n                      ? html`<td\n                            class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                          >\n                            ${formatNumber(totalSolarCompare, this.hass.locale)}\n                            kWh\n                          </td>\n                          ${showCosts\n                            ? html`<td class=\"mdc-data-table__cell\"></td>`\n                            : \"\"}`\n                      : \"\"}\n                    <td\n                      class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                    >\n                      ${formatNumber(totalSolar, this.hass.locale)} kWh\n                    </td>\n                    ${showCosts\n                      ? html`<td class=\"mdc-data-table__cell\"></td>`\n                      : \"\"}\n                  </tr>`\n                : \"\"}\n              ${types.battery?.map((source, idx) => {\n                const energyFrom =\n                  calculateStatisticSumGrowth(\n                    this._data!.stats[source.stat_energy_from]\n                  ) || 0;\n                const energyTo =\n                  calculateStatisticSumGrowth(\n                    this._data!.stats[source.stat_energy_to]\n                  ) || 0;\n                totalBattery += energyFrom - energyTo;\n\n                const energyFromCompare =\n                  (compare &&\n                    calculateStatisticSumGrowth(\n                      this._data!.statsCompare[source.stat_energy_from]\n                    )) ||\n                  0;\n                const energyToCompare =\n                  (compare &&\n                    calculateStatisticSumGrowth(\n                      this._data!.statsCompare[source.stat_energy_to]\n                    )) ||\n                  0;\n                totalBatteryCompare += energyFromCompare - energyToCompare;\n\n                const fromColor = this._getColor(\n                  computedStyles,\n                  colorPropertyMap.battery_out,\n                  batteryFromColor,\n                  idx\n                );\n                const toColor = this._getColor(\n                  computedStyles,\n                  colorPropertyMap.battery_in,\n                  batteryToColor,\n                  idx\n                );\n\n                return html`<tr class=\"mdc-data-table__row\">\n                    <td class=\"mdc-data-table__cell cell-bullet\">\n                      <div\n                        class=\"bullet\"\n                        style=${styleMap({\n                          borderColor: fromColor,\n                          backgroundColor: fromColor + \"7F\",\n                        })}\n                      ></div>\n                    </td>\n                    <th class=\"mdc-data-table__cell\" scope=\"row\">\n                      ${getStatisticLabel(\n                        this.hass,\n                        source.stat_energy_from,\n                        this._data?.statsMetadata[source.stat_energy_from]\n                      )}\n                    </th>\n                    ${compare\n                      ? html`<td\n                            class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                          >\n                            ${formatNumber(energyFromCompare, this.hass.locale)}\n                            kWh\n                          </td>\n                          ${showCosts\n                            ? html`<td class=\"mdc-data-table__cell\"></td>`\n                            : \"\"}`\n                      : \"\"}\n                    <td\n                      class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                    >\n                      ${formatNumber(energyFrom, this.hass.locale)} kWh\n                    </td>\n                    ${showCosts\n                      ? html`<td class=\"mdc-data-table__cell\"></td>`\n                      : \"\"}\n                  </tr>\n                  <tr class=\"mdc-data-table__row\">\n                    <td class=\"mdc-data-table__cell cell-bullet\">\n                      <div\n                        class=\"bullet\"\n                        style=${styleMap({\n                          borderColor: toColor,\n                          backgroundColor: toColor + \"7F\",\n                        })}\n                      ></div>\n                    </td>\n                    <th class=\"mdc-data-table__cell\" scope=\"row\">\n                      ${getStatisticLabel(\n                        this.hass,\n                        source.stat_energy_to,\n                        this._data?.statsMetadata[source.stat_energy_to]\n                      )}\n                    </th>\n                    ${compare\n                      ? html`<td\n                            class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                          >\n                            ${formatNumber(\n                              energyToCompare * -1,\n                              this.hass.locale\n                            )}\n                            kWh\n                          </td>\n                          ${showCosts\n                            ? html`<td class=\"mdc-data-table__cell\"></td>`\n                            : \"\"}`\n                      : \"\"}\n                    <td\n                      class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                    >\n                      ${formatNumber(energyTo * -1, this.hass.locale)} kWh\n                    </td>\n                    ${showCosts\n                      ? html`<td class=\"mdc-data-table__cell\"></td>`\n                      : \"\"}\n                  </tr>`;\n              })}\n              ${types.battery\n                ? html`<tr class=\"mdc-data-table__row total\">\n                    <td class=\"mdc-data-table__cell\"></td>\n                    <th class=\"mdc-data-table__cell\" scope=\"row\">\n                      ${this.hass.localize(\n                        \"ui.panel.lovelace.cards.energy.energy_sources_table.battery_total\"\n                      )}\n                    </th>\n                    ${compare\n                      ? html` <td\n                            class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                          >\n                            ${formatNumber(\n                              totalBatteryCompare,\n                              this.hass.locale\n                            )}\n                            kWh\n                          </td>\n                          ${showCosts\n                            ? html`<td class=\"mdc-data-table__cell\"></td>`\n                            : \"\"}`\n                      : \"\"}\n                    <td\n                      class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                    >\n                      ${formatNumber(totalBattery, this.hass.locale)} kWh\n                    </td>\n                    ${showCosts\n                      ? html`<td class=\"mdc-data-table__cell\"></td>`\n                      : \"\"}\n                  </tr>`\n                : \"\"}\n              ${types.grid?.map(\n                (source) =>\n                  html`${source.flow_from.map((flow, idx) => {\n                    const energy =\n                      calculateStatisticSumGrowth(\n                        this._data!.stats[flow.stat_energy_from]\n                      ) || 0;\n                    totalGrid += energy;\n\n                    const compareEnergy =\n                      (compare &&\n                        calculateStatisticSumGrowth(\n                          this._data!.statsCompare[flow.stat_energy_from]\n                        )) ||\n                      0;\n                    totalGridCompare += compareEnergy;\n\n                    const cost_stat =\n                      flow.stat_cost ||\n                      this._data!.info.cost_sensors[flow.stat_energy_from];\n                    const cost = cost_stat\n                      ? calculateStatisticSumGrowth(\n                          this._data!.stats[cost_stat]\n                        ) || 0\n                      : null;\n                    if (cost !== null) {\n                      hasGridCost = true;\n                      totalGridCost += cost;\n                    }\n\n                    const costCompare =\n                      compare && cost_stat\n                        ? calculateStatisticSumGrowth(\n                            this._data!.statsCompare[cost_stat]\n                          ) || 0\n                        : null;\n                    if (costCompare !== null) {\n                      totalGridCostCompare += costCompare;\n                    }\n\n                    const color = this._getColor(\n                      computedStyles,\n                      colorPropertyMap.grid_consumption,\n                      consumptionColor,\n                      idx\n                    );\n\n                    return html`<tr class=\"mdc-data-table__row\">\n                      <td class=\"mdc-data-table__cell cell-bullet\">\n                        <div\n                          class=\"bullet\"\n                          style=${styleMap({\n                            borderColor: color,\n                            backgroundColor: color + \"7F\",\n                          })}\n                        ></div>\n                      </td>\n                      <th class=\"mdc-data-table__cell\" scope=\"row\">\n                        ${getStatisticLabel(\n                          this.hass,\n                          flow.stat_energy_from,\n                          this._data?.statsMetadata[flow.stat_energy_from]\n                        )}\n                      </th>\n                      ${compare\n                        ? html`<td\n                              class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                            >\n                              ${formatNumber(compareEnergy, this.hass.locale)}\n                              kWh\n                            </td>\n                            ${showCosts\n                              ? html`<td\n                                  class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                                >\n                                  ${costCompare !== null\n                                    ? formatNumber(\n                                        costCompare,\n                                        this.hass.locale,\n                                        {\n                                          style: \"currency\",\n                                          currency: this.hass.config.currency!,\n                                        }\n                                      )\n                                    : \"\"}\n                                </td>`\n                              : \"\"}`\n                        : \"\"}\n                      <td\n                        class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                      >\n                        ${formatNumber(energy, this.hass.locale)} kWh\n                      </td>\n                      ${showCosts\n                        ? html` <td\n                            class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                          >\n                            ${cost !== null\n                              ? formatNumber(cost, this.hass.locale, {\n                                  style: \"currency\",\n                                  currency: this.hass.config.currency!,\n                                })\n                              : \"\"}\n                          </td>`\n                        : \"\"}\n                    </tr>`;\n                  })}\n                  ${source.flow_to.map((flow, idx) => {\n                    const energy =\n                      (calculateStatisticSumGrowth(\n                        this._data!.stats[flow.stat_energy_to]\n                      ) || 0) * -1;\n                    totalGrid += energy;\n                    const cost_stat =\n                      flow.stat_compensation ||\n                      this._data!.info.cost_sensors[flow.stat_energy_to];\n                    const cost = cost_stat\n                      ? (calculateStatisticSumGrowth(\n                          this._data!.stats[cost_stat]\n                        ) || 0) * -1\n                      : null;\n                    if (cost !== null) {\n                      hasGridCost = true;\n                      totalGridCost += cost;\n                    }\n\n                    const energyCompare =\n                      ((compare &&\n                        calculateStatisticSumGrowth(\n                          this._data!.statsCompare[flow.stat_energy_to]\n                        )) ||\n                        0) * -1;\n                    totalGridCompare += energyCompare;\n\n                    const costCompare =\n                      compare && cost_stat\n                        ? (calculateStatisticSumGrowth(\n                            this._data!.statsCompare[cost_stat]\n                          ) || 0) * -1\n                        : null;\n                    if (costCompare !== null) {\n                      totalGridCostCompare += costCompare;\n                    }\n\n                    const color = this._getColor(\n                      computedStyles,\n                      colorPropertyMap.grid_return,\n                      returnColor,\n                      idx\n                    );\n\n                    return html`<tr class=\"mdc-data-table__row\">\n                      <td class=\"mdc-data-table__cell cell-bullet\">\n                        <div\n                          class=\"bullet\"\n                          style=${styleMap({\n                            borderColor: color,\n                            backgroundColor: color + \"7F\",\n                          })}\n                        ></div>\n                      </td>\n                      <th class=\"mdc-data-table__cell\" scope=\"row\">\n                        ${getStatisticLabel(\n                          this.hass,\n                          flow.stat_energy_to,\n                          this._data?.statsMetadata[flow.stat_energy_to]\n                        )}\n                      </th>\n                      ${compare\n                        ? html`<td\n                              class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                            >\n                              ${formatNumber(energyCompare, this.hass.locale)}\n                              kWh\n                            </td>\n                            ${showCosts\n                              ? html`<td\n                                  class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                                >\n                                  ${costCompare !== null\n                                    ? formatNumber(\n                                        costCompare,\n                                        this.hass.locale,\n                                        {\n                                          style: \"currency\",\n                                          currency: this.hass.config.currency!,\n                                        }\n                                      )\n                                    : \"\"}\n                                </td>`\n                              : \"\"}`\n                        : \"\"}\n                      <td\n                        class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                      >\n                        ${formatNumber(energy, this.hass.locale)} kWh\n                      </td>\n                      ${showCosts\n                        ? html` <td\n                            class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                          >\n                            ${cost !== null\n                              ? formatNumber(cost, this.hass.locale, {\n                                  style: \"currency\",\n                                  currency: this.hass.config.currency!,\n                                })\n                              : \"\"}\n                          </td>`\n                        : \"\"}\n                    </tr>`;\n                  })}`\n              )}\n              ${types.grid\n                ? html` <tr class=\"mdc-data-table__row total\">\n                    <td class=\"mdc-data-table__cell\"></td>\n                    <th class=\"mdc-data-table__cell\" scope=\"row\">\n                      ${this.hass.localize(\n                        \"ui.panel.lovelace.cards.energy.energy_sources_table.grid_total\"\n                      )}\n                    </th>\n                    ${compare\n                      ? html`<td\n                            class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                          >\n                            ${formatNumber(totalGridCompare, this.hass.locale)}\n                            kWh\n                          </td>\n                          ${showCosts\n                            ? html`<td\n                                class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                              >\n                                ${hasGridCost\n                                  ? formatNumber(\n                                      totalGridCostCompare,\n                                      this.hass.locale,\n                                      {\n                                        style: \"currency\",\n                                        currency: this.hass.config.currency!,\n                                      }\n                                    )\n                                  : \"\"}\n                              </td>`\n                            : \"\"}`\n                      : \"\"}\n                    <td\n                      class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                    >\n                      ${formatNumber(totalGrid, this.hass.locale)} kWh\n                    </td>\n                    ${showCosts\n                      ? html`<td\n                          class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                        >\n                          ${hasGridCost\n                            ? formatNumber(totalGridCost, this.hass.locale, {\n                                style: \"currency\",\n                                currency: this.hass.config.currency!,\n                              })\n                            : \"\"}\n                        </td>`\n                      : \"\"}\n                  </tr>`\n                : \"\"}\n              ${types.gas?.map((source, idx) => {\n                const energy =\n                  calculateStatisticSumGrowth(\n                    this._data!.stats[source.stat_energy_from]\n                  ) || 0;\n                totalGas += energy;\n\n                const energyCompare =\n                  (compare &&\n                    calculateStatisticSumGrowth(\n                      this._data!.statsCompare[source.stat_energy_from]\n                    )) ||\n                  0;\n                totalGasCompare += energyCompare;\n\n                const cost_stat =\n                  source.stat_cost ||\n                  this._data!.info.cost_sensors[source.stat_energy_from];\n                const cost = cost_stat\n                  ? calculateStatisticSumGrowth(this._data!.stats[cost_stat]) ||\n                    0\n                  : null;\n                if (cost !== null) {\n                  hasGasCost = true;\n                  totalGasCost += cost;\n                }\n\n                const costCompare =\n                  compare && cost_stat\n                    ? calculateStatisticSumGrowth(\n                        this._data!.statsCompare[cost_stat]\n                      ) || 0\n                    : null;\n                if (costCompare !== null) {\n                  totalGasCostCompare += costCompare;\n                }\n\n                const color = this._getColor(\n                  computedStyles,\n                  colorPropertyMap.gas,\n                  gasColor,\n                  idx\n                );\n\n                return html`<tr class=\"mdc-data-table__row\">\n                  <td class=\"mdc-data-table__cell cell-bullet\">\n                    <div\n                      class=\"bullet\"\n                      style=${styleMap({\n                        borderColor: color,\n                        backgroundColor: color + \"7F\",\n                      })}\n                    ></div>\n                  </td>\n                  <th class=\"mdc-data-table__cell\" scope=\"row\">\n                    ${getStatisticLabel(\n                      this.hass,\n                      source.stat_energy_from,\n                      this._data?.statsMetadata[source.stat_energy_from]\n                    )}\n                  </th>\n                  ${compare\n                    ? html` <td\n                          class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                        >\n                          ${formatNumber(energyCompare, this.hass.locale)}\n                          ${gasUnit}\n                        </td>\n                        ${showCosts\n                          ? html`<td\n                              class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                            >\n                              ${costCompare !== null\n                                ? formatNumber(costCompare, this.hass.locale, {\n                                    style: \"currency\",\n                                    currency: this.hass.config.currency!,\n                                  })\n                                : \"\"}\n                            </td>`\n                          : \"\"}`\n                    : \"\"}\n                  <td\n                    class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                  >\n                    ${formatNumber(energy, this.hass.locale)} ${gasUnit}\n                  </td>\n                  ${showCosts\n                    ? html`<td\n                        class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                      >\n                        ${cost !== null\n                          ? formatNumber(cost, this.hass.locale, {\n                              style: \"currency\",\n                              currency: this.hass.config.currency!,\n                            })\n                          : \"\"}\n                      </td>`\n                    : \"\"}\n                </tr>`;\n              })}\n              ${types.gas\n                ? html`<tr class=\"mdc-data-table__row total\">\n                    <td class=\"mdc-data-table__cell\"></td>\n                    <th class=\"mdc-data-table__cell\" scope=\"row\">\n                      ${this.hass.localize(\n                        \"ui.panel.lovelace.cards.energy.energy_sources_table.gas_total\"\n                      )}\n                    </th>\n                    ${compare\n                      ? html`<td\n                            class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                          >\n                            ${formatNumber(totalGasCompare, this.hass.locale)}\n                            ${gasUnit}\n                          </td>\n                          ${showCosts\n                            ? html`<td\n                                class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                              >\n                                ${hasGasCost\n                                  ? formatNumber(\n                                      totalGasCostCompare,\n                                      this.hass.locale,\n                                      {\n                                        style: \"currency\",\n                                        currency: this.hass.config.currency!,\n                                      }\n                                    )\n                                  : \"\"}\n                              </td>`\n                            : \"\"}`\n                      : \"\"}\n                    <td\n                      class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                    >\n                      ${formatNumber(totalGas, this.hass.locale)} ${gasUnit}\n                    </td>\n                    ${showCosts\n                      ? html`<td\n                          class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                        >\n                          ${hasGasCost\n                            ? formatNumber(totalGasCost, this.hass.locale, {\n                                style: \"currency\",\n                                currency: this.hass.config.currency!,\n                              })\n                            : \"\"}\n                        </td>`\n                      : \"\"}\n                  </tr>`\n                : \"\"}\n              ${types.water?.map((source, idx) => {\n                const energy =\n                  calculateStatisticSumGrowth(\n                    this._data!.stats[source.stat_energy_from]\n                  ) || 0;\n                totalWater += energy;\n\n                const energyCompare =\n                  (compare &&\n                    calculateStatisticSumGrowth(\n                      this._data!.statsCompare[source.stat_energy_from]\n                    )) ||\n                  0;\n                totalWaterCompare += energyCompare;\n\n                const cost_stat =\n                  source.stat_cost ||\n                  this._data!.info.cost_sensors[source.stat_energy_from];\n                const cost = cost_stat\n                  ? calculateStatisticSumGrowth(this._data!.stats[cost_stat]) ||\n                    0\n                  : null;\n                if (cost !== null) {\n                  hasWaterCost = true;\n                  totalWaterCost += cost;\n                }\n\n                const costCompare =\n                  compare && cost_stat\n                    ? calculateStatisticSumGrowth(\n                        this._data!.statsCompare[cost_stat]\n                      ) || 0\n                    : null;\n                if (costCompare !== null) {\n                  totalWaterCostCompare += costCompare;\n                }\n\n                const color = this._getColor(\n                  computedStyles,\n                  colorPropertyMap.water,\n                  waterColor,\n                  idx\n                );\n\n                return html`<tr class=\"mdc-data-table__row\">\n                  <td class=\"mdc-data-table__cell cell-bullet\">\n                    <div\n                      class=\"bullet\"\n                      style=${styleMap({\n                        borderColor: color,\n                        backgroundColor: color + \"7F\",\n                      })}\n                    ></div>\n                  </td>\n                  <th class=\"mdc-data-table__cell\" scope=\"row\">\n                    ${getStatisticLabel(\n                      this.hass,\n                      source.stat_energy_from,\n                      this._data?.statsMetadata[source.stat_energy_from]\n                    )}\n                  </th>\n                  ${compare\n                    ? html` <td\n                          class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                        >\n                          ${formatNumber(energyCompare, this.hass.locale)}\n                          ${waterUnit}\n                        </td>\n                        ${showCosts\n                          ? html`<td\n                              class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                            >\n                              ${costCompare !== null\n                                ? formatNumber(costCompare, this.hass.locale, {\n                                    style: \"currency\",\n                                    currency: this.hass.config.currency!,\n                                  })\n                                : \"\"}\n                            </td>`\n                          : \"\"}`\n                    : \"\"}\n                  <td\n                    class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                  >\n                    ${formatNumber(energy, this.hass.locale)} ${waterUnit}\n                  </td>\n                  ${showCosts\n                    ? html`<td\n                        class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                      >\n                        ${cost !== null\n                          ? formatNumber(cost, this.hass.locale, {\n                              style: \"currency\",\n                              currency: this.hass.config.currency!,\n                            })\n                          : \"\"}\n                      </td>`\n                    : \"\"}\n                </tr>`;\n              })}\n              ${types.water\n                ? html`<tr class=\"mdc-data-table__row total\">\n                    <td class=\"mdc-data-table__cell\"></td>\n                    <th class=\"mdc-data-table__cell\" scope=\"row\">\n                      ${this.hass.localize(\n                        \"ui.panel.lovelace.cards.energy.energy_sources_table.water_total\"\n                      )}\n                    </th>\n                    ${compare\n                      ? html`<td\n                            class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                          >\n                            ${formatNumber(totalWaterCompare, this.hass.locale)}\n                            ${waterUnit}\n                          </td>\n                          ${showCosts\n                            ? html`<td\n                                class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                              >\n                                ${hasWaterCost\n                                  ? formatNumber(\n                                      totalWaterCostCompare,\n                                      this.hass.locale,\n                                      {\n                                        style: \"currency\",\n                                        currency: this.hass.config.currency!,\n                                      }\n                                    )\n                                  : \"\"}\n                              </td>`\n                            : \"\"}`\n                      : \"\"}\n                    <td\n                      class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                    >\n                      ${formatNumber(totalWater, this.hass.locale)} ${waterUnit}\n                    </td>\n                    ${showCosts\n                      ? html`<td\n                          class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                        >\n                          ${hasWaterCost\n                            ? formatNumber(totalWaterCost, this.hass.locale, {\n                                style: \"currency\",\n                                currency: this.hass.config.currency!,\n                              })\n                            : \"\"}\n                        </td>`\n                      : \"\"}\n                  </tr>`\n                : \"\"}\n              ${[hasGasCost, hasWaterCost, hasGridCost].filter(Boolean).length >\n              1\n                ? html`<tr class=\"mdc-data-table__row total\">\n                    <td class=\"mdc-data-table__cell\"></td>\n                    <th class=\"mdc-data-table__cell\" scope=\"row\">\n                      ${this.hass.localize(\n                        \"ui.panel.lovelace.cards.energy.energy_sources_table.total_costs\"\n                      )}\n                    </th>\n                    ${compare\n                      ? html`<td class=\"mdc-data-table__cell\"></td>\n                          <td\n                            class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                          >\n                            ${formatNumber(\n                              totalGasCostCompare +\n                                totalGridCostCompare +\n                                totalWaterCostCompare,\n                              this.hass.locale,\n                              {\n                                style: \"currency\",\n                                currency: this.hass.config.currency!,\n                              }\n                            )}\n                          </td>`\n                      : \"\"}\n                    <td class=\"mdc-data-table__cell\"></td>\n                    <td\n                      class=\"mdc-data-table__cell mdc-data-table__cell--numeric\"\n                    >\n                      ${formatNumber(\n                        totalGasCost + totalGridCost + totalWaterCost,\n                        this.hass.locale,\n                        {\n                          style: \"currency\",\n                          currency: this.hass.config.currency!,\n                        }\n                      )}\n                    </td>\n                  </tr>`\n                : \"\"}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </ha-card>`;\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      ${unsafeCSS(dataTableStyles)}\n      .mdc-data-table {\n        width: 100%;\n        border: 0;\n      }\n      .mdc-data-table__header-cell,\n      .mdc-data-table__cell {\n        color: var(--primary-text-color);\n        border-bottom-color: var(--divider-color);\n        text-align: var(--float-start);\n      }\n      .mdc-data-table__row:not(.mdc-data-table__row--selected):hover {\n        background-color: rgba(var(--rgb-primary-text-color), 0.04);\n      }\n      .total {\n        --mdc-typography-body2-font-weight: 500;\n      }\n      .total .mdc-data-table__cell {\n        border-top: 1px solid var(--divider-color);\n      }\n      ha-card {\n        height: 100%;\n        overflow: hidden;\n      }\n      .card-header {\n        padding-bottom: 0;\n      }\n      .content {\n        padding: 16px;\n      }\n      .has-header {\n        padding-top: 0;\n      }\n      .cell-bullet {\n        width: 32px;\n        padding-right: 0;\n        padding-inline-end: 0;\n        padding-inline-start: 16px;\n        direction: var(--direction);\n      }\n      .bullet {\n        border-width: 1px;\n        border-style: solid;\n        border-radius: 4px;\n        height: 16px;\n        width: 32px;\n      }\n      .mdc-data-table__cell--numeric {\n        direction: ltr;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-energy-sources-table-card\": HuiEnergySourcesTableCard;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}