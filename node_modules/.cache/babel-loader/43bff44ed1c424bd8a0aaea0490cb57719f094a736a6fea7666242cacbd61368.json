{"ast":null,"code":"import _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { stopPropagation } from \"../common/dom/stop_propagation\";\nimport { formatLanguageCode } from \"../common/language/format_language\";\nimport { listAssistPipelines } from \"../data/assist_pipeline\";\nimport \"./ha-list-item\";\nimport \"./ha-select\";\nconst PREFERRED = \"preferred\";\nconst LAST_USED = \"last_used\";\nexport let HaAssistPipelinePicker = _decorate([customElement(\"ha-assist-pipeline-picker\")], function (_initialize, _LitElement) {\n  class HaAssistPipelinePicker extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: HaAssistPipelinePicker,\n    d: [{\n      kind: \"field\",\n      decorators: [property()],\n      key: \"value\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"label\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean,\n        reflect: true\n      })],\n      key: \"disabled\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"required\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"includeLastUsed\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_pipelines\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_preferredPipeline\",\n      value() {\n        return null;\n      }\n    }, {\n      kind: \"get\",\n      key: \"_default\",\n      value: function _default() {\n        return this.includeLastUsed ? LAST_USED : PREFERRED;\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        var _this$value, _this$_pipelines$find;\n        if (!this._pipelines) {\n          return nothing;\n        }\n        const value = (_this$value = this.value) !== null && _this$value !== void 0 ? _this$value : this._default;\n        return html`\n      <ha-select\n        .label=${this.label || this.hass.localize(\"ui.components.pipeline-picker.pipeline\")}\n        .value=${value}\n        .required=${this.required}\n        .disabled=${this.disabled}\n        @selected=${this._changed}\n        @closed=${stopPropagation}\n        fixedMenuPosition\n        naturalMenuWidth\n      >\n        ${this.includeLastUsed ? html`\n              <ha-list-item .value=${LAST_USED}>\n                ${this.hass.localize(\"ui.components.pipeline-picker.last_used\")}\n              </ha-list-item>\n            ` : null}\n        <ha-list-item .value=${PREFERRED}>\n          ${this.hass.localize(\"ui.components.pipeline-picker.preferred\", {\n          preferred: (_this$_pipelines$find = this._pipelines.find(pipeline => pipeline.id === this._preferredPipeline)) === null || _this$_pipelines$find === void 0 ? void 0 : _this$_pipelines$find.name\n        })}\n        </ha-list-item>\n        ${this._pipelines.map(pipeline => html`<ha-list-item .value=${pipeline.id}>\n              ${pipeline.name}\n              (${formatLanguageCode(pipeline.language, this.hass.locale)})\n            </ha-list-item>`)}\n      </ha-select>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"firstUpdated\",\n      value: function firstUpdated(changedProperties) {\n        _get(_getPrototypeOf(HaAssistPipelinePicker.prototype), \"firstUpdated\", this).call(this, changedProperties);\n        listAssistPipelines(this.hass).then(pipelines => {\n          this._pipelines = pipelines.pipelines;\n          this._preferredPipeline = pipelines.preferred_pipeline;\n        });\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return css`\n      ha-select {\n        width: 100%;\n      }\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_changed\",\n      value: function _changed(ev) {\n        const target = ev.target;\n        if (!this.hass || target.value === \"\" || target.value === this.value || this.value === undefined && target.value === this._default) {\n          return;\n        }\n        this.value = target.value === this._default ? undefined : target.value;\n        fireEvent(this, \"value-changed\", {\n          value: this.value\n        });\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["css","html","LitElement","nothing","customElement","property","state","fireEvent","stopPropagation","formatLanguageCode","listAssistPipelines","PREFERRED","LAST_USED","HaAssistPipelinePicker","_decorate","_initialize","_LitElement","constructor","args","F","d","kind","decorators","key","value","attribute","type","Boolean","reflect","_default","includeLastUsed","render","_this$value","_this$_pipelines$find","_pipelines","label","hass","localize","required","disabled","_changed","preferred","find","pipeline","id","_preferredPipeline","name","map","language","locale","firstUpdated","changedProperties","_get","_getPrototypeOf","prototype","call","then","pipelines","preferred_pipeline","static","styles","ev","target","undefined"],"sources":["/workspaces/frontend/src/components/ha-assist-pipeline-picker.ts"],"sourcesContent":["import {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  nothing,\n  PropertyValueMap,\n} from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { stopPropagation } from \"../common/dom/stop_propagation\";\nimport { formatLanguageCode } from \"../common/language/format_language\";\nimport { AssistPipeline, listAssistPipelines } from \"../data/assist_pipeline\";\nimport { HomeAssistant } from \"../types\";\nimport \"./ha-list-item\";\nimport \"./ha-select\";\nimport type { HaSelect } from \"./ha-select\";\n\nconst PREFERRED = \"preferred\";\nconst LAST_USED = \"last_used\";\n\n@customElement(\"ha-assist-pipeline-picker\")\nexport class HaAssistPipelinePicker extends LitElement {\n  @property() public value?: string;\n\n  @property() public label?: string;\n\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean, reflect: true }) public disabled = false;\n\n  @property({ type: Boolean }) public required = false;\n\n  @property({ type: Boolean }) public includeLastUsed = false;\n\n  @state() _pipelines?: AssistPipeline[];\n\n  @state() _preferredPipeline: string | null = null;\n\n  private get _default() {\n    return this.includeLastUsed ? LAST_USED : PREFERRED;\n  }\n\n  protected render() {\n    if (!this._pipelines) {\n      return nothing;\n    }\n    const value = this.value ?? this._default;\n    return html`\n      <ha-select\n        .label=${this.label ||\n        this.hass!.localize(\"ui.components.pipeline-picker.pipeline\")}\n        .value=${value}\n        .required=${this.required}\n        .disabled=${this.disabled}\n        @selected=${this._changed}\n        @closed=${stopPropagation}\n        fixedMenuPosition\n        naturalMenuWidth\n      >\n        ${this.includeLastUsed\n          ? html`\n              <ha-list-item .value=${LAST_USED}>\n                ${this.hass!.localize(\n                  \"ui.components.pipeline-picker.last_used\"\n                )}\n              </ha-list-item>\n            `\n          : null}\n        <ha-list-item .value=${PREFERRED}>\n          ${this.hass!.localize(\"ui.components.pipeline-picker.preferred\", {\n            preferred: this._pipelines.find(\n              (pipeline) => pipeline.id === this._preferredPipeline\n            )?.name,\n          })}\n        </ha-list-item>\n        ${this._pipelines.map(\n          (pipeline) =>\n            html`<ha-list-item .value=${pipeline.id}>\n              ${pipeline.name}\n              (${formatLanguageCode(pipeline.language, this.hass.locale)})\n            </ha-list-item>`\n        )}\n      </ha-select>\n    `;\n  }\n\n  protected firstUpdated(\n    changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>\n  ): void {\n    super.firstUpdated(changedProperties);\n    listAssistPipelines(this.hass).then((pipelines) => {\n      this._pipelines = pipelines.pipelines;\n      this._preferredPipeline = pipelines.preferred_pipeline;\n    });\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      ha-select {\n        width: 100%;\n      }\n    `;\n  }\n\n  private _changed(ev): void {\n    const target = ev.target as HaSelect;\n    if (\n      !this.hass ||\n      target.value === \"\" ||\n      target.value === this.value ||\n      (this.value === undefined && target.value === this._default)\n    ) {\n      return;\n    }\n    this.value = target.value === this._default ? undefined : target.value;\n    fireEvent(this, \"value-changed\", { value: this.value });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-assist-pipeline-picker\": HaAssistPipelinePicker;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}