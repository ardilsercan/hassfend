{"ast":null,"code":"import \"../../../components/entity/ha-state-label-badge\";\nimport { createErrorBadgeConfig } from \"../badges/hui-error-badge\";\nimport { createBadgeElement } from \"../create-element/create-badge-element\";\nexport class HuiBadgePreview extends HTMLElement {\n  get _error() {\n    var _this$_element;\n    return ((_this$_element = this._element) === null || _this$_element === void 0 ? void 0 : _this$_element.tagName) === \"HUI-ERROR-CARD\";\n  }\n  constructor() {\n    super();\n    this._hass = void 0;\n    this._element = void 0;\n    this._config = void 0;\n    this.addEventListener(\"ll-rebuild\", () => {\n      this._cleanup();\n      if (this._config) {\n        this.config = this._config;\n      }\n    });\n  }\n  set hass(hass) {\n    this._hass = hass;\n    if (this._element) {\n      this._element.hass = hass;\n    }\n  }\n  set error(error) {\n    this._createBadge(createErrorBadgeConfig(`${error.type}: ${error.message}`));\n  }\n  set config(configValue) {\n    const curConfig = this._config;\n    this._config = configValue;\n    if (!configValue) {\n      this._cleanup();\n      return;\n    }\n    if (!this._element) {\n      this._createBadge(configValue);\n      return;\n    }\n\n    // in case the element was an error element we always want to recreate it\n    if (!this._error && curConfig && configValue.type === curConfig.type) {\n      this._element.setConfig(configValue);\n    } else {\n      this._createBadge(configValue);\n    }\n  }\n  _createBadge(configValue) {\n    this._cleanup();\n    this._element = createBadgeElement(configValue);\n    if (this._hass) {\n      this._element.hass = this._hass;\n    }\n    this.appendChild(this._element);\n  }\n  _cleanup() {\n    if (!this._element) {\n      return;\n    }\n    this.removeChild(this._element);\n    this._element = undefined;\n  }\n}\ncustomElements.define(\"hui-badge-preview\", HuiBadgePreview);","map":{"version":3,"names":["createErrorBadgeConfig","createBadgeElement","HuiBadgePreview","HTMLElement","_error","_this$_element","_element","tagName","constructor","_hass","_config","addEventListener","_cleanup","config","hass","error","_createBadge","type","message","configValue","curConfig","setConfig","appendChild","removeChild","undefined","customElements","define"],"sources":["/workspaces/frontend/src/panels/lovelace/editor/hui-badge-preview.ts"],"sourcesContent":["import \"../../../components/entity/ha-state-label-badge\";\nimport { LovelaceBadgeConfig } from \"../../../data/lovelace/config/badge\";\nimport { HomeAssistant } from \"../../../types\";\nimport { createErrorBadgeConfig } from \"../badges/hui-error-badge\";\nimport { createBadgeElement } from \"../create-element/create-badge-element\";\nimport { LovelaceBadge } from \"../types\";\nimport { ConfigError } from \"./types\";\n\nexport class HuiBadgePreview extends HTMLElement {\n  private _hass?: HomeAssistant;\n\n  private _element?: LovelaceBadge;\n\n  private _config?: LovelaceBadgeConfig;\n\n  private get _error() {\n    return this._element?.tagName === \"HUI-ERROR-CARD\";\n  }\n\n  constructor() {\n    super();\n    this.addEventListener(\"ll-rebuild\", () => {\n      this._cleanup();\n      if (this._config) {\n        this.config = this._config;\n      }\n    });\n  }\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n    if (this._element) {\n      this._element.hass = hass;\n    }\n  }\n\n  set error(error: ConfigError) {\n    this._createBadge(\n      createErrorBadgeConfig(`${error.type}: ${error.message}`)\n    );\n  }\n\n  set config(configValue: LovelaceBadgeConfig) {\n    const curConfig = this._config;\n    this._config = configValue;\n\n    if (!configValue) {\n      this._cleanup();\n      return;\n    }\n\n    if (!this._element) {\n      this._createBadge(configValue);\n      return;\n    }\n\n    // in case the element was an error element we always want to recreate it\n    if (!this._error && curConfig && configValue.type === curConfig.type) {\n      this._element.setConfig(configValue);\n    } else {\n      this._createBadge(configValue);\n    }\n  }\n\n  private _createBadge(configValue: LovelaceBadgeConfig): void {\n    this._cleanup();\n    this._element = createBadgeElement(configValue);\n\n    if (this._hass) {\n      this._element!.hass = this._hass;\n    }\n\n    this.appendChild(this._element!);\n  }\n\n  private _cleanup() {\n    if (!this._element) {\n      return;\n    }\n    this.removeChild(this._element);\n    this._element = undefined;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-badge-preview\": HuiBadgePreview;\n  }\n}\n\ncustomElements.define(\"hui-badge-preview\", HuiBadgePreview);\n"],"mappings":"AAAA,OAAO,iDAAiD;AAGxD,SAASA,sBAAsB,QAAQ,2BAA2B;AAClE,SAASC,kBAAkB,QAAQ,wCAAwC;AAI3E,OAAO,MAAMC,eAAe,SAASC,WAAW,CAAC;EAO/C,IAAYC,MAAMA,CAAA,EAAG;IAAA,IAAAC,cAAA;IACnB,OAAO,EAAAA,cAAA,OAAI,CAACC,QAAQ,cAAAD,cAAA,uBAAbA,cAAA,CAAeE,OAAO,MAAK,gBAAgB;EACpD;EAEAC,WAAWA,CAAA,EAAG;IACZ,KAAK,CAAC,CAAC;IAAC,KAXFC,KAAK;IAAA,KAELH,QAAQ;IAAA,KAERI,OAAO;IAQb,IAAI,CAACC,gBAAgB,CAAC,YAAY,EAAE,MAAM;MACxC,IAAI,CAACC,QAAQ,CAAC,CAAC;MACf,IAAI,IAAI,CAACF,OAAO,EAAE;QAChB,IAAI,CAACG,MAAM,GAAG,IAAI,CAACH,OAAO;MAC5B;IACF,CAAC,CAAC;EACJ;EAEA,IAAII,IAAIA,CAACA,IAAmB,EAAE;IAC5B,IAAI,CAACL,KAAK,GAAGK,IAAI;IACjB,IAAI,IAAI,CAACR,QAAQ,EAAE;MACjB,IAAI,CAACA,QAAQ,CAACQ,IAAI,GAAGA,IAAI;IAC3B;EACF;EAEA,IAAIC,KAAKA,CAACA,KAAkB,EAAE;IAC5B,IAAI,CAACC,YAAY,CACfhB,sBAAsB,CAAE,GAAEe,KAAK,CAACE,IAAK,KAAIF,KAAK,CAACG,OAAQ,EAAC,CAC1D,CAAC;EACH;EAEA,IAAIL,MAAMA,CAACM,WAAgC,EAAE;IAC3C,MAAMC,SAAS,GAAG,IAAI,CAACV,OAAO;IAC9B,IAAI,CAACA,OAAO,GAAGS,WAAW;IAE1B,IAAI,CAACA,WAAW,EAAE;MAChB,IAAI,CAACP,QAAQ,CAAC,CAAC;MACf;IACF;IAEA,IAAI,CAAC,IAAI,CAACN,QAAQ,EAAE;MAClB,IAAI,CAACU,YAAY,CAACG,WAAW,CAAC;MAC9B;IACF;;IAEA;IACA,IAAI,CAAC,IAAI,CAACf,MAAM,IAAIgB,SAAS,IAAID,WAAW,CAACF,IAAI,KAAKG,SAAS,CAACH,IAAI,EAAE;MACpE,IAAI,CAACX,QAAQ,CAACe,SAAS,CAACF,WAAW,CAAC;IACtC,CAAC,MAAM;MACL,IAAI,CAACH,YAAY,CAACG,WAAW,CAAC;IAChC;EACF;EAEQH,YAAYA,CAACG,WAAgC,EAAQ;IAC3D,IAAI,CAACP,QAAQ,CAAC,CAAC;IACf,IAAI,CAACN,QAAQ,GAAGL,kBAAkB,CAACkB,WAAW,CAAC;IAE/C,IAAI,IAAI,CAACV,KAAK,EAAE;MACd,IAAI,CAACH,QAAQ,CAAEQ,IAAI,GAAG,IAAI,CAACL,KAAK;IAClC;IAEA,IAAI,CAACa,WAAW,CAAC,IAAI,CAAChB,QAAS,CAAC;EAClC;EAEQM,QAAQA,CAAA,EAAG;IACjB,IAAI,CAAC,IAAI,CAACN,QAAQ,EAAE;MAClB;IACF;IACA,IAAI,CAACiB,WAAW,CAAC,IAAI,CAACjB,QAAQ,CAAC;IAC/B,IAAI,CAACA,QAAQ,GAAGkB,SAAS;EAC3B;AACF;AAQAC,cAAc,CAACC,MAAM,CAAC,mBAAmB,EAAExB,eAAe,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}