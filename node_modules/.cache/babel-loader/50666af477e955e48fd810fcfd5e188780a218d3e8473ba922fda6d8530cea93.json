{"ast":null,"code":"import \"core-js/modules/es.object.assign.js\";\nexport var subscribeRenderTemplate = function subscribeRenderTemplate(conn, onChange, params) {\n  return conn.subscribeMessage(function (msg) {\n    return onChange(msg);\n  }, Object.assign({\n    type: \"render_template\"\n  }, params));\n};\nexport var subscribePreviewTemplate = function subscribePreviewTemplate(hass, flow_id, flow_type, user_input, callback) {\n  return hass.connection.subscribeMessage(callback, {\n    type: \"template/start_preview\",\n    flow_id: flow_id,\n    flow_type: flow_type,\n    user_input: user_input\n  });\n};","map":{"version":3,"names":["subscribeRenderTemplate","conn","onChange","params","subscribeMessage","msg","Object","assign","type","subscribePreviewTemplate","hass","flow_id","flow_type","user_input","callback","connection"],"sources":["/workspaces/frontend/src/data/ws-templates.ts"],"sourcesContent":["import { Connection, UnsubscribeFunc } from \"home-assistant-js-websocket\";\nimport { HomeAssistant } from \"../types\";\n\nexport interface RenderTemplateResult {\n  result: string;\n  listeners: TemplateListeners;\n}\n\nexport interface RenderTemplateError {\n  error: string;\n  level: \"ERROR\" | \"WARNING\";\n}\n\nexport interface TemplateListeners {\n  all: boolean;\n  domains: string[];\n  entities: string[];\n  time: boolean;\n}\n\nexport type TemplatePreview = TemplatePreviewState | TemplatePreviewError;\n\ninterface TemplatePreviewState {\n  state: string;\n  attributes: Record<string, any>;\n  listeners: TemplateListeners;\n}\n\ninterface TemplatePreviewError {\n  error: string;\n}\n\nexport const subscribeRenderTemplate = (\n  conn: Connection,\n  onChange: (result: RenderTemplateResult | RenderTemplateError) => void,\n  params: {\n    template: string;\n    entity_ids?: string | string[];\n    variables?: Record<string, unknown>;\n    timeout?: number;\n    strict?: boolean;\n    report_errors?: boolean;\n  }\n): Promise<UnsubscribeFunc> =>\n  conn.subscribeMessage(\n    (msg: RenderTemplateResult | RenderTemplateError) => onChange(msg),\n    {\n      type: \"render_template\",\n      ...params,\n    }\n  );\n\nexport const subscribePreviewTemplate = (\n  hass: HomeAssistant,\n  flow_id: string,\n  flow_type: \"config_flow\" | \"options_flow\",\n  user_input: Record<string, any>,\n  callback: (preview: TemplatePreview) => void\n): Promise<UnsubscribeFunc> =>\n  hass.connection.subscribeMessage(callback, {\n    type: \"template/start_preview\",\n    flow_id,\n    flow_type,\n    user_input,\n  });\n"],"mappings":";AAgCA,OAAO,IAAMA,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAClCC,IAAgB,EAChBC,QAAsE,EACtEC,MAOC;EAAA,OAEDF,IAAI,CAACG,gBAAgB,CACnB,UAACC,GAA+C;IAAA,OAAKH,QAAQ,CAACG,GAAG,CAAC;EAAA,GAAAC,MAAA,CAAAC,MAAA;IAEhEC,IAAI,EAAE;EAAiB,GACpBL,MAAM,CAEb,CAAC;AAAA;AAEH,OAAO,IAAMM,wBAAwB,GAAG,SAA3BA,wBAAwBA,CACnCC,IAAmB,EACnBC,OAAe,EACfC,SAAyC,EACzCC,UAA+B,EAC/BC,QAA4C;EAAA,OAE5CJ,IAAI,CAACK,UAAU,CAACX,gBAAgB,CAACU,QAAQ,EAAE;IACzCN,IAAI,EAAE,wBAAwB;IAC9BG,OAAO,EAAPA,OAAO;IACPC,SAAS,EAATA,SAAS;IACTC,UAAU,EAAVA;EACF,CAAC,CAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}