{"ast":null,"code":"import _decorate from \"@babel/runtime/helpers/decorate\";\nimport { css, html, LitElement } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport \"../../../../../components/data-table/ha-data-table\";\nexport let ZHADeviceEndpointDataTable = _decorate([customElement(\"zha-device-endpoint-data-table\")], function (_initialize, _LitElement) {\n  class ZHADeviceEndpointDataTable extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: ZHADeviceEndpointDataTable,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"narrow\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"selectable\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Array\n      })],\n      key: \"deviceEndpoints\",\n      value() {\n        return [];\n      }\n    }, {\n      kind: \"field\",\n      decorators: [query(\"ha-data-table\", true)],\n      key: \"_dataTable\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_deviceEndpoints\",\n      value() {\n        return memoizeOne(deviceEndpoints => {\n          const outputDevices = [];\n          deviceEndpoints.forEach(deviceEndpoint => {\n            outputDevices.push({\n              name: deviceEndpoint.device.user_given_name || deviceEndpoint.device.name,\n              model: deviceEndpoint.device.model,\n              manufacturer: deviceEndpoint.device.manufacturer,\n              id: deviceEndpoint.device.ieee + \"_\" + deviceEndpoint.endpoint_id,\n              ieee: deviceEndpoint.device.ieee,\n              endpoint_id: deviceEndpoint.endpoint_id,\n              entities: deviceEndpoint.entities,\n              dev_id: deviceEndpoint.device.device_reg_id\n            });\n          });\n          return outputDevices;\n        });\n      }\n    }, {\n      kind: \"field\",\n      key: \"_columns\",\n      value() {\n        return memoizeOne(narrow => narrow ? {\n          name: {\n            title: \"Devices\",\n            sortable: true,\n            filterable: true,\n            direction: \"asc\",\n            grows: true,\n            template: device => html`\n                <a href=${`/config/devices/device/${device.dev_id}`}>\n                  ${device.name}\n                </a>\n              `\n          },\n          endpoint_id: {\n            title: \"Endpoint\",\n            sortable: true,\n            filterable: true\n          }\n        } : {\n          name: {\n            title: \"Name\",\n            sortable: true,\n            filterable: true,\n            direction: \"asc\",\n            grows: true,\n            template: device => html`\n                <a href=${`/config/devices/device/${device.dev_id}`}>\n                  ${device.name}\n                </a>\n              `\n          },\n          endpoint_id: {\n            title: \"Endpoint\",\n            sortable: true,\n            filterable: true\n          },\n          entities: {\n            title: \"Associated Entities\",\n            sortable: false,\n            filterable: false,\n            width: \"50%\",\n            template: device => html`\n                ${device.entities.length ? device.entities.length > 3 ? html`${device.entities.slice(0, 2).map(entity => html`<div\n                                style=\"overflow: hidden; text-overflow: ellipsis;\"\n                              >\n                                ${entity.name || entity.original_name}\n                              </div>`)}\n                        <div>And ${device.entities.length - 2} more...</div>` : device.entities.map(entity => html`<div\n                            style=\"overflow: hidden; text-overflow: ellipsis;\"\n                          >\n                            ${entity.name || entity.original_name}\n                          </div>`) : \"This endpoint has no associated entities\"}\n              `\n          }\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"clearSelection\",\n      value: function clearSelection() {\n        this._dataTable.clearSelection();\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        return html`\n      <ha-data-table\n        .hass=${this.hass}\n        .columns=${this._columns(this.narrow)}\n        .data=${this._deviceEndpoints(this.deviceEndpoints)}\n        .selectable=${this.selectable}\n        auto-height\n        .searchLabel=${this.hass.localize(\"ui.components.data-table.search\")}\n        .noDataText=${this.hass.localize(\"ui.components.data-table.no-data\")}\n      ></ha-data-table>\n    `;\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return [css`\n        .table-cell-text {\n          word-break: break-word;\n        }\n      `];\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["css","html","LitElement","customElement","property","query","memoizeOne","ZHADeviceEndpointDataTable","_decorate","_initialize","_LitElement","constructor","args","F","d","kind","decorators","attribute","key","value","type","Boolean","Array","deviceEndpoints","outputDevices","forEach","deviceEndpoint","push","name","device","user_given_name","model","manufacturer","id","ieee","endpoint_id","entities","dev_id","device_reg_id","narrow","title","sortable","filterable","direction","grows","template","width","length","slice","map","entity","original_name","clearSelection","_dataTable","render","hass","_columns","_deviceEndpoints","selectable","localize","static","styles"],"sources":["/workspaces/frontend/src/panels/config/integrations/integration-panels/zha/zha-device-endpoint-data-table.ts"],"sourcesContent":["import { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport \"../../../../../components/data-table/ha-data-table\";\nimport type {\n  DataTableColumnContainer,\n  DataTableRowData,\n  HaDataTable,\n} from \"../../../../../components/data-table/ha-data-table\";\nimport type {\n  ZHADeviceEndpoint,\n  ZHAEntityReference,\n} from \"../../../../../data/zha\";\nimport type { HomeAssistant } from \"../../../../../types\";\n\nexport interface DeviceEndpointRowData extends DataTableRowData {\n  id: string;\n  name: string;\n  model: string;\n  manufacturer: string;\n  endpoint_id: number;\n  entities: ZHAEntityReference[];\n}\n\n@customElement(\"zha-device-endpoint-data-table\")\nexport class ZHADeviceEndpointDataTable extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean }) public narrow = false;\n\n  @property({ type: Boolean }) public selectable = false;\n\n  @property({ type: Array }) public deviceEndpoints: ZHADeviceEndpoint[] = [];\n\n  @query(\"ha-data-table\", true) private _dataTable!: HaDataTable;\n\n  private _deviceEndpoints = memoizeOne(\n    (deviceEndpoints: ZHADeviceEndpoint[]) => {\n      const outputDevices: DeviceEndpointRowData[] = [];\n\n      deviceEndpoints.forEach((deviceEndpoint) => {\n        outputDevices.push({\n          name:\n            deviceEndpoint.device.user_given_name || deviceEndpoint.device.name,\n          model: deviceEndpoint.device.model,\n          manufacturer: deviceEndpoint.device.manufacturer,\n          id: deviceEndpoint.device.ieee + \"_\" + deviceEndpoint.endpoint_id,\n          ieee: deviceEndpoint.device.ieee,\n          endpoint_id: deviceEndpoint.endpoint_id,\n          entities: deviceEndpoint.entities,\n          dev_id: deviceEndpoint.device.device_reg_id,\n        });\n      });\n\n      return outputDevices;\n    }\n  );\n\n  private _columns = memoizeOne(\n    (narrow: boolean): DataTableColumnContainer =>\n      narrow\n        ? {\n            name: {\n              title: \"Devices\",\n              sortable: true,\n              filterable: true,\n              direction: \"asc\",\n              grows: true,\n              template: (device) => html`\n                <a href=${`/config/devices/device/${device.dev_id}`}>\n                  ${device.name}\n                </a>\n              `,\n            },\n            endpoint_id: {\n              title: \"Endpoint\",\n              sortable: true,\n              filterable: true,\n            },\n          }\n        : {\n            name: {\n              title: \"Name\",\n              sortable: true,\n              filterable: true,\n              direction: \"asc\",\n              grows: true,\n              template: (device) => html`\n                <a href=${`/config/devices/device/${device.dev_id}`}>\n                  ${device.name}\n                </a>\n              `,\n            },\n            endpoint_id: {\n              title: \"Endpoint\",\n              sortable: true,\n              filterable: true,\n            },\n            entities: {\n              title: \"Associated Entities\",\n              sortable: false,\n              filterable: false,\n              width: \"50%\",\n              template: (device) => html`\n                ${device.entities.length\n                  ? device.entities.length > 3\n                    ? html`${device.entities\n                          .slice(0, 2)\n                          .map(\n                            (entity) =>\n                              html`<div\n                                style=\"overflow: hidden; text-overflow: ellipsis;\"\n                              >\n                                ${entity.name || entity.original_name}\n                              </div>`\n                          )}\n                        <div>And ${device.entities.length - 2} more...</div>`\n                    : device.entities.map(\n                        (entity) =>\n                          html`<div\n                            style=\"overflow: hidden; text-overflow: ellipsis;\"\n                          >\n                            ${entity.name || entity.original_name}\n                          </div>`\n                      )\n                  : \"This endpoint has no associated entities\"}\n              `,\n            },\n          }\n  );\n\n  public clearSelection() {\n    this._dataTable.clearSelection();\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-data-table\n        .hass=${this.hass}\n        .columns=${this._columns(this.narrow)}\n        .data=${this._deviceEndpoints(this.deviceEndpoints)}\n        .selectable=${this.selectable}\n        auto-height\n        .searchLabel=${this.hass.localize(\"ui.components.data-table.search\")}\n        .noDataText=${this.hass.localize(\"ui.components.data-table.no-data\")}\n      ></ha-data-table>\n    `;\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      css`\n        .table-cell-text {\n          word-break: break-word;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"zha-device-endpoint-data-table\": ZHADeviceEndpointDataTable;\n  }\n}\n"],"mappings":";AAAA,SAASA,GAAG,EAAkBC,IAAI,EAAEC,UAAU,QAAwB,KAAK;AAC3E,SAASC,aAAa,EAAEC,QAAQ,EAAEC,KAAK,QAAQ,gBAAgB;AAC/D,OAAOC,UAAU,MAAM,aAAa;AACpC,OAAO,oDAAoD;AAqB3D,WACaC,0BAA0B,GAAAC,SAAA,EADtCL,aAAa,CAAC,gCAAgC,CAAC,aAAAM,WAAA,EAAAC,WAAA;EAAhD,MACaH,0BAA0B,SAAAG,WAAA,CAAoB;IAAAC,YAAA,GAAAC,IAAA;MAAA,SAAAA,IAAA;MAAAH,WAAA;IAAA;EAqI3D;EAAC;IAAAI,CAAA,EArIYN,0BAA0B;IAAAO,CAAA;MAAAC,IAAA;MAAAC,UAAA,GACpCZ,QAAQ,CAAC;QAAEa,SAAS,EAAE;MAAM,CAAC,CAAC;MAAAC,GAAA;MAAAC,KAAA;IAAA;MAAAJ,IAAA;MAAAC,UAAA,GAE9BZ,QAAQ,CAAC;QAAEgB,IAAI,EAAEC;MAAQ,CAAC,CAAC;MAAAH,GAAA;MAAAC,MAAA;QAAA,OAAiB,KAAK;MAAA;IAAA;MAAAJ,IAAA;MAAAC,UAAA,GAEjDZ,QAAQ,CAAC;QAAEgB,IAAI,EAAEC;MAAQ,CAAC,CAAC;MAAAH,GAAA;MAAAC,MAAA;QAAA,OAAqB,KAAK;MAAA;IAAA;MAAAJ,IAAA;MAAAC,UAAA,GAErDZ,QAAQ,CAAC;QAAEgB,IAAI,EAAEE;MAAM,CAAC,CAAC;MAAAJ,GAAA;MAAAC,MAAA;QAAA,OAA+C,EAAE;MAAA;IAAA;MAAAJ,IAAA;MAAAC,UAAA,GAE1EX,KAAK,CAAC,eAAe,EAAE,IAAI,CAAC;MAAAa,GAAA;MAAAC,KAAA;IAAA;MAAAJ,IAAA;MAAAG,GAAA;MAAAC,MAAA;QAAA,OAEFb,UAAU,CAClCiB,eAAoC,IAAK;UACxC,MAAMC,aAAsC,GAAG,EAAE;UAEjDD,eAAe,CAACE,OAAO,CAAEC,cAAc,IAAK;YAC1CF,aAAa,CAACG,IAAI,CAAC;cACjBC,IAAI,EACFF,cAAc,CAACG,MAAM,CAACC,eAAe,IAAIJ,cAAc,CAACG,MAAM,CAACD,IAAI;cACrEG,KAAK,EAAEL,cAAc,CAACG,MAAM,CAACE,KAAK;cAClCC,YAAY,EAAEN,cAAc,CAACG,MAAM,CAACG,YAAY;cAChDC,EAAE,EAAEP,cAAc,CAACG,MAAM,CAACK,IAAI,GAAG,GAAG,GAAGR,cAAc,CAACS,WAAW;cACjED,IAAI,EAAER,cAAc,CAACG,MAAM,CAACK,IAAI;cAChCC,WAAW,EAAET,cAAc,CAACS,WAAW;cACvCC,QAAQ,EAAEV,cAAc,CAACU,QAAQ;cACjCC,MAAM,EAAEX,cAAc,CAACG,MAAM,CAACS;YAChC,CAAC,CAAC;UACJ,CAAC,CAAC;UAEF,OAAOd,aAAa;QACtB,CACF,CAAC;MAAA;IAAA;MAAAT,IAAA;MAAAG,GAAA;MAAAC,MAAA;QAAA,OAEkBb,UAAU,CAC1BiC,MAAe,IACdA,MAAM,GACF;UACEX,IAAI,EAAE;YACJY,KAAK,EAAE,SAAS;YAChBC,QAAQ,EAAE,IAAI;YACdC,UAAU,EAAE,IAAI;YAChBC,SAAS,EAAE,KAAK;YAChBC,KAAK,EAAE,IAAI;YACXC,QAAQ,EAAGhB,MAAM,IAAK5B,IAAK;AACzC,0BAA2B,0BAAyB4B,MAAM,CAACQ,MAAO,EAAE;AACpE,oBAAoBR,MAAM,CAACD,IAAK;AAChC;AACA;UACY,CAAC;UACDO,WAAW,EAAE;YACXK,KAAK,EAAE,UAAU;YACjBC,QAAQ,EAAE,IAAI;YACdC,UAAU,EAAE;UACd;QACF,CAAC,GACD;UACEd,IAAI,EAAE;YACJY,KAAK,EAAE,MAAM;YACbC,QAAQ,EAAE,IAAI;YACdC,UAAU,EAAE,IAAI;YAChBC,SAAS,EAAE,KAAK;YAChBC,KAAK,EAAE,IAAI;YACXC,QAAQ,EAAGhB,MAAM,IAAK5B,IAAK;AACzC,0BAA2B,0BAAyB4B,MAAM,CAACQ,MAAO,EAAE;AACpE,oBAAoBR,MAAM,CAACD,IAAK;AAChC;AACA;UACY,CAAC;UACDO,WAAW,EAAE;YACXK,KAAK,EAAE,UAAU;YACjBC,QAAQ,EAAE,IAAI;YACdC,UAAU,EAAE;UACd,CAAC;UACDN,QAAQ,EAAE;YACRI,KAAK,EAAE,qBAAqB;YAC5BC,QAAQ,EAAE,KAAK;YACfC,UAAU,EAAE,KAAK;YACjBI,KAAK,EAAE,KAAK;YACZD,QAAQ,EAAGhB,MAAM,IAAK5B,IAAK;AACzC,kBAAkB4B,MAAM,CAACO,QAAQ,CAACW,MAAM,GACpBlB,MAAM,CAACO,QAAQ,CAACW,MAAM,GAAG,CAAC,GACxB9C,IAAK,GAAE4B,MAAM,CAACO,QAAQ,CACjBY,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CACXC,GAAG,CACDC,MAAM,IACLjD,IAAK;AACnC;AACA;AACA,kCAAkCiD,MAAM,CAACtB,IAAI,IAAIsB,MAAM,CAACC,aAAc;AACtE,qCAC0B,CAAE;AAC5B,mCAAmCtB,MAAM,CAACO,QAAQ,CAACW,MAAM,GAAG,CAAE,gBAAe,GACvDlB,MAAM,CAACO,QAAQ,CAACa,GAAG,CAChBC,MAAM,IACLjD,IAAK;AAC/B;AACA;AACA,8BAA8BiD,MAAM,CAACtB,IAAI,IAAIsB,MAAM,CAACC,aAAc;AAClE,iCACsB,CAAC,GACH,0CAA2C;AAC/D;UACY;QACF,CACR,CAAC;MAAA;IAAA;MAAApC,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAiC,eAAA,EAAwB;QACtB,IAAI,CAACC,UAAU,CAACD,cAAc,CAAC,CAAC;MAClC;IAAC;MAAArC,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAmC,OAAA,EAAmC;QACjC,OAAOrD,IAAK;AAChB;AACA,gBAAgB,IAAI,CAACsD,IAAK;AAC1B,mBAAmB,IAAI,CAACC,QAAQ,CAAC,IAAI,CAACjB,MAAM,CAAE;AAC9C,gBAAgB,IAAI,CAACkB,gBAAgB,CAAC,IAAI,CAAClC,eAAe,CAAE;AAC5D,sBAAsB,IAAI,CAACmC,UAAW;AACtC;AACA,uBAAuB,IAAI,CAACH,IAAI,CAACI,QAAQ,CAAC,iCAAiC,CAAE;AAC7E,sBAAsB,IAAI,CAACJ,IAAI,CAACI,QAAQ,CAAC,kCAAkC,CAAE;AAC7E;AACA,KAAK;MACH;IAAC;MAAA5C,IAAA;MAAA6C,MAAA;MAAA1C,GAAA;MAAAC,KAAA,EAED,SAAA0C,OAAA,EAAoC;QAClC,OAAO,CACL7D,GAAI;AACV;AACA;AACA;AACA,OAAO,CACF;MACH;IAAC;EAAA;AAAA,GApI6CE,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}