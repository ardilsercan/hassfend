{"ast":null,"code":"/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { MDCFloatingLabelFoundation } from '@material/floating-label/foundation.js';\nimport { directive, Directive, PartType } from 'lit/directive.js';\nconst createAdapter = labelElement => {\n  return {\n    addClass: className => labelElement.classList.add(className),\n    removeClass: className => labelElement.classList.remove(className),\n    getWidth: () => labelElement.scrollWidth,\n    registerInteractionHandler: (evtType, handler) => {\n      labelElement.addEventListener(evtType, handler);\n    },\n    deregisterInteractionHandler: (evtType, handler) => {\n      labelElement.removeEventListener(evtType, handler);\n    }\n  };\n};\nclass FloatingLabelDirective extends Directive {\n  constructor(partInfo) {\n    super(partInfo);\n    this.foundation = null;\n    this.previousPart = null;\n    switch (partInfo.type) {\n      // Only allow Attribute and Part bindings\n      case PartType.ATTRIBUTE:\n      case PartType.PROPERTY:\n        break;\n      default:\n        throw new Error('FloatingLabel directive only support attribute and property parts');\n    }\n  }\n  /**\n   * There is no PropertyPart in Lit 2 so far. For more info see:\n   * https://github.com/lit/lit/issues/1863\n   */\n  update(part, [label]) {\n    if (part !== this.previousPart) {\n      if (this.foundation) {\n        this.foundation.destroy();\n      }\n      this.previousPart = part;\n      const labelElement = part.element;\n      labelElement.classList.add('mdc-floating-label');\n      const adapter = createAdapter(labelElement);\n      this.foundation = new MDCFloatingLabelFoundation(adapter);\n      this.foundation.init();\n    }\n    return this.render(label);\n  }\n  render(_label) {\n    return this.foundation;\n  }\n}\nexport const floatingLabel = directive(FloatingLabelDirective);","map":{"version":3,"names":["MDCFloatingLabelFoundation","directive","Directive","PartType","createAdapter","labelElement","addClass","className","classList","add","removeClass","remove","getWidth","scrollWidth","registerInteractionHandler","evtType","handler","addEventListener","deregisterInteractionHandler","removeEventListener","FloatingLabelDirective","constructor","partInfo","foundation","previousPart","type","ATTRIBUTE","PROPERTY","Error","update","part","label","destroy","element","adapter","init","render","_label","floatingLabel"],"sources":["mwc-floating-label-directive.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Style preference for leading underscores.\n// tslint:disable:strip-private-property-underscore\n\nimport {MDCFloatingLabelAdapter} from '@material/floating-label/adapter.js';\nimport {MDCFloatingLabelFoundation} from '@material/floating-label/foundation.js';\nimport {AttributePart, directive, Directive, DirectiveParameters, PartInfo, PartType} from 'lit/directive.js';\n\nexport interface FloatingLabel extends HTMLLabelElement {\n  floatingLabelFoundation: MDCFloatingLabelFoundation;\n}\n\nconst createAdapter = (labelElement: HTMLElement): MDCFloatingLabelAdapter => {\n  return {\n    addClass: (className) => labelElement.classList.add(className),\n    removeClass: (className) => labelElement.classList.remove(className),\n    getWidth: () => labelElement.scrollWidth,\n    registerInteractionHandler: (evtType, handler) => {\n      labelElement.addEventListener(evtType, handler);\n    },\n    deregisterInteractionHandler: (evtType, handler) => {\n      labelElement.removeEventListener(evtType, handler);\n    },\n  };\n};\n\nclass FloatingLabelDirective extends Directive {\n  private foundation: MDCFloatingLabelFoundation|null = null;\n  private previousPart: AttributePart|null = null;\n\n  constructor(partInfo: PartInfo) {\n    super(partInfo);\n\n    switch (partInfo.type) {\n      // Only allow Attribute and Part bindings\n      case PartType.ATTRIBUTE:\n      case PartType.PROPERTY:\n        break;\n      default:\n        throw new Error(\n            'FloatingLabel directive only support attribute and property parts');\n    }\n  }\n\n  /**\n   * There is no PropertyPart in Lit 2 so far. For more info see:\n   * https://github.com/lit/lit/issues/1863\n   */\n  override update(part: AttributePart, [label]: DirectiveParameters<this>) {\n    if (part !== this.previousPart) {\n      if (this.foundation) {\n        this.foundation.destroy();\n      }\n      this.previousPart = part;\n      const labelElement = part.element as FloatingLabel;\n      labelElement.classList.add('mdc-floating-label');\n      const adapter = createAdapter(labelElement);\n      this.foundation = new MDCFloatingLabelFoundation(adapter);\n      this.foundation.init();\n    }\n    return this.render(label);\n  }\n  render(_label: string): MDCFloatingLabelFoundation|null {\n    return this.foundation;\n  }\n}\n\nexport const floatingLabel = directive(FloatingLabelDirective);\n"],"mappings":"AAAA;;;;;AAUA,SAAQA,0BAA0B,QAAO,wCAAwC;AACjF,SAAuBC,SAAS,EAAEC,SAAS,EAAiCC,QAAQ,QAAO,kBAAkB;AAM7G,MAAMC,aAAa,GAAIC,YAAyB,IAA6B;EAC3E,OAAO;IACLC,QAAQ,EAAGC,SAAS,IAAKF,YAAY,CAACG,SAAS,CAACC,GAAG,CAACF,SAAS,CAAC;IAC9DG,WAAW,EAAGH,SAAS,IAAKF,YAAY,CAACG,SAAS,CAACG,MAAM,CAACJ,SAAS,CAAC;IACpEK,QAAQ,EAAEA,CAAA,KAAMP,YAAY,CAACQ,WAAW;IACxCC,0BAA0B,EAAEA,CAACC,OAAO,EAAEC,OAAO,KAAI;MAC/CX,YAAY,CAACY,gBAAgB,CAACF,OAAO,EAAEC,OAAO,CAAC;IACjD,CAAC;IACDE,4BAA4B,EAAEA,CAACH,OAAO,EAAEC,OAAO,KAAI;MACjDX,YAAY,CAACc,mBAAmB,CAACJ,OAAO,EAAEC,OAAO,CAAC;IACpD;GACD;AACH,CAAC;AAED,MAAMI,sBAAuB,SAAQlB,SAAS;EAI5CmB,YAAYC,QAAkB;IAC5B,KAAK,CAACA,QAAQ,CAAC;IAJT,KAAAC,UAAU,GAAoC,IAAI;IAClD,KAAAC,YAAY,GAAuB,IAAI;IAK7C,QAAQF,QAAQ,CAACG,IAAI;MACnB;MACA,KAAKtB,QAAQ,CAACuB,SAAS;MACvB,KAAKvB,QAAQ,CAACwB,QAAQ;QACpB;MACF;QACE,MAAM,IAAIC,KAAK,CACX,mEAAmE,CAAC;;EAE9E;EAEA;;;;EAISC,MAAMA,CAACC,IAAmB,EAAE,CAACC,KAAK,CAA4B;IACrE,IAAID,IAAI,KAAK,IAAI,CAACN,YAAY,EAAE;MAC9B,IAAI,IAAI,CAACD,UAAU,EAAE;QACnB,IAAI,CAACA,UAAU,CAACS,OAAO,EAAE;;MAE3B,IAAI,CAACR,YAAY,GAAGM,IAAI;MACxB,MAAMzB,YAAY,GAAGyB,IAAI,CAACG,OAAwB;MAClD5B,YAAY,CAACG,SAAS,CAACC,GAAG,CAAC,oBAAoB,CAAC;MAChD,MAAMyB,OAAO,GAAG9B,aAAa,CAACC,YAAY,CAAC;MAC3C,IAAI,CAACkB,UAAU,GAAG,IAAIvB,0BAA0B,CAACkC,OAAO,CAAC;MACzD,IAAI,CAACX,UAAU,CAACY,IAAI,EAAE;;IAExB,OAAO,IAAI,CAACC,MAAM,CAACL,KAAK,CAAC;EAC3B;EACAK,MAAMA,CAACC,MAAc;IACnB,OAAO,IAAI,CAACd,UAAU;EACxB;;AAGF,OAAO,MAAMe,aAAa,GAAGrC,SAAS,CAACmB,sBAAsB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}