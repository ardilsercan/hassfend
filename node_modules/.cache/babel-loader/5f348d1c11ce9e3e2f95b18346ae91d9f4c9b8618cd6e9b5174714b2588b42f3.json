{"ast":null,"code":"import _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport \"@material/mwc-button/mwc-button\";\nconst mdiBell = \"M21,19V20H3V19L5,17V11C5,7.9 7.03,5.17 10,4.29C10,4.19 10,4.1 10,4A2,2 0 0,1 12,2A2,2 0 0,1 14,4C14,4.1 14,4.19 14,4.29C16.97,5.17 19,7.9 19,11V17L21,19M14,21A2,2 0 0,1 12,23A2,2 0 0,1 10,21\";\nconst mdiCalendar = \"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z\";\nconst mdiCellphoneCog = \"M9.82,12.5C9.84,12.33 9.86,12.17 9.86,12C9.86,11.83 9.84,11.67 9.82,11.5L10.9,10.69C11,10.62 11,10.5 10.96,10.37L9.93,8.64C9.87,8.53 9.73,8.5 9.62,8.53L8.34,9.03C8.07,8.83 7.78,8.67 7.47,8.54L7.27,7.21C7.27,7.09 7.16,7 7.03,7H5C4.85,7 4.74,7.09 4.72,7.21L4.5,8.53C4.21,8.65 3.92,8.83 3.65,9L2.37,8.5C2.25,8.47 2.12,8.5 2.06,8.63L1.03,10.36C0.97,10.5 1,10.61 1.1,10.69L2.18,11.5C2.16,11.67 2.15,11.84 2.15,12C2.15,12.17 2.17,12.33 2.19,12.5L1.1,13.32C1,13.39 1,13.53 1.04,13.64L2.07,15.37C2.13,15.5 2.27,15.5 2.38,15.5L3.66,15C3.93,15.18 4.22,15.34 4.53,15.47L4.73,16.79C4.74,16.91 4.85,17 5,17H7.04C7.17,17 7.28,16.91 7.29,16.79L7.5,15.47C7.8,15.35 8.09,15.17 8.36,15L9.64,15.5C9.76,15.53 9.89,15.5 9.95,15.37L11,13.64C11.04,13.53 11,13.4 10.92,13.32L9.82,12.5M6,13.75C5,13.75 4.2,12.97 4.2,12C4.2,11.03 5,10.25 6,10.25C7,10.25 7.8,11.03 7.8,12C7.8,12.97 7,13.75 6,13.75M17,1H7A2,2 0 0,0 5,3V6H7V4H17V20H7V18H5V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3A2,2 0 0,0 17,1Z\";\nconst mdiChartBox = \"M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3M9 17H7V10H9V17M13 17H11V7H13V17M17 17H15V13H17V17Z\";\nconst mdiClipboardList = \"M19 3H14.82C14.4 1.84 13.3 1 12 1S9.6 1.84 9.18 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3M7 8H9V12H8V9H7V8M10 17V18H7V17.08L9 15H7V14H9.25C9.66 14 10 14.34 10 14.75C10 14.95 9.92 15.14 9.79 15.27L8.12 17H10M11 4C11 3.45 11.45 3 12 3S13 3.45 13 4 12.55 5 12 5 11 4.55 11 4M17 17H12V15H17V17M17 11H12V9H17V11Z\";\nconst mdiClose = \"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z\";\nconst mdiCog = \"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z\";\nconst mdiFormatListBulletedType = \"M5,9.5L7.5,14H2.5L5,9.5M3,4H7V8H3V4M5,20A2,2 0 0,0 7,18A2,2 0 0,0 5,16A2,2 0 0,0 3,18A2,2 0 0,0 5,20M9,5V7H21V5H9M9,19H21V17H9V19M9,13H21V11H9V13Z\";\nconst mdiHammer = \"M2 19.63L13.43 8.2L12.72 7.5L14.14 6.07L12 3.89C13.2 2.7 15.09 2.7 16.27 3.89L19.87 7.5L18.45 8.91H21.29L22 9.62L18.45 13.21L17.74 12.5V9.62L16.27 11.04L15.56 10.33L4.13 21.76L2 19.63Z\";\nconst mdiLightningBolt = \"M11 15H6L13 1V9H18L11 23V15Z\";\nconst mdiMenu = \"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z\";\nconst mdiMenuOpen = \"M21,15.61L19.59,17L14.58,12L19.59,7L21,8.39L17.44,12L21,15.61M3,6H16V8H3V6M3,13V11H13V13H3M3,18V16H16V18H3Z\";\nconst mdiPlayBoxMultiple = \"M4,6H2V20A2,2 0 0,0 4,22H18V20H4V6M20,2H8A2,2 0 0,0 6,4V16A2,2 0 0,0 8,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M12,14.5V5.5L18,10L12,14.5Z\";\nconst mdiPlus = \"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z\";\nconst mdiTooltipAccount = \"M20,2H4A2,2 0 0,0 2,4V16A2,2 0 0,0 4,18H8L12,22L16,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M12,4.3C13.5,4.3 14.7,5.5 14.7,7C14.7,8.5 13.5,9.7 12,9.7C10.5,9.7 9.3,8.5 9.3,7C9.3,5.5 10.5,4.3 12,4.3M18,15H6V14.1C6,12.1 10,11 12,11C14,11 18,12.1 18,14.1V15Z\";\nconst mdiViewDashboard = \"M13,3V9H21V3M13,21H21V11H13M3,21H11V15H3M3,13H11V3H3V13Z\";\nimport \"@polymer/paper-item/paper-icon-item\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, eventOptions, property, state } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport memoizeOne from \"memoize-one\";\nimport { storage } from \"../common/decorators/storage\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { toggleAttribute } from \"../common/dom/toggle_attribute\";\nimport { stringCompare } from \"../common/string/compare\";\nimport { throttle } from \"../common/util/throttle\";\nimport { subscribeNotifications } from \"../data/persistent_notification\";\nimport { subscribeRepairsIssueRegistry } from \"../data/repairs\";\nimport { updateCanInstall } from \"../data/update\";\nimport { SubscribeMixin } from \"../mixins/subscribe-mixin\";\nimport { actionHandler } from \"../panels/lovelace/common/directives/action-handler-directive\";\nimport { haStyleScrollbar } from \"../resources/styles\";\nimport \"./ha-icon\";\nimport \"./ha-icon-button\";\nimport \"./ha-menu-button\";\nimport \"./ha-sortable\";\nimport \"./ha-svg-icon\";\nimport \"./user/ha-user-badge\";\nconst SHOW_AFTER_SPACER = [\"config\", \"developer-tools\"];\nconst SUPPORT_SCROLL_IF_NEEDED = (\"scrollIntoViewIfNeeded\" in document.body);\nconst SORT_VALUE_URL_PATHS = {\n  energy: 1,\n  map: 2,\n  logbook: 3,\n  history: 4,\n  \"developer-tools\": 9,\n  config: 11\n};\nconst PANEL_ICONS = {\n  calendar: mdiCalendar,\n  \"developer-tools\": mdiHammer,\n  energy: mdiLightningBolt,\n  history: mdiChartBox,\n  logbook: mdiFormatListBulletedType,\n  lovelace: mdiViewDashboard,\n  map: mdiTooltipAccount,\n  \"media-browser\": mdiPlayBoxMultiple,\n  todo: mdiClipboardList\n};\nconst panelSorter = (reverseSort, defaultPanel, a, b, language) => {\n  const indexA = reverseSort.indexOf(a.url_path);\n  const indexB = reverseSort.indexOf(b.url_path);\n  if (indexA !== indexB) {\n    if (indexA < indexB) {\n      return 1;\n    }\n    return -1;\n  }\n  return defaultPanelSorter(defaultPanel, a, b, language);\n};\nconst defaultPanelSorter = (defaultPanel, a, b, language) => {\n  // Put all the Lovelace at the top.\n  const aLovelace = a.component_name === \"lovelace\";\n  const bLovelace = b.component_name === \"lovelace\";\n  if (a.url_path === defaultPanel) {\n    return -1;\n  }\n  if (b.url_path === defaultPanel) {\n    return 1;\n  }\n  if (aLovelace && bLovelace) {\n    return stringCompare(a.title, b.title, language);\n  }\n  if (aLovelace && !bLovelace) {\n    return -1;\n  }\n  if (bLovelace) {\n    return 1;\n  }\n  const aBuiltIn = (a.url_path in SORT_VALUE_URL_PATHS);\n  const bBuiltIn = (b.url_path in SORT_VALUE_URL_PATHS);\n  if (aBuiltIn && bBuiltIn) {\n    return SORT_VALUE_URL_PATHS[a.url_path] - SORT_VALUE_URL_PATHS[b.url_path];\n  }\n  if (aBuiltIn) {\n    return -1;\n  }\n  if (bBuiltIn) {\n    return 1;\n  }\n  // both not built in, sort by title\n  return stringCompare(a.title, b.title, language);\n};\nconst computePanels = memoizeOne((panels, defaultPanel, panelsOrder, hiddenPanels, locale) => {\n  if (!panels) {\n    return [[], []];\n  }\n  const beforeSpacer = [];\n  const afterSpacer = [];\n  Object.values(panels).forEach(panel => {\n    if (hiddenPanels.includes(panel.url_path) || !panel.title && panel.url_path !== defaultPanel) {\n      return;\n    }\n    (SHOW_AFTER_SPACER.includes(panel.url_path) ? afterSpacer : beforeSpacer).push(panel);\n  });\n  const reverseSort = [...panelsOrder].reverse();\n  beforeSpacer.sort((a, b) => panelSorter(reverseSort, defaultPanel, a, b, locale.language));\n  afterSpacer.sort((a, b) => panelSorter(reverseSort, defaultPanel, a, b, locale.language));\n  return [beforeSpacer, afterSpacer];\n});\nlet HaSidebar = _decorate([customElement(\"ha-sidebar\")], function (_initialize, _SubscribeMixin) {\n  class HaSidebar extends _SubscribeMixin {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: HaSidebar,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean,\n        reflect: true\n      })],\n      key: \"narrow\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"route\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"alwaysExpand\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"editMode\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_notifications\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_updatesCount\",\n      value() {\n        return 0;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_issuesCount\",\n      value() {\n        return 0;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_mouseLeaveTimeout\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_tooltipHideTimeout\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_recentKeydownActiveUntil\",\n      value() {\n        return 0;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_editStyleLoaded\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [storage({\n        key: \"sidebarPanelOrder\",\n        state: true,\n        subscribe: true\n      })],\n      key: \"_panelOrder\",\n      value() {\n        return [];\n      }\n    }, {\n      kind: \"field\",\n      decorators: [storage({\n        key: \"sidebarHiddenPanels\",\n        state: true,\n        subscribe: true\n      })],\n      key: \"_hiddenPanels\",\n      value() {\n        return [];\n      }\n    }, {\n      kind: \"method\",\n      key: \"hassSubscribe\",\n      value: function hassSubscribe() {\n        var _this$hass$user;\n        return (_this$hass$user = this.hass.user) !== null && _this$hass$user !== void 0 && _this$hass$user.is_admin ? [subscribeRepairsIssueRegistry(this.hass.connection, repairs => {\n          this._issuesCount = repairs.issues.filter(issue => !issue.ignored).length;\n        })] : [];\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (!this.hass) {\n          return nothing;\n        }\n\n        // prettier-ignore\n        return html`\n      ${this._renderHeader()}\n      ${this._renderAllPanels()}\n      ${this._renderDivider()}\n      ${this._renderNotifications()}\n      ${this._renderUserItem()}\n      <div disabled class=\"bottom-spacer\"></div>\n      <div class=\"tooltip\"></div>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"shouldUpdate\",\n      value: function shouldUpdate(changedProps) {\n        if (changedProps.has(\"expanded\") || changedProps.has(\"narrow\") || changedProps.has(\"alwaysExpand\") || changedProps.has(\"editMode\") || changedProps.has(\"_externalConfig\") || changedProps.has(\"_updatesCount\") || changedProps.has(\"_issuesCount\") || changedProps.has(\"_notifications\") || changedProps.has(\"_hiddenPanels\") || changedProps.has(\"_panelOrder\")) {\n          return true;\n        }\n        if (!this.hass || !changedProps.has(\"hass\")) {\n          return false;\n        }\n        const oldHass = changedProps.get(\"hass\");\n        if (!oldHass) {\n          return true;\n        }\n        const hass = this.hass;\n        return hass.panels !== oldHass.panels || hass.panelUrl !== oldHass.panelUrl || hass.user !== oldHass.user || hass.localize !== oldHass.localize || hass.locale !== oldHass.locale || hass.states !== oldHass.states || hass.defaultPanel !== oldHass.defaultPanel;\n      }\n    }, {\n      kind: \"method\",\n      key: \"firstUpdated\",\n      value: function firstUpdated(changedProps) {\n        _get(_getPrototypeOf(HaSidebar.prototype), \"firstUpdated\", this).call(this, changedProps);\n        subscribeNotifications(this.hass.connection, notifications => {\n          this._notifications = notifications;\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProps) {\n        _get(_getPrototypeOf(HaSidebar.prototype), \"updated\", this).call(this, changedProps);\n        if (changedProps.has(\"alwaysExpand\")) {\n          toggleAttribute(this, \"expanded\", this.alwaysExpand);\n        }\n        if (changedProps.has(\"editMode\") && this.editMode) {\n          this._editModeActivated();\n        }\n        if (!changedProps.has(\"hass\")) {\n          return;\n        }\n        this._calculateCounts();\n        if (!SUPPORT_SCROLL_IF_NEEDED) {\n          return;\n        }\n        const oldHass = changedProps.get(\"hass\");\n        if (!oldHass || oldHass.panelUrl !== this.hass.panelUrl) {\n          const selectedEl = this.shadowRoot.querySelector(\".iron-selected\");\n          if (selectedEl) {\n            // @ts-ignore\n            selectedEl.scrollIntoViewIfNeeded();\n          }\n        }\n      }\n    }, {\n      kind: \"field\",\n      key: \"_calculateCounts\",\n      value() {\n        return throttle(() => {\n          let updateCount = 0;\n          for (const entityId of Object.keys(this.hass.states)) {\n            if (entityId.startsWith(\"update.\") && updateCanInstall(this.hass.states[entityId])) {\n              updateCount++;\n            }\n          }\n          this._updatesCount = updateCount;\n        }, 5000);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderHeader\",\n      value: function _renderHeader() {\n        return html`<div\n      class=\"menu\"\n      @action=${this._handleAction}\n      .actionHandler=${actionHandler({\n          hasHold: !this.editMode,\n          disabled: this.editMode\n        })}\n    >\n      ${!this.narrow ? html`\n            <ha-icon-button\n              .label=${this.hass.localize(\"ui.sidebar.sidebar_toggle\")}\n              .path=${this.hass.dockedSidebar === \"docked\" ? mdiMenuOpen : mdiMenu}\n              @action=${this._toggleSidebar}\n            ></ha-icon-button>\n          ` : \"\"}\n      ${this.editMode ? html`<mwc-button outlined @click=${this._closeEditMode}>\n            ${this.hass.localize(\"ui.sidebar.done\")}\n          </mwc-button>` : html`<div class=\"title\">Indexline Technology</div>`}\n    </div>`;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderAllPanels\",\n      value: function _renderAllPanels() {\n        var _this$route$path;\n        const [beforeSpacer, afterSpacer] = computePanels(this.hass.panels, this.hass.defaultPanel, this._panelOrder, this._hiddenPanels, this.hass.locale);\n\n        // Show the supervisor as beeing part of configuration\n        const selectedPanel = (_this$route$path = this.route.path) !== null && _this$route$path !== void 0 && _this$route$path.startsWith(\"/hassio/\") ? \"config\" : this.hass.panelUrl;\n\n        // prettier-ignore\n        return html`\n      <paper-listbox\n        attr-for-selected=\"data-panel\"\n        class=\"ha-scrollbar\"\n        .selected=${selectedPanel}\n        @focusin=${this._listboxFocusIn}\n        @focusout=${this._listboxFocusOut}\n        @scroll=${this._listboxScroll}\n        @keydown=${this._listboxKeydown}\n      >\n        ${this.editMode ? this._renderPanelsEdit(beforeSpacer) : this._renderPanels(beforeSpacer)}\n        ${this._renderSpacer()}\n        ${this._renderPanels(afterSpacer)}\n        ${this._renderExternalConfiguration()}\n      </paper-listbox>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderPanels\",\n      value: function _renderPanels(panels) {\n        return panels.map(panel => this._renderPanel(panel.url_path, panel.url_path === this.hass.defaultPanel ? panel.title || this.hass.localize(\"panel.states\") : this.hass.localize(`panel.${panel.title}`) || panel.title, panel.icon, panel.url_path === this.hass.defaultPanel && !panel.icon ? PANEL_ICONS.lovelace : panel.url_path in PANEL_ICONS ? PANEL_ICONS[panel.url_path] : undefined));\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderPanel\",\n      value: function _renderPanel(urlPath, title, icon, iconPath) {\n        return urlPath === \"config\" ? this._renderConfiguration(title) : html`\n          <a\n            role=\"option\"\n            href=${`/${urlPath}`}\n            data-panel=${urlPath}\n            tabindex=\"-1\"\n            @mouseenter=${this._itemMouseEnter}\n            @mouseleave=${this._itemMouseLeave}\n          >\n            <paper-icon-item>\n              ${iconPath ? html`<ha-svg-icon\n                    slot=\"item-icon\"\n                    .path=${iconPath}\n                  ></ha-svg-icon>` : html`<ha-icon slot=\"item-icon\" .icon=${icon}></ha-icon>`}\n              <span class=\"item-text\">${title}</span>\n            </paper-icon-item>\n            ${this.editMode ? html`<ha-icon-button\n                  .label=${this.hass.localize(\"ui.sidebar.hide_panel\")}\n                  .path=${mdiClose}\n                  class=\"hide-panel\"\n                  .panel=${urlPath}\n                  @click=${this._hidePanel}\n                ></ha-icon-button>` : \"\"}\n          </a>\n        `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_panelMoved\",\n      value: function _panelMoved(ev) {\n        ev.stopPropagation();\n        const {\n          oldIndex,\n          newIndex\n        } = ev.detail;\n        const [beforeSpacer] = computePanels(this.hass.panels, this.hass.defaultPanel, this._panelOrder, this._hiddenPanels, this.hass.locale);\n        const panelOrder = beforeSpacer.map(panel => panel.url_path);\n        const panel = panelOrder.splice(oldIndex, 1)[0];\n        panelOrder.splice(newIndex, 0, panel);\n        this._panelOrder = panelOrder;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderPanelsEdit\",\n      value: function _renderPanelsEdit(beforeSpacer) {\n        return html`\n      <ha-sortable\n        handle-selector=\"paper-icon-item\"\n        .disabled=${!this.editMode}\n        @item-moved=${this._panelMoved}\n      >\n        <div class=\"reorder-list\">${this._renderPanels(beforeSpacer)}</div>\n      </ha-sortable>\n      ${this._renderSpacer()}${this._renderHiddenPanels()}\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderHiddenPanels\",\n      value: function _renderHiddenPanels() {\n        return html`${this._hiddenPanels.length ? html`${this._hiddenPanels.map(url => {\n          const panel = this.hass.panels[url];\n          if (!panel) {\n            return \"\";\n          }\n          return html`<paper-icon-item\n            @click=${this._unhidePanel}\n            class=\"hidden-panel\"\n            .panel=${url}\n          >\n            ${panel.url_path === this.hass.defaultPanel && !panel.icon ? html`<ha-svg-icon\n                  slot=\"item-icon\"\n                  .path=${PANEL_ICONS.lovelace}\n                ></ha-svg-icon>` : panel.url_path in PANEL_ICONS ? html`<ha-svg-icon\n                    slot=\"item-icon\"\n                    .path=${PANEL_ICONS[panel.url_path]}\n                  ></ha-svg-icon>` : html`<ha-icon\n                    slot=\"item-icon\"\n                    .icon=${panel.icon}\n                  ></ha-icon>`}\n            <span class=\"item-text\"\n              >${panel.url_path === this.hass.defaultPanel ? this.hass.localize(\"panel.states\") : this.hass.localize(`panel.${panel.title}`) || panel.title}</span\n            >\n            <ha-icon-button\n              .label=${this.hass.localize(\"ui.sidebar.show_panel\")}\n              .path=${mdiPlus}\n              class=\"show-panel\"\n            ></ha-icon-button>\n          </paper-icon-item>`;\n        })}\n        ${this._renderSpacer()}` : \"\"}`;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderDivider\",\n      value: function _renderDivider() {\n        return html`<div class=\"divider\"></div>`;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderSpacer\",\n      value: function _renderSpacer() {\n        return html`<div class=\"spacer\" disabled></div>`;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderConfiguration\",\n      value: function _renderConfiguration(title) {\n        return html`<a\n      class=\"configuration-container\"\n      role=\"option\"\n      href=\"/config\"\n      data-panel=\"config\"\n      tabindex=\"-1\"\n      @mouseenter=${this._itemMouseEnter}\n      @mouseleave=${this._itemMouseLeave}\n    >\n      <paper-icon-item class=\"configuration\" role=\"option\">\n        <ha-svg-icon slot=\"item-icon\" .path=${mdiCog}></ha-svg-icon>\n        ${!this.alwaysExpand && (this._updatesCount > 0 || this._issuesCount > 0) ? html`\n              <span class=\"configuration-badge\" slot=\"item-icon\">\n                ${this._updatesCount + this._issuesCount}\n              </span>\n            ` : \"\"}\n        <span class=\"item-text\">${title}</span>\n        ${this.alwaysExpand && (this._updatesCount > 0 || this._issuesCount > 0) ? html`\n              <span class=\"configuration-badge\"\n                >${this._updatesCount + this._issuesCount}</span\n              >\n            ` : \"\"}\n      </paper-icon-item>\n    </a>`;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderNotifications\",\n      value: function _renderNotifications() {\n        const notificationCount = this._notifications ? this._notifications.length : 0;\n        return html`<div\n      class=\"notifications-container\"\n      @mouseenter=${this._itemMouseEnter}\n      @mouseleave=${this._itemMouseLeave}\n    >\n      <paper-icon-item\n        class=\"notifications\"\n        role=\"option\"\n        @click=${this._handleShowNotificationDrawer}\n      >\n        <ha-svg-icon slot=\"item-icon\" .path=${mdiBell}></ha-svg-icon>\n        ${!this.alwaysExpand && notificationCount > 0 ? html`\n              <span class=\"notification-badge\" slot=\"item-icon\">\n                ${notificationCount}\n              </span>\n            ` : \"\"}\n        <span class=\"item-text\">\n          ${this.hass.localize(\"ui.notification_drawer.title\")}\n        </span>\n        ${this.alwaysExpand && notificationCount > 0 ? html` <span class=\"notification-badge\">${notificationCount}</span> ` : \"\"}\n      </paper-icon-item>\n    </div>`;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderUserItem\",\n      value: function _renderUserItem() {\n        return html`<a\n      class=${classMap({\n          profile: true,\n          // Mimick behavior that paper-listbox provides\n          \"iron-selected\": this.hass.panelUrl === \"profile\"\n        })}\n      href=\"/profile\"\n      data-panel=\"panel\"\n      tabindex=\"-1\"\n      role=\"option\"\n      aria-label=${this.hass.localize(\"panel.profile\")}\n      @mouseenter=${this._itemMouseEnter}\n      @mouseleave=${this._itemMouseLeave}\n    >\n      <paper-icon-item>\n        <ha-user-badge\n          slot=\"item-icon\"\n          .user=${this.hass.user}\n          .hass=${this.hass}\n        ></ha-user-badge>\n\n        <span class=\"item-text\">\n          ${this.hass.user ? this.hass.user.name : \"\"}\n        </span>\n      </paper-icon-item>\n    </a>`;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderExternalConfiguration\",\n      value: function _renderExternalConfiguration() {\n        var _this$hass$user2, _this$hass$auth$exter;\n        return html`${!((_this$hass$user2 = this.hass.user) !== null && _this$hass$user2 !== void 0 && _this$hass$user2.is_admin) && (_this$hass$auth$exter = this.hass.auth.external) !== null && _this$hass$auth$exter !== void 0 && _this$hass$auth$exter.config.hasSettingsScreen ? html`\n          <a\n            role=\"option\"\n            aria-label=${this.hass.localize(\"ui.sidebar.external_app_configuration\")}\n            href=\"#external-app-configuration\"\n            tabindex=\"-1\"\n            @click=${this._handleExternalAppConfiguration}\n            @mouseenter=${this._itemMouseEnter}\n            @mouseleave=${this._itemMouseLeave}\n          >\n            <paper-icon-item>\n              <ha-svg-icon\n                slot=\"item-icon\"\n                .path=${mdiCellphoneCog}\n              ></ha-svg-icon>\n              <span class=\"item-text\">\n                ${this.hass.localize(\"ui.sidebar.external_app_configuration\")}\n              </span>\n            </paper-icon-item>\n          </a>\n        ` : \"\"}`;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleExternalAppConfiguration\",\n      value: function _handleExternalAppConfiguration(ev) {\n        ev.preventDefault();\n        this.hass.auth.external.fireMessage({\n          type: \"config_screen/show\"\n        });\n      }\n    }, {\n      kind: \"get\",\n      key: \"_tooltip\",\n      value: function _tooltip() {\n        return this.shadowRoot.querySelector(\".tooltip\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleAction\",\n      value: function _handleAction(ev) {\n        if (ev.detail.action !== \"hold\") {\n          return;\n        }\n        fireEvent(this, \"hass-edit-sidebar\", {\n          editMode: true\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_editModeActivated\",\n      value: async function _editModeActivated() {\n        await this._loadEditStyle();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_loadEditStyle\",\n      value: async function _loadEditStyle() {\n        if (this._editStyleLoaded) return;\n        const editStylesImport = await import(\"../resources/ha-sidebar-edit-style\");\n        const style = document.createElement(\"style\");\n        style.innerHTML = editStylesImport.sidebarEditStyle.cssText;\n        this.shadowRoot.appendChild(style);\n        await this.updateComplete;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_closeEditMode\",\n      value: function _closeEditMode() {\n        fireEvent(this, \"hass-edit-sidebar\", {\n          editMode: false\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_hidePanel\",\n      value: async function _hidePanel(ev) {\n        ev.preventDefault();\n        const panel = ev.currentTarget.panel;\n        if (this._hiddenPanels.includes(panel)) {\n          return;\n        }\n        // Make a copy for Memoize\n        this._hiddenPanels = [...this._hiddenPanels, panel];\n        // Remove it from the panel order\n        this._panelOrder = this._panelOrder.filter(order => order !== panel);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_unhidePanel\",\n      value: async function _unhidePanel(ev) {\n        ev.preventDefault();\n        const panel = ev.currentTarget.panel;\n        this._hiddenPanels = this._hiddenPanels.filter(hidden => hidden !== panel);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_itemMouseEnter\",\n      value: function _itemMouseEnter(ev) {\n        // On keypresses on the listbox, we're going to ignore mouse enter events\n        // for 100ms so that we ignore it when pressing down arrow scrolls the\n        // sidebar causing the mouse to hover a new icon\n        if (this.alwaysExpand || new Date().getTime() < this._recentKeydownActiveUntil) {\n          return;\n        }\n        if (this._mouseLeaveTimeout) {\n          clearTimeout(this._mouseLeaveTimeout);\n          this._mouseLeaveTimeout = undefined;\n        }\n        this._showTooltip(ev.currentTarget);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_itemMouseLeave\",\n      value: function _itemMouseLeave() {\n        if (this._mouseLeaveTimeout) {\n          clearTimeout(this._mouseLeaveTimeout);\n        }\n        this._mouseLeaveTimeout = window.setTimeout(() => {\n          this._hideTooltip();\n        }, 500);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_listboxFocusIn\",\n      value: function _listboxFocusIn(ev) {\n        if (this.alwaysExpand || ev.target.nodeName !== \"A\") {\n          return;\n        }\n        this._showTooltip(ev.target.querySelector(\"paper-icon-item\"));\n      }\n    }, {\n      kind: \"method\",\n      key: \"_listboxFocusOut\",\n      value: function _listboxFocusOut() {\n        this._hideTooltip();\n      }\n    }, {\n      kind: \"method\",\n      decorators: [eventOptions({\n        passive: true\n      })],\n      key: \"_listboxScroll\",\n      value: function _listboxScroll() {\n        // On keypresses on the listbox, we're going to ignore scroll events\n        // for 100ms so that if pressing down arrow scrolls the sidebar, the tooltip\n        // will not be hidden.\n        if (new Date().getTime() < this._recentKeydownActiveUntil) {\n          return;\n        }\n        this._hideTooltip();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_listboxKeydown\",\n      value: function _listboxKeydown() {\n        this._recentKeydownActiveUntil = new Date().getTime() + 100;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_showTooltip\",\n      value: function _showTooltip(item) {\n        if (this._tooltipHideTimeout) {\n          clearTimeout(this._tooltipHideTimeout);\n          this._tooltipHideTimeout = undefined;\n        }\n        const tooltip = this._tooltip;\n        const listbox = this.shadowRoot.querySelector(\"paper-listbox\");\n        let top = item.offsetTop + 11;\n        if (listbox.contains(item)) {\n          top -= listbox.scrollTop;\n        }\n        tooltip.innerHTML = item.querySelector(\".item-text\").innerHTML;\n        tooltip.style.display = \"block\";\n        tooltip.style.position = \"fixed\";\n        tooltip.style.top = `${top}px`;\n        tooltip.style.left = `${item.offsetLeft + item.clientWidth + 4}px`;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_hideTooltip\",\n      value: function _hideTooltip() {\n        // Delay it a little in case other events are pending processing.\n        if (!this._tooltipHideTimeout) {\n          this._tooltipHideTimeout = window.setTimeout(() => {\n            this._tooltipHideTimeout = undefined;\n            this._tooltip.style.display = \"none\";\n          }, 10);\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleShowNotificationDrawer\",\n      value: function _handleShowNotificationDrawer() {\n        fireEvent(this, \"hass-show-notifications\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_toggleSidebar\",\n      value: function _toggleSidebar(ev) {\n        if (ev.detail.action !== \"tap\") {\n          return;\n        }\n        fireEvent(this, \"hass-toggle-menu\");\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return [haStyleScrollbar, css`\n        :host {\n          overflow: visible;\n          height: 100%;\n          display: block;\n          overflow: hidden;\n          -ms-user-select: none;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          background-color: var(--sidebar-background-color);\n          width: 100%;\n          box-sizing: border-box;\n        }\n        .menu {\n          height: var(--header-height);\n          box-sizing: border-box;\n          display: flex;\n          padding: 0 4px;\n          border-bottom: 1px solid transparent;\n          white-space: nowrap;\n          font-weight: 400;\n          color: var(--sidebar-menu-button-text-color, --primary-text-color);\n          border-bottom: 1px solid var(--divider-color);\n          background-color: var(\n            --sidebar-menu-button-background-color,\n            --primary-background-color\n          );\n          font-size: 20px;\n          align-items: center;\n          padding-left: calc(4px + env(safe-area-inset-left));\n          padding-inline-start: calc(4px + env(safe-area-inset-left));\n          padding-inline-end: initial;\n        }\n        :host([expanded]) .menu {\n          width: calc(256px + env(safe-area-inset-left));\n        }\n        .menu ha-icon-button {\n          color: var(--sidebar-icon-color);\n        }\n        .title {\n          margin-left: 19px;\n          margin-inline-start: 19px;\n          margin-inline-end: initial;\n          width: 100%;\n          display: none;\n        }\n        :host([narrow]) .title {\n          margin: 0;\n          padding: 0 16px;\n        }\n        :host([expanded]) .title {\n          display: initial;\n        }\n        :host([expanded]) .menu mwc-button {\n          margin: 0 8px;\n        }\n        .menu mwc-button {\n          width: 100%;\n        }\n        .reorder-list,\n        .hidden-panel {\n          display: none;\n        }\n\n        paper-listbox {\n          padding: 4px 0;\n          display: flex;\n          flex-direction: column;\n          box-sizing: border-box;\n          height: calc(100% - var(--header-height) - 132px);\n          height: calc(\n            100% - var(--header-height) - 132px - env(safe-area-inset-bottom)\n          );\n          overflow-x: hidden;\n          background: none;\n          margin-left: env(safe-area-inset-left);\n          margin-inline-start: env(safe-area-inset-left);\n          margin-inline-end: initial;\n        }\n\n        a {\n          text-decoration: none;\n          color: var(--sidebar-text-color);\n          font-weight: 500;\n          font-size: 14px;\n          position: relative;\n          display: block;\n          outline: 0;\n        }\n\n        paper-icon-item {\n          box-sizing: border-box;\n          margin: 4px;\n          padding-left: 12px;\n          padding-inline-start: 12px;\n          padding-inline-end: initial;\n          border-radius: 4px;\n          --paper-item-min-height: 40px;\n          width: 48px;\n        }\n        :host([expanded]) paper-icon-item {\n          width: 248px;\n        }\n\n        ha-icon[slot=\"item-icon\"],\n        ha-svg-icon[slot=\"item-icon\"] {\n          color: var(--sidebar-icon-color);\n        }\n\n        .iron-selected paper-icon-item::before,\n        a:not(.iron-selected):focus::before {\n          border-radius: 4px;\n          position: absolute;\n          top: 0;\n          right: 2px;\n          bottom: 0;\n          left: 2px;\n          pointer-events: none;\n          content: \"\";\n          transition: opacity 15ms linear;\n          will-change: opacity;\n        }\n        .iron-selected paper-icon-item::before {\n          background-color: var(--sidebar-selected-icon-color);\n          opacity: 0.12;\n        }\n        a:not(.iron-selected):focus::before {\n          background-color: currentColor;\n          opacity: var(--dark-divider-opacity);\n          margin: 4px 8px;\n        }\n        .iron-selected paper-icon-item:focus::before,\n        .iron-selected:focus paper-icon-item::before {\n          opacity: 0.2;\n        }\n\n        .iron-selected paper-icon-item[pressed]:before {\n          opacity: 0.37;\n        }\n\n        paper-icon-item span {\n          color: var(--sidebar-text-color);\n          font-weight: 500;\n          font-size: 14px;\n        }\n\n        a.iron-selected paper-icon-item ha-icon,\n        a.iron-selected paper-icon-item ha-svg-icon {\n          color: var(--sidebar-selected-icon-color);\n        }\n\n        a.iron-selected .item-text {\n          color: var(--sidebar-selected-text-color);\n        }\n\n        paper-icon-item .item-text {\n          display: none;\n          max-width: calc(100% - 56px);\n        }\n        :host([expanded]) paper-icon-item .item-text {\n          display: block;\n        }\n\n        .divider {\n          bottom: 112px;\n          padding: 10px 0;\n        }\n        .divider::before {\n          content: \" \";\n          display: block;\n          height: 1px;\n          background-color: var(--divider-color);\n        }\n        .notifications-container,\n        .configuration-container {\n          display: flex;\n          margin-left: env(safe-area-inset-left);\n          margin-inline-start: env(safe-area-inset-left);\n          margin-inline-end: initial;\n        }\n        .notifications {\n          cursor: pointer;\n        }\n        .notifications .item-text,\n        .configuration .item-text {\n          flex: 1;\n        }\n        .profile {\n          margin-left: env(safe-area-inset-left);\n          margin-inline-start: env(safe-area-inset-left);\n          margin-inline-end: initial;\n        }\n        .profile paper-icon-item {\n          padding-left: 4px;\n          margin-inline-start: 4px;\n          margin-inline-end: auto;\n        }\n        .profile .item-text {\n          margin-left: 8px;\n          margin-inline-start: 8px;\n          margin-inline-end: initial;\n        }\n\n        .notification-badge,\n        .configuration-badge {\n          position: absolute;\n          left: calc(var(--app-drawer-width, 248px) - 42px);\n          inset-inline-start: calc(var(--app-drawer-width, 248px) - 42px);\n          inset-inline-end: initial;\n          min-width: 20px;\n          box-sizing: border-box;\n          border-radius: 50%;\n          font-weight: 400;\n          background-color: var(--accent-color);\n          line-height: 20px;\n          text-align: center;\n          padding: 0px 2px;\n          color: var(--text-accent-color, var(--text-primary-color));\n        }\n        ha-svg-icon + .notification-badge,\n        ha-svg-icon + .configuration-badge {\n          position: absolute;\n          bottom: 14px;\n          left: 26px;\n          font-size: 0.65em;\n        }\n\n        .spacer {\n          flex: 1;\n          pointer-events: none;\n        }\n\n        .subheader {\n          color: var(--sidebar-text-color);\n          font-weight: 500;\n          font-size: 14px;\n          padding: 16px;\n          white-space: nowrap;\n        }\n\n        .dev-tools {\n          display: flex;\n          flex-direction: row;\n          justify-content: space-between;\n          padding: 0 8px;\n          width: 256px;\n          box-sizing: border-box;\n        }\n\n        .dev-tools a {\n          color: var(--sidebar-icon-color);\n        }\n\n        .tooltip {\n          display: none;\n          position: absolute;\n          opacity: 0.9;\n          border-radius: 2px;\n          white-space: nowrap;\n          color: var(--sidebar-background-color);\n          background-color: var(--sidebar-text-color);\n          padding: 4px;\n          font-weight: 500;\n        }\n\n        .menu ha-icon-button {\n          -webkit-transform: scaleX(var(--scale-direction));\n          transform: scaleX(var(--scale-direction));\n        }\n      `];\n      }\n    }]\n  };\n}, SubscribeMixin(LitElement));","map":{"version":3,"names":["mdiBell","mdiCalendar","mdiCellphoneCog","mdiChartBox","mdiClipboardList","mdiClose","mdiCog","mdiFormatListBulletedType","mdiHammer","mdiLightningBolt","mdiMenu","mdiMenuOpen","mdiPlayBoxMultiple","mdiPlus","mdiTooltipAccount","mdiViewDashboard","LitElement","css","html","nothing","customElement","eventOptions","property","state","classMap","memoizeOne","storage","fireEvent","toggleAttribute","stringCompare","throttle","subscribeNotifications","subscribeRepairsIssueRegistry","updateCanInstall","SubscribeMixin","actionHandler","haStyleScrollbar","SHOW_AFTER_SPACER","SUPPORT_SCROLL_IF_NEEDED","document","body","SORT_VALUE_URL_PATHS","energy","map","logbook","history","config","PANEL_ICONS","calendar","lovelace","todo","panelSorter","reverseSort","defaultPanel","a","b","language","indexA","indexOf","url_path","indexB","defaultPanelSorter","aLovelace","component_name","bLovelace","title","aBuiltIn","bBuiltIn","computePanels","panels","panelsOrder","hiddenPanels","locale","beforeSpacer","afterSpacer","Object","values","forEach","panel","includes","push","reverse","sort","HaSidebar","_decorate","_initialize","_SubscribeMixin","constructor","args","F","d","kind","decorators","attribute","key","value","type","Boolean","reflect","subscribe","hassSubscribe","_this$hass$user","hass","user","is_admin","connection","repairs","_issuesCount","issues","filter","issue","ignored","length","render","_renderHeader","_renderAllPanels","_renderDivider","_renderNotifications","_renderUserItem","shouldUpdate","changedProps","has","oldHass","get","panelUrl","localize","states","firstUpdated","_get","_getPrototypeOf","prototype","call","notifications","_notifications","updated","alwaysExpand","editMode","_editModeActivated","_calculateCounts","selectedEl","shadowRoot","querySelector","scrollIntoViewIfNeeded","updateCount","entityId","keys","startsWith","_updatesCount","_handleAction","hasHold","disabled","narrow","dockedSidebar","_toggleSidebar","_closeEditMode","_this$route$path","_panelOrder","_hiddenPanels","selectedPanel","route","path","_listboxFocusIn","_listboxFocusOut","_listboxScroll","_listboxKeydown","_renderPanelsEdit","_renderPanels","_renderSpacer","_renderExternalConfiguration","_renderPanel","icon","undefined","urlPath","iconPath","_renderConfiguration","_itemMouseEnter","_itemMouseLeave","_hidePanel","_panelMoved","ev","stopPropagation","oldIndex","newIndex","detail","panelOrder","splice","_renderHiddenPanels","url","_unhidePanel","notificationCount","_handleShowNotificationDrawer","profile","name","_this$hass$user2","_this$hass$auth$exter","auth","external","hasSettingsScreen","_handleExternalAppConfiguration","preventDefault","fireMessage","_tooltip","action","_loadEditStyle","_editStyleLoaded","editStylesImport","style","createElement","innerHTML","sidebarEditStyle","cssText","appendChild","updateComplete","currentTarget","order","hidden","Date","getTime","_recentKeydownActiveUntil","_mouseLeaveTimeout","clearTimeout","_showTooltip","window","setTimeout","_hideTooltip","target","nodeName","passive","item","_tooltipHideTimeout","tooltip","listbox","top","offsetTop","contains","scrollTop","display","position","left","offsetLeft","clientWidth","static","styles"],"sources":["/Users/sercanardil/Desktop/frontend/src/components/ha-sidebar.ts"],"sourcesContent":["import \"@material/mwc-button/mwc-button\";\nimport {\n  mdiBell,\n  mdiCalendar,\n  mdiCellphoneCog,\n  mdiChartBox,\n  mdiClipboardList,\n  mdiClose,\n  mdiCog,\n  mdiFormatListBulletedType,\n  mdiHammer,\n  mdiLightningBolt,\n  mdiMenu,\n  mdiMenuOpen,\n  mdiPlayBoxMultiple,\n  mdiPlus,\n  mdiTooltipAccount,\n  mdiViewDashboard,\n} from \"@mdi/js\";\nimport \"@polymer/paper-item/paper-icon-item\";\nimport type { PaperIconItemElement } from \"@polymer/paper-item/paper-icon-item\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { UnsubscribeFunc } from \"home-assistant-js-websocket\";\nimport {\n  CSSResult,\n  CSSResultGroup,\n  LitElement,\n  PropertyValues,\n  css,\n  html,\n  nothing,\n} from \"lit\";\nimport { customElement, eventOptions, property, state } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport memoizeOne from \"memoize-one\";\nimport { storage } from \"../common/decorators/storage\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { toggleAttribute } from \"../common/dom/toggle_attribute\";\nimport { stringCompare } from \"../common/string/compare\";\nimport { throttle } from \"../common/util/throttle\";\nimport { ActionHandlerDetail } from \"../data/lovelace/action_handler\";\nimport {\n  PersistentNotification,\n  subscribeNotifications,\n} from \"../data/persistent_notification\";\nimport { subscribeRepairsIssueRegistry } from \"../data/repairs\";\nimport { UpdateEntity, updateCanInstall } from \"../data/update\";\nimport { SubscribeMixin } from \"../mixins/subscribe-mixin\";\nimport { actionHandler } from \"../panels/lovelace/common/directives/action-handler-directive\";\nimport { haStyleScrollbar } from \"../resources/styles\";\nimport type { HomeAssistant, PanelInfo, Route } from \"../types\";\nimport \"./ha-icon\";\nimport \"./ha-icon-button\";\nimport \"./ha-menu-button\";\nimport \"./ha-sortable\";\nimport \"./ha-svg-icon\";\nimport \"./user/ha-user-badge\";\n\nconst SHOW_AFTER_SPACER = [\"config\", \"developer-tools\"];\n\nconst SUPPORT_SCROLL_IF_NEEDED = \"scrollIntoViewIfNeeded\" in document.body;\n\nconst SORT_VALUE_URL_PATHS = {\n  energy: 1,\n  map: 2,\n  logbook: 3,\n  history: 4,\n  \"developer-tools\": 9,\n  config: 11,\n};\n\nconst PANEL_ICONS = {\n  calendar: mdiCalendar,\n  \"developer-tools\": mdiHammer,\n  energy: mdiLightningBolt,\n  history: mdiChartBox,\n  logbook: mdiFormatListBulletedType,\n  lovelace: mdiViewDashboard,\n  map: mdiTooltipAccount,\n  \"media-browser\": mdiPlayBoxMultiple,\n  todo: mdiClipboardList,\n};\n\nconst panelSorter = (\n  reverseSort: string[],\n  defaultPanel: string,\n  a: PanelInfo,\n  b: PanelInfo,\n  language: string\n) => {\n  const indexA = reverseSort.indexOf(a.url_path);\n  const indexB = reverseSort.indexOf(b.url_path);\n  if (indexA !== indexB) {\n    if (indexA < indexB) {\n      return 1;\n    }\n    return -1;\n  }\n  return defaultPanelSorter(defaultPanel, a, b, language);\n};\n\nconst defaultPanelSorter = (\n  defaultPanel: string,\n  a: PanelInfo,\n  b: PanelInfo,\n  language: string\n) => {\n  // Put all the Lovelace at the top.\n  const aLovelace = a.component_name === \"lovelace\";\n  const bLovelace = b.component_name === \"lovelace\";\n\n  if (a.url_path === defaultPanel) {\n    return -1;\n  }\n  if (b.url_path === defaultPanel) {\n    return 1;\n  }\n\n  if (aLovelace && bLovelace) {\n    return stringCompare(a.title!, b.title!, language);\n  }\n  if (aLovelace && !bLovelace) {\n    return -1;\n  }\n  if (bLovelace) {\n    return 1;\n  }\n\n  const aBuiltIn = a.url_path in SORT_VALUE_URL_PATHS;\n  const bBuiltIn = b.url_path in SORT_VALUE_URL_PATHS;\n\n  if (aBuiltIn && bBuiltIn) {\n    return SORT_VALUE_URL_PATHS[a.url_path] - SORT_VALUE_URL_PATHS[b.url_path];\n  }\n  if (aBuiltIn) {\n    return -1;\n  }\n  if (bBuiltIn) {\n    return 1;\n  }\n  // both not built in, sort by title\n  return stringCompare(a.title!, b.title!, language);\n};\n\nconst computePanels = memoizeOne(\n  (\n    panels: HomeAssistant[\"panels\"],\n    defaultPanel: HomeAssistant[\"defaultPanel\"],\n    panelsOrder: string[],\n    hiddenPanels: string[],\n    locale: HomeAssistant[\"locale\"]\n  ): [PanelInfo[], PanelInfo[]] => {\n    if (!panels) {\n      return [[], []];\n    }\n\n    const beforeSpacer: PanelInfo[] = [];\n    const afterSpacer: PanelInfo[] = [];\n\n    Object.values(panels).forEach((panel) => {\n      if (\n        hiddenPanels.includes(panel.url_path) ||\n        (!panel.title && panel.url_path !== defaultPanel)\n      ) {\n        return;\n      }\n      (SHOW_AFTER_SPACER.includes(panel.url_path)\n        ? afterSpacer\n        : beforeSpacer\n      ).push(panel);\n    });\n\n    const reverseSort = [...panelsOrder].reverse();\n\n    beforeSpacer.sort((a, b) =>\n      panelSorter(reverseSort, defaultPanel, a, b, locale.language)\n    );\n    afterSpacer.sort((a, b) =>\n      panelSorter(reverseSort, defaultPanel, a, b, locale.language)\n    );\n\n    return [beforeSpacer, afterSpacer];\n  }\n);\n\n@customElement(\"ha-sidebar\")\nclass HaSidebar extends SubscribeMixin(LitElement) {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean, reflect: true }) public narrow = false;\n\n  @property({ attribute: false }) public route!: Route;\n\n  @property({ type: Boolean }) public alwaysExpand = false;\n\n  @property({ type: Boolean }) public editMode = false;\n\n  @state() private _notifications?: PersistentNotification[];\n\n  @state() private _updatesCount = 0;\n\n  @state() private _issuesCount = 0;\n\n  private _mouseLeaveTimeout?: number;\n\n  private _tooltipHideTimeout?: number;\n\n  private _recentKeydownActiveUntil = 0;\n\n  private _editStyleLoaded = false;\n\n  @storage({\n    key: \"sidebarPanelOrder\",\n    state: true,\n    subscribe: true,\n  })\n  private _panelOrder: string[] = [];\n\n  @storage({\n    key: \"sidebarHiddenPanels\",\n    state: true,\n    subscribe: true,\n  })\n  private _hiddenPanels: string[] = [];\n\n  public hassSubscribe(): UnsubscribeFunc[] {\n    return this.hass.user?.is_admin\n      ? [\n          subscribeRepairsIssueRegistry(this.hass.connection!, (repairs) => {\n            this._issuesCount = repairs.issues.filter(\n              (issue) => !issue.ignored\n            ).length;\n          }),\n        ]\n      : [];\n  }\n\n  protected render() {\n    if (!this.hass) {\n      return nothing;\n    }\n\n    // prettier-ignore\n    return html`\n      ${this._renderHeader()}\n      ${this._renderAllPanels()}\n      ${this._renderDivider()}\n      ${this._renderNotifications()}\n      ${this._renderUserItem()}\n      <div disabled class=\"bottom-spacer\"></div>\n      <div class=\"tooltip\"></div>\n    `;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (\n      changedProps.has(\"expanded\") ||\n      changedProps.has(\"narrow\") ||\n      changedProps.has(\"alwaysExpand\") ||\n      changedProps.has(\"editMode\") ||\n      changedProps.has(\"_externalConfig\") ||\n      changedProps.has(\"_updatesCount\") ||\n      changedProps.has(\"_issuesCount\") ||\n      changedProps.has(\"_notifications\") ||\n      changedProps.has(\"_hiddenPanels\") ||\n      changedProps.has(\"_panelOrder\")\n    ) {\n      return true;\n    }\n    if (!this.hass || !changedProps.has(\"hass\")) {\n      return false;\n    }\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant;\n    if (!oldHass) {\n      return true;\n    }\n    const hass = this.hass;\n    return (\n      hass.panels !== oldHass.panels ||\n      hass.panelUrl !== oldHass.panelUrl ||\n      hass.user !== oldHass.user ||\n      hass.localize !== oldHass.localize ||\n      hass.locale !== oldHass.locale ||\n      hass.states !== oldHass.states ||\n      hass.defaultPanel !== oldHass.defaultPanel\n    );\n  }\n\n  protected firstUpdated(changedProps: PropertyValues) {\n    super.firstUpdated(changedProps);\n    subscribeNotifications(this.hass.connection, (notifications) => {\n      this._notifications = notifications;\n    });\n  }\n\n  protected updated(changedProps) {\n    super.updated(changedProps);\n    if (changedProps.has(\"alwaysExpand\")) {\n      toggleAttribute(this, \"expanded\", this.alwaysExpand);\n    }\n    if (changedProps.has(\"editMode\") && this.editMode) {\n      this._editModeActivated();\n    }\n    if (!changedProps.has(\"hass\")) {\n      return;\n    }\n\n    this._calculateCounts();\n\n    if (!SUPPORT_SCROLL_IF_NEEDED) {\n      return;\n    }\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (!oldHass || oldHass.panelUrl !== this.hass.panelUrl) {\n      const selectedEl = this.shadowRoot!.querySelector(\".iron-selected\");\n      if (selectedEl) {\n        // @ts-ignore\n        selectedEl.scrollIntoViewIfNeeded();\n      }\n    }\n  }\n\n  private _calculateCounts = throttle(() => {\n    let updateCount = 0;\n\n    for (const entityId of Object.keys(this.hass.states)) {\n      if (\n        entityId.startsWith(\"update.\") &&\n        updateCanInstall(this.hass.states[entityId] as UpdateEntity)\n      ) {\n        updateCount++;\n      }\n    }\n\n    this._updatesCount = updateCount;\n  }, 5000);\n\n  private _renderHeader() {\n    return html`<div\n      class=\"menu\"\n      @action=${this._handleAction}\n      .actionHandler=${actionHandler({\n        hasHold: !this.editMode,\n        disabled: this.editMode,\n      })}\n    >\n      ${!this.narrow\n        ? html`\n            <ha-icon-button\n              .label=${this.hass.localize(\"ui.sidebar.sidebar_toggle\")}\n              .path=${this.hass.dockedSidebar === \"docked\"\n                ? mdiMenuOpen\n                : mdiMenu}\n              @action=${this._toggleSidebar}\n            ></ha-icon-button>\n          `\n        : \"\"}\n      ${this.editMode\n        ? html`<mwc-button outlined @click=${this._closeEditMode}>\n            ${this.hass.localize(\"ui.sidebar.done\")}\n          </mwc-button>`\n        : html`<div class=\"title\">Indexline Technology</div>`}\n    </div>`;\n  }\n\n  private _renderAllPanels() {\n    const [beforeSpacer, afterSpacer] = computePanels(\n      this.hass.panels,\n      this.hass.defaultPanel,\n      this._panelOrder,\n      this._hiddenPanels,\n      this.hass.locale\n    );\n\n    // Show the supervisor as beeing part of configuration\n    const selectedPanel = this.route.path?.startsWith(\"/hassio/\")\n      ? \"config\"\n      : this.hass.panelUrl;\n\n    // prettier-ignore\n    return html`\n      <paper-listbox\n        attr-for-selected=\"data-panel\"\n        class=\"ha-scrollbar\"\n        .selected=${selectedPanel}\n        @focusin=${this._listboxFocusIn}\n        @focusout=${this._listboxFocusOut}\n        @scroll=${this._listboxScroll}\n        @keydown=${this._listboxKeydown}\n      >\n        ${this.editMode\n          ? this._renderPanelsEdit(beforeSpacer)\n          : this._renderPanels(beforeSpacer)}\n        ${this._renderSpacer()}\n        ${this._renderPanels(afterSpacer)}\n        ${this._renderExternalConfiguration()}\n      </paper-listbox>\n    `;\n  }\n\n  private _renderPanels(panels: PanelInfo[]) {\n    return panels.map((panel) =>\n      this._renderPanel(\n        panel.url_path,\n        panel.url_path === this.hass.defaultPanel\n          ? panel.title || this.hass.localize(\"panel.states\")\n          : this.hass.localize(`panel.${panel.title}`) || panel.title,\n        panel.icon,\n        panel.url_path === this.hass.defaultPanel && !panel.icon\n          ? PANEL_ICONS.lovelace\n          : panel.url_path in PANEL_ICONS\n            ? PANEL_ICONS[panel.url_path]\n            : undefined\n      )\n    );\n  }\n\n  private _renderPanel(\n    urlPath: string,\n    title: string | null,\n    icon?: string | null,\n    iconPath?: string | null\n  ) {\n    return urlPath === \"config\"\n      ? this._renderConfiguration(title)\n      : html`\n          <a\n            role=\"option\"\n            href=${`/${urlPath}`}\n            data-panel=${urlPath}\n            tabindex=\"-1\"\n            @mouseenter=${this._itemMouseEnter}\n            @mouseleave=${this._itemMouseLeave}\n          >\n            <paper-icon-item>\n              ${iconPath\n                ? html`<ha-svg-icon\n                    slot=\"item-icon\"\n                    .path=${iconPath}\n                  ></ha-svg-icon>`\n                : html`<ha-icon slot=\"item-icon\" .icon=${icon}></ha-icon>`}\n              <span class=\"item-text\">${title}</span>\n            </paper-icon-item>\n            ${this.editMode\n              ? html`<ha-icon-button\n                  .label=${this.hass.localize(\"ui.sidebar.hide_panel\")}\n                  .path=${mdiClose}\n                  class=\"hide-panel\"\n                  .panel=${urlPath}\n                  @click=${this._hidePanel}\n                ></ha-icon-button>`\n              : \"\"}\n          </a>\n        `;\n  }\n\n  private _panelMoved(ev: CustomEvent) {\n    ev.stopPropagation();\n    const { oldIndex, newIndex } = ev.detail;\n\n    const [beforeSpacer] = computePanels(\n      this.hass.panels,\n      this.hass.defaultPanel,\n      this._panelOrder,\n      this._hiddenPanels,\n      this.hass.locale\n    );\n\n    const panelOrder = beforeSpacer.map((panel) => panel.url_path);\n    const panel = panelOrder.splice(oldIndex, 1)[0];\n    panelOrder.splice(newIndex, 0, panel);\n\n    this._panelOrder = panelOrder;\n  }\n\n  private _renderPanelsEdit(beforeSpacer: PanelInfo[]) {\n    return html`\n      <ha-sortable\n        handle-selector=\"paper-icon-item\"\n        .disabled=${!this.editMode}\n        @item-moved=${this._panelMoved}\n      >\n        <div class=\"reorder-list\">${this._renderPanels(beforeSpacer)}</div>\n      </ha-sortable>\n      ${this._renderSpacer()}${this._renderHiddenPanels()}\n    `;\n  }\n\n  private _renderHiddenPanels() {\n    return html`${this._hiddenPanels.length\n      ? html`${this._hiddenPanels.map((url) => {\n          const panel = this.hass.panels[url];\n          if (!panel) {\n            return \"\";\n          }\n          return html`<paper-icon-item\n            @click=${this._unhidePanel}\n            class=\"hidden-panel\"\n            .panel=${url}\n          >\n            ${panel.url_path === this.hass.defaultPanel && !panel.icon\n              ? html`<ha-svg-icon\n                  slot=\"item-icon\"\n                  .path=${PANEL_ICONS.lovelace}\n                ></ha-svg-icon>`\n              : panel.url_path in PANEL_ICONS\n                ? html`<ha-svg-icon\n                    slot=\"item-icon\"\n                    .path=${PANEL_ICONS[panel.url_path]}\n                  ></ha-svg-icon>`\n                : html`<ha-icon\n                    slot=\"item-icon\"\n                    .icon=${panel.icon}\n                  ></ha-icon>`}\n            <span class=\"item-text\"\n              >${panel.url_path === this.hass.defaultPanel\n                ? this.hass.localize(\"panel.states\")\n                : this.hass.localize(`panel.${panel.title}`) ||\n                  panel.title}</span\n            >\n            <ha-icon-button\n              .label=${this.hass.localize(\"ui.sidebar.show_panel\")}\n              .path=${mdiPlus}\n              class=\"show-panel\"\n            ></ha-icon-button>\n          </paper-icon-item>`;\n        })}\n        ${this._renderSpacer()}`\n      : \"\"}`;\n  }\n\n  private _renderDivider() {\n    return html`<div class=\"divider\"></div>`;\n  }\n\n  private _renderSpacer() {\n    return html`<div class=\"spacer\" disabled></div>`;\n  }\n\n  private _renderConfiguration(title: string | null) {\n    return html`<a\n      class=\"configuration-container\"\n      role=\"option\"\n      href=\"/config\"\n      data-panel=\"config\"\n      tabindex=\"-1\"\n      @mouseenter=${this._itemMouseEnter}\n      @mouseleave=${this._itemMouseLeave}\n    >\n      <paper-icon-item class=\"configuration\" role=\"option\">\n        <ha-svg-icon slot=\"item-icon\" .path=${mdiCog}></ha-svg-icon>\n        ${!this.alwaysExpand &&\n        (this._updatesCount > 0 || this._issuesCount > 0)\n          ? html`\n              <span class=\"configuration-badge\" slot=\"item-icon\">\n                ${this._updatesCount + this._issuesCount}\n              </span>\n            `\n          : \"\"}\n        <span class=\"item-text\">${title}</span>\n        ${this.alwaysExpand && (this._updatesCount > 0 || this._issuesCount > 0)\n          ? html`\n              <span class=\"configuration-badge\"\n                >${this._updatesCount + this._issuesCount}</span\n              >\n            `\n          : \"\"}\n      </paper-icon-item>\n    </a>`;\n  }\n\n  private _renderNotifications() {\n    const notificationCount = this._notifications\n      ? this._notifications.length\n      : 0;\n\n    return html`<div\n      class=\"notifications-container\"\n      @mouseenter=${this._itemMouseEnter}\n      @mouseleave=${this._itemMouseLeave}\n    >\n      <paper-icon-item\n        class=\"notifications\"\n        role=\"option\"\n        @click=${this._handleShowNotificationDrawer}\n      >\n        <ha-svg-icon slot=\"item-icon\" .path=${mdiBell}></ha-svg-icon>\n        ${!this.alwaysExpand && notificationCount > 0\n          ? html`\n              <span class=\"notification-badge\" slot=\"item-icon\">\n                ${notificationCount}\n              </span>\n            `\n          : \"\"}\n        <span class=\"item-text\">\n          ${this.hass.localize(\"ui.notification_drawer.title\")}\n        </span>\n        ${this.alwaysExpand && notificationCount > 0\n          ? html` <span class=\"notification-badge\">${notificationCount}</span> `\n          : \"\"}\n      </paper-icon-item>\n    </div>`;\n  }\n\n  private _renderUserItem() {\n    return html`<a\n      class=${classMap({\n        profile: true,\n        // Mimick behavior that paper-listbox provides\n        \"iron-selected\": this.hass.panelUrl === \"profile\",\n      })}\n      href=\"/profile\"\n      data-panel=\"panel\"\n      tabindex=\"-1\"\n      role=\"option\"\n      aria-label=${this.hass.localize(\"panel.profile\")}\n      @mouseenter=${this._itemMouseEnter}\n      @mouseleave=${this._itemMouseLeave}\n    >\n      <paper-icon-item>\n        <ha-user-badge\n          slot=\"item-icon\"\n          .user=${this.hass.user}\n          .hass=${this.hass}\n        ></ha-user-badge>\n\n        <span class=\"item-text\">\n          ${this.hass.user ? this.hass.user.name : \"\"}\n        </span>\n      </paper-icon-item>\n    </a>`;\n  }\n\n  private _renderExternalConfiguration() {\n    return html`${!this.hass.user?.is_admin &&\n    this.hass.auth.external?.config.hasSettingsScreen\n      ? html`\n          <a\n            role=\"option\"\n            aria-label=${this.hass.localize(\n              \"ui.sidebar.external_app_configuration\"\n            )}\n            href=\"#external-app-configuration\"\n            tabindex=\"-1\"\n            @click=${this._handleExternalAppConfiguration}\n            @mouseenter=${this._itemMouseEnter}\n            @mouseleave=${this._itemMouseLeave}\n          >\n            <paper-icon-item>\n              <ha-svg-icon\n                slot=\"item-icon\"\n                .path=${mdiCellphoneCog}\n              ></ha-svg-icon>\n              <span class=\"item-text\">\n                ${this.hass.localize(\"ui.sidebar.external_app_configuration\")}\n              </span>\n            </paper-icon-item>\n          </a>\n        `\n      : \"\"}`;\n  }\n\n  private _handleExternalAppConfiguration(ev: Event) {\n    ev.preventDefault();\n    this.hass.auth.external!.fireMessage({\n      type: \"config_screen/show\",\n    });\n  }\n\n  private get _tooltip() {\n    return this.shadowRoot!.querySelector(\".tooltip\")! as HTMLDivElement;\n  }\n\n  private _handleAction(ev: CustomEvent<ActionHandlerDetail>) {\n    if (ev.detail.action !== \"hold\") {\n      return;\n    }\n\n    fireEvent(this, \"hass-edit-sidebar\", { editMode: true });\n  }\n\n  private async _editModeActivated() {\n    await this._loadEditStyle();\n  }\n\n  private async _loadEditStyle() {\n    if (this._editStyleLoaded) return;\n\n    const editStylesImport = await import(\"../resources/ha-sidebar-edit-style\");\n\n    const style = document.createElement(\"style\");\n    style.innerHTML = (editStylesImport.sidebarEditStyle as CSSResult).cssText;\n    this.shadowRoot!.appendChild(style);\n\n    await this.updateComplete;\n  }\n\n  private _closeEditMode() {\n    fireEvent(this, \"hass-edit-sidebar\", { editMode: false });\n  }\n\n  private async _hidePanel(ev: Event) {\n    ev.preventDefault();\n    const panel = (ev.currentTarget as any).panel;\n    if (this._hiddenPanels.includes(panel)) {\n      return;\n    }\n    // Make a copy for Memoize\n    this._hiddenPanels = [...this._hiddenPanels, panel];\n    // Remove it from the panel order\n    this._panelOrder = this._panelOrder.filter((order) => order !== panel);\n  }\n\n  private async _unhidePanel(ev: Event) {\n    ev.preventDefault();\n    const panel = (ev.currentTarget as any).panel;\n    this._hiddenPanels = this._hiddenPanels.filter(\n      (hidden) => hidden !== panel\n    );\n  }\n\n  private _itemMouseEnter(ev: MouseEvent) {\n    // On keypresses on the listbox, we're going to ignore mouse enter events\n    // for 100ms so that we ignore it when pressing down arrow scrolls the\n    // sidebar causing the mouse to hover a new icon\n    if (\n      this.alwaysExpand ||\n      new Date().getTime() < this._recentKeydownActiveUntil\n    ) {\n      return;\n    }\n    if (this._mouseLeaveTimeout) {\n      clearTimeout(this._mouseLeaveTimeout);\n      this._mouseLeaveTimeout = undefined;\n    }\n    this._showTooltip(ev.currentTarget as PaperIconItemElement);\n  }\n\n  private _itemMouseLeave() {\n    if (this._mouseLeaveTimeout) {\n      clearTimeout(this._mouseLeaveTimeout);\n    }\n    this._mouseLeaveTimeout = window.setTimeout(() => {\n      this._hideTooltip();\n    }, 500);\n  }\n\n  private _listboxFocusIn(ev) {\n    if (this.alwaysExpand || ev.target.nodeName !== \"A\") {\n      return;\n    }\n    this._showTooltip(ev.target.querySelector(\"paper-icon-item\"));\n  }\n\n  private _listboxFocusOut() {\n    this._hideTooltip();\n  }\n\n  @eventOptions({\n    passive: true,\n  })\n  private _listboxScroll() {\n    // On keypresses on the listbox, we're going to ignore scroll events\n    // for 100ms so that if pressing down arrow scrolls the sidebar, the tooltip\n    // will not be hidden.\n    if (new Date().getTime() < this._recentKeydownActiveUntil) {\n      return;\n    }\n    this._hideTooltip();\n  }\n\n  private _listboxKeydown() {\n    this._recentKeydownActiveUntil = new Date().getTime() + 100;\n  }\n\n  private _showTooltip(item: PaperIconItemElement) {\n    if (this._tooltipHideTimeout) {\n      clearTimeout(this._tooltipHideTimeout);\n      this._tooltipHideTimeout = undefined;\n    }\n    const tooltip = this._tooltip;\n    const listbox = this.shadowRoot!.querySelector(\"paper-listbox\")!;\n    let top = item.offsetTop + 11;\n    if (listbox.contains(item)) {\n      top -= listbox.scrollTop;\n    }\n    tooltip.innerHTML = item.querySelector(\".item-text\")!.innerHTML;\n    tooltip.style.display = \"block\";\n    tooltip.style.position = \"fixed\";\n    tooltip.style.top = `${top}px`;\n    tooltip.style.left = `${item.offsetLeft + item.clientWidth + 4}px`;\n  }\n\n  private _hideTooltip() {\n    // Delay it a little in case other events are pending processing.\n    if (!this._tooltipHideTimeout) {\n      this._tooltipHideTimeout = window.setTimeout(() => {\n        this._tooltipHideTimeout = undefined;\n        this._tooltip.style.display = \"none\";\n      }, 10);\n    }\n  }\n\n  private _handleShowNotificationDrawer() {\n    fireEvent(this, \"hass-show-notifications\");\n  }\n\n  private _toggleSidebar(ev: CustomEvent) {\n    if (ev.detail.action !== \"tap\") {\n      return;\n    }\n    fireEvent(this, \"hass-toggle-menu\");\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyleScrollbar,\n      css`\n        :host {\n          overflow: visible;\n          height: 100%;\n          display: block;\n          overflow: hidden;\n          -ms-user-select: none;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          background-color: var(--sidebar-background-color);\n          width: 100%;\n          box-sizing: border-box;\n        }\n        .menu {\n          height: var(--header-height);\n          box-sizing: border-box;\n          display: flex;\n          padding: 0 4px;\n          border-bottom: 1px solid transparent;\n          white-space: nowrap;\n          font-weight: 400;\n          color: var(--sidebar-menu-button-text-color, --primary-text-color);\n          border-bottom: 1px solid var(--divider-color);\n          background-color: var(\n            --sidebar-menu-button-background-color,\n            --primary-background-color\n          );\n          font-size: 20px;\n          align-items: center;\n          padding-left: calc(4px + env(safe-area-inset-left));\n          padding-inline-start: calc(4px + env(safe-area-inset-left));\n          padding-inline-end: initial;\n        }\n        :host([expanded]) .menu {\n          width: calc(256px + env(safe-area-inset-left));\n        }\n        .menu ha-icon-button {\n          color: var(--sidebar-icon-color);\n        }\n        .title {\n          margin-left: 19px;\n          margin-inline-start: 19px;\n          margin-inline-end: initial;\n          width: 100%;\n          display: none;\n        }\n        :host([narrow]) .title {\n          margin: 0;\n          padding: 0 16px;\n        }\n        :host([expanded]) .title {\n          display: initial;\n        }\n        :host([expanded]) .menu mwc-button {\n          margin: 0 8px;\n        }\n        .menu mwc-button {\n          width: 100%;\n        }\n        .reorder-list,\n        .hidden-panel {\n          display: none;\n        }\n\n        paper-listbox {\n          padding: 4px 0;\n          display: flex;\n          flex-direction: column;\n          box-sizing: border-box;\n          height: calc(100% - var(--header-height) - 132px);\n          height: calc(\n            100% - var(--header-height) - 132px - env(safe-area-inset-bottom)\n          );\n          overflow-x: hidden;\n          background: none;\n          margin-left: env(safe-area-inset-left);\n          margin-inline-start: env(safe-area-inset-left);\n          margin-inline-end: initial;\n        }\n\n        a {\n          text-decoration: none;\n          color: var(--sidebar-text-color);\n          font-weight: 500;\n          font-size: 14px;\n          position: relative;\n          display: block;\n          outline: 0;\n        }\n\n        paper-icon-item {\n          box-sizing: border-box;\n          margin: 4px;\n          padding-left: 12px;\n          padding-inline-start: 12px;\n          padding-inline-end: initial;\n          border-radius: 4px;\n          --paper-item-min-height: 40px;\n          width: 48px;\n        }\n        :host([expanded]) paper-icon-item {\n          width: 248px;\n        }\n\n        ha-icon[slot=\"item-icon\"],\n        ha-svg-icon[slot=\"item-icon\"] {\n          color: var(--sidebar-icon-color);\n        }\n\n        .iron-selected paper-icon-item::before,\n        a:not(.iron-selected):focus::before {\n          border-radius: 4px;\n          position: absolute;\n          top: 0;\n          right: 2px;\n          bottom: 0;\n          left: 2px;\n          pointer-events: none;\n          content: \"\";\n          transition: opacity 15ms linear;\n          will-change: opacity;\n        }\n        .iron-selected paper-icon-item::before {\n          background-color: var(--sidebar-selected-icon-color);\n          opacity: 0.12;\n        }\n        a:not(.iron-selected):focus::before {\n          background-color: currentColor;\n          opacity: var(--dark-divider-opacity);\n          margin: 4px 8px;\n        }\n        .iron-selected paper-icon-item:focus::before,\n        .iron-selected:focus paper-icon-item::before {\n          opacity: 0.2;\n        }\n\n        .iron-selected paper-icon-item[pressed]:before {\n          opacity: 0.37;\n        }\n\n        paper-icon-item span {\n          color: var(--sidebar-text-color);\n          font-weight: 500;\n          font-size: 14px;\n        }\n\n        a.iron-selected paper-icon-item ha-icon,\n        a.iron-selected paper-icon-item ha-svg-icon {\n          color: var(--sidebar-selected-icon-color);\n        }\n\n        a.iron-selected .item-text {\n          color: var(--sidebar-selected-text-color);\n        }\n\n        paper-icon-item .item-text {\n          display: none;\n          max-width: calc(100% - 56px);\n        }\n        :host([expanded]) paper-icon-item .item-text {\n          display: block;\n        }\n\n        .divider {\n          bottom: 112px;\n          padding: 10px 0;\n        }\n        .divider::before {\n          content: \" \";\n          display: block;\n          height: 1px;\n          background-color: var(--divider-color);\n        }\n        .notifications-container,\n        .configuration-container {\n          display: flex;\n          margin-left: env(safe-area-inset-left);\n          margin-inline-start: env(safe-area-inset-left);\n          margin-inline-end: initial;\n        }\n        .notifications {\n          cursor: pointer;\n        }\n        .notifications .item-text,\n        .configuration .item-text {\n          flex: 1;\n        }\n        .profile {\n          margin-left: env(safe-area-inset-left);\n          margin-inline-start: env(safe-area-inset-left);\n          margin-inline-end: initial;\n        }\n        .profile paper-icon-item {\n          padding-left: 4px;\n          margin-inline-start: 4px;\n          margin-inline-end: auto;\n        }\n        .profile .item-text {\n          margin-left: 8px;\n          margin-inline-start: 8px;\n          margin-inline-end: initial;\n        }\n\n        .notification-badge,\n        .configuration-badge {\n          position: absolute;\n          left: calc(var(--app-drawer-width, 248px) - 42px);\n          inset-inline-start: calc(var(--app-drawer-width, 248px) - 42px);\n          inset-inline-end: initial;\n          min-width: 20px;\n          box-sizing: border-box;\n          border-radius: 50%;\n          font-weight: 400;\n          background-color: var(--accent-color);\n          line-height: 20px;\n          text-align: center;\n          padding: 0px 2px;\n          color: var(--text-accent-color, var(--text-primary-color));\n        }\n        ha-svg-icon + .notification-badge,\n        ha-svg-icon + .configuration-badge {\n          position: absolute;\n          bottom: 14px;\n          left: 26px;\n          font-size: 0.65em;\n        }\n\n        .spacer {\n          flex: 1;\n          pointer-events: none;\n        }\n\n        .subheader {\n          color: var(--sidebar-text-color);\n          font-weight: 500;\n          font-size: 14px;\n          padding: 16px;\n          white-space: nowrap;\n        }\n\n        .dev-tools {\n          display: flex;\n          flex-direction: row;\n          justify-content: space-between;\n          padding: 0 8px;\n          width: 256px;\n          box-sizing: border-box;\n        }\n\n        .dev-tools a {\n          color: var(--sidebar-icon-color);\n        }\n\n        .tooltip {\n          display: none;\n          position: absolute;\n          opacity: 0.9;\n          border-radius: 2px;\n          white-space: nowrap;\n          color: var(--sidebar-background-color);\n          background-color: var(--sidebar-text-color);\n          padding: 4px;\n          font-weight: 500;\n        }\n\n        .menu ha-icon-button {\n          -webkit-transform: scaleX(var(--scale-direction));\n          transform: scaleX(var(--scale-direction));\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-sidebar\": HaSidebar;\n  }\n}\n"],"mappings":";;;AAAA,OAAO,iCAAiC;AAAC,MAAAA,OAAA;AAAA,MAAAC,WAAA;AAAA,MAAAC,eAAA;AAAA,MAAAC,WAAA;AAAA,MAAAC,gBAAA;AAAA,MAAAC,QAAA;AAAA,MAAAC,MAAA;AAAA,MAAAC,yBAAA;AAAA,MAAAC,SAAA;AAAA,MAAAC,gBAAA;AAAA,MAAAC,OAAA;AAAA,MAAAC,WAAA;AAAA,MAAAC,kBAAA;AAAA,MAAAC,OAAA;AAAA,MAAAC,iBAAA;AAAA,MAAAC,gBAAA;AAmBzC,OAAO,qCAAqC;AAE5C,OAAO,gCAAgC;AACvC,OAAO,sCAAsC;AAE7C,SAGEC,UAAU,EAEVC,GAAG,EACHC,IAAI,EACJC,OAAO,QACF,KAAK;AACZ,SAASC,aAAa,EAAEC,YAAY,EAAEC,QAAQ,EAAEC,KAAK,QAAQ,gBAAgB;AAC7E,SAASC,QAAQ,QAAQ,0BAA0B;AACnD,OAAOC,UAAU,MAAM,aAAa;AACpC,SAASC,OAAO,QAAQ,8BAA8B;AACtD,SAASC,SAAS,QAAQ,0BAA0B;AACpD,SAASC,eAAe,QAAQ,gCAAgC;AAChE,SAASC,aAAa,QAAQ,0BAA0B;AACxD,SAASC,QAAQ,QAAQ,yBAAyB;AAElD,SAEEC,sBAAsB,QACjB,iCAAiC;AACxC,SAASC,6BAA6B,QAAQ,iBAAiB;AAC/D,SAAuBC,gBAAgB,QAAQ,gBAAgB;AAC/D,SAASC,cAAc,QAAQ,2BAA2B;AAC1D,SAASC,aAAa,QAAQ,+DAA+D;AAC7F,SAASC,gBAAgB,QAAQ,qBAAqB;AAEtD,OAAO,WAAW;AAClB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,eAAe;AACtB,OAAO,sBAAsB;AAE7B,MAAMC,iBAAiB,GAAG,CAAC,QAAQ,EAAE,iBAAiB,CAAC;AAEvD,MAAMC,wBAAwB,IAAG,wBAAwB,IAAIC,QAAQ,CAACC,IAAI;AAE1E,MAAMC,oBAAoB,GAAG;EAC3BC,MAAM,EAAE,CAAC;EACTC,GAAG,EAAE,CAAC;EACNC,OAAO,EAAE,CAAC;EACVC,OAAO,EAAE,CAAC;EACV,iBAAiB,EAAE,CAAC;EACpBC,MAAM,EAAE;AACV,CAAC;AAED,MAAMC,WAAW,GAAG;EAClBC,QAAQ,EAAE/C,WAAW;EACrB,iBAAiB,EAAEO,SAAS;EAC5BkC,MAAM,EAAEjC,gBAAgB;EACxBoC,OAAO,EAAE1C,WAAW;EACpByC,OAAO,EAAErC,yBAAyB;EAClC0C,QAAQ,EAAElC,gBAAgB;EAC1B4B,GAAG,EAAE7B,iBAAiB;EACtB,eAAe,EAAEF,kBAAkB;EACnCsC,IAAI,EAAE9C;AACR,CAAC;AAED,MAAM+C,WAAW,GAAGA,CAClBC,WAAqB,EACrBC,YAAoB,EACpBC,CAAY,EACZC,CAAY,EACZC,QAAgB,KACb;EACH,MAAMC,MAAM,GAAGL,WAAW,CAACM,OAAO,CAACJ,CAAC,CAACK,QAAQ,CAAC;EAC9C,MAAMC,MAAM,GAAGR,WAAW,CAACM,OAAO,CAACH,CAAC,CAACI,QAAQ,CAAC;EAC9C,IAAIF,MAAM,KAAKG,MAAM,EAAE;IACrB,IAAIH,MAAM,GAAGG,MAAM,EAAE;MACnB,OAAO,CAAC;IACV;IACA,OAAO,CAAC,CAAC;EACX;EACA,OAAOC,kBAAkB,CAACR,YAAY,EAAEC,CAAC,EAAEC,CAAC,EAAEC,QAAQ,CAAC;AACzD,CAAC;AAED,MAAMK,kBAAkB,GAAGA,CACzBR,YAAoB,EACpBC,CAAY,EACZC,CAAY,EACZC,QAAgB,KACb;EACH;EACA,MAAMM,SAAS,GAAGR,CAAC,CAACS,cAAc,KAAK,UAAU;EACjD,MAAMC,SAAS,GAAGT,CAAC,CAACQ,cAAc,KAAK,UAAU;EAEjD,IAAIT,CAAC,CAACK,QAAQ,KAAKN,YAAY,EAAE;IAC/B,OAAO,CAAC,CAAC;EACX;EACA,IAAIE,CAAC,CAACI,QAAQ,KAAKN,YAAY,EAAE;IAC/B,OAAO,CAAC;EACV;EAEA,IAAIS,SAAS,IAAIE,SAAS,EAAE;IAC1B,OAAOnC,aAAa,CAACyB,CAAC,CAACW,KAAK,EAAGV,CAAC,CAACU,KAAK,EAAGT,QAAQ,CAAC;EACpD;EACA,IAAIM,SAAS,IAAI,CAACE,SAAS,EAAE;IAC3B,OAAO,CAAC,CAAC;EACX;EACA,IAAIA,SAAS,EAAE;IACb,OAAO,CAAC;EACV;EAEA,MAAME,QAAQ,IAAGZ,CAAC,CAACK,QAAQ,IAAIlB,oBAAoB;EACnD,MAAM0B,QAAQ,IAAGZ,CAAC,CAACI,QAAQ,IAAIlB,oBAAoB;EAEnD,IAAIyB,QAAQ,IAAIC,QAAQ,EAAE;IACxB,OAAO1B,oBAAoB,CAACa,CAAC,CAACK,QAAQ,CAAC,GAAGlB,oBAAoB,CAACc,CAAC,CAACI,QAAQ,CAAC;EAC5E;EACA,IAAIO,QAAQ,EAAE;IACZ,OAAO,CAAC,CAAC;EACX;EACA,IAAIC,QAAQ,EAAE;IACZ,OAAO,CAAC;EACV;EACA;EACA,OAAOtC,aAAa,CAACyB,CAAC,CAACW,KAAK,EAAGV,CAAC,CAACU,KAAK,EAAGT,QAAQ,CAAC;AACpD,CAAC;AAED,MAAMY,aAAa,GAAG3C,UAAU,CAC9B,CACE4C,MAA+B,EAC/BhB,YAA2C,EAC3CiB,WAAqB,EACrBC,YAAsB,EACtBC,MAA+B,KACA;EAC/B,IAAI,CAACH,MAAM,EAAE;IACX,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC;EACjB;EAEA,MAAMI,YAAyB,GAAG,EAAE;EACpC,MAAMC,WAAwB,GAAG,EAAE;EAEnCC,MAAM,CAACC,MAAM,CAACP,MAAM,CAAC,CAACQ,OAAO,CAAEC,KAAK,IAAK;IACvC,IACEP,YAAY,CAACQ,QAAQ,CAACD,KAAK,CAACnB,QAAQ,CAAC,IACpC,CAACmB,KAAK,CAACb,KAAK,IAAIa,KAAK,CAACnB,QAAQ,KAAKN,YAAa,EACjD;MACA;IACF;IACA,CAAChB,iBAAiB,CAAC0C,QAAQ,CAACD,KAAK,CAACnB,QAAQ,CAAC,GACvCe,WAAW,GACXD,YAAY,EACdO,IAAI,CAACF,KAAK,CAAC;EACf,CAAC,CAAC;EAEF,MAAM1B,WAAW,GAAG,CAAC,GAAGkB,WAAW,CAAC,CAACW,OAAO,CAAC,CAAC;EAE9CR,YAAY,CAACS,IAAI,CAAC,CAAC5B,CAAC,EAAEC,CAAC,KACrBJ,WAAW,CAACC,WAAW,EAAEC,YAAY,EAAEC,CAAC,EAAEC,CAAC,EAAEiB,MAAM,CAAChB,QAAQ,CAC9D,CAAC;EACDkB,WAAW,CAACQ,IAAI,CAAC,CAAC5B,CAAC,EAAEC,CAAC,KACpBJ,WAAW,CAACC,WAAW,EAAEC,YAAY,EAAEC,CAAC,EAAEC,CAAC,EAAEiB,MAAM,CAAChB,QAAQ,CAC9D,CAAC;EAED,OAAO,CAACiB,YAAY,EAAEC,WAAW,CAAC;AACpC,CACF,CAAC;AAAC,IAGIS,SAAS,GAAAC,SAAA,EADdhE,aAAa,CAAC,YAAY,CAAC,aAAAiE,WAAA,EAAAC,eAAA;EAA5B,MACMH,SAAS,SAAAG,eAAA,CAAoC;IAAAC,YAAA,GAAAC,IAAA;MAAA,SAAAA,IAAA;MAAAH,WAAA;IAAA;EAu4BnD;EAAC;IAAAI,CAAA,EAv4BKN,SAAS;IAAAO,CAAA;MAAAC,IAAA;MAAAC,UAAA,GACZtE,QAAQ,CAAC;QAAEuE,SAAS,EAAE;MAAM,CAAC,CAAC;MAAAC,GAAA;MAAAC,KAAA;IAAA;MAAAJ,IAAA;MAAAC,UAAA,GAE9BtE,QAAQ,CAAC;QAAE0E,IAAI,EAAEC,OAAO;QAAEC,OAAO,EAAE;MAAK,CAAC,CAAC;MAAAJ,GAAA;MAAAC,MAAA;QAAA,OAAiB,KAAK;MAAA;IAAA;MAAAJ,IAAA;MAAAC,UAAA,GAEhEtE,QAAQ,CAAC;QAAEuE,SAAS,EAAE;MAAM,CAAC,CAAC;MAAAC,GAAA;MAAAC,KAAA;IAAA;MAAAJ,IAAA;MAAAC,UAAA,GAE9BtE,QAAQ,CAAC;QAAE0E,IAAI,EAAEC;MAAQ,CAAC,CAAC;MAAAH,GAAA;MAAAC,MAAA;QAAA,OAAuB,KAAK;MAAA;IAAA;MAAAJ,IAAA;MAAAC,UAAA,GAEvDtE,QAAQ,CAAC;QAAE0E,IAAI,EAAEC;MAAQ,CAAC,CAAC;MAAAH,GAAA;MAAAC,MAAA;QAAA,OAAmB,KAAK;MAAA;IAAA;MAAAJ,IAAA;MAAAC,UAAA,GAEnDrE,KAAK,CAAC,CAAC;MAAAuE,GAAA;MAAAC,KAAA;IAAA;MAAAJ,IAAA;MAAAC,UAAA,GAEPrE,KAAK,CAAC,CAAC;MAAAuE,GAAA;MAAAC,MAAA;QAAA,OAAyB,CAAC;MAAA;IAAA;MAAAJ,IAAA;MAAAC,UAAA,GAEjCrE,KAAK,CAAC,CAAC;MAAAuE,GAAA;MAAAC,MAAA;QAAA,OAAwB,CAAC;MAAA;IAAA;MAAAJ,IAAA;MAAAG,GAAA;MAAAC,KAAA;IAAA;MAAAJ,IAAA;MAAAG,GAAA;MAAAC,KAAA;IAAA;MAAAJ,IAAA;MAAAG,GAAA;MAAAC,MAAA;QAAA,OAMG,CAAC;MAAA;IAAA;MAAAJ,IAAA;MAAAG,GAAA;MAAAC,MAAA;QAAA,OAEV,KAAK;MAAA;IAAA;MAAAJ,IAAA;MAAAC,UAAA,GAE/BlE,OAAO,CAAC;QACPoE,GAAG,EAAE,mBAAmB;QACxBvE,KAAK,EAAE,IAAI;QACX4E,SAAS,EAAE;MACb,CAAC,CAAC;MAAAL,GAAA;MAAAC,MAAA;QAAA,OAC8B,EAAE;MAAA;IAAA;MAAAJ,IAAA;MAAAC,UAAA,GAEjClE,OAAO,CAAC;QACPoE,GAAG,EAAE,qBAAqB;QAC1BvE,KAAK,EAAE,IAAI;QACX4E,SAAS,EAAE;MACb,CAAC,CAAC;MAAAL,GAAA;MAAAC,MAAA;QAAA,OACgC,EAAE;MAAA;IAAA;MAAAJ,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAEpC,SAAAK,cAAA,EAA0C;QAAA,IAAAC,eAAA;QACxC,OAAO,CAAAA,eAAA,OAAI,CAACC,IAAI,CAACC,IAAI,cAAAF,eAAA,eAAdA,eAAA,CAAgBG,QAAQ,GAC3B,CACExE,6BAA6B,CAAC,IAAI,CAACsE,IAAI,CAACG,UAAU,EAAIC,OAAO,IAAK;UAChE,IAAI,CAACC,YAAY,GAAGD,OAAO,CAACE,MAAM,CAACC,MAAM,CACtCC,KAAK,IAAK,CAACA,KAAK,CAACC,OACpB,CAAC,CAACC,MAAM;QACV,CAAC,CAAC,CACH,GACD,EAAE;MACR;IAAC;MAAArB,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAkB,OAAA,EAAmB;QACjB,IAAI,CAAC,IAAI,CAACX,IAAI,EAAE;UACd,OAAOnF,OAAO;QAChB;;QAEA;QACA,OAAOD,IAAK;AAChB,QAAQ,IAAI,CAACgG,aAAa,CAAC,CAAE;AAC7B,QAAQ,IAAI,CAACC,gBAAgB,CAAC,CAAE;AAChC,QAAQ,IAAI,CAACC,cAAc,CAAC,CAAE;AAC9B,QAAQ,IAAI,CAACC,oBAAoB,CAAC,CAAE;AACpC,QAAQ,IAAI,CAACC,eAAe,CAAC,CAAE;AAC/B;AACA;AACA,KAAK;MACH;IAAC;MAAA3B,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAwB,aAAuBC,YAA4B,EAAW;QAC5D,IACEA,YAAY,CAACC,GAAG,CAAC,UAAU,CAAC,IAC5BD,YAAY,CAACC,GAAG,CAAC,QAAQ,CAAC,IAC1BD,YAAY,CAACC,GAAG,CAAC,cAAc,CAAC,IAChCD,YAAY,CAACC,GAAG,CAAC,UAAU,CAAC,IAC5BD,YAAY,CAACC,GAAG,CAAC,iBAAiB,CAAC,IACnCD,YAAY,CAACC,GAAG,CAAC,eAAe,CAAC,IACjCD,YAAY,CAACC,GAAG,CAAC,cAAc,CAAC,IAChCD,YAAY,CAACC,GAAG,CAAC,gBAAgB,CAAC,IAClCD,YAAY,CAACC,GAAG,CAAC,eAAe,CAAC,IACjCD,YAAY,CAACC,GAAG,CAAC,aAAa,CAAC,EAC/B;UACA,OAAO,IAAI;QACb;QACA,IAAI,CAAC,IAAI,CAACnB,IAAI,IAAI,CAACkB,YAAY,CAACC,GAAG,CAAC,MAAM,CAAC,EAAE;UAC3C,OAAO,KAAK;QACd;QACA,MAAMC,OAAO,GAAGF,YAAY,CAACG,GAAG,CAAC,MAAM,CAAkB;QACzD,IAAI,CAACD,OAAO,EAAE;UACZ,OAAO,IAAI;QACb;QACA,MAAMpB,IAAI,GAAG,IAAI,CAACA,IAAI;QACtB,OACEA,IAAI,CAACjC,MAAM,KAAKqD,OAAO,CAACrD,MAAM,IAC9BiC,IAAI,CAACsB,QAAQ,KAAKF,OAAO,CAACE,QAAQ,IAClCtB,IAAI,CAACC,IAAI,KAAKmB,OAAO,CAACnB,IAAI,IAC1BD,IAAI,CAACuB,QAAQ,KAAKH,OAAO,CAACG,QAAQ,IAClCvB,IAAI,CAAC9B,MAAM,KAAKkD,OAAO,CAAClD,MAAM,IAC9B8B,IAAI,CAACwB,MAAM,KAAKJ,OAAO,CAACI,MAAM,IAC9BxB,IAAI,CAACjD,YAAY,KAAKqE,OAAO,CAACrE,YAAY;MAE9C;IAAC;MAAAsC,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAgC,aAAuBP,YAA4B,EAAE;QACnDQ,IAAA,CAAAC,eAAA,CAvGE9C,SAAS,CAAA+C,SAAA,yBAAAC,IAAA,OAuGQX,YAAY;QAC/BzF,sBAAsB,CAAC,IAAI,CAACuE,IAAI,CAACG,UAAU,EAAG2B,aAAa,IAAK;UAC9D,IAAI,CAACC,cAAc,GAAGD,aAAa;QACrC,CAAC,CAAC;MACJ;IAAC;MAAAzC,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAuC,QAAkBd,YAAY,EAAE;QAC9BQ,IAAA,CAAAC,eAAA,CA9GE9C,SAAS,CAAA+C,SAAA,oBAAAC,IAAA,OA8GGX,YAAY;QAC1B,IAAIA,YAAY,CAACC,GAAG,CAAC,cAAc,CAAC,EAAE;UACpC7F,eAAe,CAAC,IAAI,EAAE,UAAU,EAAE,IAAI,CAAC2G,YAAY,CAAC;QACtD;QACA,IAAIf,YAAY,CAACC,GAAG,CAAC,UAAU,CAAC,IAAI,IAAI,CAACe,QAAQ,EAAE;UACjD,IAAI,CAACC,kBAAkB,CAAC,CAAC;QAC3B;QACA,IAAI,CAACjB,YAAY,CAACC,GAAG,CAAC,MAAM,CAAC,EAAE;UAC7B;QACF;QAEA,IAAI,CAACiB,gBAAgB,CAAC,CAAC;QAEvB,IAAI,CAACpG,wBAAwB,EAAE;UAC7B;QACF;QACA,MAAMoF,OAAO,GAAGF,YAAY,CAACG,GAAG,CAAC,MAAM,CAA8B;QACrE,IAAI,CAACD,OAAO,IAAIA,OAAO,CAACE,QAAQ,KAAK,IAAI,CAACtB,IAAI,CAACsB,QAAQ,EAAE;UACvD,MAAMe,UAAU,GAAG,IAAI,CAACC,UAAU,CAAEC,aAAa,CAAC,gBAAgB,CAAC;UACnE,IAAIF,UAAU,EAAE;YACd;YACAA,UAAU,CAACG,sBAAsB,CAAC,CAAC;UACrC;QACF;MACF;IAAC;MAAAnD,IAAA;MAAAG,GAAA;MAAAC,MAAA;QAAA,OAE0BjE,QAAQ,CAAC,MAAM;UACxC,IAAIiH,WAAW,GAAG,CAAC;UAEnB,KAAK,MAAMC,QAAQ,IAAIrE,MAAM,CAACsE,IAAI,CAAC,IAAI,CAAC3C,IAAI,CAACwB,MAAM,CAAC,EAAE;YACpD,IACEkB,QAAQ,CAACE,UAAU,CAAC,SAAS,CAAC,IAC9BjH,gBAAgB,CAAC,IAAI,CAACqE,IAAI,CAACwB,MAAM,CAACkB,QAAQ,CAAiB,CAAC,EAC5D;cACAD,WAAW,EAAE;YACf;UACF;UAEA,IAAI,CAACI,aAAa,GAAGJ,WAAW;QAClC,CAAC,EAAE,IAAI,CAAC;MAAA;IAAA;MAAApD,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAER,SAAAmB,cAAA,EAAwB;QACtB,OAAOhG,IAAK;AAChB;AACA,gBAAgB,IAAI,CAACkI,aAAc;AACnC,uBAAuBjH,aAAa,CAAC;UAC7BkH,OAAO,EAAE,CAAC,IAAI,CAACb,QAAQ;UACvBc,QAAQ,EAAE,IAAI,CAACd;QACjB,CAAC,CAAE;AACT;AACA,QAAQ,CAAC,IAAI,CAACe,MAAM,GACVrI,IAAK;AACf;AACA,uBAAuB,IAAI,CAACoF,IAAI,CAACuB,QAAQ,CAAC,2BAA2B,CAAE;AACvE,sBAAsB,IAAI,CAACvB,IAAI,CAACkD,aAAa,KAAK,QAAQ,GACxC7I,WAAW,GACXD,OAAQ;AAC1B,wBAAwB,IAAI,CAAC+I,cAAe;AAC5C;AACA,WAAW,GACD,EAAG;AACb,QAAQ,IAAI,CAACjB,QAAQ,GACXtH,IAAK,+BAA8B,IAAI,CAACwI,cAAe;AACjE,cAAc,IAAI,CAACpD,IAAI,CAACuB,QAAQ,CAAC,iBAAiB,CAAE;AACpD,wBAAwB,GACd3G,IAAK,+CAA+C;AAC9D,WAAW;MACT;IAAC;MAAAyE,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAoB,iBAAA,EAA2B;QAAA,IAAAwC,gBAAA;QACzB,MAAM,CAAClF,YAAY,EAAEC,WAAW,CAAC,GAAGN,aAAa,CAC/C,IAAI,CAACkC,IAAI,CAACjC,MAAM,EAChB,IAAI,CAACiC,IAAI,CAACjD,YAAY,EACtB,IAAI,CAACuG,WAAW,EAChB,IAAI,CAACC,aAAa,EAClB,IAAI,CAACvD,IAAI,CAAC9B,MACZ,CAAC;;QAED;QACA,MAAMsF,aAAa,GAAG,CAAAH,gBAAA,OAAI,CAACI,KAAK,CAACC,IAAI,cAAAL,gBAAA,eAAfA,gBAAA,CAAiBT,UAAU,CAAC,UAAU,CAAC,GACzD,QAAQ,GACR,IAAI,CAAC5C,IAAI,CAACsB,QAAQ;;QAEtB;QACA,OAAO1G,IAAK;AAChB;AACA;AACA;AACA,oBAAoB4I,aAAc;AAClC,mBAAmB,IAAI,CAACG,eAAgB;AACxC,oBAAoB,IAAI,CAACC,gBAAiB;AAC1C,kBAAkB,IAAI,CAACC,cAAe;AACtC,mBAAmB,IAAI,CAACC,eAAgB;AACxC;AACA,UAAU,IAAI,CAAC5B,QAAQ,GACX,IAAI,CAAC6B,iBAAiB,CAAC5F,YAAY,CAAC,GACpC,IAAI,CAAC6F,aAAa,CAAC7F,YAAY,CAAE;AAC7C,UAAU,IAAI,CAAC8F,aAAa,CAAC,CAAE;AAC/B,UAAU,IAAI,CAACD,aAAa,CAAC5F,WAAW,CAAE;AAC1C,UAAU,IAAI,CAAC8F,4BAA4B,CAAC,CAAE;AAC9C;AACA,KAAK;MACH;IAAC;MAAA7E,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAuE,cAAsBjG,MAAmB,EAAE;QACzC,OAAOA,MAAM,CAAC1B,GAAG,CAAEmC,KAAK,IACtB,IAAI,CAAC2F,YAAY,CACf3F,KAAK,CAACnB,QAAQ,EACdmB,KAAK,CAACnB,QAAQ,KAAK,IAAI,CAAC2C,IAAI,CAACjD,YAAY,GACrCyB,KAAK,CAACb,KAAK,IAAI,IAAI,CAACqC,IAAI,CAACuB,QAAQ,CAAC,cAAc,CAAC,GACjD,IAAI,CAACvB,IAAI,CAACuB,QAAQ,CAAE,SAAQ/C,KAAK,CAACb,KAAM,EAAC,CAAC,IAAIa,KAAK,CAACb,KAAK,EAC7Da,KAAK,CAAC4F,IAAI,EACV5F,KAAK,CAACnB,QAAQ,KAAK,IAAI,CAAC2C,IAAI,CAACjD,YAAY,IAAI,CAACyB,KAAK,CAAC4F,IAAI,GACpD3H,WAAW,CAACE,QAAQ,GACpB6B,KAAK,CAACnB,QAAQ,IAAIZ,WAAW,GAC3BA,WAAW,CAAC+B,KAAK,CAACnB,QAAQ,CAAC,GAC3BgH,SACR,CACF,CAAC;MACH;IAAC;MAAAhF,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAA0E,aACEG,OAAe,EACf3G,KAAoB,EACpByG,IAAoB,EACpBG,QAAwB,EACxB;QACA,OAAOD,OAAO,KAAK,QAAQ,GACvB,IAAI,CAACE,oBAAoB,CAAC7G,KAAK,CAAC,GAChC/C,IAAK;AACb;AACA;AACA,mBAAoB,IAAG0J,OAAQ,EAAE;AACjC,yBAAyBA,OAAQ;AACjC;AACA,0BAA0B,IAAI,CAACG,eAAgB;AAC/C,0BAA0B,IAAI,CAACC,eAAgB;AAC/C;AACA;AACA,gBAAgBH,QAAQ,GACN3J,IAAK;AACvB;AACA,4BAA4B2J,QAAS;AACrC,kCAAkC,GAChB3J,IAAK,mCAAkCwJ,IAAK,aAAa;AAC3E,wCAAwCzG,KAAM;AAC9C;AACA,cAAc,IAAI,CAACuE,QAAQ,GACXtH,IAAK;AACrB,2BAA2B,IAAI,CAACoF,IAAI,CAACuB,QAAQ,CAAC,uBAAuB,CAAE;AACvE,0BAA0BxH,QAAS;AACnC;AACA,2BAA2BuK,OAAQ;AACnC,2BAA2B,IAAI,CAACK,UAAW;AAC3C,mCAAmC,GACnB,EAAG;AACnB;AACA,SAAS;MACP;IAAC;MAAAtF,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAmF,YAAoBC,EAAe,EAAE;QACnCA,EAAE,CAACC,eAAe,CAAC,CAAC;QACpB,MAAM;UAAEC,QAAQ;UAAEC;QAAS,CAAC,GAAGH,EAAE,CAACI,MAAM;QAExC,MAAM,CAAC9G,YAAY,CAAC,GAAGL,aAAa,CAClC,IAAI,CAACkC,IAAI,CAACjC,MAAM,EAChB,IAAI,CAACiC,IAAI,CAACjD,YAAY,EACtB,IAAI,CAACuG,WAAW,EAChB,IAAI,CAACC,aAAa,EAClB,IAAI,CAACvD,IAAI,CAAC9B,MACZ,CAAC;QAED,MAAMgH,UAAU,GAAG/G,YAAY,CAAC9B,GAAG,CAAEmC,KAAK,IAAKA,KAAK,CAACnB,QAAQ,CAAC;QAC9D,MAAMmB,KAAK,GAAG0G,UAAU,CAACC,MAAM,CAACJ,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/CG,UAAU,CAACC,MAAM,CAACH,QAAQ,EAAE,CAAC,EAAExG,KAAK,CAAC;QAErC,IAAI,CAAC8E,WAAW,GAAG4B,UAAU;MAC/B;IAAC;MAAA7F,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAsE,kBAA0B5F,YAAyB,EAAE;QACnD,OAAOvD,IAAK;AAChB;AACA;AACA,oBAAoB,CAAC,IAAI,CAACsH,QAAS;AACnC,sBAAsB,IAAI,CAAC0C,WAAY;AACvC;AACA,oCAAoC,IAAI,CAACZ,aAAa,CAAC7F,YAAY,CAAE;AACrE;AACA,QAAQ,IAAI,CAAC8F,aAAa,CAAC,CAAE,GAAE,IAAI,CAACmB,mBAAmB,CAAC,CAAE;AAC1D,KAAK;MACH;IAAC;MAAA/F,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAA2F,oBAAA,EAA8B;QAC5B,OAAOxK,IAAK,GAAE,IAAI,CAAC2I,aAAa,CAAC7C,MAAM,GACnC9F,IAAK,GAAE,IAAI,CAAC2I,aAAa,CAAClH,GAAG,CAAEgJ,GAAG,IAAK;UACrC,MAAM7G,KAAK,GAAG,IAAI,CAACwB,IAAI,CAACjC,MAAM,CAACsH,GAAG,CAAC;UACnC,IAAI,CAAC7G,KAAK,EAAE;YACV,OAAO,EAAE;UACX;UACA,OAAO5D,IAAK;AACtB,qBAAqB,IAAI,CAAC0K,YAAa;AACvC;AACA,qBAAqBD,GAAI;AACzB;AACA,cAAc7G,KAAK,CAACnB,QAAQ,KAAK,IAAI,CAAC2C,IAAI,CAACjD,YAAY,IAAI,CAACyB,KAAK,CAAC4F,IAAI,GACtDxJ,IAAK;AACrB;AACA,0BAA0B6B,WAAW,CAACE,QAAS;AAC/C,gCAAgC,GAChB6B,KAAK,CAACnB,QAAQ,IAAIZ,WAAW,GAC3B7B,IAAK;AACvB;AACA,4BAA4B6B,WAAW,CAAC+B,KAAK,CAACnB,QAAQ,CAAE;AACxD,kCAAkC,GAChBzC,IAAK;AACvB;AACA,4BAA4B4D,KAAK,CAAC4F,IAAK;AACvC,8BAA+B;AAC/B;AACA,iBAAiB5F,KAAK,CAACnB,QAAQ,KAAK,IAAI,CAAC2C,IAAI,CAACjD,YAAY,GACxC,IAAI,CAACiD,IAAI,CAACuB,QAAQ,CAAC,cAAc,CAAC,GAClC,IAAI,CAACvB,IAAI,CAACuB,QAAQ,CAAE,SAAQ/C,KAAK,CAACb,KAAM,EAAC,CAAC,IAC1Ca,KAAK,CAACb,KAAM;AAC9B;AACA;AACA,uBAAuB,IAAI,CAACqC,IAAI,CAACuB,QAAQ,CAAC,uBAAuB,CAAE;AACnE,sBAAsBhH,OAAQ;AAC9B;AACA;AACA,6BAA6B;QACrB,CAAC,CAAE;AACX,UAAU,IAAI,CAAC0J,aAAa,CAAC,CAAE,EAAC,GACxB,EAAG,EAAC;MACV;IAAC;MAAA5E,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAqB,eAAA,EAAyB;QACvB,OAAOlG,IAAK,6BAA4B;MAC1C;IAAC;MAAAyE,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAwE,cAAA,EAAwB;QACtB,OAAOrJ,IAAK,qCAAoC;MAClD;IAAC;MAAAyE,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAA+E,qBAA6B7G,KAAoB,EAAE;QACjD,OAAO/C,IAAK;AAChB;AACA;AACA;AACA;AACA;AACA,oBAAoB,IAAI,CAAC6J,eAAgB;AACzC,oBAAoB,IAAI,CAACC,eAAgB;AACzC;AACA;AACA,8CAA8C1K,MAAO;AACrD,UAAU,CAAC,IAAI,CAACiI,YAAY,KACnB,IAAI,CAACY,aAAa,GAAG,CAAC,IAAI,IAAI,CAACxC,YAAY,GAAG,CAAC,CAAC,GAC7CzF,IAAK;AACjB;AACA,kBAAkB,IAAI,CAACiI,aAAa,GAAG,IAAI,CAACxC,YAAa;AACzD;AACA,aAAa,GACD,EAAG;AACf,kCAAkC1C,KAAM;AACxC,UAAU,IAAI,CAACsE,YAAY,KAAK,IAAI,CAACY,aAAa,GAAG,CAAC,IAAI,IAAI,CAACxC,YAAY,GAAG,CAAC,CAAC,GACpEzF,IAAK;AACjB;AACA,mBAAmB,IAAI,CAACiI,aAAa,GAAG,IAAI,CAACxC,YAAa;AAC1D;AACA,aAAa,GACD,EAAG;AACf;AACA,SAAS;MACP;IAAC;MAAAhB,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAsB,qBAAA,EAA+B;QAC7B,MAAMwE,iBAAiB,GAAG,IAAI,CAACxD,cAAc,GACzC,IAAI,CAACA,cAAc,CAACrB,MAAM,GAC1B,CAAC;QAEL,OAAO9F,IAAK;AAChB;AACA,oBAAoB,IAAI,CAAC6J,eAAgB;AACzC,oBAAoB,IAAI,CAACC,eAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,IAAI,CAACc,6BAA8B;AACpD;AACA,8CAA8C9L,OAAQ;AACtD,UAAU,CAAC,IAAI,CAACuI,YAAY,IAAIsD,iBAAiB,GAAG,CAAC,GACzC3K,IAAK;AACjB;AACA,kBAAkB2K,iBAAkB;AACpC;AACA,aAAa,GACD,EAAG;AACf;AACA,YAAY,IAAI,CAACvF,IAAI,CAACuB,QAAQ,CAAC,8BAA8B,CAAE;AAC/D;AACA,UAAU,IAAI,CAACU,YAAY,IAAIsD,iBAAiB,GAAG,CAAC,GACxC3K,IAAK,qCAAoC2K,iBAAkB,UAAS,GACpE,EAAG;AACf;AACA,WAAW;MACT;IAAC;MAAAlG,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAuB,gBAAA,EAA0B;QACxB,OAAOpG,IAAK;AAChB,cAAcM,QAAQ,CAAC;UACfuK,OAAO,EAAE,IAAI;UACb;UACA,eAAe,EAAE,IAAI,CAACzF,IAAI,CAACsB,QAAQ,KAAK;QAC1C,CAAC,CAAE;AACT;AACA;AACA;AACA;AACA,mBAAmB,IAAI,CAACtB,IAAI,CAACuB,QAAQ,CAAC,eAAe,CAAE;AACvD,oBAAoB,IAAI,CAACkD,eAAgB;AACzC,oBAAoB,IAAI,CAACC,eAAgB;AACzC;AACA;AACA;AACA;AACA,kBAAkB,IAAI,CAAC1E,IAAI,CAACC,IAAK;AACjC,kBAAkB,IAAI,CAACD,IAAK;AAC5B;AACA;AACA;AACA,YAAY,IAAI,CAACA,IAAI,CAACC,IAAI,GAAG,IAAI,CAACD,IAAI,CAACC,IAAI,CAACyF,IAAI,GAAG,EAAG;AACtD;AACA;AACA,SAAS;MACP;IAAC;MAAArG,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAyE,6BAAA,EAAuC;QAAA,IAAAyB,gBAAA,EAAAC,qBAAA;QACrC,OAAOhL,IAAK,GAAE,GAAA+K,gBAAA,GAAC,IAAI,CAAC3F,IAAI,CAACC,IAAI,cAAA0F,gBAAA,eAAdA,gBAAA,CAAgBzF,QAAQ,MAAA0F,qBAAA,GACvC,IAAI,CAAC5F,IAAI,CAAC6F,IAAI,CAACC,QAAQ,cAAAF,qBAAA,eAAvBA,qBAAA,CAAyBpJ,MAAM,CAACuJ,iBAAiB,GAC7CnL,IAAK;AACb;AACA;AACA,yBAAyB,IAAI,CAACoF,IAAI,CAACuB,QAAQ,CAC7B,uCACF,CAAE;AACd;AACA;AACA,qBAAqB,IAAI,CAACyE,+BAAgC;AAC1D,0BAA0B,IAAI,CAACvB,eAAgB;AAC/C,0BAA0B,IAAI,CAACC,eAAgB;AAC/C;AACA;AACA;AACA;AACA,wBAAwB9K,eAAgB;AACxC;AACA;AACA,kBAAkB,IAAI,CAACoG,IAAI,CAACuB,QAAQ,CAAC,uCAAuC,CAAE;AAC9E;AACA;AACA;AACA,SAAS,GACD,EAAG,EAAC;MACV;IAAC;MAAAlC,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAuG,gCAAwCnB,EAAS,EAAE;QACjDA,EAAE,CAACoB,cAAc,CAAC,CAAC;QACnB,IAAI,CAACjG,IAAI,CAAC6F,IAAI,CAACC,QAAQ,CAAEI,WAAW,CAAC;UACnCxG,IAAI,EAAE;QACR,CAAC,CAAC;MACJ;IAAC;MAAAL,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAA0G,SAAA,EAAuB;QACrB,OAAO,IAAI,CAAC7D,UAAU,CAAEC,aAAa,CAAC,UAAU,CAAC;MACnD;IAAC;MAAAlD,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAqD,cAAsB+B,EAAoC,EAAE;QAC1D,IAAIA,EAAE,CAACI,MAAM,CAACmB,MAAM,KAAK,MAAM,EAAE;UAC/B;QACF;QAEA/K,SAAS,CAAC,IAAI,EAAE,mBAAmB,EAAE;UAAE6G,QAAQ,EAAE;QAAK,CAAC,CAAC;MAC1D;IAAC;MAAA7C,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,eAAA0C,mBAAA,EAAmC;QACjC,MAAM,IAAI,CAACkE,cAAc,CAAC,CAAC;MAC7B;IAAC;MAAAhH,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,eAAA4G,eAAA,EAA+B;QAC7B,IAAI,IAAI,CAACC,gBAAgB,EAAE;QAE3B,MAAMC,gBAAgB,GAAG,MAAM,MAAM,CAAC,oCAAoC,CAAC;QAE3E,MAAMC,KAAK,GAAGvK,QAAQ,CAACwK,aAAa,CAAC,OAAO,CAAC;QAC7CD,KAAK,CAACE,SAAS,GAAIH,gBAAgB,CAACI,gBAAgB,CAAeC,OAAO;QAC1E,IAAI,CAACtE,UAAU,CAAEuE,WAAW,CAACL,KAAK,CAAC;QAEnC,MAAM,IAAI,CAACM,cAAc;MAC3B;IAAC;MAAAzH,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAA2D,eAAA,EAAyB;QACvB/H,SAAS,CAAC,IAAI,EAAE,mBAAmB,EAAE;UAAE6G,QAAQ,EAAE;QAAM,CAAC,CAAC;MAC3D;IAAC;MAAA7C,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,eAAAkF,WAAyBE,EAAS,EAAE;QAClCA,EAAE,CAACoB,cAAc,CAAC,CAAC;QACnB,MAAMzH,KAAK,GAAIqG,EAAE,CAACkC,aAAa,CAASvI,KAAK;QAC7C,IAAI,IAAI,CAAC+E,aAAa,CAAC9E,QAAQ,CAACD,KAAK,CAAC,EAAE;UACtC;QACF;QACA;QACA,IAAI,CAAC+E,aAAa,GAAG,CAAC,GAAG,IAAI,CAACA,aAAa,EAAE/E,KAAK,CAAC;QACnD;QACA,IAAI,CAAC8E,WAAW,GAAG,IAAI,CAACA,WAAW,CAAC/C,MAAM,CAAEyG,KAAK,IAAKA,KAAK,KAAKxI,KAAK,CAAC;MACxE;IAAC;MAAAa,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,eAAA6F,aAA2BT,EAAS,EAAE;QACpCA,EAAE,CAACoB,cAAc,CAAC,CAAC;QACnB,MAAMzH,KAAK,GAAIqG,EAAE,CAACkC,aAAa,CAASvI,KAAK;QAC7C,IAAI,CAAC+E,aAAa,GAAG,IAAI,CAACA,aAAa,CAAChD,MAAM,CAC3C0G,MAAM,IAAKA,MAAM,KAAKzI,KACzB,CAAC;MACH;IAAC;MAAAa,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAgF,gBAAwBI,EAAc,EAAE;QACtC;QACA;QACA;QACA,IACE,IAAI,CAAC5C,YAAY,IACjB,IAAIiF,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,GAAG,IAAI,CAACC,yBAAyB,EACrD;UACA;QACF;QACA,IAAI,IAAI,CAACC,kBAAkB,EAAE;UAC3BC,YAAY,CAAC,IAAI,CAACD,kBAAkB,CAAC;UACrC,IAAI,CAACA,kBAAkB,GAAGhD,SAAS;QACrC;QACA,IAAI,CAACkD,YAAY,CAAC1C,EAAE,CAACkC,aAAqC,CAAC;MAC7D;IAAC;MAAA1H,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAiF,gBAAA,EAA0B;QACxB,IAAI,IAAI,CAAC2C,kBAAkB,EAAE;UAC3BC,YAAY,CAAC,IAAI,CAACD,kBAAkB,CAAC;QACvC;QACA,IAAI,CAACA,kBAAkB,GAAGG,MAAM,CAACC,UAAU,CAAC,MAAM;UAChD,IAAI,CAACC,YAAY,CAAC,CAAC;QACrB,CAAC,EAAE,GAAG,CAAC;MACT;IAAC;MAAArI,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAkE,gBAAwBkB,EAAE,EAAE;QAC1B,IAAI,IAAI,CAAC5C,YAAY,IAAI4C,EAAE,CAAC8C,MAAM,CAACC,QAAQ,KAAK,GAAG,EAAE;UACnD;QACF;QACA,IAAI,CAACL,YAAY,CAAC1C,EAAE,CAAC8C,MAAM,CAACpF,aAAa,CAAC,iBAAiB,CAAC,CAAC;MAC/D;IAAC;MAAAlD,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAmE,iBAAA,EAA2B;QACzB,IAAI,CAAC8D,YAAY,CAAC,CAAC;MACrB;IAAC;MAAArI,IAAA;MAAAC,UAAA,GAEAvE,YAAY,CAAC;QACZ8M,OAAO,EAAE;MACX,CAAC,CAAC;MAAArI,GAAA;MAAAC,KAAA,EAFF,SAAAoE,eAAA,EAGyB;QACvB;QACA;QACA;QACA,IAAI,IAAIqD,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,GAAG,IAAI,CAACC,yBAAyB,EAAE;UACzD;QACF;QACA,IAAI,CAACM,YAAY,CAAC,CAAC;MACrB;IAAC;MAAArI,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAqE,gBAAA,EAA0B;QACxB,IAAI,CAACsD,yBAAyB,GAAG,IAAIF,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,GAAG,GAAG;MAC7D;IAAC;MAAA9H,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAA8H,aAAqBO,IAA0B,EAAE;QAC/C,IAAI,IAAI,CAACC,mBAAmB,EAAE;UAC5BT,YAAY,CAAC,IAAI,CAACS,mBAAmB,CAAC;UACtC,IAAI,CAACA,mBAAmB,GAAG1D,SAAS;QACtC;QACA,MAAM2D,OAAO,GAAG,IAAI,CAAC7B,QAAQ;QAC7B,MAAM8B,OAAO,GAAG,IAAI,CAAC3F,UAAU,CAAEC,aAAa,CAAC,eAAe,CAAE;QAChE,IAAI2F,GAAG,GAAGJ,IAAI,CAACK,SAAS,GAAG,EAAE;QAC7B,IAAIF,OAAO,CAACG,QAAQ,CAACN,IAAI,CAAC,EAAE;UAC1BI,GAAG,IAAID,OAAO,CAACI,SAAS;QAC1B;QACAL,OAAO,CAACtB,SAAS,GAAGoB,IAAI,CAACvF,aAAa,CAAC,YAAY,CAAC,CAAEmE,SAAS;QAC/DsB,OAAO,CAACxB,KAAK,CAAC8B,OAAO,GAAG,OAAO;QAC/BN,OAAO,CAACxB,KAAK,CAAC+B,QAAQ,GAAG,OAAO;QAChCP,OAAO,CAACxB,KAAK,CAAC0B,GAAG,GAAI,GAAEA,GAAI,IAAG;QAC9BF,OAAO,CAACxB,KAAK,CAACgC,IAAI,GAAI,GAAEV,IAAI,CAACW,UAAU,GAAGX,IAAI,CAACY,WAAW,GAAG,CAAE,IAAG;MACpE;IAAC;MAAArJ,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAAiI,aAAA,EAAuB;QACrB;QACA,IAAI,CAAC,IAAI,CAACK,mBAAmB,EAAE;UAC7B,IAAI,CAACA,mBAAmB,GAAGP,MAAM,CAACC,UAAU,CAAC,MAAM;YACjD,IAAI,CAACM,mBAAmB,GAAG1D,SAAS;YACpC,IAAI,CAAC8B,QAAQ,CAACK,KAAK,CAAC8B,OAAO,GAAG,MAAM;UACtC,CAAC,EAAE,EAAE,CAAC;QACR;MACF;IAAC;MAAAjJ,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAA+F,8BAAA,EAAwC;QACtCnK,SAAS,CAAC,IAAI,EAAE,yBAAyB,CAAC;MAC5C;IAAC;MAAAgE,IAAA;MAAAG,GAAA;MAAAC,KAAA,EAED,SAAA0D,eAAuB0B,EAAe,EAAE;QACtC,IAAIA,EAAE,CAACI,MAAM,CAACmB,MAAM,KAAK,KAAK,EAAE;UAC9B;QACF;QACA/K,SAAS,CAAC,IAAI,EAAE,kBAAkB,CAAC;MACrC;IAAC;MAAAgE,IAAA;MAAAsJ,MAAA;MAAAnJ,GAAA;MAAAC,KAAA,EAED,SAAAmJ,OAAA,EAAoC;QAClC,OAAO,CACL9M,gBAAgB,EAChBnB,GAAI;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,CACF;MACH;IAAC;EAAA;AAAA,GAt4BqBiB,cAAc,CAAClB,UAAU,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}