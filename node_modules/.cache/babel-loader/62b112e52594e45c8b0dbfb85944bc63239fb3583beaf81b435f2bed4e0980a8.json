{"ast":null,"code":"import { utcToZonedTime, zonedTimeToUtc } from \"date-fns-tz\";\nimport { TimeZone } from \"../../data/translation\";\nconst calcZonedDate = (date, tz, fn, options) => {\n  const inputZoned = utcToZonedTime(date, tz);\n  const fnZoned = fn(inputZoned, options);\n  if (fnZoned instanceof Date) {\n    return zonedTimeToUtc(fnZoned, tz);\n  }\n  return fnZoned;\n};\nexport const calcDate = (date, fn, locale, config, options) => locale.time_zone === TimeZone.server ? calcZonedDate(date, config.time_zone, fn, options) : fn(date, options);\nexport const calcDateProperty = (date, fn, locale, config, options) => locale.time_zone === TimeZone.server ? calcZonedDate(date, config.time_zone, fn, options) : fn(date, options);","map":{"version":3,"names":["utcToZonedTime","zonedTimeToUtc","TimeZone","calcZonedDate","date","tz","fn","options","inputZoned","fnZoned","Date","calcDate","locale","config","time_zone","server","calcDateProperty"],"sources":["/workspaces/frontend/src/common/datetime/calc_date.ts"],"sourcesContent":["import { utcToZonedTime, zonedTimeToUtc } from \"date-fns-tz\";\nimport { HassConfig } from \"home-assistant-js-websocket\";\nimport { FrontendLocaleData, TimeZone } from \"../../data/translation\";\n\nconst calcZonedDate = (\n  date: Date,\n  tz: string,\n  fn: (date: Date, options?: any) => Date | number | boolean,\n  options?\n) => {\n  const inputZoned = utcToZonedTime(date, tz);\n  const fnZoned = fn(inputZoned, options);\n  if (fnZoned instanceof Date) {\n    return zonedTimeToUtc(fnZoned, tz) as Date;\n  }\n  return fnZoned;\n};\n\nexport const calcDate = (\n  date: Date,\n  fn: (date: Date, options?: any) => Date,\n  locale: FrontendLocaleData,\n  config: HassConfig,\n  options?\n) =>\n  locale.time_zone === TimeZone.server\n    ? (calcZonedDate(date, config.time_zone, fn, options) as Date)\n    : fn(date, options);\n\nexport const calcDateProperty = (\n  date: Date,\n  fn: (date: Date, options?: any) => boolean | number,\n  locale: FrontendLocaleData,\n  config: HassConfig,\n  options?\n) =>\n  locale.time_zone === TimeZone.server\n    ? (calcZonedDate(date, config.time_zone, fn, options) as number | boolean)\n    : fn(date, options);\n"],"mappings":"AAAA,SAASA,cAAc,EAAEC,cAAc,QAAQ,aAAa;AAE5D,SAA6BC,QAAQ,QAAQ,wBAAwB;AAErE,MAAMC,aAAa,GAAGA,CACpBC,IAAU,EACVC,EAAU,EACVC,EAA0D,EAC1DC,OAAQ,KACL;EACH,MAAMC,UAAU,GAAGR,cAAc,CAACI,IAAI,EAAEC,EAAE,CAAC;EAC3C,MAAMI,OAAO,GAAGH,EAAE,CAACE,UAAU,EAAED,OAAO,CAAC;EACvC,IAAIE,OAAO,YAAYC,IAAI,EAAE;IAC3B,OAAOT,cAAc,CAACQ,OAAO,EAAEJ,EAAE,CAAC;EACpC;EACA,OAAOI,OAAO;AAChB,CAAC;AAED,OAAO,MAAME,QAAQ,GAAGA,CACtBP,IAAU,EACVE,EAAuC,EACvCM,MAA0B,EAC1BC,MAAkB,EAClBN,OAAQ,KAERK,MAAM,CAACE,SAAS,KAAKZ,QAAQ,CAACa,MAAM,GAC/BZ,aAAa,CAACC,IAAI,EAAES,MAAM,CAACC,SAAS,EAAER,EAAE,EAAEC,OAAO,CAAC,GACnDD,EAAE,CAACF,IAAI,EAAEG,OAAO,CAAC;AAEvB,OAAO,MAAMS,gBAAgB,GAAGA,CAC9BZ,IAAU,EACVE,EAAmD,EACnDM,MAA0B,EAC1BC,MAAkB,EAClBN,OAAQ,KAERK,MAAM,CAACE,SAAS,KAAKZ,QAAQ,CAACa,MAAM,GAC/BZ,aAAa,CAACC,IAAI,EAAES,MAAM,CAACC,SAAS,EAAER,EAAE,EAAEC,OAAO,CAAC,GACnDD,EAAE,CAACF,IAAI,EAAEG,OAAO,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}