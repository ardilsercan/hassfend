{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _createForOfIteratorHelper from \"@babel/runtime/helpers/createForOfIteratorHelper\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8;\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.values.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/esnext.iterator.some.js\";\nimport \"core-js/modules/esnext.set.difference.v2.js\";\nimport \"core-js/modules/esnext.set.intersection.v2.js\";\nimport \"core-js/modules/esnext.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/esnext.set.is-subset-of.v2.js\";\nimport \"core-js/modules/esnext.set.is-superset-of.v2.js\";\nimport \"core-js/modules/esnext.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/esnext.set.union.v2.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { consume } from \"@lit-labs/context\";\nimport \"@lrnwebcomponents/simple-tooltip/simple-tooltip\";\nvar mdiCancel = \"M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22 2 17.5 2 12 6.5 2 12 2M12 4C10.1 4 8.4 4.6 7.1 5.7L18.3 16.9C19.3 15.5 20 13.8 20 12C20 7.6 16.4 4 12 4M16.9 18.3L5.7 7.1C4.6 8.4 4 10.1 4 12C4 16.4 7.6 20 12 20C13.9 20 15.6 19.4 16.9 18.3Z\";\nvar mdiFilterVariant = \"M6,13H18V11H6M3,6V8H21V6M10,18H14V16H10V18Z\";\nvar mdiPlus = \"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z\";\nimport { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { computeStateDomain } from \"../../../common/entity/compute_state_domain\";\nimport { PROTOCOL_INTEGRATIONS, protocolIntegrationPicked } from \"../../../common/integrations/protocolIntegrationPicked\";\nimport { navigate } from \"../../../common/navigate\";\nimport \"../../../components/entity/ha-battery-icon\";\nimport \"../../../components/ha-button-menu\";\nimport \"../../../components/ha-check-list-item\";\nimport \"../../../components/ha-fab\";\nimport \"../../../components/ha-icon-button\";\nimport { sortConfigEntries } from \"../../../data/config_entries\";\nimport { fullEntitiesContext } from \"../../../data/context\";\nimport { computeDeviceName } from \"../../../data/device_registry\";\nimport { findBatteryChargingEntity, findBatteryEntity } from \"../../../data/entity_registry\";\nimport { domainToName } from \"../../../data/integration\";\nimport \"../../../layouts/hass-tabs-subpage-data-table\";\nimport { haStyle } from \"../../../resources/styles\";\nimport { brandsUrl } from \"../../../util/brands-url\";\nimport { configSections } from \"../ha-panel-config\";\nimport \"../integrations/ha-integration-overflow-menu\";\nimport { showAddIntegrationDialog } from \"../integrations/show-add-integration-dialog\";\nexport var HaConfigDeviceDashboard = _decorate([customElement(\"ha-config-devices-dashboard\")], function (_initialize, _LitElement) {\n  var HaConfigDeviceDashboard = /*#__PURE__*/function (_LitElement2) {\n    _inherits(HaConfigDeviceDashboard, _LitElement2);\n    function HaConfigDeviceDashboard() {\n      var _this;\n      _classCallCheck(this, HaConfigDeviceDashboard);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _callSuper(this, HaConfigDeviceDashboard, [].concat(args));\n      _initialize(_assertThisInitialized(_this));\n      return _this;\n    }\n    return _createClass(HaConfigDeviceDashboard);\n  }(_LitElement);\n  return {\n    F: HaConfigDeviceDashboard,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"narrow\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"isWide\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"entries\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state(), consume({\n        context: fullEntitiesContext,\n        subscribe: true\n      })],\n      key: \"entities\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"manifests\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"route\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_searchParms\",\n      value: function value() {\n        return new URLSearchParams(window.location.search);\n      }\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_showDisabled\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_filter\",\n      value: function value() {\n        var _history$state;\n        return ((_history$state = history.state) === null || _history$state === void 0 ? void 0 : _history$state.filter) || \"\";\n      }\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_numHiddenDevices\",\n      value: function value() {\n        return 0;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_ignoreLocationChange\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(HaConfigDeviceDashboard.prototype), \"connectedCallback\", this).call(this);\n        window.addEventListener(\"location-changed\", this._locationChanged);\n        window.addEventListener(\"popstate\", this._popState);\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(HaConfigDeviceDashboard.prototype), \"disconnectedCallback\", this).call(this);\n        window.removeEventListener(\"location-changed\", this._locationChanged);\n        window.removeEventListener(\"popstate\", this._popState);\n      }\n    }, {\n      kind: \"field\",\n      key: \"_locationChanged\",\n      value: function value() {\n        var _this2 = this;\n        return function () {\n          if (_this2._ignoreLocationChange) {\n            _this2._ignoreLocationChange = false;\n            return;\n          }\n          if (window.location.search.substring(1) !== _this2._searchParms.toString()) {\n            _this2._searchParms = new URLSearchParams(window.location.search);\n          }\n        };\n      }\n    }, {\n      kind: \"field\",\n      key: \"_popState\",\n      value: function value() {\n        var _this3 = this;\n        return function () {\n          if (window.location.search.substring(1) !== _this3._searchParms.toString()) {\n            _this3._searchParms = new URLSearchParams(window.location.search);\n          }\n        };\n      }\n    }, {\n      kind: \"field\",\n      key: \"_activeFilters\",\n      value: function value() {\n        var _this4 = this;\n        return memoizeOne(function (entries, filters, localize) {\n          var filterTexts = [];\n          filters.forEach(function (value, key) {\n            switch (key) {\n              case \"config_entry\":\n                {\n                  var configEntry = entries.find(function (entry) {\n                    return entry.entry_id === value;\n                  });\n                  if (!configEntry) {\n                    break;\n                  }\n                  var integrationName = domainToName(localize, configEntry.domain);\n                  filterTexts.push(\"\".concat(_this4.hass.localize(\"ui.panel.config.integrations.integration\"), \" \\\"\").concat(integrationName).concat(integrationName !== configEntry.title ? \": \".concat(configEntry.title) : \"\", \"\\\"\"));\n                  break;\n                }\n              case \"domain\":\n                {\n                  filterTexts.push(\"\".concat(_this4.hass.localize(\"ui.panel.config.integrations.integration\"), \" \\\"\").concat(domainToName(localize, value), \"\\\"\"));\n                }\n            }\n          });\n          return filterTexts.length ? filterTexts : undefined;\n        });\n      }\n    }, {\n      kind: \"field\",\n      key: \"_devicesAndFilterDomains\",\n      value: function value() {\n        var _this5 = this;\n        return memoizeOne(function (devices, entries, entities, areas, manifests, filters, showDisabled, localize) {\n          // Some older installations might have devices pointing at invalid entryIDs\n          // So we guard for that.\n          var outputDevices = Object.values(devices);\n\n          // If nothing gets filtered, this is our correct count of devices\n          var startLength = outputDevices.length;\n          var deviceEntityLookup = {};\n          var _iterator = _createForOfIteratorHelper(entities),\n            _step;\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var entity = _step.value;\n              if (!entity.device_id) {\n                continue;\n              }\n              if (!(entity.device_id in deviceEntityLookup)) {\n                deviceEntityLookup[entity.device_id] = [];\n              }\n              deviceEntityLookup[entity.device_id].push(entity);\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n          var entryLookup = {};\n          var _iterator2 = _createForOfIteratorHelper(entries),\n            _step2;\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var entry = _step2.value;\n              entryLookup[entry.entry_id] = entry;\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n          var manifestLookup = {};\n          var _iterator3 = _createForOfIteratorHelper(manifests),\n            _step3;\n          try {\n            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n              var manifest = _step3.value;\n              manifestLookup[manifest.domain] = manifest;\n            }\n          } catch (err) {\n            _iterator3.e(err);\n          } finally {\n            _iterator3.f();\n          }\n          var filterConfigEntry;\n          var filteredDomains = new Set();\n          filters.forEach(function (value, key) {\n            if (key === \"config_entry\") {\n              outputDevices = outputDevices.filter(function (device) {\n                return device.config_entries.includes(value);\n              });\n              startLength = outputDevices.length;\n              filterConfigEntry = entries.find(function (entry) {\n                return entry.entry_id === value;\n              });\n              if (filterConfigEntry) {\n                filteredDomains.add(filterConfigEntry.domain);\n              }\n            }\n            if (key === \"domain\") {\n              var entryIds = entries.filter(function (entry) {\n                return entry.domain === value;\n              }).map(function (entry) {\n                return entry.entry_id;\n              });\n              outputDevices = outputDevices.filter(function (device) {\n                return device.config_entries.some(function (entryId) {\n                  return entryIds.includes(entryId);\n                });\n              });\n              startLength = outputDevices.length;\n              filteredDomains.add(value);\n            }\n          });\n          if (!showDisabled) {\n            outputDevices = outputDevices.filter(function (device) {\n              return !device.disabled_by;\n            });\n          }\n          var formattedOutputDevices = outputDevices.map(function (device) {\n            var _this5$hass$states;\n            var deviceEntries = sortConfigEntries(device.config_entries.filter(function (entId) {\n              return entId in entryLookup;\n            }).map(function (entId) {\n              return entryLookup[entId];\n            }), manifestLookup);\n            return Object.assign(Object.assign({}, device), {}, {\n              name: computeDeviceName(device, _this5.hass, deviceEntityLookup[device.id]),\n              model: device.model || \"<\".concat(localize(\"ui.panel.config.devices.data_table.unknown\"), \">\"),\n              manufacturer: device.manufacturer || \"<\".concat(localize(\"ui.panel.config.devices.data_table.unknown\"), \">\"),\n              area: device.area_id && areas[device.area_id] ? areas[device.area_id].name : \"—\",\n              integration: deviceEntries.length ? deviceEntries.map(function (entry) {\n                return localize(\"component.\".concat(entry.domain, \".title\")) || entry.domain;\n              }).join(\", \") : _this5.hass.localize(\"ui.panel.config.devices.data_table.no_integration\"),\n              domains: deviceEntries.map(function (entry) {\n                return entry.domain;\n              }),\n              battery_entity: [_this5._batteryEntity(device.id, deviceEntityLookup), _this5._batteryChargingEntity(device.id, deviceEntityLookup)],\n              battery_level: (_this5$hass$states = _this5.hass.states[_this5._batteryEntity(device.id, deviceEntityLookup) || \"\"]) === null || _this5$hass$states === void 0 ? void 0 : _this5$hass$states.state\n            });\n          });\n          _this5._numHiddenDevices = startLength - formattedOutputDevices.length;\n          return {\n            devicesOutput: formattedOutputDevices,\n            filteredConfigEntry: filterConfigEntry,\n            filteredDomains: filteredDomains\n          };\n        });\n      }\n    }, {\n      kind: \"field\",\n      key: \"_columns\",\n      value: function value() {\n        var _this6 = this;\n        return memoizeOne(function (localize, narrow, showDisabled) {\n          var columns = {\n            icon: {\n              title: \"\",\n              type: \"icon\",\n              template: function template(device) {\n                var _this6$hass$themes;\n                return device.domains.length ? html(_templateObject || (_templateObject = _taggedTemplateLiteral([\"<img\\n                  alt=\\\"\\\"\\n                  crossorigin=\\\"anonymous\\\"\\n                  referrerpolicy=\\\"no-referrer\\\"\\n                  src=\", \"\\n                />\"])), brandsUrl({\n                  domain: device.domains[0],\n                  type: \"icon\",\n                  darkOptimized: (_this6$hass$themes = _this6.hass.themes) === null || _this6$hass$themes === void 0 ? void 0 : _this6$hass$themes.darkMode\n                })) : \"\";\n              }\n            }\n          };\n          if (narrow) {\n            columns.name = {\n              title: localize(\"ui.panel.config.devices.data_table.device\"),\n              main: true,\n              sortable: true,\n              filterable: true,\n              direction: \"asc\",\n              grows: true,\n              template: function template(device) {\n                return html(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n            \", \"\\n            <div class=\\\"secondary\\\">\", \" | \", \"</div>\\n          \"])), device.name, device.area, device.integration);\n              }\n            };\n          } else {\n            columns.name = {\n              title: localize(\"ui.panel.config.devices.data_table.device\"),\n              main: true,\n              sortable: true,\n              filterable: true,\n              grows: true,\n              direction: \"asc\"\n            };\n          }\n          columns.manufacturer = {\n            title: localize(\"ui.panel.config.devices.data_table.manufacturer\"),\n            sortable: true,\n            hidden: narrow,\n            filterable: true,\n            width: \"15%\"\n          };\n          columns.model = {\n            title: localize(\"ui.panel.config.devices.data_table.model\"),\n            sortable: true,\n            hidden: narrow,\n            filterable: true,\n            width: \"15%\"\n          };\n          columns.area = {\n            title: localize(\"ui.panel.config.devices.data_table.area\"),\n            sortable: true,\n            hidden: narrow,\n            filterable: true,\n            width: \"15%\"\n          };\n          columns.integration = {\n            title: localize(\"ui.panel.config.devices.data_table.integration\"),\n            sortable: true,\n            hidden: narrow,\n            filterable: true,\n            width: \"15%\"\n          };\n          columns.battery_entity = {\n            title: localize(\"ui.panel.config.devices.data_table.battery\"),\n            sortable: true,\n            filterable: true,\n            type: \"numeric\",\n            width: narrow ? \"105px\" : \"15%\",\n            maxWidth: \"105px\",\n            valueColumn: \"battery_level\",\n            template: function template(device) {\n              var batteryEntityPair = device.battery_entity;\n              var battery = batteryEntityPair && batteryEntityPair[0] ? _this6.hass.states[batteryEntityPair[0]] : undefined;\n              var batteryDomain = battery ? computeStateDomain(battery) : undefined;\n              var batteryCharging = batteryEntityPair && batteryEntityPair[1] ? _this6.hass.states[batteryEntityPair[1]] : undefined;\n              return battery && (batteryDomain === \"binary_sensor\" || !isNaN(battery.state)) ? html(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n                \", \"\\n                <ha-battery-icon\\n                  .hass=\", \"\\n                  .batteryStateObj=\", \"\\n                  .batteryChargingStateObj=\", \"\\n                ></ha-battery-icon>\\n              \"])), batteryDomain === \"sensor\" ? _this6.hass.formatEntityState(battery) : nothing, _this6.hass, battery, batteryCharging) : html(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\u2014\"])));\n            }\n          };\n          if (showDisabled) {\n            columns.disabled_by = {\n              title: \"\",\n              label: localize(\"ui.panel.config.devices.data_table.disabled_by\"),\n              type: \"icon\",\n              template: function template(device) {\n                return device.disabled_by ? html(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"<div\\n                  tabindex=\\\"0\\\"\\n                  style=\\\"display:inline-block; position: relative;\\\"\\n                >\\n                  <ha-svg-icon .path=\", \"></ha-svg-icon>\\n                  <simple-tooltip animation-delay=\\\"0\\\" position=\\\"left\\\">\\n                    \", \"\\n                  </simple-tooltip>\\n                </div>\"])), mdiCancel, _this6.hass.localize(\"ui.panel.config.devices.disabled\")) : \"—\";\n              }\n            };\n          }\n          return columns;\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProps) {\n        if (changedProps.has(\"_searchParms\")) {\n          if (this._searchParms.get(\"config_entry\") || this._searchParms.get(\"domain\")) {\n            // If we are requested to show the devices for a given config entry / domain,\n            // also show the disabled ones by default.\n            this._showDisabled = true;\n          }\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        var _this$_devicesAndFilt = this._devicesAndFilterDomains(this.hass.devices, this.entries, this.entities, this.hass.areas, this.manifests, this._searchParms, this._showDisabled, this.hass.localize),\n          devicesOutput = _this$_devicesAndFilt.devicesOutput;\n        var activeFilters = this._activeFilters(this.entries, this._searchParms, this.hass.localize);\n        return html(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n      <hass-tabs-subpage-data-table\\n        .hass=\", \"\\n        .narrow=\", \"\\n        .backPath=\", \"\\n        .tabs=\", \"\\n        .route=\", \"\\n        .activeFilters=\", \"\\n        .numHidden=\", \"\\n        .searchLabel=\", \"\\n        .hiddenLabel=\", \"\\n        .columns=\", \"\\n        .data=\", \"\\n        .filter=\", \"\\n        @clear-filter=\", \"\\n        @search-changed=\", \"\\n        @row-click=\", \"\\n        clickable\\n        hasFab\\n      >\\n        <ha-integration-overflow-menu\\n          .hass=\", \"\\n          slot=\\\"toolbar-icon\\\"\\n        ></ha-integration-overflow-menu>\\n        <ha-fab\\n          slot=\\\"fab\\\"\\n          .label=\", \"\\n          extended\\n          @click=\", \"\\n        >\\n          <ha-svg-icon slot=\\\"icon\\\" .path=\", \"></ha-svg-icon>\\n        </ha-fab>\\n        <ha-button-menu slot=\\\"filter-menu\\\" multi>\\n          <ha-icon-button\\n            slot=\\\"trigger\\\"\\n            .label=\", \"\\n            .path=\", \"\\n          ></ha-icon-button>\\n          \", \"\\n          <ha-check-list-item\\n            left\\n            @request-selected=\", \"\\n            .selected=\", \"\\n          >\\n            \", \"\\n          </ha-check-list-item>\\n        </ha-button-menu>\\n      </hass-tabs-subpage-data-table>\\n    \"])), this.hass, this.narrow, this._searchParms.has(\"historyBack\") ? undefined : \"/config\", configSections.devices, this.route, activeFilters, this._numHiddenDevices, this.hass.localize(\"ui.panel.config.devices.picker.search\"), this.hass.localize(\"ui.panel.config.devices.picker.filter.hidden_devices\", {\n          number: this._numHiddenDevices\n        }), this._columns(this.hass.localize, this.narrow, this._showDisabled), devicesOutput, this._filter, this._clearFilter, this._handleSearchChange, this._handleRowClicked, this.hass, this.hass.localize(\"ui.panel.config.devices.add_device\"), this._addDevice, mdiPlus, this.hass.localize(\"ui.panel.config.devices.picker.filter.filter\"), mdiFilterVariant, this.narrow && activeFilters !== null && activeFilters !== void 0 && activeFilters.length ? html(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"<mwc-list-item @click=\", \"\\n                >\", \"\\n                \", \"\\n                <span class=\\\"clear\\\"\\n                  >\", \"</span\\n                ></mwc-list-item\\n              >\"])), this._clearFilter, this.hass.localize(\"ui.components.data-table.filtering_by\"), activeFilters.join(\", \"), this.hass.localize(\"ui.common.clear\")) : \"\", this._showDisabledChanged, this._showDisabled, this.hass.localize(\"ui.panel.config.devices.picker.filter.show_disabled\"));\n      }\n    }, {\n      kind: \"method\",\n      key: \"_batteryEntity\",\n      value: function _batteryEntity(deviceId, deviceEntityLookup) {\n        var batteryEntity = findBatteryEntity(this.hass, deviceEntityLookup[deviceId] || []);\n        return batteryEntity ? batteryEntity.entity_id : undefined;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_batteryChargingEntity\",\n      value: function _batteryChargingEntity(deviceId, deviceEntityLookup) {\n        var batteryChargingEntity = findBatteryChargingEntity(this.hass, deviceEntityLookup[deviceId] || []);\n        return batteryChargingEntity ? batteryChargingEntity.entity_id : undefined;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleRowClicked\",\n      value: function _handleRowClicked(ev) {\n        var deviceId = ev.detail.id;\n        this._ignoreLocationChange = true;\n        navigate(\"/config/devices/device/\".concat(deviceId));\n      }\n    }, {\n      kind: \"method\",\n      key: \"_showDisabledChanged\",\n      value: function _showDisabledChanged(ev) {\n        if (ev.detail.source !== \"property\") {\n          return;\n        }\n        this._showDisabled = ev.detail.selected;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleSearchChange\",\n      value: function _handleSearchChange(ev) {\n        this._filter = ev.detail.value;\n        history.replaceState({\n          filter: this._filter\n        }, \"\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_clearFilter\",\n      value: function _clearFilter() {\n        if (this._activeFilters(this.entries, this._searchParms, this.hass.localize)) {\n          navigate(window.location.pathname, {\n            replace: true\n          });\n        }\n        this._showDisabled = true;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_addDevice\",\n      value: function _addDevice() {\n        var _this$_devicesAndFilt2 = this._devicesAndFilterDomains(this.hass.devices, this.entries, this.entities, this.hass.areas, this.manifests, this._searchParms, this._showDisabled, this.hass.localize),\n          filteredConfigEntry = _this$_devicesAndFilt2.filteredConfigEntry,\n          filteredDomains = _this$_devicesAndFilt2.filteredDomains;\n        if (filteredDomains.size === 1 && PROTOCOL_INTEGRATIONS.includes(_toConsumableArray(filteredDomains)[0])) {\n          protocolIntegrationPicked(this, this.hass, _toConsumableArray(filteredDomains)[0], {\n            config_entry: filteredConfigEntry === null || filteredConfigEntry === void 0 ? void 0 : filteredConfigEntry.entry_id\n          });\n          return;\n        }\n        showAddIntegrationDialog(this, {\n          domain: this._searchParms.get(\"domain\") || undefined\n        });\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return [css(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n        ha-button-menu {\\n          margin-left: 8px;\\n          margin-inline-start: 8px;\\n          margin-inline-end: initial;\\n        }\\n        .clear {\\n          color: var(--primary-color);\\n          padding-left: 8px;\\n          padding-inline-start: 8px;\\n          text-transform: uppercase;\\n          direction: var(--direction);\\n        }\\n      \"]))), haStyle];\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["consume","mdiCancel","mdiFilterVariant","mdiPlus","LitElement","css","html","nothing","customElement","property","state","memoizeOne","computeStateDomain","PROTOCOL_INTEGRATIONS","protocolIntegrationPicked","navigate","sortConfigEntries","fullEntitiesContext","computeDeviceName","findBatteryChargingEntity","findBatteryEntity","domainToName","haStyle","brandsUrl","configSections","showAddIntegrationDialog","HaConfigDeviceDashboard","_decorate","_initialize","_LitElement","_LitElement2","_inherits","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","_assertThisInitialized","_createClass","F","d","kind","decorators","attribute","key","value","type","Boolean","context","subscribe","URLSearchParams","window","location","search","_history$state","history","filter","connectedCallback","_get","_getPrototypeOf","prototype","call","addEventListener","_locationChanged","_popState","disconnectedCallback","removeEventListener","_this2","_ignoreLocationChange","substring","_searchParms","toString","_this3","_this4","entries","filters","localize","filterTexts","forEach","configEntry","find","entry","entry_id","integrationName","domain","push","hass","title","undefined","_this5","devices","entities","areas","manifests","showDisabled","outputDevices","Object","values","startLength","deviceEntityLookup","_iterator","_createForOfIteratorHelper","_step","s","n","done","entity","device_id","err","e","f","entryLookup","_iterator2","_step2","manifestLookup","_iterator3","_step3","manifest","filterConfigEntry","filteredDomains","Set","device","config_entries","includes","add","entryIds","map","some","entryId","disabled_by","formattedOutputDevices","_this5$hass$states","deviceEntries","entId","assign","name","id","model","manufacturer","area","area_id","integration","join","domains","battery_entity","_batteryEntity","_batteryChargingEntity","battery_level","states","_numHiddenDevices","devicesOutput","filteredConfigEntry","_this6","narrow","columns","icon","template","_this6$hass$themes","_templateObject","_taggedTemplateLiteral","darkOptimized","themes","darkMode","main","sortable","filterable","direction","grows","_templateObject2","hidden","width","maxWidth","valueColumn","batteryEntityPair","battery","batteryDomain","batteryCharging","isNaN","_templateObject3","formatEntityState","_templateObject4","label","_templateObject5","willUpdate","changedProps","has","get","_showDisabled","render","_this$_devicesAndFilt","_devicesAndFilterDomains","activeFilters","_activeFilters","_templateObject6","route","number","_columns","_filter","_clearFilter","_handleSearchChange","_handleRowClicked","_addDevice","_templateObject7","_showDisabledChanged","deviceId","batteryEntity","entity_id","batteryChargingEntity","ev","detail","source","selected","replaceState","pathname","replace","_this$_devicesAndFilt2","size","_toConsumableArray","config_entry","static","styles","_templateObject8"],"sources":["/workspaces/frontend/src/panels/config/devices/ha-config-devices-dashboard.ts"],"sourcesContent":["import { consume } from \"@lit-labs/context\";\nimport \"@lrnwebcomponents/simple-tooltip/simple-tooltip\";\nimport type { RequestSelectedDetail } from \"@material/mwc-list/mwc-list-item\";\nimport { mdiCancel, mdiFilterVariant, mdiPlus } from \"@mdi/js\";\nimport {\n  CSSResultGroup,\n  LitElement,\n  TemplateResult,\n  css,\n  html,\n  nothing,\n} from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { HASSDomEvent } from \"../../../common/dom/fire_event\";\nimport { computeStateDomain } from \"../../../common/entity/compute_state_domain\";\nimport {\n  PROTOCOL_INTEGRATIONS,\n  protocolIntegrationPicked,\n} from \"../../../common/integrations/protocolIntegrationPicked\";\nimport { navigate } from \"../../../common/navigate\";\nimport { LocalizeFunc } from \"../../../common/translations/localize\";\nimport {\n  DataTableColumnContainer,\n  RowClickedEvent,\n} from \"../../../components/data-table/ha-data-table\";\nimport \"../../../components/entity/ha-battery-icon\";\nimport \"../../../components/ha-button-menu\";\nimport \"../../../components/ha-check-list-item\";\nimport \"../../../components/ha-fab\";\nimport \"../../../components/ha-icon-button\";\nimport { ConfigEntry, sortConfigEntries } from \"../../../data/config_entries\";\nimport { fullEntitiesContext } from \"../../../data/context\";\nimport {\n  DeviceEntityLookup,\n  DeviceRegistryEntry,\n  computeDeviceName,\n} from \"../../../data/device_registry\";\nimport {\n  EntityRegistryEntry,\n  findBatteryChargingEntity,\n  findBatteryEntity,\n} from \"../../../data/entity_registry\";\nimport { IntegrationManifest, domainToName } from \"../../../data/integration\";\nimport \"../../../layouts/hass-tabs-subpage-data-table\";\nimport { haStyle } from \"../../../resources/styles\";\nimport { HomeAssistant, Route } from \"../../../types\";\nimport { brandsUrl } from \"../../../util/brands-url\";\nimport { configSections } from \"../ha-panel-config\";\nimport \"../integrations/ha-integration-overflow-menu\";\nimport { showAddIntegrationDialog } from \"../integrations/show-add-integration-dialog\";\n\ninterface DeviceRowData extends DeviceRegistryEntry {\n  device?: DeviceRowData;\n  area?: string;\n  integration?: string;\n  battery_entity?: [string | undefined, string | undefined];\n}\n\n@customElement(\"ha-config-devices-dashboard\")\nexport class HaConfigDeviceDashboard extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean }) public narrow = false;\n\n  @property({ type: Boolean }) public isWide = false;\n\n  @property({ attribute: false }) public entries!: ConfigEntry[];\n\n  @state()\n  @consume({ context: fullEntitiesContext, subscribe: true })\n  entities!: EntityRegistryEntry[];\n\n  @property({ attribute: false }) public manifests!: IntegrationManifest[];\n\n  @property({ attribute: false }) public route!: Route;\n\n  @state() private _searchParms = new URLSearchParams(window.location.search);\n\n  @state() private _showDisabled = false;\n\n  @state() private _filter: string = history.state?.filter || \"\";\n\n  @state() private _numHiddenDevices = 0;\n\n  private _ignoreLocationChange = false;\n\n  public connectedCallback() {\n    super.connectedCallback();\n    window.addEventListener(\"location-changed\", this._locationChanged);\n    window.addEventListener(\"popstate\", this._popState);\n  }\n\n  disconnectedCallback(): void {\n    super.disconnectedCallback();\n    window.removeEventListener(\"location-changed\", this._locationChanged);\n    window.removeEventListener(\"popstate\", this._popState);\n  }\n\n  private _locationChanged = () => {\n    if (this._ignoreLocationChange) {\n      this._ignoreLocationChange = false;\n      return;\n    }\n    if (window.location.search.substring(1) !== this._searchParms.toString()) {\n      this._searchParms = new URLSearchParams(window.location.search);\n    }\n  };\n\n  private _popState = () => {\n    if (window.location.search.substring(1) !== this._searchParms.toString()) {\n      this._searchParms = new URLSearchParams(window.location.search);\n    }\n  };\n\n  private _activeFilters = memoizeOne(\n    (\n      entries: ConfigEntry[],\n      filters: URLSearchParams,\n      localize: LocalizeFunc\n    ): string[] | undefined => {\n      const filterTexts: string[] = [];\n      filters.forEach((value, key) => {\n        switch (key) {\n          case \"config_entry\": {\n            const configEntry = entries.find(\n              (entry) => entry.entry_id === value\n            );\n            if (!configEntry) {\n              break;\n            }\n            const integrationName = domainToName(localize, configEntry.domain);\n            filterTexts.push(\n              `${this.hass.localize(\n                \"ui.panel.config.integrations.integration\"\n              )} \"${integrationName}${\n                integrationName !== configEntry.title\n                  ? `: ${configEntry.title}`\n                  : \"\"\n              }\"`\n            );\n            break;\n          }\n          case \"domain\": {\n            filterTexts.push(\n              `${this.hass.localize(\n                \"ui.panel.config.integrations.integration\"\n              )} \"${domainToName(localize, value)}\"`\n            );\n          }\n        }\n      });\n      return filterTexts.length ? filterTexts : undefined;\n    }\n  );\n\n  private _devicesAndFilterDomains = memoizeOne(\n    (\n      devices: HomeAssistant[\"devices\"],\n      entries: ConfigEntry[],\n      entities: EntityRegistryEntry[],\n      areas: HomeAssistant[\"areas\"],\n      manifests: IntegrationManifest[],\n      filters: URLSearchParams,\n      showDisabled: boolean,\n      localize: LocalizeFunc\n    ) => {\n      // Some older installations might have devices pointing at invalid entryIDs\n      // So we guard for that.\n      let outputDevices: DeviceRowData[] = Object.values(devices);\n\n      // If nothing gets filtered, this is our correct count of devices\n      let startLength = outputDevices.length;\n\n      const deviceEntityLookup: DeviceEntityLookup = {};\n      for (const entity of entities) {\n        if (!entity.device_id) {\n          continue;\n        }\n        if (!(entity.device_id in deviceEntityLookup)) {\n          deviceEntityLookup[entity.device_id] = [];\n        }\n        deviceEntityLookup[entity.device_id].push(entity);\n      }\n\n      const entryLookup: { [entryId: string]: ConfigEntry } = {};\n      for (const entry of entries) {\n        entryLookup[entry.entry_id] = entry;\n      }\n\n      const manifestLookup: { [domain: string]: IntegrationManifest } = {};\n      for (const manifest of manifests) {\n        manifestLookup[manifest.domain] = manifest;\n      }\n\n      let filterConfigEntry: ConfigEntry | undefined;\n\n      const filteredDomains = new Set<string>();\n\n      filters.forEach((value, key) => {\n        if (key === \"config_entry\") {\n          outputDevices = outputDevices.filter((device) =>\n            device.config_entries.includes(value)\n          );\n          startLength = outputDevices.length;\n          filterConfigEntry = entries.find((entry) => entry.entry_id === value);\n          if (filterConfigEntry) {\n            filteredDomains.add(filterConfigEntry.domain);\n          }\n        }\n        if (key === \"domain\") {\n          const entryIds = entries\n            .filter((entry) => entry.domain === value)\n            .map((entry) => entry.entry_id);\n          outputDevices = outputDevices.filter((device) =>\n            device.config_entries.some((entryId) => entryIds.includes(entryId))\n          );\n          startLength = outputDevices.length;\n          filteredDomains.add(value);\n        }\n      });\n\n      if (!showDisabled) {\n        outputDevices = outputDevices.filter((device) => !device.disabled_by);\n      }\n\n      const formattedOutputDevices = outputDevices.map((device) => {\n        const deviceEntries = sortConfigEntries(\n          device.config_entries\n            .filter((entId) => entId in entryLookup)\n            .map((entId) => entryLookup[entId]),\n          manifestLookup\n        );\n        return {\n          ...device,\n          name: computeDeviceName(\n            device,\n            this.hass,\n            deviceEntityLookup[device.id]\n          ),\n          model:\n            device.model ||\n            `<${localize(\"ui.panel.config.devices.data_table.unknown\")}>`,\n          manufacturer:\n            device.manufacturer ||\n            `<${localize(\"ui.panel.config.devices.data_table.unknown\")}>`,\n          area:\n            device.area_id && areas[device.area_id]\n              ? areas[device.area_id].name\n              : \"—\",\n          integration: deviceEntries.length\n            ? deviceEntries\n                .map(\n                  (entry) =>\n                    localize(`component.${entry.domain}.title`) || entry.domain\n                )\n                .join(\", \")\n            : this.hass.localize(\n                \"ui.panel.config.devices.data_table.no_integration\"\n              ),\n          domains: deviceEntries.map((entry) => entry.domain),\n          battery_entity: [\n            this._batteryEntity(device.id, deviceEntityLookup),\n            this._batteryChargingEntity(device.id, deviceEntityLookup),\n          ],\n          battery_level:\n            this.hass.states[\n              this._batteryEntity(device.id, deviceEntityLookup) || \"\"\n            ]?.state,\n        };\n      });\n\n      this._numHiddenDevices = startLength - formattedOutputDevices.length;\n      return {\n        devicesOutput: formattedOutputDevices,\n        filteredConfigEntry: filterConfigEntry,\n        filteredDomains,\n      };\n    }\n  );\n\n  private _columns = memoizeOne(\n    (localize: LocalizeFunc, narrow: boolean, showDisabled: boolean) => {\n      type DeviceItem = ReturnType<\n        typeof this._devicesAndFilterDomains\n      >[\"devicesOutput\"][number];\n\n      const columns: DataTableColumnContainer<DeviceItem> = {\n        icon: {\n          title: \"\",\n          type: \"icon\",\n          template: (device) =>\n            device.domains.length\n              ? html`<img\n                  alt=\"\"\n                  crossorigin=\"anonymous\"\n                  referrerpolicy=\"no-referrer\"\n                  src=${brandsUrl({\n                    domain: device.domains[0],\n                    type: \"icon\",\n                    darkOptimized: this.hass.themes?.darkMode,\n                  })}\n                />`\n              : \"\",\n        },\n      };\n\n      if (narrow) {\n        columns.name = {\n          title: localize(\"ui.panel.config.devices.data_table.device\"),\n          main: true,\n          sortable: true,\n          filterable: true,\n          direction: \"asc\",\n          grows: true,\n          template: (device) => html`\n            ${device.name}\n            <div class=\"secondary\">${device.area} | ${device.integration}</div>\n          `,\n        };\n      } else {\n        columns.name = {\n          title: localize(\"ui.panel.config.devices.data_table.device\"),\n          main: true,\n          sortable: true,\n          filterable: true,\n          grows: true,\n          direction: \"asc\",\n        };\n      }\n\n      columns.manufacturer = {\n        title: localize(\"ui.panel.config.devices.data_table.manufacturer\"),\n        sortable: true,\n        hidden: narrow,\n        filterable: true,\n        width: \"15%\",\n      };\n      columns.model = {\n        title: localize(\"ui.panel.config.devices.data_table.model\"),\n        sortable: true,\n        hidden: narrow,\n        filterable: true,\n        width: \"15%\",\n      };\n      columns.area = {\n        title: localize(\"ui.panel.config.devices.data_table.area\"),\n        sortable: true,\n        hidden: narrow,\n        filterable: true,\n        width: \"15%\",\n      };\n      columns.integration = {\n        title: localize(\"ui.panel.config.devices.data_table.integration\"),\n        sortable: true,\n        hidden: narrow,\n        filterable: true,\n        width: \"15%\",\n      };\n      columns.battery_entity = {\n        title: localize(\"ui.panel.config.devices.data_table.battery\"),\n        sortable: true,\n        filterable: true,\n        type: \"numeric\",\n        width: narrow ? \"105px\" : \"15%\",\n        maxWidth: \"105px\",\n        valueColumn: \"battery_level\",\n        template: (device) => {\n          const batteryEntityPair = device.battery_entity;\n          const battery =\n            batteryEntityPair && batteryEntityPair[0]\n              ? this.hass.states[batteryEntityPair[0]]\n              : undefined;\n          const batteryDomain = battery\n            ? computeStateDomain(battery)\n            : undefined;\n          const batteryCharging =\n            batteryEntityPair && batteryEntityPair[1]\n              ? this.hass.states[batteryEntityPair[1]]\n              : undefined;\n\n          return battery &&\n            (batteryDomain === \"binary_sensor\" || !isNaN(battery.state as any))\n            ? html`\n                ${batteryDomain === \"sensor\"\n                  ? this.hass.formatEntityState(battery)\n                  : nothing}\n                <ha-battery-icon\n                  .hass=${this.hass}\n                  .batteryStateObj=${battery}\n                  .batteryChargingStateObj=${batteryCharging}\n                ></ha-battery-icon>\n              `\n            : html`—`;\n        },\n      };\n      if (showDisabled) {\n        columns.disabled_by = {\n          title: \"\",\n          label: localize(\"ui.panel.config.devices.data_table.disabled_by\"),\n          type: \"icon\",\n          template: (device) =>\n            device.disabled_by\n              ? html`<div\n                  tabindex=\"0\"\n                  style=\"display:inline-block; position: relative;\"\n                >\n                  <ha-svg-icon .path=${mdiCancel}></ha-svg-icon>\n                  <simple-tooltip animation-delay=\"0\" position=\"left\">\n                    ${this.hass.localize(\"ui.panel.config.devices.disabled\")}\n                  </simple-tooltip>\n                </div>`\n              : \"—\",\n        };\n      }\n      return columns;\n    }\n  );\n\n  public willUpdate(changedProps) {\n    if (changedProps.has(\"_searchParms\")) {\n      if (\n        this._searchParms.get(\"config_entry\") ||\n        this._searchParms.get(\"domain\")\n      ) {\n        // If we are requested to show the devices for a given config entry / domain,\n        // also show the disabled ones by default.\n        this._showDisabled = true;\n      }\n    }\n  }\n\n  protected render(): TemplateResult {\n    const { devicesOutput } = this._devicesAndFilterDomains(\n      this.hass.devices,\n      this.entries,\n      this.entities,\n      this.hass.areas,\n      this.manifests,\n      this._searchParms,\n      this._showDisabled,\n      this.hass.localize\n    );\n    const activeFilters = this._activeFilters(\n      this.entries,\n      this._searchParms,\n      this.hass.localize\n    );\n\n    return html`\n      <hass-tabs-subpage-data-table\n        .hass=${this.hass}\n        .narrow=${this.narrow}\n        .backPath=${this._searchParms.has(\"historyBack\")\n          ? undefined\n          : \"/config\"}\n        .tabs=${configSections.devices}\n        .route=${this.route}\n        .activeFilters=${activeFilters}\n        .numHidden=${this._numHiddenDevices}\n        .searchLabel=${this.hass.localize(\n          \"ui.panel.config.devices.picker.search\"\n        )}\n        .hiddenLabel=${this.hass.localize(\n          \"ui.panel.config.devices.picker.filter.hidden_devices\",\n          { number: this._numHiddenDevices }\n        )}\n        .columns=${this._columns(\n          this.hass.localize,\n          this.narrow,\n          this._showDisabled\n        )}\n        .data=${devicesOutput}\n        .filter=${this._filter}\n        @clear-filter=${this._clearFilter}\n        @search-changed=${this._handleSearchChange}\n        @row-click=${this._handleRowClicked}\n        clickable\n        hasFab\n      >\n        <ha-integration-overflow-menu\n          .hass=${this.hass}\n          slot=\"toolbar-icon\"\n        ></ha-integration-overflow-menu>\n        <ha-fab\n          slot=\"fab\"\n          .label=${this.hass.localize(\"ui.panel.config.devices.add_device\")}\n          extended\n          @click=${this._addDevice}\n        >\n          <ha-svg-icon slot=\"icon\" .path=${mdiPlus}></ha-svg-icon>\n        </ha-fab>\n        <ha-button-menu slot=\"filter-menu\" multi>\n          <ha-icon-button\n            slot=\"trigger\"\n            .label=${this.hass!.localize(\n              \"ui.panel.config.devices.picker.filter.filter\"\n            )}\n            .path=${mdiFilterVariant}\n          ></ha-icon-button>\n          ${this.narrow && activeFilters?.length\n            ? html`<mwc-list-item @click=${this._clearFilter}\n                >${this.hass.localize(\"ui.components.data-table.filtering_by\")}\n                ${activeFilters.join(\", \")}\n                <span class=\"clear\"\n                  >${this.hass.localize(\"ui.common.clear\")}</span\n                ></mwc-list-item\n              >`\n            : \"\"}\n          <ha-check-list-item\n            left\n            @request-selected=${this._showDisabledChanged}\n            .selected=${this._showDisabled}\n          >\n            ${this.hass!.localize(\n              \"ui.panel.config.devices.picker.filter.show_disabled\"\n            )}\n          </ha-check-list-item>\n        </ha-button-menu>\n      </hass-tabs-subpage-data-table>\n    `;\n  }\n\n  private _batteryEntity(\n    deviceId: string,\n    deviceEntityLookup: DeviceEntityLookup\n  ): string | undefined {\n    const batteryEntity = findBatteryEntity(\n      this.hass,\n      deviceEntityLookup[deviceId] || []\n    );\n    return batteryEntity ? batteryEntity.entity_id : undefined;\n  }\n\n  private _batteryChargingEntity(\n    deviceId: string,\n    deviceEntityLookup: DeviceEntityLookup\n  ): string | undefined {\n    const batteryChargingEntity = findBatteryChargingEntity(\n      this.hass,\n      deviceEntityLookup[deviceId] || []\n    );\n    return batteryChargingEntity ? batteryChargingEntity.entity_id : undefined;\n  }\n\n  private _handleRowClicked(ev: HASSDomEvent<RowClickedEvent>) {\n    const deviceId = ev.detail.id;\n    this._ignoreLocationChange = true;\n    navigate(`/config/devices/device/${deviceId}`);\n  }\n\n  private _showDisabledChanged(ev: CustomEvent<RequestSelectedDetail>) {\n    if (ev.detail.source !== \"property\") {\n      return;\n    }\n    this._showDisabled = ev.detail.selected;\n  }\n\n  private _handleSearchChange(ev: CustomEvent) {\n    this._filter = ev.detail.value;\n    history.replaceState({ filter: this._filter }, \"\");\n  }\n\n  private _clearFilter() {\n    if (\n      this._activeFilters(this.entries, this._searchParms, this.hass.localize)\n    ) {\n      navigate(window.location.pathname, { replace: true });\n    }\n    this._showDisabled = true;\n  }\n\n  private _addDevice() {\n    const { filteredConfigEntry, filteredDomains } =\n      this._devicesAndFilterDomains(\n        this.hass.devices,\n        this.entries,\n        this.entities,\n        this.hass.areas,\n        this.manifests,\n        this._searchParms,\n        this._showDisabled,\n        this.hass.localize\n      );\n    if (\n      filteredDomains.size === 1 &&\n      (PROTOCOL_INTEGRATIONS as ReadonlyArray<string>).includes(\n        [...filteredDomains][0]\n      )\n    ) {\n      protocolIntegrationPicked(this, this.hass, [...filteredDomains][0], {\n        config_entry: filteredConfigEntry?.entry_id,\n      });\n      return;\n    }\n    showAddIntegrationDialog(this, {\n      domain: this._searchParms.get(\"domain\") || undefined,\n    });\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      css`\n        ha-button-menu {\n          margin-left: 8px;\n          margin-inline-start: 8px;\n          margin-inline-end: initial;\n        }\n        .clear {\n          color: var(--primary-color);\n          padding-left: 8px;\n          padding-inline-start: 8px;\n          text-transform: uppercase;\n          direction: var(--direction);\n        }\n      `,\n      haStyle,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-config-devices-dashboard\": HaConfigDeviceDashboard;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}