{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/helpers/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _decorate from \"@babel/runtime/helpers/decorate\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13, _templateObject14;\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport { consume } from \"@lit-labs/context\";\nimport \"@material/mwc-list/mwc-list-item\";\nvar mdiAlertCircleCheck = \"M18.75 22.16L16 19.16L17.16 18L18.75 19.59L22.34 16L23.5 17.41L18.75 22.16M13 13V7H11V13H13M13 17V15H11V17H13M12 2C17.5 2 22 6.5 22 12L21.91 13.31C21.31 13.11 20.67 13 20 13C16.69 13 14 15.69 14 19C14 19.95 14.22 20.85 14.62 21.65C13.78 21.88 12.91 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2Z\";\nvar mdiArrowDown = \"M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z\";\nvar mdiArrowUp = \"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z\";\nvar mdiCheck = \"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\";\nvar mdiContentCopy = \"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\";\nvar mdiContentCut = \"M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z\";\nvar mdiContentDuplicate = \"M11,17H4A2,2 0 0,1 2,15V3A2,2 0 0,1 4,1H16V3H4V15H11V13L15,16L11,19V17M19,21V7H8V13H6V7A2,2 0 0,1 8,5H19A2,2 0 0,1 21,7V21A2,2 0 0,1 19,23H8A2,2 0 0,1 6,21V19H8V21H19Z\";\nvar mdiDelete = \"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z\";\nvar mdiDotsVertical = \"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z\";\nvar mdiPlay = \"M8,5.14V19.14L19,12.14L8,5.14Z\";\nvar mdiPlayCircleOutline = \"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z\";\nvar mdiRenameBox = \"M18,17H10.5L12.5,15H18M6,17V14.5L13.88,6.65C14.07,6.45 14.39,6.45 14.59,6.65L16.35,8.41C16.55,8.61 16.55,8.92 16.35,9.12L8.47,17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z\";\nvar mdiStopCircleOutline = \"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4M9,9V15H15V9\";\nimport deepClone from \"deep-clone-simple\";\nimport { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { storage } from \"../../../../common/decorators/storage\";\nimport { dynamicElement } from \"../../../../common/dom/dynamic-element-directive\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { capitalizeFirstLetter } from \"../../../../common/string/capitalize-first-letter\";\nimport { handleStructError } from \"../../../../common/structs/handle-errors\";\nimport \"../../../../components/ha-alert\";\nimport \"../../../../components/ha-button-menu\";\nimport \"../../../../components/ha-card\";\nimport \"../../../../components/ha-expansion-panel\";\nimport \"../../../../components/ha-icon-button\";\nimport \"../../../../components/ha-service-icon\";\nimport { ACTION_ICONS, YAML_ONLY_ACTION_TYPES } from \"../../../../data/action\";\nimport { validateConfig } from \"../../../../data/config\";\nimport { fullEntitiesContext } from \"../../../../data/context\";\nimport { getActionType } from \"../../../../data/script\";\nimport { describeAction } from \"../../../../data/script_i18n\";\nimport { callExecuteScript } from \"../../../../data/service\";\nimport { showAlertDialog, showConfirmationDialog, showPromptDialog } from \"../../../../dialogs/generic/show-dialog-box\";\nimport { haStyle } from \"../../../../resources/styles\";\nimport { showToast } from \"../../../../util/toast\";\nimport \"./types/ha-automation-action-activate_scene\";\nimport \"./types/ha-automation-action-choose\";\nimport \"./types/ha-automation-action-condition\";\nimport \"./types/ha-automation-action-delay\";\nimport \"./types/ha-automation-action-device_id\";\nimport \"./types/ha-automation-action-event\";\nimport \"./types/ha-automation-action-if\";\nimport \"./types/ha-automation-action-parallel\";\nimport \"./types/ha-automation-action-play_media\";\nimport \"./types/ha-automation-action-repeat\";\nimport \"./types/ha-automation-action-service\";\nimport \"./types/ha-automation-action-set_conversation_response\";\nimport \"./types/ha-automation-action-stop\";\nimport \"./types/ha-automation-action-wait_for_trigger\";\nimport \"./types/ha-automation-action-wait_template\";\nexport var getType = function getType(action) {\n  if (!action) {\n    return undefined;\n  }\n  if (\"service\" in action || \"scene\" in action) {\n    return getActionType(action);\n  }\n  if ([\"and\", \"or\", \"not\"].some(function (key) {\n    return key in action;\n  })) {\n    return \"condition\";\n  }\n  return Object.keys(ACTION_ICONS).find(function (option) {\n    return option in action;\n  });\n};\nexport var handleChangeEvent = function handleChangeEvent(element, ev) {\n  var _ev$target, _ev$detail;\n  ev.stopPropagation();\n  var name = (_ev$target = ev.target) === null || _ev$target === void 0 ? void 0 : _ev$target.name;\n  if (!name) {\n    return;\n  }\n  var newVal = ((_ev$detail = ev.detail) === null || _ev$detail === void 0 ? void 0 : _ev$detail.value) || ev.target.value;\n  if ((element.action[name] || \"\") === newVal) {\n    return;\n  }\n  var newAction;\n  if (!newVal) {\n    newAction = Object.assign({}, element.action);\n    delete newAction[name];\n  } else {\n    newAction = Object.assign(Object.assign({}, element.action), {}, _defineProperty({}, name, newVal));\n  }\n  fireEvent(element, \"value-changed\", {\n    value: newAction\n  });\n};\nvar preventDefault = function preventDefault(ev) {\n  return ev.preventDefault();\n};\nvar HaAutomationActionRow = _decorate([customElement(\"ha-automation-action-row\")], function (_initialize, _LitElement) {\n  var HaAutomationActionRow = /*#__PURE__*/function (_LitElement2) {\n    _inherits(HaAutomationActionRow, _LitElement2);\n    function HaAutomationActionRow() {\n      var _this;\n      _classCallCheck(this, HaAutomationActionRow);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _callSuper(this, HaAutomationActionRow, [].concat(args));\n      _initialize(_assertThisInitialized(_this));\n      return _this;\n    }\n    return _createClass(HaAutomationActionRow);\n  }(_LitElement);\n  return {\n    F: HaAutomationActionRow,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"action\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"narrow\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"disabled\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Array\n      })],\n      key: \"path\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"first\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"last\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [storage({\n        key: \"automationClipboard\",\n        state: false,\n        subscribe: true,\n        storage: \"sessionStorage\"\n      })],\n      key: \"_clipboard\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state(), consume({\n        context: fullEntitiesContext,\n        subscribe: true\n      })],\n      key: \"_entityReg\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_warnings\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_uiModeAvailable\",\n      value: function value() {\n        return true;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_yamlMode\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [query(\"ha-yaml-editor\")],\n      key: \"_yamlEditor\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProperties) {\n        if (!changedProperties.has(\"action\")) {\n          return;\n        }\n        var type = getType(this.action);\n        this._uiModeAvailable = type !== undefined && !YAML_ONLY_ACTION_TYPES.has(type);\n        if (!this._uiModeAvailable && !this._yamlMode) {\n          this._yamlMode = true;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProperties) {\n        if (!changedProperties.has(\"action\")) {\n          return;\n        }\n        if (this._yamlMode) {\n          var yamlEditor = this._yamlEditor;\n          if (yamlEditor && yamlEditor.value !== this.action) {\n            yamlEditor.setValue(this.action);\n          }\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (!this.action) return nothing;\n        var type = getType(this.action);\n        var yamlMode = this._yamlMode;\n        return html(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      <ha-card outlined>\\n        \", \"\\n        <ha-expansion-panel leftChevron>\\n          <h3 slot=\\\"header\\\">\\n            \", \"\\n            \", \"\\n          </h3>\\n\\n          <slot name=\\\"icons\\\" slot=\\\"icons\\\"></slot>\\n\\n          \", \"\\n\\n          <ha-button-menu\\n            slot=\\\"icons\\\"\\n            @action=\", \"\\n            @click=\", \"\\n            fixed\\n          >\\n            <ha-icon-button\\n              slot=\\\"trigger\\\"\\n              .label=\", \"\\n              .path=\", \"\\n            ></ha-icon-button>\\n            <mwc-list-item graphic=\\\"icon\\\">\\n              \", \"\\n              <ha-svg-icon slot=\\\"graphic\\\" .path=\", \"></ha-svg-icon>\\n            </mwc-list-item>\\n\\n            <mwc-list-item graphic=\\\"icon\\\" .disabled=\", \">\\n              \", \"\\n              <ha-svg-icon slot=\\\"graphic\\\" .path=\", \"></ha-svg-icon>\\n            </mwc-list-item>\\n\\n            <li divider role=\\\"separator\\\"></li>\\n\\n            <mwc-list-item graphic=\\\"icon\\\" .disabled=\", \">\\n              \", \"\\n              <ha-svg-icon\\n                slot=\\\"graphic\\\"\\n                .path=\", \"\\n              ></ha-svg-icon>\\n            </mwc-list-item>\\n\\n            <mwc-list-item graphic=\\\"icon\\\" .disabled=\", \">\\n              \", \"\\n              <ha-svg-icon slot=\\\"graphic\\\" .path=\", \"></ha-svg-icon>\\n            </mwc-list-item>\\n\\n            <mwc-list-item graphic=\\\"icon\\\" .disabled=\", \">\\n              \", \"\\n              <ha-svg-icon slot=\\\"graphic\\\" .path=\", \"></ha-svg-icon>\\n            </mwc-list-item>\\n\\n            <mwc-list-item\\n              graphic=\\\"icon\\\"\\n              .disabled=\", \"\\n            >\\n              \", \"\\n              <ha-svg-icon slot=\\\"graphic\\\" .path=\", \"></ha-svg-icon\\n            ></mwc-list-item>\\n\\n            <mwc-list-item\\n              graphic=\\\"icon\\\"\\n              .disabled=\", \"\\n            >\\n              \", \"\\n              <ha-svg-icon slot=\\\"graphic\\\" .path=\", \"></ha-svg-icon\\n            ></mwc-list-item>\\n\\n            <li divider role=\\\"separator\\\"></li>\\n\\n            <mwc-list-item .disabled=\", \" graphic=\\\"icon\\\">\\n              \", \"\\n              \", \"\\n            </mwc-list-item>\\n\\n            <mwc-list-item .disabled=\", \" graphic=\\\"icon\\\">\\n              \", \"\\n              \", \"\\n            </mwc-list-item>\\n\\n            <li divider role=\\\"separator\\\"></li>\\n\\n            <mwc-list-item graphic=\\\"icon\\\" .disabled=\", \">\\n              \", \"\\n              <ha-svg-icon\\n                slot=\\\"graphic\\\"\\n                .path=\", \"\\n              ></ha-svg-icon>\\n            </mwc-list-item>\\n            <mwc-list-item\\n              class=\\\"warning\\\"\\n              graphic=\\\"icon\\\"\\n              .disabled=\", \"\\n            >\\n              \", \"\\n              <ha-svg-icon\\n                class=\\\"warning\\\"\\n                slot=\\\"graphic\\\"\\n                .path=\", \"\\n              ></ha-svg-icon>\\n            </mwc-list-item>\\n          </ha-button-menu>\\n\\n          <div\\n            class=\", \"\\n          >\\n            \", \"\\n            \", \"\\n          </div>\\n        </ha-expansion-panel>\\n      </ha-card>\\n    \"])), this.action.enabled === false ? html(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n              <div class=\\\"disabled-bar\\\">\\n                \", \"\\n              </div>\\n            \"])), this.hass.localize(\"ui.panel.config.automation.editor.actions.disabled\")) : nothing, type === \"service\" && \"service\" in this.action && this.action.service ? html(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"<ha-service-icon\\n                  class=\\\"action-icon\\\"\\n                  .hass=\", \"\\n                  .service=\", \"\\n                ></ha-service-icon>\"])), this.hass, this.action.service) : html(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"<ha-svg-icon\\n                  class=\\\"action-icon\\\"\\n                  .path=\", \"\\n                ></ha-svg-icon>\"])), ACTION_ICONS[type]), capitalizeFirstLetter(describeAction(this.hass, this._entityReg, this.action)), type !== \"condition\" && this.action.continue_on_error === true ? html(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"<div slot=\\\"icons\\\">\\n                <ha-svg-icon .path=\", \"></ha-svg-icon>\\n                <simple-tooltip animation-delay=\\\"0\\\">\\n                  \", \"\\n                </simple-tooltip>\\n              </div> \"])), mdiAlertCircleCheck, this.hass.localize(\"ui.panel.config.automation.editor.actions.continue_on_error\")) : nothing, this._handleAction, preventDefault, this.hass.localize(\"ui.common.menu\"), mdiDotsVertical, this.hass.localize(\"ui.panel.config.automation.editor.actions.run\"), mdiPlay, this.disabled, this.hass.localize(\"ui.panel.config.automation.editor.actions.rename\"), mdiRenameBox, this.disabled, this.hass.localize(\"ui.panel.config.automation.editor.actions.duplicate\"), mdiContentDuplicate, this.disabled, this.hass.localize(\"ui.panel.config.automation.editor.triggers.copy\"), mdiContentCopy, this.disabled, this.hass.localize(\"ui.panel.config.automation.editor.triggers.cut\"), mdiContentCut, this.disabled || this.first, this.hass.localize(\"ui.panel.config.automation.editor.move_up\"), mdiArrowUp, this.disabled || this.last, this.hass.localize(\"ui.panel.config.automation.editor.move_down\"), mdiArrowDown, !this._uiModeAvailable, this.hass.localize(\"ui.panel.config.automation.editor.edit_ui\"), !yamlMode ? html(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"<ha-svg-icon\\n                    class=\\\"selected_menu_item\\\"\\n                    slot=\\\"graphic\\\"\\n                    .path=\", \"\\n                  ></ha-svg-icon>\"])), mdiCheck) : \"\", !this._uiModeAvailable, this.hass.localize(\"ui.panel.config.automation.editor.edit_yaml\"), yamlMode ? html(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"<ha-svg-icon\\n                    class=\\\"selected_menu_item\\\"\\n                    slot=\\\"graphic\\\"\\n                    .path=\", \"\\n                  ></ha-svg-icon>\"])), mdiCheck) : \"\", this.disabled, this.action.enabled === false ? this.hass.localize(\"ui.panel.config.automation.editor.actions.enable\") : this.hass.localize(\"ui.panel.config.automation.editor.actions.disable\"), this.action.enabled === false ? mdiPlayCircleOutline : mdiStopCircleOutline, this.disabled, this.hass.localize(\"ui.panel.config.automation.editor.actions.delete\"), mdiDelete, classMap({\n          \"card-content\": true,\n          disabled: this.action.enabled === false\n        }), this._warnings ? html(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"<ha-alert\\n                  alert-type=\\\"warning\\\"\\n                  .title=\", \"\\n                >\\n                  \", \"\\n                  \", \"\\n                </ha-alert>\"])), this.hass.localize(\"ui.errors.config.editor_not_supported\"), this._warnings.length > 0 && this._warnings[0] !== undefined ? html(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\" <ul>\\n                        \", \"\\n                      </ul>\"])), this._warnings.map(function (warning) {\n          return html(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"<li>\", \"</li>\"])), warning);\n        })) : \"\", this.hass.localize(\"ui.errors.config.edit_in_yaml_supported\")) : \"\", yamlMode ? html(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\"\\n                  \", \"\\n                  <ha-yaml-editor\\n                    .hass=\", \"\\n                    .defaultValue=\", \"\\n                    .readOnly=\", \"\\n                    @value-changed=\", \"\\n                  ></ha-yaml-editor>\\n                \"])), type === undefined ? html(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"\\n                        \", \"\\n                      \"])), this.hass.localize(\"ui.panel.config.automation.editor.actions.unsupported_action\")) : \"\", this.hass, this.action, this.disabled, this._onYamlChange) : html(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([\"\\n                  <div\\n                    @ui-mode-not-available=\", \"\\n                    @value-changed=\", \"\\n                  >\\n                    \", \"\\n                  </div>\\n                \"])), this._handleUiModeNotAvailable, this._onUiChanged, dynamicElement(\"ha-automation-action-\".concat(type), {\n          hass: this.hass,\n          action: this.action,\n          narrow: this.narrow,\n          disabled: this.disabled,\n          path: this.path\n        })));\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleUiModeNotAvailable\",\n      value: function _handleUiModeNotAvailable(ev) {\n        // Prevent possible parent action-row from switching to yamlMode\n        ev.stopPropagation();\n        this._warnings = handleStructError(this.hass, ev.detail).warnings;\n        if (!this._yamlMode) {\n          this._yamlMode = true;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleAction\",\n      value: function () {\n        var _handleAction2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(ev) {\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                _context.t0 = ev.detail.index;\n                _context.next = _context.t0 === 0 ? 3 : _context.t0 === 1 ? 5 : _context.t0 === 2 ? 8 : _context.t0 === 3 ? 10 : _context.t0 === 4 ? 12 : _context.t0 === 5 ? 15 : _context.t0 === 6 ? 17 : _context.t0 === 7 ? 19 : _context.t0 === 8 ? 22 : _context.t0 === 9 ? 25 : _context.t0 === 10 ? 27 : 29;\n                break;\n              case 3:\n                this._runAction();\n                return _context.abrupt(\"break\", 29);\n              case 5:\n                _context.next = 7;\n                return this._renameAction();\n              case 7:\n                return _context.abrupt(\"break\", 29);\n              case 8:\n                fireEvent(this, \"duplicate\");\n                return _context.abrupt(\"break\", 29);\n              case 10:\n                this._setClipboard();\n                return _context.abrupt(\"break\", 29);\n              case 12:\n                this._setClipboard();\n                fireEvent(this, \"value-changed\", {\n                  value: null\n                });\n                return _context.abrupt(\"break\", 29);\n              case 15:\n                fireEvent(this, \"move-up\");\n                return _context.abrupt(\"break\", 29);\n              case 17:\n                fireEvent(this, \"move-down\");\n                return _context.abrupt(\"break\", 29);\n              case 19:\n                this._switchUiMode();\n                this.expand();\n                return _context.abrupt(\"break\", 29);\n              case 22:\n                this._switchYamlMode();\n                this.expand();\n                return _context.abrupt(\"break\", 29);\n              case 25:\n                this._onDisable();\n                return _context.abrupt(\"break\", 29);\n              case 27:\n                this._onDelete();\n                return _context.abrupt(\"break\", 29);\n              case 29:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee, this);\n        }));\n        function _handleAction(_x) {\n          return _handleAction2.apply(this, arguments);\n        }\n        return _handleAction;\n      }()\n    }, {\n      kind: \"method\",\n      key: \"_setClipboard\",\n      value: function _setClipboard() {\n        this._clipboard = Object.assign(Object.assign({}, this._clipboard), {}, {\n          action: deepClone(this.action)\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_onDisable\",\n      value: function _onDisable() {\n        var _this$action$enabled;\n        var enabled = !((_this$action$enabled = this.action.enabled) !== null && _this$action$enabled !== void 0 ? _this$action$enabled : true);\n        var value = Object.assign(Object.assign({}, this.action), {}, {\n          enabled: enabled\n        });\n        fireEvent(this, \"value-changed\", {\n          value: value\n        });\n        if (this._yamlMode) {\n          var _this$_yamlEditor;\n          (_this$_yamlEditor = this._yamlEditor) === null || _this$_yamlEditor === void 0 || _this$_yamlEditor.setValue(value);\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_runAction\",\n      value: function () {\n        var _runAction2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n          var validated;\n          return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n            while (1) switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return validateConfig(this.hass, {\n                  action: this.action\n                });\n              case 2:\n                validated = _context2.sent;\n                if (validated.action.valid) {\n                  _context2.next = 6;\n                  break;\n                }\n                showAlertDialog(this, {\n                  title: this.hass.localize(\"ui.panel.config.automation.editor.actions.invalid_action\"),\n                  text: validated.action.error\n                });\n                return _context2.abrupt(\"return\");\n              case 6:\n                _context2.prev = 6;\n                _context2.next = 9;\n                return callExecuteScript(this.hass, this.action);\n              case 9:\n                _context2.next = 15;\n                break;\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](6);\n                showAlertDialog(this, {\n                  title: this.hass.localize(\"ui.panel.config.automation.editor.actions.run_action_error\"),\n                  text: _context2.t0.message || _context2.t0\n                });\n                return _context2.abrupt(\"return\");\n              case 15:\n                showToast(this, {\n                  message: this.hass.localize(\"ui.panel.config.automation.editor.actions.run_action_success\")\n                });\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }, _callee2, this, [[6, 11]]);\n        }));\n        function _runAction() {\n          return _runAction2.apply(this, arguments);\n        }\n        return _runAction;\n      }()\n    }, {\n      kind: \"method\",\n      key: \"_onDelete\",\n      value: function _onDelete() {\n        var _this2 = this;\n        showConfirmationDialog(this, {\n          title: this.hass.localize(\"ui.panel.config.automation.editor.actions.delete_confirm_title\"),\n          text: this.hass.localize(\"ui.panel.config.automation.editor.actions.delete_confirm_text\"),\n          dismissText: this.hass.localize(\"ui.common.cancel\"),\n          confirmText: this.hass.localize(\"ui.common.delete\"),\n          destructive: true,\n          confirm: function confirm() {\n            fireEvent(_this2, \"value-changed\", {\n              value: null\n            });\n          }\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_onYamlChange\",\n      value: function _onYamlChange(ev) {\n        ev.stopPropagation();\n        if (!ev.detail.isValid) {\n          return;\n        }\n        fireEvent(this, \"value-changed\", {\n          value: ev.detail.value\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_onUiChanged\",\n      value: function _onUiChanged(ev) {\n        ev.stopPropagation();\n        var value = Object.assign(Object.assign({}, this.action.alias ? {\n          alias: this.action.alias\n        } : {}), ev.detail.value);\n        fireEvent(this, \"value-changed\", {\n          value: value\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_switchUiMode\",\n      value: function _switchUiMode() {\n        this._warnings = undefined;\n        this._yamlMode = false;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_switchYamlMode\",\n      value: function _switchYamlMode() {\n        this._warnings = undefined;\n        this._yamlMode = true;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renameAction\",\n      value: function () {\n        var _renameAction2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n          var alias, value, _this$_yamlEditor2;\n          return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n            while (1) switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return showPromptDialog(this, {\n                  title: this.hass.localize(\"ui.panel.config.automation.editor.actions.change_alias\"),\n                  inputLabel: this.hass.localize(\"ui.panel.config.automation.editor.actions.alias\"),\n                  inputType: \"string\",\n                  placeholder: capitalizeFirstLetter(describeAction(this.hass, this._entityReg, this.action, undefined, true)),\n                  defaultValue: this.action.alias,\n                  confirmText: this.hass.localize(\"ui.common.submit\")\n                });\n              case 2:\n                alias = _context3.sent;\n                if (alias !== null) {\n                  value = Object.assign({}, this.action);\n                  if (alias === \"\") {\n                    delete value.alias;\n                  } else {\n                    value.alias = alias;\n                  }\n                  fireEvent(this, \"value-changed\", {\n                    value: value\n                  });\n                  if (this._yamlMode) {\n                    (_this$_yamlEditor2 = this._yamlEditor) === null || _this$_yamlEditor2 === void 0 || _this$_yamlEditor2.setValue(value);\n                  }\n                }\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }, _callee3, this);\n        }));\n        function _renameAction() {\n          return _renameAction2.apply(this, arguments);\n        }\n        return _renameAction;\n      }()\n    }, {\n      kind: \"method\",\n      key: \"expand\",\n      value: function expand() {\n        var _this3 = this;\n        this.updateComplete.then(function () {\n          _this3.shadowRoot.querySelector(\"ha-expansion-panel\").expanded = true;\n        });\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return [haStyle, css(_templateObject14 || (_templateObject14 = _taggedTemplateLiteral([\"\\n        ha-button-menu,\\n        ha-icon-button {\\n          --mdc-theme-text-primary-on-background: var(--primary-text-color);\\n        }\\n        .disabled {\\n          opacity: 0.5;\\n          pointer-events: none;\\n        }\\n        ha-expansion-panel {\\n          --expansion-panel-summary-padding: 0 0 0 8px;\\n          --expansion-panel-content-padding: 0;\\n        }\\n        h3 {\\n          margin: 0;\\n          font-size: inherit;\\n          font-weight: inherit;\\n        }\\n        .action-icon {\\n          display: none;\\n        }\\n        @media (min-width: 870px) {\\n          .action-icon {\\n            display: inline-block;\\n            color: var(--secondary-text-color);\\n            opacity: 0.9;\\n            margin-right: 8px;\\n            margin-inline-end: 8px;\\n            margin-inline-start: initial;\\n          }\\n        }\\n        .card-content {\\n          padding: 16px;\\n        }\\n        .disabled-bar {\\n          background: var(--divider-color, #e0e0e0);\\n          text-align: center;\\n          border-top-right-radius: var(--ha-card-border-radius);\\n          border-top-left-radius: var(--ha-card-border-radius);\\n        }\\n\\n        mwc-list-item[disabled] {\\n          --mdc-theme-text-primary-on-background: var(--disabled-text-color);\\n        }\\n        mwc-list-item.hidden {\\n          display: none;\\n        }\\n        .warning ul {\\n          margin: 4px 0;\\n        }\\n        .selected_menu_item {\\n          color: var(--primary-color);\\n        }\\n        li[role=\\\"separator\\\"] {\\n          border-bottom-color: var(--divider-color);\\n        }\\n      \"])))];\n      }\n    }]\n  };\n}, LitElement);\nexport { HaAutomationActionRow as default };","map":{"version":3,"names":["consume","mdiAlertCircleCheck","mdiArrowDown","mdiArrowUp","mdiCheck","mdiContentCopy","mdiContentCut","mdiContentDuplicate","mdiDelete","mdiDotsVertical","mdiPlay","mdiPlayCircleOutline","mdiRenameBox","mdiStopCircleOutline","deepClone","LitElement","css","html","nothing","customElement","property","query","state","classMap","storage","dynamicElement","fireEvent","capitalizeFirstLetter","handleStructError","ACTION_ICONS","YAML_ONLY_ACTION_TYPES","validateConfig","fullEntitiesContext","getActionType","describeAction","callExecuteScript","showAlertDialog","showConfirmationDialog","showPromptDialog","haStyle","showToast","getType","action","undefined","some","key","Object","keys","find","option","handleChangeEvent","element","ev","_ev$target","_ev$detail","stopPropagation","name","target","newVal","detail","value","newAction","assign","_defineProperty","preventDefault","HaAutomationActionRow","_decorate","_initialize","_LitElement","_LitElement2","_inherits","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","_assertThisInitialized","_createClass","F","d","kind","decorators","attribute","type","Boolean","subscribe","context","willUpdate","changedProperties","has","_uiModeAvailable","_yamlMode","updated","yamlEditor","_yamlEditor","setValue","render","yamlMode","_templateObject","_taggedTemplateLiteral","enabled","_templateObject2","hass","localize","service","_templateObject3","_templateObject4","_entityReg","continue_on_error","_templateObject5","_handleAction","disabled","first","last","_templateObject6","_templateObject7","_warnings","_templateObject8","_templateObject9","map","warning","_templateObject10","_templateObject11","_templateObject12","_onYamlChange","_templateObject13","_handleUiModeNotAvailable","_onUiChanged","narrow","path","warnings","_handleAction2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","t0","index","_runAction","abrupt","_renameAction","_setClipboard","_switchUiMode","expand","_switchYamlMode","_onDisable","_onDelete","stop","_x","apply","_clipboard","_this$action$enabled","_this$_yamlEditor","_runAction2","_callee2","validated","_callee2$","_context2","sent","valid","title","text","error","message","_this2","dismissText","confirmText","destructive","confirm","isValid","alias","_renameAction2","_callee3","_this$_yamlEditor2","_callee3$","_context3","inputLabel","inputType","placeholder","defaultValue","_this3","updateComplete","then","shadowRoot","querySelector","expanded","static","styles","_templateObject14","default"],"sources":["/workspaces/frontend/src/panels/config/automation/action/ha-automation-action-row.ts"],"sourcesContent":["import { consume } from \"@lit-labs/context\";\nimport { ActionDetail } from \"@material/mwc-list/mwc-list-foundation\";\nimport \"@material/mwc-list/mwc-list-item\";\nimport {\n  mdiAlertCircleCheck,\n  mdiArrowDown,\n  mdiArrowUp,\n  mdiCheck,\n  mdiContentCopy,\n  mdiContentCut,\n  mdiContentDuplicate,\n  mdiDelete,\n  mdiDotsVertical,\n  mdiPlay,\n  mdiPlayCircleOutline,\n  mdiRenameBox,\n  mdiStopCircleOutline,\n} from \"@mdi/js\";\nimport deepClone from \"deep-clone-simple\";\nimport {\n  CSSResultGroup,\n  LitElement,\n  PropertyValues,\n  css,\n  html,\n  nothing,\n} from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { storage } from \"../../../../common/decorators/storage\";\nimport { dynamicElement } from \"../../../../common/dom/dynamic-element-directive\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { capitalizeFirstLetter } from \"../../../../common/string/capitalize-first-letter\";\nimport { handleStructError } from \"../../../../common/structs/handle-errors\";\nimport \"../../../../components/ha-alert\";\nimport \"../../../../components/ha-button-menu\";\nimport \"../../../../components/ha-card\";\nimport \"../../../../components/ha-expansion-panel\";\nimport \"../../../../components/ha-icon-button\";\nimport \"../../../../components/ha-service-icon\";\nimport type { HaYamlEditor } from \"../../../../components/ha-yaml-editor\";\nimport { ACTION_ICONS, YAML_ONLY_ACTION_TYPES } from \"../../../../data/action\";\nimport { AutomationClipboard } from \"../../../../data/automation\";\nimport { validateConfig } from \"../../../../data/config\";\nimport { fullEntitiesContext } from \"../../../../data/context\";\nimport { EntityRegistryEntry } from \"../../../../data/entity_registry\";\nimport {\n  Action,\n  NonConditionAction,\n  getActionType,\n} from \"../../../../data/script\";\nimport { describeAction } from \"../../../../data/script_i18n\";\nimport { callExecuteScript } from \"../../../../data/service\";\nimport {\n  showAlertDialog,\n  showConfirmationDialog,\n  showPromptDialog,\n} from \"../../../../dialogs/generic/show-dialog-box\";\nimport { haStyle } from \"../../../../resources/styles\";\nimport type { HomeAssistant, ItemPath } from \"../../../../types\";\nimport { showToast } from \"../../../../util/toast\";\nimport \"./types/ha-automation-action-activate_scene\";\nimport \"./types/ha-automation-action-choose\";\nimport \"./types/ha-automation-action-condition\";\nimport \"./types/ha-automation-action-delay\";\nimport \"./types/ha-automation-action-device_id\";\nimport \"./types/ha-automation-action-event\";\nimport \"./types/ha-automation-action-if\";\nimport \"./types/ha-automation-action-parallel\";\nimport \"./types/ha-automation-action-play_media\";\nimport \"./types/ha-automation-action-repeat\";\nimport \"./types/ha-automation-action-service\";\nimport \"./types/ha-automation-action-set_conversation_response\";\nimport \"./types/ha-automation-action-stop\";\nimport \"./types/ha-automation-action-wait_for_trigger\";\nimport \"./types/ha-automation-action-wait_template\";\n\nexport const getType = (action: Action | undefined) => {\n  if (!action) {\n    return undefined;\n  }\n  if (\"service\" in action || \"scene\" in action) {\n    return getActionType(action) as \"activate_scene\" | \"service\" | \"play_media\";\n  }\n  if ([\"and\", \"or\", \"not\"].some((key) => key in action)) {\n    return \"condition\" as const;\n  }\n  return Object.keys(ACTION_ICONS).find(\n    (option) => option in action\n  ) as keyof typeof ACTION_ICONS;\n};\n\nexport interface ActionElement extends LitElement {\n  action: Action;\n}\n\nexport const handleChangeEvent = (element: ActionElement, ev: CustomEvent) => {\n  ev.stopPropagation();\n  const name = (ev.target as any)?.name;\n  if (!name) {\n    return;\n  }\n  const newVal = ev.detail?.value || (ev.target as any).value;\n\n  if ((element.action[name] || \"\") === newVal) {\n    return;\n  }\n\n  let newAction: Action;\n  if (!newVal) {\n    newAction = { ...element.action };\n    delete newAction[name];\n  } else {\n    newAction = { ...element.action, [name]: newVal };\n  }\n  fireEvent(element, \"value-changed\", { value: newAction });\n};\n\nconst preventDefault = (ev) => ev.preventDefault();\n\n@customElement(\"ha-automation-action-row\")\nexport default class HaAutomationActionRow extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public action!: Action;\n\n  @property({ type: Boolean }) public narrow = false;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Array }) public path?: ItemPath;\n\n  @property({ type: Boolean }) public first?: boolean;\n\n  @property({ type: Boolean }) public last?: boolean;\n\n  @storage({\n    key: \"automationClipboard\",\n    state: false,\n    subscribe: true,\n    storage: \"sessionStorage\",\n  })\n  public _clipboard?: AutomationClipboard;\n\n  @state()\n  @consume({ context: fullEntitiesContext, subscribe: true })\n  _entityReg!: EntityRegistryEntry[];\n\n  @state() private _warnings?: string[];\n\n  @state() private _uiModeAvailable = true;\n\n  @state() private _yamlMode = false;\n\n  @query(\"ha-yaml-editor\") private _yamlEditor?: HaYamlEditor;\n\n  protected willUpdate(changedProperties: PropertyValues) {\n    if (!changedProperties.has(\"action\")) {\n      return;\n    }\n    const type = getType(this.action);\n    this._uiModeAvailable =\n      type !== undefined && !YAML_ONLY_ACTION_TYPES.has(type as any);\n    if (!this._uiModeAvailable && !this._yamlMode) {\n      this._yamlMode = true;\n    }\n  }\n\n  protected updated(changedProperties: PropertyValues) {\n    if (!changedProperties.has(\"action\")) {\n      return;\n    }\n    if (this._yamlMode) {\n      const yamlEditor = this._yamlEditor;\n      if (yamlEditor && yamlEditor.value !== this.action) {\n        yamlEditor.setValue(this.action);\n      }\n    }\n  }\n\n  protected render() {\n    if (!this.action) return nothing;\n\n    const type = getType(this.action);\n    const yamlMode = this._yamlMode;\n\n    return html`\n      <ha-card outlined>\n        ${this.action.enabled === false\n          ? html`\n              <div class=\"disabled-bar\">\n                ${this.hass.localize(\n                  \"ui.panel.config.automation.editor.actions.disabled\"\n                )}\n              </div>\n            `\n          : nothing}\n        <ha-expansion-panel leftChevron>\n          <h3 slot=\"header\">\n            ${type === \"service\" &&\n            \"service\" in this.action &&\n            this.action.service\n              ? html`<ha-service-icon\n                  class=\"action-icon\"\n                  .hass=${this.hass}\n                  .service=${this.action.service}\n                ></ha-service-icon>`\n              : html`<ha-svg-icon\n                  class=\"action-icon\"\n                  .path=${ACTION_ICONS[type!]}\n                ></ha-svg-icon>`}\n            ${capitalizeFirstLetter(\n              describeAction(this.hass, this._entityReg, this.action)\n            )}\n          </h3>\n\n          <slot name=\"icons\" slot=\"icons\"></slot>\n\n          ${type !== \"condition\" &&\n          (this.action as NonConditionAction).continue_on_error === true\n            ? html`<div slot=\"icons\">\n                <ha-svg-icon .path=${mdiAlertCircleCheck}></ha-svg-icon>\n                <simple-tooltip animation-delay=\"0\">\n                  ${this.hass.localize(\n                    \"ui.panel.config.automation.editor.actions.continue_on_error\"\n                  )}\n                </simple-tooltip>\n              </div> `\n            : nothing}\n\n          <ha-button-menu\n            slot=\"icons\"\n            @action=${this._handleAction}\n            @click=${preventDefault}\n            fixed\n          >\n            <ha-icon-button\n              slot=\"trigger\"\n              .label=${this.hass.localize(\"ui.common.menu\")}\n              .path=${mdiDotsVertical}\n            ></ha-icon-button>\n            <mwc-list-item graphic=\"icon\">\n              ${this.hass.localize(\n                \"ui.panel.config.automation.editor.actions.run\"\n              )}\n              <ha-svg-icon slot=\"graphic\" .path=${mdiPlay}></ha-svg-icon>\n            </mwc-list-item>\n\n            <mwc-list-item graphic=\"icon\" .disabled=${this.disabled}>\n              ${this.hass.localize(\n                \"ui.panel.config.automation.editor.actions.rename\"\n              )}\n              <ha-svg-icon slot=\"graphic\" .path=${mdiRenameBox}></ha-svg-icon>\n            </mwc-list-item>\n\n            <li divider role=\"separator\"></li>\n\n            <mwc-list-item graphic=\"icon\" .disabled=${this.disabled}>\n              ${this.hass.localize(\n                \"ui.panel.config.automation.editor.actions.duplicate\"\n              )}\n              <ha-svg-icon\n                slot=\"graphic\"\n                .path=${mdiContentDuplicate}\n              ></ha-svg-icon>\n            </mwc-list-item>\n\n            <mwc-list-item graphic=\"icon\" .disabled=${this.disabled}>\n              ${this.hass.localize(\n                \"ui.panel.config.automation.editor.triggers.copy\"\n              )}\n              <ha-svg-icon slot=\"graphic\" .path=${mdiContentCopy}></ha-svg-icon>\n            </mwc-list-item>\n\n            <mwc-list-item graphic=\"icon\" .disabled=${this.disabled}>\n              ${this.hass.localize(\n                \"ui.panel.config.automation.editor.triggers.cut\"\n              )}\n              <ha-svg-icon slot=\"graphic\" .path=${mdiContentCut}></ha-svg-icon>\n            </mwc-list-item>\n\n            <mwc-list-item\n              graphic=\"icon\"\n              .disabled=${this.disabled || this.first}\n            >\n              ${this.hass.localize(\"ui.panel.config.automation.editor.move_up\")}\n              <ha-svg-icon slot=\"graphic\" .path=${mdiArrowUp}></ha-svg-icon\n            ></mwc-list-item>\n\n            <mwc-list-item\n              graphic=\"icon\"\n              .disabled=${this.disabled || this.last}\n            >\n              ${this.hass.localize(\n                \"ui.panel.config.automation.editor.move_down\"\n              )}\n              <ha-svg-icon slot=\"graphic\" .path=${mdiArrowDown}></ha-svg-icon\n            ></mwc-list-item>\n\n            <li divider role=\"separator\"></li>\n\n            <mwc-list-item .disabled=${!this._uiModeAvailable} graphic=\"icon\">\n              ${this.hass.localize(\"ui.panel.config.automation.editor.edit_ui\")}\n              ${!yamlMode\n                ? html`<ha-svg-icon\n                    class=\"selected_menu_item\"\n                    slot=\"graphic\"\n                    .path=${mdiCheck}\n                  ></ha-svg-icon>`\n                : ``}\n            </mwc-list-item>\n\n            <mwc-list-item .disabled=${!this._uiModeAvailable} graphic=\"icon\">\n              ${this.hass.localize(\n                \"ui.panel.config.automation.editor.edit_yaml\"\n              )}\n              ${yamlMode\n                ? html`<ha-svg-icon\n                    class=\"selected_menu_item\"\n                    slot=\"graphic\"\n                    .path=${mdiCheck}\n                  ></ha-svg-icon>`\n                : ``}\n            </mwc-list-item>\n\n            <li divider role=\"separator\"></li>\n\n            <mwc-list-item graphic=\"icon\" .disabled=${this.disabled}>\n              ${this.action.enabled === false\n                ? this.hass.localize(\n                    \"ui.panel.config.automation.editor.actions.enable\"\n                  )\n                : this.hass.localize(\n                    \"ui.panel.config.automation.editor.actions.disable\"\n                  )}\n              <ha-svg-icon\n                slot=\"graphic\"\n                .path=${this.action.enabled === false\n                  ? mdiPlayCircleOutline\n                  : mdiStopCircleOutline}\n              ></ha-svg-icon>\n            </mwc-list-item>\n            <mwc-list-item\n              class=\"warning\"\n              graphic=\"icon\"\n              .disabled=${this.disabled}\n            >\n              ${this.hass.localize(\n                \"ui.panel.config.automation.editor.actions.delete\"\n              )}\n              <ha-svg-icon\n                class=\"warning\"\n                slot=\"graphic\"\n                .path=${mdiDelete}\n              ></ha-svg-icon>\n            </mwc-list-item>\n          </ha-button-menu>\n\n          <div\n            class=${classMap({\n              \"card-content\": true,\n              disabled: this.action.enabled === false,\n            })}\n          >\n            ${this._warnings\n              ? html`<ha-alert\n                  alert-type=\"warning\"\n                  .title=${this.hass.localize(\n                    \"ui.errors.config.editor_not_supported\"\n                  )}\n                >\n                  ${this._warnings!.length > 0 &&\n                  this._warnings![0] !== undefined\n                    ? html` <ul>\n                        ${this._warnings!.map(\n                          (warning) => html`<li>${warning}</li>`\n                        )}\n                      </ul>`\n                    : \"\"}\n                  ${this.hass.localize(\n                    \"ui.errors.config.edit_in_yaml_supported\"\n                  )}\n                </ha-alert>`\n              : \"\"}\n            ${yamlMode\n              ? html`\n                  ${type === undefined\n                    ? html`\n                        ${this.hass.localize(\n                          \"ui.panel.config.automation.editor.actions.unsupported_action\"\n                        )}\n                      `\n                    : \"\"}\n                  <ha-yaml-editor\n                    .hass=${this.hass}\n                    .defaultValue=${this.action}\n                    .readOnly=${this.disabled}\n                    @value-changed=${this._onYamlChange}\n                  ></ha-yaml-editor>\n                `\n              : html`\n                  <div\n                    @ui-mode-not-available=${this._handleUiModeNotAvailable}\n                    @value-changed=${this._onUiChanged}\n                  >\n                    ${dynamicElement(`ha-automation-action-${type}`, {\n                      hass: this.hass,\n                      action: this.action,\n                      narrow: this.narrow,\n                      disabled: this.disabled,\n                      path: this.path,\n                    })}\n                  </div>\n                `}\n          </div>\n        </ha-expansion-panel>\n      </ha-card>\n    `;\n  }\n\n  private _handleUiModeNotAvailable(ev: CustomEvent) {\n    // Prevent possible parent action-row from switching to yamlMode\n    ev.stopPropagation();\n\n    this._warnings = handleStructError(this.hass, ev.detail).warnings;\n    if (!this._yamlMode) {\n      this._yamlMode = true;\n    }\n  }\n\n  private async _handleAction(ev: CustomEvent<ActionDetail>) {\n    switch (ev.detail.index) {\n      case 0:\n        this._runAction();\n        break;\n      case 1:\n        await this._renameAction();\n        break;\n      case 2:\n        fireEvent(this, \"duplicate\");\n        break;\n      case 3:\n        this._setClipboard();\n        break;\n      case 4:\n        this._setClipboard();\n        fireEvent(this, \"value-changed\", { value: null });\n        break;\n      case 5:\n        fireEvent(this, \"move-up\");\n        break;\n      case 6:\n        fireEvent(this, \"move-down\");\n        break;\n      case 7:\n        this._switchUiMode();\n        this.expand();\n        break;\n      case 8:\n        this._switchYamlMode();\n        this.expand();\n        break;\n      case 9:\n        this._onDisable();\n        break;\n      case 10:\n        this._onDelete();\n        break;\n    }\n  }\n\n  private _setClipboard() {\n    this._clipboard = {\n      ...this._clipboard,\n      action: deepClone(this.action),\n    };\n  }\n\n  private _onDisable() {\n    const enabled = !(this.action.enabled ?? true);\n    const value = { ...this.action, enabled };\n    fireEvent(this, \"value-changed\", { value });\n    if (this._yamlMode) {\n      this._yamlEditor?.setValue(value);\n    }\n  }\n\n  private async _runAction() {\n    const validated = await validateConfig(this.hass, {\n      action: this.action,\n    });\n\n    if (!validated.action.valid) {\n      showAlertDialog(this, {\n        title: this.hass.localize(\n          \"ui.panel.config.automation.editor.actions.invalid_action\"\n        ),\n        text: validated.action.error,\n      });\n      return;\n    }\n\n    try {\n      await callExecuteScript(this.hass, this.action);\n    } catch (err: any) {\n      showAlertDialog(this, {\n        title: this.hass.localize(\n          \"ui.panel.config.automation.editor.actions.run_action_error\"\n        ),\n        text: err.message || err,\n      });\n      return;\n    }\n\n    showToast(this, {\n      message: this.hass.localize(\n        \"ui.panel.config.automation.editor.actions.run_action_success\"\n      ),\n    });\n  }\n\n  private _onDelete() {\n    showConfirmationDialog(this, {\n      title: this.hass.localize(\n        \"ui.panel.config.automation.editor.actions.delete_confirm_title\"\n      ),\n      text: this.hass.localize(\n        \"ui.panel.config.automation.editor.actions.delete_confirm_text\"\n      ),\n      dismissText: this.hass.localize(\"ui.common.cancel\"),\n      confirmText: this.hass.localize(\"ui.common.delete\"),\n      destructive: true,\n      confirm: () => {\n        fireEvent(this, \"value-changed\", { value: null });\n      },\n    });\n  }\n\n  private _onYamlChange(ev: CustomEvent) {\n    ev.stopPropagation();\n    if (!ev.detail.isValid) {\n      return;\n    }\n    fireEvent(this, \"value-changed\", { value: ev.detail.value });\n  }\n\n  private _onUiChanged(ev: CustomEvent) {\n    ev.stopPropagation();\n    const value = {\n      ...(this.action.alias ? { alias: this.action.alias } : {}),\n      ...ev.detail.value,\n    };\n    fireEvent(this, \"value-changed\", { value });\n  }\n\n  private _switchUiMode() {\n    this._warnings = undefined;\n    this._yamlMode = false;\n  }\n\n  private _switchYamlMode() {\n    this._warnings = undefined;\n    this._yamlMode = true;\n  }\n\n  private async _renameAction(): Promise<void> {\n    const alias = await showPromptDialog(this, {\n      title: this.hass.localize(\n        \"ui.panel.config.automation.editor.actions.change_alias\"\n      ),\n      inputLabel: this.hass.localize(\n        \"ui.panel.config.automation.editor.actions.alias\"\n      ),\n      inputType: \"string\",\n      placeholder: capitalizeFirstLetter(\n        describeAction(this.hass, this._entityReg, this.action, undefined, true)\n      ),\n      defaultValue: this.action.alias,\n      confirmText: this.hass.localize(\"ui.common.submit\"),\n    });\n    if (alias !== null) {\n      const value = { ...this.action };\n      if (alias === \"\") {\n        delete value.alias;\n      } else {\n        value.alias = alias;\n      }\n      fireEvent(this, \"value-changed\", {\n        value,\n      });\n      if (this._yamlMode) {\n        this._yamlEditor?.setValue(value);\n      }\n    }\n  }\n\n  public expand() {\n    this.updateComplete.then(() => {\n      this.shadowRoot!.querySelector(\"ha-expansion-panel\")!.expanded = true;\n    });\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      css`\n        ha-button-menu,\n        ha-icon-button {\n          --mdc-theme-text-primary-on-background: var(--primary-text-color);\n        }\n        .disabled {\n          opacity: 0.5;\n          pointer-events: none;\n        }\n        ha-expansion-panel {\n          --expansion-panel-summary-padding: 0 0 0 8px;\n          --expansion-panel-content-padding: 0;\n        }\n        h3 {\n          margin: 0;\n          font-size: inherit;\n          font-weight: inherit;\n        }\n        .action-icon {\n          display: none;\n        }\n        @media (min-width: 870px) {\n          .action-icon {\n            display: inline-block;\n            color: var(--secondary-text-color);\n            opacity: 0.9;\n            margin-right: 8px;\n            margin-inline-end: 8px;\n            margin-inline-start: initial;\n          }\n        }\n        .card-content {\n          padding: 16px;\n        }\n        .disabled-bar {\n          background: var(--divider-color, #e0e0e0);\n          text-align: center;\n          border-top-right-radius: var(--ha-card-border-radius);\n          border-top-left-radius: var(--ha-card-border-radius);\n        }\n\n        mwc-list-item[disabled] {\n          --mdc-theme-text-primary-on-background: var(--disabled-text-color);\n        }\n        mwc-list-item.hidden {\n          display: none;\n        }\n        .warning ul {\n          margin: 4px 0;\n        }\n        .selected_menu_item {\n          color: var(--primary-color);\n        }\n        li[role=\"separator\"] {\n          border-bottom-color: var(--divider-color);\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-automation-action-row\": HaAutomationActionRow;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}