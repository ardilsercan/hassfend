{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13, _templateObject14, _templateObject15, _templateObject16, _templateObject17, _templateObject18, _templateObject19, _templateObject20, _templateObject21, _templateObject22, _templateObject23, _templateObject24, _templateObject25, _templateObject26, _templateObject27, _templateObject28;\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.every.js\";\nimport { grid } from \"@lit-labs/virtualizer/layouts/grid\";\nimport \"@material/mwc-button/mwc-button\";\nimport \"@material/mwc-list/mwc-list\";\nimport \"@material/mwc-list/mwc-list-item\";\nvar mdiArrowUpRight = \"M21.5 9.5L20.09 10.92L17 7.83V13.5C17 17.09 14.09 20 10.5 20H4V18H10.5C13 18 15 16 15 13.5V7.83L11.91 10.91L10.5 9.5L16 4L21.5 9.5Z\";\nvar mdiPlay = \"M8,5.14V19.14L19,12.14L8,5.14Z\";\nvar mdiPlus = \"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z\";\nimport \"@lrnwebcomponents/simple-tooltip/simple-tooltip\";\nimport { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, eventOptions, property, query, state } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { styleMap } from \"lit/directives/style-map\";\nimport { until } from \"lit/directives/until\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { debounce } from \"../../common/util/debounce\";\nimport { isUnavailableState } from \"../../data/entity\";\nimport { browseMediaPlayer, BROWSER_PLAYER, MediaClassBrowserSettings } from \"../../data/media-player\";\nimport { browseLocalMediaPlayer } from \"../../data/media_source\";\nimport { isTTSMediaSource } from \"../../data/tts\";\nimport { showAlertDialog } from \"../../dialogs/generic/show-dialog-box\";\nimport { loadPolyfillIfNeeded } from \"../../resources/resize-observer.polyfill\";\nimport { haStyle } from \"../../resources/styles\";\nimport { brandsUrl, extractDomainFromBrandUrl, isBrandUrl } from \"../../util/brands-url\";\nimport { documentationUrl } from \"../../util/documentation-url\";\nimport \"../entity/ha-entity-picker\";\nimport \"../ha-alert\";\nimport \"../ha-button-menu\";\nimport \"../ha-card\";\nimport \"../ha-circular-progress\";\nimport \"../ha-fab\";\nimport \"../ha-icon-button\";\nimport \"../ha-svg-icon\";\nimport \"./ha-browse-media-tts\";\nimport { loadVirtualizer } from \"../../resources/virtualizer\";\nexport var HaMediaPlayerBrowse = _decorate([customElement(\"ha-media-player-browse\")], function (_initialize, _LitElement) {\n  var HaMediaPlayerBrowse = /*#__PURE__*/function (_LitElement2) {\n    _inherits(HaMediaPlayerBrowse, _LitElement2);\n    function HaMediaPlayerBrowse() {\n      var _this;\n      _classCallCheck(this, HaMediaPlayerBrowse);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _callSuper(this, HaMediaPlayerBrowse, [].concat(args));\n      _initialize(_assertThisInitialized(_this));\n      return _this;\n    }\n    return _createClass(HaMediaPlayerBrowse);\n  }(_LitElement);\n  return {\n    F: HaMediaPlayerBrowse,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"entityId\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"action\",\n      value: function value() {\n        return \"play\";\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"preferredLayout\",\n      value: function value() {\n        return \"auto\";\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"dialog\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"navigateIds\",\n      value: function value() {\n        return [];\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean,\n        reflect: true\n      })],\n      key: \"narrow\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean,\n        reflect: true\n      })],\n      key: \"scrolled\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_error\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_parentItem\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_currentItem\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [query(\".header\")],\n      key: \"_header\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [query(\".content\")],\n      key: \"_content\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [query(\"lit-virtualizer\")],\n      key: \"_virtualizer\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_observed\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_headerOffsetHeight\",\n      value: function value() {\n        return 0;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_resizeObserver\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value:\n      // @todo Consider reworking to eliminate need for attribute since it is manipulated internally\n\n      // @todo Consider reworking to eliminate need for attribute since it is manipulated internally\n\n      function connectedCallback() {\n        var _this2 = this;\n        _get(_getPrototypeOf(HaMediaPlayerBrowse.prototype), \"connectedCallback\", this).call(this);\n        this.updateComplete.then(function () {\n          return _this2._attachResizeObserver();\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(HaMediaPlayerBrowse.prototype), \"disconnectedCallback\", this).call(this);\n        if (this._resizeObserver) {\n          this._resizeObserver.disconnect();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"refresh\",\n      value: function () {\n        var _refresh = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n          var currentId;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                currentId = this.navigateIds[this.navigateIds.length - 1];\n                _context.prev = 1;\n                _context.next = 4;\n                return this._fetchData(this.entityId, currentId.media_content_id, currentId.media_content_type);\n              case 4:\n                this._currentItem = _context.sent;\n                // Update the parent with latest item.\n                fireEvent(this, \"media-browsed\", {\n                  ids: this.navigateIds,\n                  current: this._currentItem\n                });\n                _context.next = 11;\n                break;\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](1);\n                this._setError(_context.t0);\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee, this, [[1, 8]]);\n        }));\n        function refresh() {\n          return _refresh.apply(this, arguments);\n        }\n        return refresh;\n      }()\n    }, {\n      kind: \"method\",\n      key: \"play\",\n      value: function play() {\n        var _this$_currentItem;\n        if ((_this$_currentItem = this._currentItem) !== null && _this$_currentItem !== void 0 && _this$_currentItem.can_play) {\n          this._runAction(this._currentItem);\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProps) {\n        var _this$_content,\n          _this3 = this;\n        _get(_getPrototypeOf(HaMediaPlayerBrowse.prototype), \"willUpdate\", this).call(this, changedProps);\n        if (!this.hasUpdated) {\n          loadVirtualizer();\n        }\n        if (changedProps.has(\"entityId\")) {\n          this._setError(undefined);\n        } else if (!changedProps.has(\"navigateIds\")) {\n          // Neither entity ID or navigateIDs changed, nothing to fetch\n          return;\n        }\n        this._setError(undefined);\n        var oldNavigateIds = changedProps.get(\"navigateIds\");\n        var navigateIds = this.navigateIds;\n\n        // We're navigating. Reset the shizzle.\n        (_this$_content = this._content) === null || _this$_content === void 0 || _this$_content.scrollTo(0, 0);\n        this.scrolled = false;\n        var oldCurrentItem = this._currentItem;\n        var oldParentItem = this._parentItem;\n        this._currentItem = undefined;\n        this._parentItem = undefined;\n        var currentId = navigateIds[navigateIds.length - 1];\n        var parentId = navigateIds.length > 1 ? navigateIds[navigateIds.length - 2] : undefined;\n        var currentProm;\n        var parentProm;\n\n        // See if we can take loading shortcuts if navigating to parent or child\n        if (!changedProps.has(\"entityId\")) {\n          if (\n          // Check if we navigated to a child\n          oldNavigateIds && navigateIds.length === oldNavigateIds.length + 1 && oldNavigateIds.every(function (oldVal, idx) {\n            var curVal = navigateIds[idx];\n            return curVal.media_content_id === oldVal.media_content_id && curVal.media_content_type === oldVal.media_content_type;\n          })) {\n            parentProm = Promise.resolve(oldCurrentItem);\n          } else if (\n          // Check if we navigated to a parent\n          oldNavigateIds && navigateIds.length === oldNavigateIds.length - 1 && navigateIds.every(function (curVal, idx) {\n            var oldVal = oldNavigateIds[idx];\n            return curVal.media_content_id === oldVal.media_content_id && curVal.media_content_type === oldVal.media_content_type;\n          })) {\n            currentProm = Promise.resolve(oldParentItem);\n          }\n        }\n        // Fetch current\n        if (!currentProm) {\n          currentProm = this._fetchData(this.entityId, currentId.media_content_id, currentId.media_content_type);\n        }\n        currentProm.then(function (item) {\n          _this3._currentItem = item;\n          fireEvent(_this3, \"media-browsed\", {\n            ids: navigateIds,\n            current: item\n          });\n        }, function (err) {\n          var _this3$hass$states$_t;\n          // When we change entity ID, we will first try to see if the new entity is\n          // able to resolve the new path. If that results in an error, browse the root.\n          var isNewEntityWithSamePath = oldNavigateIds && changedProps.has(\"entityId\") && navigateIds.length === oldNavigateIds.length && oldNavigateIds.every(function (oldItem, idx) {\n            return navigateIds[idx].media_content_id === oldItem.media_content_id && navigateIds[idx].media_content_type === oldItem.media_content_type;\n          });\n          if (isNewEntityWithSamePath) {\n            fireEvent(_this3, \"media-browsed\", {\n              ids: [{\n                media_content_id: undefined,\n                media_content_type: undefined\n              }],\n              replace: true\n            });\n          } else if (err.code === \"entity_not_found\" && isUnavailableState((_this3$hass$states$_t = _this3.hass.states[_this3.entityId]) === null || _this3$hass$states$_t === void 0 ? void 0 : _this3$hass$states$_t.state)) {\n            _this3._setError({\n              message: _this3.hass.localize(\"ui.components.media-browser.media_player_unavailable\"),\n              code: \"entity_not_found\"\n            });\n          } else {\n            _this3._setError(err);\n          }\n        });\n        // Fetch parent\n        if (!parentProm && parentId !== undefined) {\n          parentProm = this._fetchData(this.entityId, parentId.media_content_id, parentId.media_content_type);\n        }\n        if (parentProm) {\n          parentProm.then(function (parent) {\n            _this3._parentItem = parent;\n          });\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"shouldUpdate\",\n      value: function shouldUpdate(changedProps) {\n        if (changedProps.size > 1 || !changedProps.has(\"hass\")) {\n          return true;\n        }\n        var oldHass = changedProps.get(\"hass\");\n        return oldHass === undefined || oldHass.localize !== this.hass.localize;\n      }\n    }, {\n      kind: \"method\",\n      key: \"firstUpdated\",\n      value: function firstUpdated() {\n        this._measureCard();\n        this._attachResizeObserver();\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProps) {\n        _get(_getPrototypeOf(HaMediaPlayerBrowse.prototype), \"updated\", this).call(this, changedProps);\n        if (changedProps.has(\"_scrolled\")) {\n          this._animateHeaderHeight();\n        } else if (changedProps.has(\"_currentItem\")) {\n          var _this$_virtualizer;\n          this._setHeaderHeight();\n\n          // This fixes a race condition for resizing of the cards using the grid layout\n          if (this._observed) {\n            return;\n          }\n\n          // @ts-ignore\n          var virtualizer = (_this$_virtualizer = this._virtualizer) === null || _this$_virtualizer === void 0 ? void 0 : _this$_virtualizer._virtualizer;\n          if (virtualizer) {\n            this._observed = true;\n            setTimeout(function () {\n              return virtualizer._observeMutations();\n            }, 0);\n          }\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (this._error) {\n          return html(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        <div class=\\\"container\\\">\\n          <ha-alert alert-type=\\\"error\\\">\\n            \", \"\\n          </ha-alert>\\n        </div>\\n      \"])), this._renderError(this._error));\n        }\n        if (!this._currentItem) {\n          return html(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"<ha-circular-progress indeterminate></ha-circular-progress>\"])));\n        }\n        var currentItem = this._currentItem;\n        var subtitle = this.hass.localize(\"ui.components.media-browser.class.\".concat(currentItem.media_class));\n        var children = currentItem.children || [];\n        var mediaClass = MediaClassBrowserSettings[currentItem.media_class];\n        var childrenMediaClass = currentItem.children_media_class ? MediaClassBrowserSettings[currentItem.children_media_class] : MediaClassBrowserSettings.directory;\n        var backgroundImage = currentItem.thumbnail ? this._getThumbnailURLorBase64(currentItem.thumbnail).then(function (value) {\n          return \"url(\".concat(value, \")\");\n        }) : \"none\";\n        return html(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n              \", \"\\n          <div\\n            class=\\\"content\\\"\\n            @scroll=\", \"\\n            @touchmove=\", \"\\n          >\\n            \", \"\\n          </div>\\n        </div>\\n      </div>\\n    \"])), currentItem.can_play ? html(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n                      <div\\n                        class=\\\"header \", \"\\\"\\n                        @transitionend=\", \"\\n                      >\\n                        <div class=\\\"header-content\\\">\\n                          \", \"\\n                          <div class=\\\"header-info\\\">\\n                            <div class=\\\"breadcrumb\\\">\\n                              <h1 class=\\\"title\\\">\", \"</h1>\\n                              \", \"\\n                            </div>\\n                            \", \"\\n                          </div>\\n                        </div>\\n                      </div>\\n                    \"])), classMap({\n          \"no-img\": !currentItem.thumbnail,\n          \"no-dialog\": !this.dialog\n        }), this._setHeaderHeight, currentItem.thumbnail ? html(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n                                <div\\n                                  class=\\\"img\\\"\\n                                  style=\\\"background-image: \", \"\\\"\\n                                >\\n                                  \", \"\\n                                </div>\\n                              \"])), until(backgroundImage, \"\"), this.narrow && currentItem !== null && currentItem !== void 0 && currentItem.can_play ? html(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n                                        <ha-fab\\n                                          mini\\n                                          .item=\", \"\\n                                          @click=\", \"\\n                                        >\\n                                          <ha-svg-icon\\n                                            slot=\\\"icon\\\"\\n                                            .label=\", \"\\n                                            .path=\", \"\\n                                          ></ha-svg-icon>\\n                                          \", \"\\n                                        </ha-fab>\\n                                      \"])), currentItem, this._actionClicked, this.hass.localize(\"ui.components.media-browser.\".concat(this.action, \"-media\")), this.action === \"play\" ? mdiPlay : mdiPlus, this.hass.localize(\"ui.components.media-browser.\".concat(this.action))) : \"\") : nothing, currentItem.title, subtitle ? html(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\" <h2 class=\\\"subtitle\\\">\", \"</h2> \"])), subtitle) : \"\", currentItem.can_play && (!currentItem.thumbnail || !this.narrow) ? html(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n                                  <mwc-button\\n                                    raised\\n                                    .item=\", \"\\n                                    @click=\", \"\\n                                  >\\n                                    <ha-svg-icon\\n                                      .label=\", \"\\n                                      .path=\", \"\\n                                    ></ha-svg-icon>\\n                                    \", \"\\n                                  </mwc-button>\\n                                \"])), currentItem, this._actionClicked, this.hass.localize(\"ui.components.media-browser.\".concat(this.action, \"-media\")), this.action === \"play\" ? mdiPlay : mdiPlus, this.hass.localize(\"ui.components.media-browser.\".concat(this.action))) : \"\") : \"\", this._scroll, this._scroll, this._error ? html(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"\\n                    <div class=\\\"container\\\">\\n                      <ha-alert alert-type=\\\"error\\\">\\n                        \", \"\\n                      </ha-alert>\\n                    </div>\\n                  \"])), this._renderError(this._error)) : isTTSMediaSource(currentItem.media_content_id) ? html(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"\\n                      <ha-browse-media-tts\\n                        .item=\", \"\\n                        .hass=\", \"\\n                        .action=\", \"\\n                        @tts-picked=\", \"\\n                      ></ha-browse-media-tts>\\n                    \"])), currentItem, this.hass, this.action, this._ttsPicked) : !children.length && !currentItem.not_shown ? html(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\"\\n                        <div class=\\\"container no-items\\\">\\n                          \", \"\\n                        </div>\\n                      \"])), currentItem.media_content_id === \"media-source://media_source/local/.\" ? html(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"\\n                                <div class=\\\"highlight-add-button\\\">\\n                                  <span>\\n                                    <ha-svg-icon\\n                                      .path=\", \"\\n                                    ></ha-svg-icon>\\n                                  </span>\\n                                  <span>\\n                                    \", \"\\n                                  </span>\\n                                </div>\\n                              \"])), mdiArrowUpRight, this.hass.localize(\"ui.components.media-browser.file_management.highlight_button\")) : this.hass.localize(\"ui.components.media-browser.no_items\")) : this.preferredLayout === \"grid\" || this.preferredLayout === \"auto\" && childrenMediaClass.layout === \"grid\" ? html(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([\"\\n                          <lit-virtualizer\\n                            scroller\\n                            .layout=\", \"\\n                            .items=\", \"\\n                            .renderItem=\", \"\\n                            class=\\\"children \", \"\\\"\\n                          ></lit-virtualizer>\\n                          \", \"\\n                        \"])), grid({\n          itemSize: {\n            width: \"175px\",\n            height: childrenMediaClass.thumbnail_ratio === \"portrait\" ? \"312px\" : \"225px\"\n          },\n          gap: \"16px\",\n          flex: {\n            preserve: \"aspect-ratio\"\n          },\n          justify: \"space-evenly\",\n          direction: \"vertical\"\n        }), children, this._renderGridItem, classMap({\n          portrait: childrenMediaClass.thumbnail_ratio === \"portrait\",\n          not_shown: !!currentItem.not_shown\n        }), currentItem.not_shown ? html(_templateObject14 || (_templateObject14 = _taggedTemplateLiteral([\"\\n                                <div class=\\\"grid not-shown\\\">\\n                                  <div class=\\\"title\\\">\\n                                    \", \"\\n                                  </div>\\n                                </div>\\n                              \"])), this.hass.localize(\"ui.components.media-browser.not_shown\", {\n          count: currentItem.not_shown\n        })) : \"\") : html(_templateObject15 || (_templateObject15 = _taggedTemplateLiteral([\"\\n                          <mwc-list>\\n                            <lit-virtualizer\\n                              scroller\\n                              .items=\", \"\\n                              style=\", \"\\n                              .renderItem=\", \"\\n                            ></lit-virtualizer>\\n                            \", \"\\n                          </mwc-list>\\n                        \"])), children, styleMap({\n          height: \"\".concat(children.length * 72 + 26, \"px\")\n        }), this._renderListItem, currentItem.not_shown ? html(_templateObject16 || (_templateObject16 = _taggedTemplateLiteral([\"\\n                                  <mwc-list-item\\n                                    noninteractive\\n                                    class=\\\"not-shown\\\"\\n                                    .graphic=\", \"\\n                                  >\\n                                    <span class=\\\"title\\\">\\n                                      \", \"\\n                                    </span>\\n                                  </mwc-list-item>\\n                                \"])), mediaClass.show_list_images ? \"medium\" : \"avatar\", this.hass.localize(\"ui.components.media-browser.not_shown\", {\n          count: currentItem.not_shown\n        })) : \"\"));\n      }\n    }, {\n      kind: \"field\",\n      key: \"_renderGridItem\",\n      value: function value() {\n        var _this4 = this;\n        return function (child) {\n          var backgroundImage = child.thumbnail ? _this4._getThumbnailURLorBase64(child.thumbnail).then(function (value) {\n            return \"url(\".concat(value, \")\");\n          }) : \"none\";\n          return html(_templateObject17 || (_templateObject17 = _taggedTemplateLiteral([\"\\n      <div class=\\\"child\\\" .item=\", \" @click=\", \">\\n        <ha-card outlined>\\n          <div class=\\\"thumbnail\\\">\\n            \", \"\\n            \", \"\\n          </div>\\n          <div class=\\\"title\\\">\\n            \", \"\\n            <simple-tooltip fitToVisibleBounds position=\\\"top\\\" offset=\\\"4\\\"\\n              >\", \"</simple-tooltip\\n            >\\n          </div>\\n        </ha-card>\\n      </div>\\n    \"])), child, _this4._childClicked, child.thumbnail ? html(_templateObject18 || (_templateObject18 = _taggedTemplateLiteral([\"\\n                  <div\\n                    class=\\\"\", \" image\\\"\\n                    style=\\\"background-image: \", \"\\\"\\n                  ></div>\\n                \"])), classMap({\n            \"centered-image\": [\"app\", \"directory\"].includes(child.media_class),\n            \"brand-image\": isBrandUrl(child.thumbnail)\n          }), until(backgroundImage, \"\")) : html(_templateObject19 || (_templateObject19 = _taggedTemplateLiteral([\"\\n                  <div class=\\\"icon-holder image\\\">\\n                    <ha-svg-icon\\n                      class=\\\"folder\\\"\\n                      .path=\", \"\\n                    ></ha-svg-icon>\\n                  </div>\\n                \"])), MediaClassBrowserSettings[child.media_class === \"directory\" ? child.children_media_class || child.media_class : child.media_class].icon), child.can_play ? html(_templateObject20 || (_templateObject20 = _taggedTemplateLiteral([\"\\n                  <ha-icon-button\\n                    class=\\\"play \", \"\\\"\\n                    .item=\", \"\\n                    .label=\", \"\\n                    .path=\", \"\\n                    @click=\", \"\\n                  ></ha-icon-button>\\n                \"])), classMap({\n            can_expand: child.can_expand\n          }), child, _this4.hass.localize(\"ui.components.media-browser.\".concat(_this4.action, \"-media\")), _this4.action === \"play\" ? mdiPlay : mdiPlus, _this4._actionClicked) : \"\", child.title, child.title);\n        };\n      }\n    }, {\n      kind: \"field\",\n      key: \"_renderListItem\",\n      value: function value() {\n        var _this5 = this;\n        return function (child) {\n          var currentItem = _this5._currentItem;\n          var mediaClass = MediaClassBrowserSettings[currentItem.media_class];\n          var backgroundImage = mediaClass.show_list_images && child.thumbnail ? _this5._getThumbnailURLorBase64(child.thumbnail).then(function (value) {\n            return \"url(\".concat(value, \")\");\n          }) : \"none\";\n          return html(_templateObject21 || (_templateObject21 = _taggedTemplateLiteral([\"\\n      <mwc-list-item\\n        @click=\", \"\\n        .item=\", \"\\n        .graphic=\", \"\\n      >\\n        \", \"\\n        <span class=\\\"title\\\">\", \"</span>\\n      </mwc-list-item>\\n    \"])), _this5._childClicked, child, mediaClass.show_list_images ? \"medium\" : \"avatar\", backgroundImage === \"none\" && !child.can_play ? html(_templateObject22 || (_templateObject22 = _taggedTemplateLiteral([\"<ha-svg-icon\\n              .path=\", \"\\n              slot=\\\"graphic\\\"\\n            ></ha-svg-icon>\"])), MediaClassBrowserSettings[child.media_class === \"directory\" ? child.children_media_class || child.media_class : child.media_class].icon) : html(_templateObject23 || (_templateObject23 = _taggedTemplateLiteral([\"<div\\n              class=\", \"\\n              style=\\\"background-image: \", \"\\\"\\n              slot=\\\"graphic\\\"\\n            >\\n              \", \"\\n            </div>\"])), classMap({\n            graphic: true,\n            thumbnail: mediaClass.show_list_images === true\n          }), until(backgroundImage, \"\"), child.can_play ? html(_templateObject24 || (_templateObject24 = _taggedTemplateLiteral([\"<ha-icon-button\\n                    class=\\\"play \", \"\\\"\\n                    .item=\", \"\\n                    .label=\", \"\\n                    .path=\", \"\\n                    @click=\", \"\\n                  ></ha-icon-button>\"])), classMap({\n            show: !mediaClass.show_list_images || !child.thumbnail\n          }), child, _this5.hass.localize(\"ui.components.media-browser.\".concat(_this5.action, \"-media\")), _this5.action === \"play\" ? mdiPlay : mdiPlus, _this5._actionClicked) : nothing), child.title);\n        };\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getThumbnailURLorBase64\",\n      value: function () {\n        var _getThumbnailURLorBase = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(thumbnailUrl) {\n          var _this6 = this;\n          var _this$hass$themes;\n          return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n            while (1) switch (_context2.prev = _context2.next) {\n              case 0:\n                if (thumbnailUrl) {\n                  _context2.next = 2;\n                  break;\n                }\n                return _context2.abrupt(\"return\", \"\");\n              case 2:\n                if (!thumbnailUrl.startsWith(\"/\")) {\n                  _context2.next = 4;\n                  break;\n                }\n                return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this6.hass.fetchWithAuth(thumbnailUrl)\n                  // Since we are fetching with an authorization header, we cannot just put the\n                  // URL directly into the document; we need to embed the image. We could do this\n                  // using blob URLs, but then we would need to keep track of them in order to\n                  // release them properly. Instead, we embed the thumbnail using base64.\n                  .then(function (response) {\n                    return response.blob();\n                  }).then(function (blob) {\n                    var reader = new FileReader();\n                    reader.onload = function () {\n                      var result = reader.result;\n                      resolve(typeof result === \"string\" ? result : \"\");\n                    };\n                    reader.onerror = function (e) {\n                      return reject(e);\n                    };\n                    reader.readAsDataURL(blob);\n                  });\n                }));\n              case 4:\n                if (isBrandUrl(thumbnailUrl)) {\n                  // The backend is not aware of the theme used by the users,\n                  // so we rewrite the URL to show a proper icon\n                  thumbnailUrl = brandsUrl({\n                    domain: extractDomainFromBrandUrl(thumbnailUrl),\n                    type: \"icon\",\n                    useFallback: true,\n                    darkOptimized: (_this$hass$themes = this.hass.themes) === null || _this$hass$themes === void 0 ? void 0 : _this$hass$themes.darkMode\n                  });\n                }\n                return _context2.abrupt(\"return\", thumbnailUrl);\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }, _callee2, this);\n        }));\n        function _getThumbnailURLorBase64(_x) {\n          return _getThumbnailURLorBase.apply(this, arguments);\n        }\n        return _getThumbnailURLorBase64;\n      }()\n    }, {\n      kind: \"field\",\n      key: \"_actionClicked\",\n      value: function value() {\n        var _this7 = this;\n        return function (ev) {\n          ev.stopPropagation();\n          var item = ev.currentTarget.item;\n          _this7._runAction(item);\n        };\n      }\n    }, {\n      kind: \"method\",\n      key: \"_runAction\",\n      value: function _runAction(item) {\n        fireEvent(this, \"media-picked\", {\n          item: item,\n          navigateIds: this.navigateIds\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_ttsPicked\",\n      value: function _ttsPicked(ev) {\n        ev.stopPropagation();\n        var navigateIds = this.navigateIds.slice(0, -1);\n        navigateIds.push(ev.detail.item);\n        fireEvent(this, \"media-picked\", Object.assign(Object.assign({}, ev.detail), {}, {\n          navigateIds: navigateIds\n        }));\n      }\n    }, {\n      kind: \"field\",\n      key: \"_childClicked\",\n      value: function value() {\n        var _this8 = this;\n        return /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(ev) {\n            var target, item;\n            return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n              while (1) switch (_context3.prev = _context3.next) {\n                case 0:\n                  target = ev.currentTarget;\n                  item = target.item;\n                  if (item) {\n                    _context3.next = 4;\n                    break;\n                  }\n                  return _context3.abrupt(\"return\");\n                case 4:\n                  if (item.can_expand) {\n                    _context3.next = 7;\n                    break;\n                  }\n                  _this8._runAction(item);\n                  return _context3.abrupt(\"return\");\n                case 7:\n                  fireEvent(_this8, \"media-browsed\", {\n                    ids: [].concat(_toConsumableArray(_this8.navigateIds), [item])\n                  });\n                case 8:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }, _callee3);\n          }));\n          return function (_x2) {\n            return _ref.apply(this, arguments);\n          };\n        }();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_fetchData\",\n      value: function () {\n        var _fetchData2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(entityId, mediaContentId, mediaContentType) {\n          return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n            while (1) switch (_context4.prev = _context4.next) {\n              case 0:\n                return _context4.abrupt(\"return\", entityId !== BROWSER_PLAYER ? browseMediaPlayer(this.hass, entityId, mediaContentId, mediaContentType) : browseLocalMediaPlayer(this.hass, mediaContentId));\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }, _callee4, this);\n        }));\n        function _fetchData(_x3, _x4, _x5) {\n          return _fetchData2.apply(this, arguments);\n        }\n        return _fetchData;\n      }()\n    }, {\n      kind: \"method\",\n      key: \"_measureCard\",\n      value: function _measureCard() {\n        this.narrow = (this.dialog ? window.innerWidth : this.offsetWidth) < 450;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_attachResizeObserver\",\n      value: function () {\n        var _attachResizeObserver2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n          var _this9 = this;\n          return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n            while (1) switch (_context5.prev = _context5.next) {\n              case 0:\n                if (this._resizeObserver) {\n                  _context5.next = 4;\n                  break;\n                }\n                _context5.next = 3;\n                return loadPolyfillIfNeeded();\n              case 3:\n                this._resizeObserver = new ResizeObserver(debounce(function () {\n                  return _this9._measureCard();\n                }, 250, false));\n              case 4:\n                this._resizeObserver.observe(this);\n              case 5:\n              case \"end\":\n                return _context5.stop();\n            }\n          }, _callee5, this);\n        }));\n        function _attachResizeObserver() {\n          return _attachResizeObserver2.apply(this, arguments);\n        }\n        return _attachResizeObserver;\n      }()\n    }, {\n      kind: \"method\",\n      key: \"_closeDialogAction\",\n      value: function _closeDialogAction() {\n        fireEvent(this, \"close-dialog\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_setError\",\n      value: function _setError(error) {\n        if (!this.dialog) {\n          this._error = error;\n          return;\n        }\n        if (!error) {\n          return;\n        }\n        this._closeDialogAction();\n        showAlertDialog(this, {\n          title: this.hass.localize(\"ui.components.media-browser.media_browsing_error\"),\n          text: this._renderError(error)\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderError\",\n      value: function _renderError(err) {\n        if (err.message === \"Media directory does not exist.\") {\n          return html(_templateObject25 || (_templateObject25 = _taggedTemplateLiteral([\"\\n        <h2>\\n          \", \"\\n        </h2>\\n        <p>\\n          \", \"\\n          <br />\\n          \", \"\\n          <br />\\n          \", \"\\n        </p>\\n      \"])), this.hass.localize(\"ui.components.media-browser.no_local_media_found\"), this.hass.localize(\"ui.components.media-browser.no_media_folder\"), this.hass.localize(\"ui.components.media-browser.setup_local_help\", {\n            documentation: html(_templateObject26 || (_templateObject26 = _taggedTemplateLiteral([\"<a\\n              href=\", \"\\n              target=\\\"_blank\\\"\\n              rel=\\\"noreferrer\\\"\\n              >\", \"</a\\n            >\"])), documentationUrl(this.hass, \"/more-info/local-media/setup-media\"), this.hass.localize(\"ui.components.media-browser.documentation\"))\n          }), this.hass.localize(\"ui.components.media-browser.local_media_files\"));\n        }\n        return html(_templateObject27 || (_templateObject27 = _taggedTemplateLiteral([\"<span class=\\\"error\\\">\", \"</span>\"])), err.message);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_setHeaderHeight\",\n      value: function () {\n        var _setHeaderHeight2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n          var header, content;\n          return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n            while (1) switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return this.updateComplete;\n              case 2:\n                header = this._header;\n                content = this._content;\n                if (!(!header || !content)) {\n                  _context6.next = 6;\n                  break;\n                }\n                return _context6.abrupt(\"return\");\n              case 6:\n                this._headerOffsetHeight = header.offsetHeight;\n                content.style.marginTop = \"\".concat(this._headerOffsetHeight, \"px\");\n                content.style.maxHeight = \"calc(var(--media-browser-max-height, 100%) - \".concat(this._headerOffsetHeight, \"px)\");\n              case 9:\n              case \"end\":\n                return _context6.stop();\n            }\n          }, _callee6, this);\n        }));\n        function _setHeaderHeight() {\n          return _setHeaderHeight2.apply(this, arguments);\n        }\n        return _setHeaderHeight;\n      }()\n    }, {\n      kind: \"method\",\n      key: \"_animateHeaderHeight\",\n      value: function _animateHeaderHeight() {\n        var _this10 = this;\n        var start;\n        var animate = function animate(time) {\n          if (start === undefined) {\n            start = time;\n          }\n          var elapsed = time - start;\n          _this10._setHeaderHeight();\n          if (elapsed < 400) {\n            requestAnimationFrame(animate);\n          }\n        };\n        requestAnimationFrame(animate);\n      }\n    }, {\n      kind: \"method\",\n      decorators: [eventOptions({\n        passive: true\n      })],\n      key: \"_scroll\",\n      value: function _scroll(ev) {\n        var content = ev.currentTarget;\n        if (!this.scrolled && content.scrollTop > this._headerOffsetHeight) {\n          this.scrolled = true;\n        } else if (this.scrolled && content.scrollTop < this._headerOffsetHeight) {\n          this.scrolled = false;\n        }\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return [haStyle, css(_templateObject28 || (_templateObject28 = _taggedTemplateLiteral([\"\\n        :host {\\n          display: flex;\\n          flex-direction: column;\\n          position: relative;\\n        }\\n\\n        ha-circular-progress {\\n          --mdc-theme-primary: var(--primary-color);\\n          display: flex;\\n          justify-content: center;\\n          margin: 40px;\\n        }\\n\\n        .container {\\n          padding: 16px;\\n        }\\n\\n        .no-items {\\n          padding-left: 32px;\\n        }\\n\\n        .highlight-add-button {\\n          display: flex;\\n          flex-direction: row-reverse;\\n          margin-right: 48px;\\n        }\\n\\n        .highlight-add-button ha-svg-icon {\\n          position: relative;\\n          top: -0.5em;\\n          margin-left: 8px;\\n        }\\n\\n        .content {\\n          overflow-y: auto;\\n          box-sizing: border-box;\\n          height: 100%;\\n        }\\n\\n        /* HEADER */\\n\\n        .header {\\n          display: flex;\\n          justify-content: space-between;\\n          border-bottom: 1px solid var(--divider-color);\\n          background-color: var(--card-background-color);\\n          position: absolute;\\n          top: 0;\\n          right: 0;\\n          left: 0;\\n          z-index: 3;\\n          padding: 16px;\\n        }\\n        .header_button {\\n          position: relative;\\n          right: -8px;\\n        }\\n        .header-content {\\n          display: flex;\\n          flex-wrap: wrap;\\n          flex-grow: 1;\\n          align-items: flex-start;\\n        }\\n        .header-content .img {\\n          height: 175px;\\n          width: 175px;\\n          margin-right: 16px;\\n          background-size: cover;\\n          border-radius: 2px;\\n          transition:\\n            width 0.4s,\\n            height 0.4s;\\n        }\\n        .header-info {\\n          display: flex;\\n          flex-direction: column;\\n          justify-content: space-between;\\n          align-self: stretch;\\n          min-width: 0;\\n          flex: 1;\\n        }\\n        .header-info mwc-button {\\n          display: block;\\n          --mdc-theme-primary: var(--primary-color);\\n          padding-bottom: 16px;\\n        }\\n        .breadcrumb {\\n          display: flex;\\n          flex-direction: column;\\n          overflow: hidden;\\n          flex-grow: 1;\\n          padding-top: 16px;\\n        }\\n        .breadcrumb .title {\\n          font-size: 32px;\\n          line-height: 1.2;\\n          font-weight: bold;\\n          margin: 0;\\n          overflow: hidden;\\n          display: -webkit-box;\\n          -webkit-box-orient: vertical;\\n          -webkit-line-clamp: 2;\\n          padding-right: 8px;\\n        }\\n        .breadcrumb .previous-title {\\n          font-size: 14px;\\n          padding-bottom: 8px;\\n          color: var(--secondary-text-color);\\n          overflow: hidden;\\n          text-overflow: ellipsis;\\n          cursor: pointer;\\n          --mdc-icon-size: 14px;\\n        }\\n        .breadcrumb .subtitle {\\n          font-size: 16px;\\n          overflow: hidden;\\n          text-overflow: ellipsis;\\n          margin-bottom: 0;\\n          transition:\\n            height 0.5s,\\n            margin 0.5s;\\n        }\\n\\n        .not-shown {\\n          font-style: italic;\\n          color: var(--secondary-text-color);\\n          padding: 8px 16px 8px;\\n        }\\n\\n        .grid.not-shown {\\n          display: flex;\\n          align-items: center;\\n          text-align: center;\\n        }\\n\\n        /* ============= CHILDREN ============= */\\n\\n        mwc-list {\\n          --mdc-list-vertical-padding: 0;\\n          --mdc-list-item-graphic-margin: 0;\\n          --mdc-theme-text-icon-on-background: var(--secondary-text-color);\\n          margin-top: 10px;\\n        }\\n\\n        mwc-list li:last-child {\\n          display: none;\\n        }\\n\\n        mwc-list li[divider] {\\n          border-bottom-color: var(--divider-color);\\n        }\\n\\n        mwc-list-item {\\n          width: 100%;\\n        }\\n\\n        div.children {\\n          display: grid;\\n          grid-template-columns: repeat(\\n            auto-fit,\\n            minmax(var(--media-browse-item-size, 175px), 0.1fr)\\n          );\\n          grid-gap: 16px;\\n          padding: 16px;\\n        }\\n\\n        :host([dialog]) .children {\\n          grid-template-columns: repeat(\\n            auto-fit,\\n            minmax(var(--media-browse-item-size, 175px), 0.33fr)\\n          );\\n        }\\n\\n        .child {\\n          display: flex;\\n          flex-direction: column;\\n          cursor: pointer;\\n        }\\n\\n        ha-card {\\n          position: relative;\\n          width: 100%;\\n          box-sizing: border-box;\\n        }\\n\\n        .children ha-card .thumbnail {\\n          width: 100%;\\n          position: relative;\\n          box-sizing: border-box;\\n          transition: padding-bottom 0.1s ease-out;\\n          padding-bottom: 100%;\\n        }\\n\\n        .portrait ha-card .thumbnail {\\n          padding-bottom: 150%;\\n        }\\n\\n        ha-card .image {\\n          border-radius: 3px 3px 0 0;\\n        }\\n\\n        .image {\\n          position: absolute;\\n          top: 0;\\n          right: 0;\\n          left: 0;\\n          bottom: 0;\\n          background-size: cover;\\n          background-repeat: no-repeat;\\n          background-position: center;\\n        }\\n\\n        .centered-image {\\n          margin: 0 8px;\\n          background-size: contain;\\n        }\\n\\n        .brand-image {\\n          background-size: 40%;\\n        }\\n\\n        .children ha-card .icon-holder {\\n          display: flex;\\n          justify-content: center;\\n          align-items: center;\\n        }\\n\\n        .child .folder {\\n          color: var(--secondary-text-color);\\n          --mdc-icon-size: calc(var(--media-browse-item-size, 175px) * 0.4);\\n        }\\n\\n        .child .play {\\n          position: absolute;\\n          transition: color 0.5s;\\n          border-radius: 50%;\\n          top: calc(50% - 50px);\\n          right: calc(50% - 35px);\\n          opacity: 0;\\n          transition: opacity 0.1s ease-out;\\n        }\\n\\n        .child .play:not(.can_expand) {\\n          --mdc-icon-button-size: 70px;\\n          --mdc-icon-size: 48px;\\n        }\\n\\n        ha-card:hover .play {\\n          opacity: 1;\\n        }\\n\\n        ha-card:hover .play:not(.can_expand) {\\n          color: var(--primary-color);\\n        }\\n\\n        ha-card:hover .play.can_expand {\\n          bottom: 8px;\\n        }\\n\\n        .child .play.can_expand {\\n          background-color: rgba(var(--rgb-card-background-color), 0.5);\\n          top: auto;\\n          bottom: 0px;\\n          right: 8px;\\n          transition:\\n            bottom 0.1s ease-out,\\n            opacity 0.1s ease-out;\\n        }\\n\\n        .child .play:hover {\\n          color: var(--primary-color);\\n        }\\n\\n        .child .title {\\n          font-size: 16px;\\n          padding-top: 16px;\\n          padding-left: 2px;\\n          overflow: hidden;\\n          display: -webkit-box;\\n          -webkit-box-orient: vertical;\\n          -webkit-line-clamp: 1;\\n          text-overflow: ellipsis;\\n        }\\n\\n        .child ha-card .title {\\n          margin-bottom: 16px;\\n          padding-left: 16px;\\n        }\\n\\n        mwc-list-item .graphic {\\n          background-size: contain;\\n          background-repeat: no-repeat;\\n          background-position: center;\\n          border-radius: 2px;\\n          display: flex;\\n          align-content: center;\\n          align-items: center;\\n          line-height: initial;\\n        }\\n\\n        mwc-list-item .graphic .play {\\n          opacity: 0;\\n          transition: all 0.5s;\\n          background-color: rgba(var(--rgb-card-background-color), 0.5);\\n          border-radius: 50%;\\n          --mdc-icon-button-size: 40px;\\n        }\\n\\n        mwc-list-item:hover .graphic .play {\\n          opacity: 1;\\n          color: var(--primary-text-color);\\n        }\\n\\n        mwc-list-item .graphic .play.show {\\n          opacity: 1;\\n          background-color: transparent;\\n        }\\n\\n        mwc-list-item .title {\\n          margin-left: 16px;\\n          margin-inline-start: 16px;\\n          margin-inline-end: initial;\\n        }\\n\\n        /* ============= Narrow ============= */\\n\\n        :host([narrow]) {\\n          padding: 0;\\n        }\\n\\n        :host([narrow]) .media-source {\\n          padding: 0 24px;\\n        }\\n\\n        :host([narrow]) div.children {\\n          grid-template-columns: minmax(0, 1fr) minmax(0, 1fr) !important;\\n        }\\n\\n        :host([narrow]) .breadcrumb .title {\\n          font-size: 24px;\\n        }\\n        :host([narrow]) .header {\\n          padding: 0;\\n        }\\n        :host([narrow]) .header.no-dialog {\\n          display: block;\\n        }\\n        :host([narrow]) .header_button {\\n          position: absolute;\\n          top: 14px;\\n          right: 8px;\\n        }\\n        :host([narrow]) .header-content {\\n          flex-direction: column;\\n          flex-wrap: nowrap;\\n        }\\n        :host([narrow]) .header-content .img {\\n          height: auto;\\n          width: 100%;\\n          margin-right: 0;\\n          padding-bottom: 50%;\\n          margin-bottom: 8px;\\n          position: relative;\\n          background-position: center;\\n          border-radius: 0;\\n          transition:\\n            width 0.4s,\\n            height 0.4s,\\n            padding-bottom 0.4s;\\n        }\\n        ha-fab {\\n          position: absolute;\\n          --mdc-theme-secondary: var(--primary-color);\\n          bottom: -20px;\\n          right: 20px;\\n        }\\n        :host([narrow]) .header-info mwc-button {\\n          margin-top: 16px;\\n          margin-bottom: 8px;\\n        }\\n        :host([narrow]) .header-info {\\n          padding: 0 16px 8px;\\n        }\\n\\n        /* ============= Scroll ============= */\\n        :host([scrolled]) .breadcrumb .subtitle {\\n          height: 0;\\n          margin: 0;\\n        }\\n        :host([scrolled]) .breadcrumb .title {\\n          -webkit-line-clamp: 1;\\n        }\\n        :host(:not([narrow])[scrolled]) .header:not(.no-img) ha-icon-button {\\n          align-self: center;\\n        }\\n        :host([scrolled]) .header-info mwc-button,\\n        .no-img .header-info mwc-button {\\n          padding-right: 4px;\\n        }\\n        :host([scrolled][narrow]) .no-img .header-info mwc-button {\\n          padding-right: 16px;\\n        }\\n        :host([scrolled]) .header-info {\\n          flex-direction: row;\\n        }\\n        :host([scrolled]) .header-info mwc-button {\\n          align-self: center;\\n          margin-top: 0;\\n          margin-bottom: 0;\\n          padding-bottom: 0;\\n        }\\n        :host([scrolled][narrow]) .no-img .header-info {\\n          flex-direction: row-reverse;\\n        }\\n        :host([scrolled][narrow]) .header-info {\\n          padding: 20px 24px 10px 24px;\\n          align-items: center;\\n        }\\n        :host([scrolled]) .header-content {\\n          align-items: flex-end;\\n          flex-direction: row;\\n        }\\n        :host([scrolled]) .header-content .img {\\n          height: 75px;\\n          width: 75px;\\n        }\\n        :host([scrolled]) .breadcrumb {\\n          padding-top: 0;\\n          align-self: center;\\n        }\\n        :host([scrolled][narrow]) .header-content .img {\\n          height: 100px;\\n          width: 100px;\\n          padding-bottom: initial;\\n          margin-bottom: 0;\\n        }\\n        :host([scrolled]) ha-fab {\\n          bottom: 0px;\\n          right: -24px;\\n          --mdc-fab-box-shadow: none;\\n          --mdc-theme-secondary: rgba(var(--rgb-primary-color), 0.5);\\n        }\\n\\n        lit-virtualizer {\\n          height: 100%;\\n          overflow: overlay !important;\\n          contain: size layout !important;\\n        }\\n\\n        lit-virtualizer.not_shown {\\n          height: calc(100% - 36px);\\n        }\\n\\n        ha-browse-media-tts {\\n          direction: var(--direction);\\n        }\\n      \"])))];\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["grid","mdiArrowUpRight","mdiPlay","mdiPlus","css","html","LitElement","nothing","customElement","eventOptions","property","query","state","classMap","styleMap","until","fireEvent","debounce","isUnavailableState","browseMediaPlayer","BROWSER_PLAYER","MediaClassBrowserSettings","browseLocalMediaPlayer","isTTSMediaSource","showAlertDialog","loadPolyfillIfNeeded","haStyle","brandsUrl","extractDomainFromBrandUrl","isBrandUrl","documentationUrl","loadVirtualizer","HaMediaPlayerBrowse","_decorate","_initialize","_LitElement","_LitElement2","_inherits","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","_assertThisInitialized","_createClass","F","d","kind","decorators","attribute","key","value","type","Boolean","reflect","connectedCallback","_this2","_get","_getPrototypeOf","prototype","call","updateComplete","then","_attachResizeObserver","disconnectedCallback","_resizeObserver","disconnect","_refresh","_asyncToGenerator","_regeneratorRuntime","mark","_callee","currentId","wrap","_callee$","_context","prev","next","navigateIds","_fetchData","entityId","media_content_id","media_content_type","_currentItem","sent","ids","current","t0","_setError","stop","refresh","apply","play","_this$_currentItem","can_play","_runAction","willUpdate","changedProps","_this$_content","_this3","hasUpdated","has","undefined","oldNavigateIds","get","_content","scrollTo","scrolled","oldCurrentItem","oldParentItem","_parentItem","parentId","currentProm","parentProm","every","oldVal","idx","curVal","Promise","resolve","item","err","_this3$hass$states$_t","isNewEntityWithSamePath","oldItem","replace","code","hass","states","message","localize","parent","shouldUpdate","size","oldHass","firstUpdated","_measureCard","updated","_animateHeaderHeight","_this$_virtualizer","_setHeaderHeight","_observed","virtualizer","_virtualizer","setTimeout","_observeMutations","render","_error","_templateObject","_taggedTemplateLiteral","_renderError","_templateObject2","currentItem","subtitle","media_class","children","mediaClass","childrenMediaClass","children_media_class","directory","backgroundImage","thumbnail","_getThumbnailURLorBase64","_templateObject3","_templateObject4","dialog","_templateObject5","narrow","_templateObject6","_actionClicked","action","title","_templateObject7","_templateObject8","_scroll","_templateObject9","_templateObject10","_ttsPicked","not_shown","_templateObject11","_templateObject12","preferredLayout","layout","_templateObject13","itemSize","width","height","thumbnail_ratio","gap","flex","preserve","justify","direction","_renderGridItem","portrait","_templateObject14","count","_templateObject15","_renderListItem","_templateObject16","show_list_images","_this4","child","_templateObject17","_childClicked","_templateObject18","includes","_templateObject19","icon","_templateObject20","can_expand","_this5","_templateObject21","_templateObject22","_templateObject23","graphic","_templateObject24","show","_getThumbnailURLorBase","_callee2","thumbnailUrl","_this6","_this$hass$themes","_callee2$","_context2","abrupt","startsWith","reject","fetchWithAuth","response","blob","reader","FileReader","onload","result","onerror","e","readAsDataURL","domain","useFallback","darkOptimized","themes","darkMode","_x","_this7","ev","stopPropagation","currentTarget","slice","push","detail","Object","assign","_this8","_ref","_callee3","target","_callee3$","_context3","_toConsumableArray","_x2","_fetchData2","_callee4","mediaContentId","mediaContentType","_callee4$","_context4","_x3","_x4","_x5","window","innerWidth","offsetWidth","_attachResizeObserver2","_callee5","_this9","_callee5$","_context5","ResizeObserver","observe","_closeDialogAction","error","text","_templateObject25","documentation","_templateObject26","_templateObject27","_setHeaderHeight2","_callee6","header","content","_callee6$","_context6","_header","_headerOffsetHeight","offsetHeight","style","marginTop","maxHeight","_this10","start","animate","time","elapsed","requestAnimationFrame","passive","scrollTop","static","styles","_templateObject28"],"sources":["/Users/sercanardil/Desktop/frontend/src/components/media-player/ha-media-player-browse.ts"],"sourcesContent":["import type { LitVirtualizer } from \"@lit-labs/virtualizer\";\nimport { grid } from \"@lit-labs/virtualizer/layouts/grid\";\nimport \"@material/mwc-button/mwc-button\";\nimport \"@material/mwc-list/mwc-list\";\nimport \"@material/mwc-list/mwc-list-item\";\nimport { mdiArrowUpRight, mdiPlay, mdiPlus } from \"@mdi/js\";\nimport \"@lrnwebcomponents/simple-tooltip/simple-tooltip\";\nimport {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  nothing,\n} from \"lit\";\nimport {\n  customElement,\n  eventOptions,\n  property,\n  query,\n  state,\n} from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { styleMap } from \"lit/directives/style-map\";\nimport { until } from \"lit/directives/until\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { debounce } from \"../../common/util/debounce\";\nimport { isUnavailableState } from \"../../data/entity\";\nimport type { MediaPlayerItem } from \"../../data/media-player\";\nimport {\n  browseMediaPlayer,\n  BROWSER_PLAYER,\n  MediaClassBrowserSettings,\n  MediaPickedEvent,\n  MediaPlayerBrowseAction,\n  MediaPlayerLayoutType,\n} from \"../../data/media-player\";\nimport { browseLocalMediaPlayer } from \"../../data/media_source\";\nimport { isTTSMediaSource } from \"../../data/tts\";\nimport { showAlertDialog } from \"../../dialogs/generic/show-dialog-box\";\nimport { loadPolyfillIfNeeded } from \"../../resources/resize-observer.polyfill\";\nimport { haStyle } from \"../../resources/styles\";\nimport type { HomeAssistant } from \"../../types\";\nimport {\n  brandsUrl,\n  extractDomainFromBrandUrl,\n  isBrandUrl,\n} from \"../../util/brands-url\";\nimport { documentationUrl } from \"../../util/documentation-url\";\nimport \"../entity/ha-entity-picker\";\nimport \"../ha-alert\";\nimport \"../ha-button-menu\";\nimport \"../ha-card\";\nimport \"../ha-circular-progress\";\nimport \"../ha-fab\";\nimport \"../ha-icon-button\";\nimport \"../ha-svg-icon\";\nimport \"./ha-browse-media-tts\";\nimport type { TtsMediaPickedEvent } from \"./ha-browse-media-tts\";\nimport { loadVirtualizer } from \"../../resources/virtualizer\";\n\ndeclare global {\n  interface HASSDomEvents {\n    \"media-picked\": MediaPickedEvent;\n    \"media-browsed\": {\n      // Items of the new browse stack\n      ids: MediaPlayerItemId[];\n      // Current fetched item for this browse stack\n      current?: MediaPlayerItem;\n      // If the new stack should replace the old stack\n      replace?: boolean;\n    };\n  }\n}\n\nexport interface MediaPlayerItemId {\n  media_content_id: string | undefined;\n  media_content_type: string | undefined;\n}\n\n@customElement(\"ha-media-player-browse\")\nexport class HaMediaPlayerBrowse extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property() public entityId!: string;\n\n  @property() public action: MediaPlayerBrowseAction = \"play\";\n\n  @property() public preferredLayout: MediaPlayerLayoutType = \"auto\";\n\n  @property({ type: Boolean }) public dialog = false;\n\n  @property({ attribute: false }) public navigateIds: MediaPlayerItemId[] = [];\n\n  // @todo Consider reworking to eliminate need for attribute since it is manipulated internally\n  @property({ type: Boolean, reflect: true }) public narrow = false;\n\n  // @todo Consider reworking to eliminate need for attribute since it is manipulated internally\n  @property({ type: Boolean, reflect: true }) public scrolled = false;\n\n  @state() private _error?: { message: string; code: string };\n\n  @state() private _parentItem?: MediaPlayerItem;\n\n  @state() private _currentItem?: MediaPlayerItem;\n\n  @query(\".header\") private _header?: HTMLDivElement;\n\n  @query(\".content\") private _content?: HTMLDivElement;\n\n  @query(\"lit-virtualizer\") private _virtualizer?: LitVirtualizer;\n\n  private _observed = false;\n\n  private _headerOffsetHeight = 0;\n\n  private _resizeObserver?: ResizeObserver;\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this.updateComplete.then(() => this._attachResizeObserver());\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    if (this._resizeObserver) {\n      this._resizeObserver.disconnect();\n    }\n  }\n\n  public async refresh() {\n    const currentId = this.navigateIds[this.navigateIds.length - 1];\n    try {\n      this._currentItem = await this._fetchData(\n        this.entityId,\n        currentId.media_content_id,\n        currentId.media_content_type\n      );\n      // Update the parent with latest item.\n      fireEvent(this, \"media-browsed\", {\n        ids: this.navigateIds,\n        current: this._currentItem,\n      });\n    } catch (err) {\n      this._setError(err);\n    }\n  }\n\n  public play(): void {\n    if (this._currentItem?.can_play) {\n      this._runAction(this._currentItem);\n    }\n  }\n\n  public willUpdate(changedProps: PropertyValues<this>): void {\n    super.willUpdate(changedProps);\n\n    if (!this.hasUpdated) {\n      loadVirtualizer();\n    }\n\n    if (changedProps.has(\"entityId\")) {\n      this._setError(undefined);\n    } else if (!changedProps.has(\"navigateIds\")) {\n      // Neither entity ID or navigateIDs changed, nothing to fetch\n      return;\n    }\n\n    this._setError(undefined);\n\n    const oldNavigateIds = changedProps.get(\"navigateIds\") as\n      | this[\"navigateIds\"]\n      | undefined;\n    const navigateIds = this.navigateIds;\n\n    // We're navigating. Reset the shizzle.\n    this._content?.scrollTo(0, 0);\n    this.scrolled = false;\n    const oldCurrentItem = this._currentItem;\n    const oldParentItem = this._parentItem;\n    this._currentItem = undefined;\n    this._parentItem = undefined;\n    const currentId = navigateIds[navigateIds.length - 1];\n    const parentId =\n      navigateIds.length > 1 ? navigateIds[navigateIds.length - 2] : undefined;\n    let currentProm: Promise<MediaPlayerItem> | undefined;\n    let parentProm: Promise<MediaPlayerItem> | undefined;\n\n    // See if we can take loading shortcuts if navigating to parent or child\n    if (!changedProps.has(\"entityId\")) {\n      if (\n        // Check if we navigated to a child\n        oldNavigateIds &&\n        navigateIds.length === oldNavigateIds.length + 1 &&\n        oldNavigateIds.every((oldVal, idx) => {\n          const curVal = navigateIds[idx];\n          return (\n            curVal.media_content_id === oldVal.media_content_id &&\n            curVal.media_content_type === oldVal.media_content_type\n          );\n        })\n      ) {\n        parentProm = Promise.resolve(oldCurrentItem!);\n      } else if (\n        // Check if we navigated to a parent\n        oldNavigateIds &&\n        navigateIds.length === oldNavigateIds.length - 1 &&\n        navigateIds.every((curVal, idx) => {\n          const oldVal = oldNavigateIds[idx];\n          return (\n            curVal.media_content_id === oldVal.media_content_id &&\n            curVal.media_content_type === oldVal.media_content_type\n          );\n        })\n      ) {\n        currentProm = Promise.resolve(oldParentItem!);\n      }\n    }\n    // Fetch current\n    if (!currentProm) {\n      currentProm = this._fetchData(\n        this.entityId,\n        currentId.media_content_id,\n        currentId.media_content_type\n      );\n    }\n    currentProm.then(\n      (item) => {\n        this._currentItem = item;\n        fireEvent(this, \"media-browsed\", {\n          ids: navigateIds,\n          current: item,\n        });\n      },\n      (err) => {\n        // When we change entity ID, we will first try to see if the new entity is\n        // able to resolve the new path. If that results in an error, browse the root.\n        const isNewEntityWithSamePath =\n          oldNavigateIds &&\n          changedProps.has(\"entityId\") &&\n          navigateIds.length === oldNavigateIds.length &&\n          oldNavigateIds.every(\n            (oldItem, idx) =>\n              navigateIds[idx].media_content_id === oldItem.media_content_id &&\n              navigateIds[idx].media_content_type === oldItem.media_content_type\n          );\n        if (isNewEntityWithSamePath) {\n          fireEvent(this, \"media-browsed\", {\n            ids: [\n              { media_content_id: undefined, media_content_type: undefined },\n            ],\n            replace: true,\n          });\n        } else if (\n          err.code === \"entity_not_found\" &&\n          isUnavailableState(this.hass.states[this.entityId]?.state)\n        ) {\n          this._setError({\n            message: this.hass.localize(\n              `ui.components.media-browser.media_player_unavailable`\n            ),\n            code: \"entity_not_found\",\n          });\n        } else {\n          this._setError(err);\n        }\n      }\n    );\n    // Fetch parent\n    if (!parentProm && parentId !== undefined) {\n      parentProm = this._fetchData(\n        this.entityId,\n        parentId.media_content_id,\n        parentId.media_content_type\n      );\n    }\n    if (parentProm) {\n      parentProm.then((parent) => {\n        this._parentItem = parent;\n      });\n    }\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.size > 1 || !changedProps.has(\"hass\")) {\n      return true;\n    }\n    const oldHass = changedProps.get(\"hass\") as this[\"hass\"];\n    return oldHass === undefined || oldHass.localize !== this.hass.localize;\n  }\n\n  protected firstUpdated(): void {\n    this._measureCard();\n    this._attachResizeObserver();\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n\n    if (changedProps.has(\"_scrolled\")) {\n      this._animateHeaderHeight();\n    } else if (changedProps.has(\"_currentItem\")) {\n      this._setHeaderHeight();\n\n      // This fixes a race condition for resizing of the cards using the grid layout\n      if (this._observed) {\n        return;\n      }\n\n      // @ts-ignore\n      const virtualizer = this._virtualizer?._virtualizer;\n\n      if (virtualizer) {\n        this._observed = true;\n        setTimeout(() => virtualizer._observeMutations(), 0);\n      }\n    }\n  }\n\n  protected render() {\n    if (this._error) {\n      return html`\n        <div class=\"container\">\n          <ha-alert alert-type=\"error\">\n            ${this._renderError(this._error)}\n          </ha-alert>\n        </div>\n      `;\n    }\n\n    if (!this._currentItem) {\n      return html`<ha-circular-progress indeterminate></ha-circular-progress>`;\n    }\n\n    const currentItem = this._currentItem;\n\n    const subtitle = this.hass.localize(\n      `ui.components.media-browser.class.${currentItem.media_class}`\n    );\n    const children = currentItem.children || [];\n    const mediaClass = MediaClassBrowserSettings[currentItem.media_class];\n    const childrenMediaClass = currentItem.children_media_class\n      ? MediaClassBrowserSettings[currentItem.children_media_class]\n      : MediaClassBrowserSettings.directory;\n\n    const backgroundImage = currentItem.thumbnail\n      ? this._getThumbnailURLorBase64(currentItem.thumbnail).then(\n          (value) => `url(${value})`\n        )\n      : \"none\";\n\n    return html`\n              ${\n                currentItem.can_play\n                  ? html`\n                      <div\n                        class=\"header ${classMap({\n                          \"no-img\": !currentItem.thumbnail,\n                          \"no-dialog\": !this.dialog,\n                        })}\"\n                        @transitionend=${this._setHeaderHeight}\n                      >\n                        <div class=\"header-content\">\n                          ${currentItem.thumbnail\n                            ? html`\n                                <div\n                                  class=\"img\"\n                                  style=\"background-image: ${until(\n                                    backgroundImage,\n                                    \"\"\n                                  )}\"\n                                >\n                                  ${this.narrow && currentItem?.can_play\n                                    ? html`\n                                        <ha-fab\n                                          mini\n                                          .item=${currentItem}\n                                          @click=${this._actionClicked}\n                                        >\n                                          <ha-svg-icon\n                                            slot=\"icon\"\n                                            .label=${this.hass.localize(\n                                              `ui.components.media-browser.${this.action}-media`\n                                            )}\n                                            .path=${this.action === \"play\"\n                                              ? mdiPlay\n                                              : mdiPlus}\n                                          ></ha-svg-icon>\n                                          ${this.hass.localize(\n                                            `ui.components.media-browser.${this.action}`\n                                          )}\n                                        </ha-fab>\n                                      `\n                                    : \"\"}\n                                </div>\n                              `\n                            : nothing}\n                          <div class=\"header-info\">\n                            <div class=\"breadcrumb\">\n                              <h1 class=\"title\">${currentItem.title}</h1>\n                              ${subtitle\n                                ? html` <h2 class=\"subtitle\">${subtitle}</h2> `\n                                : \"\"}\n                            </div>\n                            ${currentItem.can_play &&\n                            (!currentItem.thumbnail || !this.narrow)\n                              ? html`\n                                  <mwc-button\n                                    raised\n                                    .item=${currentItem}\n                                    @click=${this._actionClicked}\n                                  >\n                                    <ha-svg-icon\n                                      .label=${this.hass.localize(\n                                        `ui.components.media-browser.${this.action}-media`\n                                      )}\n                                      .path=${this.action === \"play\"\n                                        ? mdiPlay\n                                        : mdiPlus}\n                                    ></ha-svg-icon>\n                                    ${this.hass.localize(\n                                      `ui.components.media-browser.${this.action}`\n                                    )}\n                                  </mwc-button>\n                                `\n                              : \"\"}\n                          </div>\n                        </div>\n                      </div>\n                    `\n                  : \"\"\n              }\n          <div\n            class=\"content\"\n            @scroll=${this._scroll}\n            @touchmove=${this._scroll}\n          >\n            ${\n              this._error\n                ? html`\n                    <div class=\"container\">\n                      <ha-alert alert-type=\"error\">\n                        ${this._renderError(this._error)}\n                      </ha-alert>\n                    </div>\n                  `\n                : isTTSMediaSource(currentItem.media_content_id)\n                  ? html`\n                      <ha-browse-media-tts\n                        .item=${currentItem}\n                        .hass=${this.hass}\n                        .action=${this.action}\n                        @tts-picked=${this._ttsPicked}\n                      ></ha-browse-media-tts>\n                    `\n                  : !children.length && !currentItem.not_shown\n                    ? html`\n                        <div class=\"container no-items\">\n                          ${currentItem.media_content_id ===\n                          \"media-source://media_source/local/.\"\n                            ? html`\n                                <div class=\"highlight-add-button\">\n                                  <span>\n                                    <ha-svg-icon\n                                      .path=${mdiArrowUpRight}\n                                    ></ha-svg-icon>\n                                  </span>\n                                  <span>\n                                    ${this.hass.localize(\n                                      \"ui.components.media-browser.file_management.highlight_button\"\n                                    )}\n                                  </span>\n                                </div>\n                              `\n                            : this.hass.localize(\n                                \"ui.components.media-browser.no_items\"\n                              )}\n                        </div>\n                      `\n                    : this.preferredLayout === \"grid\" ||\n                        (this.preferredLayout === \"auto\" &&\n                          childrenMediaClass.layout === \"grid\")\n                      ? html`\n                          <lit-virtualizer\n                            scroller\n                            .layout=${grid({\n                              itemSize: {\n                                width: \"175px\",\n                                height:\n                                  childrenMediaClass.thumbnail_ratio ===\n                                  \"portrait\"\n                                    ? \"312px\"\n                                    : \"225px\",\n                              },\n                              gap: \"16px\",\n                              flex: { preserve: \"aspect-ratio\" },\n                              justify: \"space-evenly\",\n                              direction: \"vertical\",\n                            })}\n                            .items=${children}\n                            .renderItem=${this._renderGridItem}\n                            class=\"children ${classMap({\n                              portrait:\n                                childrenMediaClass.thumbnail_ratio ===\n                                \"portrait\",\n                              not_shown: !!currentItem.not_shown,\n                            })}\"\n                          ></lit-virtualizer>\n                          ${currentItem.not_shown\n                            ? html`\n                                <div class=\"grid not-shown\">\n                                  <div class=\"title\">\n                                    ${this.hass.localize(\n                                      \"ui.components.media-browser.not_shown\",\n                                      { count: currentItem.not_shown }\n                                    )}\n                                  </div>\n                                </div>\n                              `\n                            : \"\"}\n                        `\n                      : html`\n                          <mwc-list>\n                            <lit-virtualizer\n                              scroller\n                              .items=${children}\n                              style=${styleMap({\n                                height: `${children.length * 72 + 26}px`,\n                              })}\n                              .renderItem=${this._renderListItem}\n                            ></lit-virtualizer>\n                            ${currentItem.not_shown\n                              ? html`\n                                  <mwc-list-item\n                                    noninteractive\n                                    class=\"not-shown\"\n                                    .graphic=${mediaClass.show_list_images\n                                      ? \"medium\"\n                                      : \"avatar\"}\n                                  >\n                                    <span class=\"title\">\n                                      ${this.hass.localize(\n                                        \"ui.components.media-browser.not_shown\",\n                                        { count: currentItem.not_shown }\n                                      )}\n                                    </span>\n                                  </mwc-list-item>\n                                `\n                              : \"\"}\n                          </mwc-list>\n                        `\n            }\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private _renderGridItem = (child: MediaPlayerItem): TemplateResult => {\n    const backgroundImage = child.thumbnail\n      ? this._getThumbnailURLorBase64(child.thumbnail).then(\n          (value) => `url(${value})`\n        )\n      : \"none\";\n\n    return html`\n      <div class=\"child\" .item=${child} @click=${this._childClicked}>\n        <ha-card outlined>\n          <div class=\"thumbnail\">\n            ${child.thumbnail\n              ? html`\n                  <div\n                    class=\"${classMap({\n                      \"centered-image\": [\"app\", \"directory\"].includes(\n                        child.media_class\n                      ),\n                      \"brand-image\": isBrandUrl(child.thumbnail),\n                    })} image\"\n                    style=\"background-image: ${until(backgroundImage, \"\")}\"\n                  ></div>\n                `\n              : html`\n                  <div class=\"icon-holder image\">\n                    <ha-svg-icon\n                      class=\"folder\"\n                      .path=${MediaClassBrowserSettings[\n                        child.media_class === \"directory\"\n                          ? child.children_media_class || child.media_class\n                          : child.media_class\n                      ].icon}\n                    ></ha-svg-icon>\n                  </div>\n                `}\n            ${child.can_play\n              ? html`\n                  <ha-icon-button\n                    class=\"play ${classMap({\n                      can_expand: child.can_expand,\n                    })}\"\n                    .item=${child}\n                    .label=${this.hass.localize(\n                      `ui.components.media-browser.${this.action}-media`\n                    )}\n                    .path=${this.action === \"play\" ? mdiPlay : mdiPlus}\n                    @click=${this._actionClicked}\n                  ></ha-icon-button>\n                `\n              : \"\"}\n          </div>\n          <div class=\"title\">\n            ${child.title}\n            <simple-tooltip fitToVisibleBounds position=\"top\" offset=\"4\"\n              >${child.title}</simple-tooltip\n            >\n          </div>\n        </ha-card>\n      </div>\n    `;\n  };\n\n  private _renderListItem = (child: MediaPlayerItem): TemplateResult => {\n    const currentItem = this._currentItem;\n    const mediaClass = MediaClassBrowserSettings[currentItem!.media_class];\n\n    const backgroundImage =\n      mediaClass.show_list_images && child.thumbnail\n        ? this._getThumbnailURLorBase64(child.thumbnail).then(\n            (value) => `url(${value})`\n          )\n        : \"none\";\n\n    return html`\n      <mwc-list-item\n        @click=${this._childClicked}\n        .item=${child}\n        .graphic=${mediaClass.show_list_images ? \"medium\" : \"avatar\"}\n      >\n        ${backgroundImage === \"none\" && !child.can_play\n          ? html`<ha-svg-icon\n              .path=${MediaClassBrowserSettings[\n                child.media_class === \"directory\"\n                  ? child.children_media_class || child.media_class\n                  : child.media_class\n              ].icon}\n              slot=\"graphic\"\n            ></ha-svg-icon>`\n          : html`<div\n              class=${classMap({\n                graphic: true,\n                thumbnail: mediaClass.show_list_images === true,\n              })}\n              style=\"background-image: ${until(backgroundImage, \"\")}\"\n              slot=\"graphic\"\n            >\n              ${child.can_play\n                ? html`<ha-icon-button\n                    class=\"play ${classMap({\n                      show: !mediaClass.show_list_images || !child.thumbnail,\n                    })}\"\n                    .item=${child}\n                    .label=${this.hass.localize(\n                      `ui.components.media-browser.${this.action}-media`\n                    )}\n                    .path=${this.action === \"play\" ? mdiPlay : mdiPlus}\n                    @click=${this._actionClicked}\n                  ></ha-icon-button>`\n                : nothing}\n            </div>`}\n        <span class=\"title\">${child.title}</span>\n      </mwc-list-item>\n    `;\n  };\n\n  private async _getThumbnailURLorBase64(\n    thumbnailUrl: string | undefined\n  ): Promise<string> {\n    if (!thumbnailUrl) {\n      return \"\";\n    }\n\n    if (thumbnailUrl.startsWith(\"/\")) {\n      // Thumbnails served by local API require authentication\n      return new Promise((resolve, reject) => {\n        this.hass\n          .fetchWithAuth(thumbnailUrl!)\n          // Since we are fetching with an authorization header, we cannot just put the\n          // URL directly into the document; we need to embed the image. We could do this\n          // using blob URLs, but then we would need to keep track of them in order to\n          // release them properly. Instead, we embed the thumbnail using base64.\n          .then((response) => response.blob())\n          .then((blob) => {\n            const reader = new FileReader();\n            reader.onload = () => {\n              const result = reader.result;\n              resolve(typeof result === \"string\" ? result : \"\");\n            };\n            reader.onerror = (e) => reject(e);\n            reader.readAsDataURL(blob);\n          });\n      });\n    }\n\n    if (isBrandUrl(thumbnailUrl)) {\n      // The backend is not aware of the theme used by the users,\n      // so we rewrite the URL to show a proper icon\n      thumbnailUrl = brandsUrl({\n        domain: extractDomainFromBrandUrl(thumbnailUrl),\n        type: \"icon\",\n        useFallback: true,\n        darkOptimized: this.hass.themes?.darkMode,\n      });\n    }\n\n    return thumbnailUrl;\n  }\n\n  private _actionClicked = (ev: MouseEvent): void => {\n    ev.stopPropagation();\n    const item = (ev.currentTarget as any).item;\n\n    this._runAction(item);\n  };\n\n  private _runAction(item: MediaPlayerItem): void {\n    fireEvent(this, \"media-picked\", { item, navigateIds: this.navigateIds });\n  }\n\n  private _ttsPicked(ev: CustomEvent<TtsMediaPickedEvent>): void {\n    ev.stopPropagation();\n    const navigateIds = this.navigateIds.slice(0, -1);\n    navigateIds.push(ev.detail.item);\n    fireEvent(this, \"media-picked\", {\n      ...ev.detail,\n      navigateIds,\n    });\n  }\n\n  private _childClicked = async (ev: MouseEvent): Promise<void> => {\n    const target = ev.currentTarget as any;\n    const item: MediaPlayerItem = target.item;\n\n    if (!item) {\n      return;\n    }\n\n    if (!item.can_expand) {\n      this._runAction(item);\n      return;\n    }\n\n    fireEvent(this, \"media-browsed\", {\n      ids: [...this.navigateIds, item],\n    });\n  };\n\n  private async _fetchData(\n    entityId: string,\n    mediaContentId?: string,\n    mediaContentType?: string\n  ): Promise<MediaPlayerItem> {\n    return entityId !== BROWSER_PLAYER\n      ? browseMediaPlayer(this.hass, entityId, mediaContentId, mediaContentType)\n      : browseLocalMediaPlayer(this.hass, mediaContentId);\n  }\n\n  private _measureCard(): void {\n    this.narrow = (this.dialog ? window.innerWidth : this.offsetWidth) < 450;\n  }\n\n  private async _attachResizeObserver(): Promise<void> {\n    if (!this._resizeObserver) {\n      await loadPolyfillIfNeeded();\n      this._resizeObserver = new ResizeObserver(\n        debounce(() => this._measureCard(), 250, false)\n      );\n    }\n\n    this._resizeObserver.observe(this);\n  }\n\n  private _closeDialogAction(): void {\n    fireEvent(this, \"close-dialog\");\n  }\n\n  private _setError(error: any) {\n    if (!this.dialog) {\n      this._error = error;\n      return;\n    }\n\n    if (!error) {\n      return;\n    }\n\n    this._closeDialogAction();\n    showAlertDialog(this, {\n      title: this.hass.localize(\n        \"ui.components.media-browser.media_browsing_error\"\n      ),\n      text: this._renderError(error),\n    });\n  }\n\n  private _renderError(err: { message: string; code: string }) {\n    if (err.message === \"Media directory does not exist.\") {\n      return html`\n        <h2>\n          ${this.hass.localize(\n            \"ui.components.media-browser.no_local_media_found\"\n          )}\n        </h2>\n        <p>\n          ${this.hass.localize(\"ui.components.media-browser.no_media_folder\")}\n          <br />\n          ${this.hass.localize(\"ui.components.media-browser.setup_local_help\", {\n            documentation: html`<a\n              href=${documentationUrl(\n                this.hass,\n                \"/more-info/local-media/setup-media\"\n              )}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              >${this.hass.localize(\n                \"ui.components.media-browser.documentation\"\n              )}</a\n            >`,\n          })}\n          <br />\n          ${this.hass.localize(\"ui.components.media-browser.local_media_files\")}\n        </p>\n      `;\n    }\n    return html`<span class=\"error\">${err.message}</span>`;\n  }\n\n  private async _setHeaderHeight() {\n    await this.updateComplete;\n    const header = this._header;\n    const content = this._content;\n    if (!header || !content) {\n      return;\n    }\n    this._headerOffsetHeight = header.offsetHeight;\n    content.style.marginTop = `${this._headerOffsetHeight}px`;\n    content.style.maxHeight = `calc(var(--media-browser-max-height, 100%) - ${this._headerOffsetHeight}px)`;\n  }\n\n  private _animateHeaderHeight() {\n    let start;\n    const animate = (time) => {\n      if (start === undefined) {\n        start = time;\n      }\n      const elapsed = time - start;\n      this._setHeaderHeight();\n      if (elapsed < 400) {\n        requestAnimationFrame(animate);\n      }\n    };\n    requestAnimationFrame(animate);\n  }\n\n  @eventOptions({ passive: true })\n  private _scroll(ev: Event): void {\n    const content = ev.currentTarget as HTMLDivElement;\n    if (!this.scrolled && content.scrollTop > this._headerOffsetHeight) {\n      this.scrolled = true;\n    } else if (this.scrolled && content.scrollTop < this._headerOffsetHeight) {\n      this.scrolled = false;\n    }\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      css`\n        :host {\n          display: flex;\n          flex-direction: column;\n          position: relative;\n        }\n\n        ha-circular-progress {\n          --mdc-theme-primary: var(--primary-color);\n          display: flex;\n          justify-content: center;\n          margin: 40px;\n        }\n\n        .container {\n          padding: 16px;\n        }\n\n        .no-items {\n          padding-left: 32px;\n        }\n\n        .highlight-add-button {\n          display: flex;\n          flex-direction: row-reverse;\n          margin-right: 48px;\n        }\n\n        .highlight-add-button ha-svg-icon {\n          position: relative;\n          top: -0.5em;\n          margin-left: 8px;\n        }\n\n        .content {\n          overflow-y: auto;\n          box-sizing: border-box;\n          height: 100%;\n        }\n\n        /* HEADER */\n\n        .header {\n          display: flex;\n          justify-content: space-between;\n          border-bottom: 1px solid var(--divider-color);\n          background-color: var(--card-background-color);\n          position: absolute;\n          top: 0;\n          right: 0;\n          left: 0;\n          z-index: 3;\n          padding: 16px;\n        }\n        .header_button {\n          position: relative;\n          right: -8px;\n        }\n        .header-content {\n          display: flex;\n          flex-wrap: wrap;\n          flex-grow: 1;\n          align-items: flex-start;\n        }\n        .header-content .img {\n          height: 175px;\n          width: 175px;\n          margin-right: 16px;\n          background-size: cover;\n          border-radius: 2px;\n          transition:\n            width 0.4s,\n            height 0.4s;\n        }\n        .header-info {\n          display: flex;\n          flex-direction: column;\n          justify-content: space-between;\n          align-self: stretch;\n          min-width: 0;\n          flex: 1;\n        }\n        .header-info mwc-button {\n          display: block;\n          --mdc-theme-primary: var(--primary-color);\n          padding-bottom: 16px;\n        }\n        .breadcrumb {\n          display: flex;\n          flex-direction: column;\n          overflow: hidden;\n          flex-grow: 1;\n          padding-top: 16px;\n        }\n        .breadcrumb .title {\n          font-size: 32px;\n          line-height: 1.2;\n          font-weight: bold;\n          margin: 0;\n          overflow: hidden;\n          display: -webkit-box;\n          -webkit-box-orient: vertical;\n          -webkit-line-clamp: 2;\n          padding-right: 8px;\n        }\n        .breadcrumb .previous-title {\n          font-size: 14px;\n          padding-bottom: 8px;\n          color: var(--secondary-text-color);\n          overflow: hidden;\n          text-overflow: ellipsis;\n          cursor: pointer;\n          --mdc-icon-size: 14px;\n        }\n        .breadcrumb .subtitle {\n          font-size: 16px;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          margin-bottom: 0;\n          transition:\n            height 0.5s,\n            margin 0.5s;\n        }\n\n        .not-shown {\n          font-style: italic;\n          color: var(--secondary-text-color);\n          padding: 8px 16px 8px;\n        }\n\n        .grid.not-shown {\n          display: flex;\n          align-items: center;\n          text-align: center;\n        }\n\n        /* ============= CHILDREN ============= */\n\n        mwc-list {\n          --mdc-list-vertical-padding: 0;\n          --mdc-list-item-graphic-margin: 0;\n          --mdc-theme-text-icon-on-background: var(--secondary-text-color);\n          margin-top: 10px;\n        }\n\n        mwc-list li:last-child {\n          display: none;\n        }\n\n        mwc-list li[divider] {\n          border-bottom-color: var(--divider-color);\n        }\n\n        mwc-list-item {\n          width: 100%;\n        }\n\n        div.children {\n          display: grid;\n          grid-template-columns: repeat(\n            auto-fit,\n            minmax(var(--media-browse-item-size, 175px), 0.1fr)\n          );\n          grid-gap: 16px;\n          padding: 16px;\n        }\n\n        :host([dialog]) .children {\n          grid-template-columns: repeat(\n            auto-fit,\n            minmax(var(--media-browse-item-size, 175px), 0.33fr)\n          );\n        }\n\n        .child {\n          display: flex;\n          flex-direction: column;\n          cursor: pointer;\n        }\n\n        ha-card {\n          position: relative;\n          width: 100%;\n          box-sizing: border-box;\n        }\n\n        .children ha-card .thumbnail {\n          width: 100%;\n          position: relative;\n          box-sizing: border-box;\n          transition: padding-bottom 0.1s ease-out;\n          padding-bottom: 100%;\n        }\n\n        .portrait ha-card .thumbnail {\n          padding-bottom: 150%;\n        }\n\n        ha-card .image {\n          border-radius: 3px 3px 0 0;\n        }\n\n        .image {\n          position: absolute;\n          top: 0;\n          right: 0;\n          left: 0;\n          bottom: 0;\n          background-size: cover;\n          background-repeat: no-repeat;\n          background-position: center;\n        }\n\n        .centered-image {\n          margin: 0 8px;\n          background-size: contain;\n        }\n\n        .brand-image {\n          background-size: 40%;\n        }\n\n        .children ha-card .icon-holder {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n        }\n\n        .child .folder {\n          color: var(--secondary-text-color);\n          --mdc-icon-size: calc(var(--media-browse-item-size, 175px) * 0.4);\n        }\n\n        .child .play {\n          position: absolute;\n          transition: color 0.5s;\n          border-radius: 50%;\n          top: calc(50% - 50px);\n          right: calc(50% - 35px);\n          opacity: 0;\n          transition: opacity 0.1s ease-out;\n        }\n\n        .child .play:not(.can_expand) {\n          --mdc-icon-button-size: 70px;\n          --mdc-icon-size: 48px;\n        }\n\n        ha-card:hover .play {\n          opacity: 1;\n        }\n\n        ha-card:hover .play:not(.can_expand) {\n          color: var(--primary-color);\n        }\n\n        ha-card:hover .play.can_expand {\n          bottom: 8px;\n        }\n\n        .child .play.can_expand {\n          background-color: rgba(var(--rgb-card-background-color), 0.5);\n          top: auto;\n          bottom: 0px;\n          right: 8px;\n          transition:\n            bottom 0.1s ease-out,\n            opacity 0.1s ease-out;\n        }\n\n        .child .play:hover {\n          color: var(--primary-color);\n        }\n\n        .child .title {\n          font-size: 16px;\n          padding-top: 16px;\n          padding-left: 2px;\n          overflow: hidden;\n          display: -webkit-box;\n          -webkit-box-orient: vertical;\n          -webkit-line-clamp: 1;\n          text-overflow: ellipsis;\n        }\n\n        .child ha-card .title {\n          margin-bottom: 16px;\n          padding-left: 16px;\n        }\n\n        mwc-list-item .graphic {\n          background-size: contain;\n          background-repeat: no-repeat;\n          background-position: center;\n          border-radius: 2px;\n          display: flex;\n          align-content: center;\n          align-items: center;\n          line-height: initial;\n        }\n\n        mwc-list-item .graphic .play {\n          opacity: 0;\n          transition: all 0.5s;\n          background-color: rgba(var(--rgb-card-background-color), 0.5);\n          border-radius: 50%;\n          --mdc-icon-button-size: 40px;\n        }\n\n        mwc-list-item:hover .graphic .play {\n          opacity: 1;\n          color: var(--primary-text-color);\n        }\n\n        mwc-list-item .graphic .play.show {\n          opacity: 1;\n          background-color: transparent;\n        }\n\n        mwc-list-item .title {\n          margin-left: 16px;\n          margin-inline-start: 16px;\n          margin-inline-end: initial;\n        }\n\n        /* ============= Narrow ============= */\n\n        :host([narrow]) {\n          padding: 0;\n        }\n\n        :host([narrow]) .media-source {\n          padding: 0 24px;\n        }\n\n        :host([narrow]) div.children {\n          grid-template-columns: minmax(0, 1fr) minmax(0, 1fr) !important;\n        }\n\n        :host([narrow]) .breadcrumb .title {\n          font-size: 24px;\n        }\n        :host([narrow]) .header {\n          padding: 0;\n        }\n        :host([narrow]) .header.no-dialog {\n          display: block;\n        }\n        :host([narrow]) .header_button {\n          position: absolute;\n          top: 14px;\n          right: 8px;\n        }\n        :host([narrow]) .header-content {\n          flex-direction: column;\n          flex-wrap: nowrap;\n        }\n        :host([narrow]) .header-content .img {\n          height: auto;\n          width: 100%;\n          margin-right: 0;\n          padding-bottom: 50%;\n          margin-bottom: 8px;\n          position: relative;\n          background-position: center;\n          border-radius: 0;\n          transition:\n            width 0.4s,\n            height 0.4s,\n            padding-bottom 0.4s;\n        }\n        ha-fab {\n          position: absolute;\n          --mdc-theme-secondary: var(--primary-color);\n          bottom: -20px;\n          right: 20px;\n        }\n        :host([narrow]) .header-info mwc-button {\n          margin-top: 16px;\n          margin-bottom: 8px;\n        }\n        :host([narrow]) .header-info {\n          padding: 0 16px 8px;\n        }\n\n        /* ============= Scroll ============= */\n        :host([scrolled]) .breadcrumb .subtitle {\n          height: 0;\n          margin: 0;\n        }\n        :host([scrolled]) .breadcrumb .title {\n          -webkit-line-clamp: 1;\n        }\n        :host(:not([narrow])[scrolled]) .header:not(.no-img) ha-icon-button {\n          align-self: center;\n        }\n        :host([scrolled]) .header-info mwc-button,\n        .no-img .header-info mwc-button {\n          padding-right: 4px;\n        }\n        :host([scrolled][narrow]) .no-img .header-info mwc-button {\n          padding-right: 16px;\n        }\n        :host([scrolled]) .header-info {\n          flex-direction: row;\n        }\n        :host([scrolled]) .header-info mwc-button {\n          align-self: center;\n          margin-top: 0;\n          margin-bottom: 0;\n          padding-bottom: 0;\n        }\n        :host([scrolled][narrow]) .no-img .header-info {\n          flex-direction: row-reverse;\n        }\n        :host([scrolled][narrow]) .header-info {\n          padding: 20px 24px 10px 24px;\n          align-items: center;\n        }\n        :host([scrolled]) .header-content {\n          align-items: flex-end;\n          flex-direction: row;\n        }\n        :host([scrolled]) .header-content .img {\n          height: 75px;\n          width: 75px;\n        }\n        :host([scrolled]) .breadcrumb {\n          padding-top: 0;\n          align-self: center;\n        }\n        :host([scrolled][narrow]) .header-content .img {\n          height: 100px;\n          width: 100px;\n          padding-bottom: initial;\n          margin-bottom: 0;\n        }\n        :host([scrolled]) ha-fab {\n          bottom: 0px;\n          right: -24px;\n          --mdc-fab-box-shadow: none;\n          --mdc-theme-secondary: rgba(var(--rgb-primary-color), 0.5);\n        }\n\n        lit-virtualizer {\n          height: 100%;\n          overflow: overlay !important;\n          contain: size layout !important;\n        }\n\n        lit-virtualizer.not_shown {\n          height: calc(100% - 36px);\n        }\n\n        ha-browse-media-tts {\n          direction: var(--direction);\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-media-player-browse\": HaMediaPlayerBrowse;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}