{"ast":null,"code":"import { createCollection } from \"home-assistant-js-websocket\";\nimport { debounce } from \"../common/util/debounce\";\nexport const fetchDeviceRegistry = conn => conn.sendMessagePromise({\n  type: \"config/device_registry/list\"\n});\nconst subscribeDeviceRegistryUpdates = (conn, store) => conn.subscribeEvents(debounce(() => fetchDeviceRegistry(conn).then(devices => store.setState(devices, true)), 500, true), \"device_registry_updated\");\nexport const subscribeDeviceRegistry = (conn, onChange) => createCollection(\"_dr\", fetchDeviceRegistry, subscribeDeviceRegistryUpdates, conn, onChange);","map":{"version":3,"names":["createCollection","debounce","fetchDeviceRegistry","conn","sendMessagePromise","type","subscribeDeviceRegistryUpdates","store","subscribeEvents","then","devices","setState","subscribeDeviceRegistry","onChange"],"sources":["/Users/sercanardil/Desktop/frontend/src/data/ws-device_registry.ts"],"sourcesContent":["import { Connection, createCollection } from \"home-assistant-js-websocket\";\nimport { Store } from \"home-assistant-js-websocket/dist/store\";\nimport { DeviceRegistryEntry } from \"./device_registry\";\nimport { debounce } from \"../common/util/debounce\";\n\nexport const fetchDeviceRegistry = (conn: Connection) =>\n  conn.sendMessagePromise<DeviceRegistryEntry[]>({\n    type: \"config/device_registry/list\",\n  });\n\nconst subscribeDeviceRegistryUpdates = (\n  conn: Connection,\n  store: Store<DeviceRegistryEntry[]>\n) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchDeviceRegistry(conn).then((devices) =>\n          store.setState(devices, true)\n        ),\n      500,\n      true\n    ),\n    \"device_registry_updated\"\n  );\n\nexport const subscribeDeviceRegistry = (\n  conn: Connection,\n  onChange: (devices: DeviceRegistryEntry[]) => void\n) =>\n  createCollection<DeviceRegistryEntry[]>(\n    \"_dr\",\n    fetchDeviceRegistry,\n    subscribeDeviceRegistryUpdates,\n    conn,\n    onChange\n  );\n"],"mappings":"AAAA,SAAqBA,gBAAgB,QAAQ,6BAA6B;AAG1E,SAASC,QAAQ,QAAQ,yBAAyB;AAElD,OAAO,MAAMC,mBAAmB,GAAIC,IAAgB,IAClDA,IAAI,CAACC,kBAAkB,CAAwB;EAC7CC,IAAI,EAAE;AACR,CAAC,CAAC;AAEJ,MAAMC,8BAA8B,GAAGA,CACrCH,IAAgB,EAChBI,KAAmC,KAEnCJ,IAAI,CAACK,eAAe,CAClBP,QAAQ,CACN,MACEC,mBAAmB,CAACC,IAAI,CAAC,CAACM,IAAI,CAAEC,OAAO,IACrCH,KAAK,CAACI,QAAQ,CAACD,OAAO,EAAE,IAAI,CAC9B,CAAC,EACH,GAAG,EACH,IACF,CAAC,EACD,yBACF,CAAC;AAEH,OAAO,MAAME,uBAAuB,GAAGA,CACrCT,IAAgB,EAChBU,QAAkD,KAElDb,gBAAgB,CACd,KAAK,EACLE,mBAAmB,EACnBI,8BAA8B,EAC9BH,IAAI,EACJU,QACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}