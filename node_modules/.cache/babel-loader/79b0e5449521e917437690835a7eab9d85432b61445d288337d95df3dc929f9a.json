{"ast":null,"code":"import _decorate from \"@babel/runtime/helpers/decorate\";\nimport \"@material/mwc-button\";\nimport { LitElement, css, html } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { haStyle } from \"../resources/styles\";\nconst STATES_INTERCEPTABLE = {\n  cleaning: {\n    action: \"return_to_base\",\n    service: \"return_to_base\"\n  },\n  docked: {\n    action: \"start_cleaning\",\n    service: \"start\"\n  },\n  idle: {\n    action: \"start_cleaning\",\n    service: \"start\"\n  },\n  off: {\n    action: \"turn_on\",\n    service: \"turn_on\"\n  },\n  on: {\n    action: \"turn_off\",\n    service: \"turn_off\"\n  },\n  paused: {\n    action: \"resume_cleaning\",\n    service: \"start\"\n  }\n};\nexport let HaVacuumState = _decorate([customElement(\"ha-vacuum-state\")], function (_initialize, _LitElement) {\n  class HaVacuumState extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: HaVacuumState,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"stateObj\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        const interceptable = this._computeInterceptable(this.stateObj.state, this.stateObj.attributes.supported_features);\n        return html`\n      <mwc-button @click=${this._callService} .disabled=${!interceptable}>\n        ${this._computeLabel(this.stateObj.state, interceptable)}\n      </mwc-button>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_computeInterceptable\",\n      value: function _computeInterceptable(state, supportedFeatures) {\n        return state in STATES_INTERCEPTABLE && supportedFeatures !== 0;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_computeLabel\",\n      value: function _computeLabel(state, interceptable) {\n        return interceptable ? this.hass.localize(`ui.card.vacuum.actions.${STATES_INTERCEPTABLE[state].action}`) : this.hass.localize(`component.vacuum.entity_component._.state.${state}`);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_callService\",\n      value: async function _callService(ev) {\n        ev.stopPropagation();\n        const stateObj = this.stateObj;\n        const service = STATES_INTERCEPTABLE[stateObj.state].service;\n        await this.hass.callService(\"vacuum\", service, {\n          entity_id: stateObj.entity_id\n        });\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return [haStyle, css`\n        mwc-button {\n          top: 3px;\n          height: 37px;\n          margin-right: -0.57em;\n          margin-inline-end: -0.57em;\n          margin-inline-start: initial;\n        }\n        mwc-button[disabled] {\n          background-color: transparent;\n          color: var(--secondary-text-color);\n        }\n      `];\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["LitElement","css","html","customElement","property","haStyle","STATES_INTERCEPTABLE","cleaning","action","service","docked","idle","off","on","paused","HaVacuumState","_decorate","_initialize","_LitElement","constructor","args","F","d","kind","decorators","attribute","key","value","render","interceptable","_computeInterceptable","stateObj","state","attributes","supported_features","_callService","_computeLabel","supportedFeatures","hass","localize","ev","stopPropagation","callService","entity_id","static","styles"],"sources":["/Users/sercanardil/Desktop/frontend/src/components/ha-vacuum-state.ts"],"sourcesContent":["import \"@material/mwc-button\";\nimport { CSSResultGroup, LitElement, TemplateResult, css, html } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { haStyle } from \"../resources/styles\";\nimport { HomeAssistant } from \"../types\";\n\nconst STATES_INTERCEPTABLE: {\n  [state: string]: {\n    action:\n      | \"return_to_base\"\n      | \"start_cleaning\"\n      | \"turn_on\"\n      | \"turn_off\"\n      | \"resume_cleaning\";\n    service: string;\n  };\n} = {\n  cleaning: {\n    action: \"return_to_base\",\n    service: \"return_to_base\",\n  },\n  docked: {\n    action: \"start_cleaning\",\n    service: \"start\",\n  },\n  idle: {\n    action: \"start_cleaning\",\n    service: \"start\",\n  },\n  off: {\n    action: \"turn_on\",\n    service: \"turn_on\",\n  },\n  on: {\n    action: \"turn_off\",\n    service: \"turn_off\",\n  },\n  paused: {\n    action: \"resume_cleaning\",\n    service: \"start\",\n  },\n};\n\n@customElement(\"ha-vacuum-state\")\nexport class HaVacuumState extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public stateObj!: HassEntity;\n\n  protected render(): TemplateResult {\n    const interceptable = this._computeInterceptable(\n      this.stateObj.state,\n      this.stateObj.attributes.supported_features\n    );\n    return html`\n      <mwc-button @click=${this._callService} .disabled=${!interceptable}>\n        ${this._computeLabel(this.stateObj.state, interceptable)}\n      </mwc-button>\n    `;\n  }\n\n  private _computeInterceptable(\n    state: string,\n    supportedFeatures: number | undefined\n  ) {\n    return state in STATES_INTERCEPTABLE && supportedFeatures !== 0;\n  }\n\n  private _computeLabel(state: string, interceptable: boolean) {\n    return interceptable\n      ? this.hass.localize(\n          `ui.card.vacuum.actions.${STATES_INTERCEPTABLE[state].action}`\n        )\n      : this.hass.localize(\n          `component.vacuum.entity_component._.state.${state}`\n        );\n  }\n\n  private async _callService(ev) {\n    ev.stopPropagation();\n    const stateObj = this.stateObj;\n    const service = STATES_INTERCEPTABLE[stateObj.state].service;\n    await this.hass.callService(\"vacuum\", service, {\n      entity_id: stateObj.entity_id,\n    });\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      css`\n        mwc-button {\n          top: 3px;\n          height: 37px;\n          margin-right: -0.57em;\n          margin-inline-end: -0.57em;\n          margin-inline-start: initial;\n        }\n        mwc-button[disabled] {\n          background-color: transparent;\n          color: var(--secondary-text-color);\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-vacuum-state\": HaVacuumState;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}