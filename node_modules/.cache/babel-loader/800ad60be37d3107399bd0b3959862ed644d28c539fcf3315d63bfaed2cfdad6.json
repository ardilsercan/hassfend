{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _decorate from \"@babel/runtime/helpers/decorate\";\nvar _templateObject;\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport { LitElement, html, nothing } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { computeAttributeNameDisplay } from \"../../common/entity/compute_attribute_display\";\nimport \"../ha-combo-box\";\nvar HaEntityAttributePicker = _decorate([customElement(\"ha-entity-attribute-picker\")], function (_initialize, _LitElement) {\n  var HaEntityAttributePicker = /*#__PURE__*/function (_LitElement2) {\n    _inherits(HaEntityAttributePicker, _LitElement2);\n    function HaEntityAttributePicker() {\n      var _this;\n      _classCallCheck(this, HaEntityAttributePicker);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _callSuper(this, HaEntityAttributePicker, [].concat(args));\n      _initialize(_assertThisInitialized(_this));\n      return _this;\n    }\n    return _createClass(HaEntityAttributePicker);\n  }(_LitElement);\n  return {\n    F: HaEntityAttributePicker,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"entityId\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Array,\n        attribute: \"hide-attributes\"\n      })],\n      key: \"hideAttributes\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"autofocus\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"disabled\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"required\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean,\n        attribute: \"allow-custom-value\"\n      })],\n      key: \"allowCustomValue\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"label\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"value\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"helper\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_opened\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [query(\"ha-combo-box\", true)],\n      key: \"_comboBox\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"shouldUpdate\",\n      value:\n      /**\n       * List of attributes to be hidden.\n       * @type {Array}\n       * @attr hide-attributes\n       */\n\n      function shouldUpdate(changedProps) {\n        return !(!changedProps.has(\"_opened\") && this._opened);\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProps) {\n        var _this2 = this;\n        if (changedProps.has(\"_opened\") && this._opened) {\n          var entityState = this.entityId ? this.hass.states[this.entityId] : undefined;\n          this._comboBox.items = entityState ? Object.keys(entityState.attributes).filter(function (key) {\n            var _this2$hideAttributes;\n            return !((_this2$hideAttributes = _this2.hideAttributes) !== null && _this2$hideAttributes !== void 0 && _this2$hideAttributes.includes(key));\n          }).map(function (key) {\n            return {\n              value: key,\n              label: computeAttributeNameDisplay(_this2.hass.localize, entityState, _this2.hass.entities, key)\n            };\n          }) : [];\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        var _this$label;\n        if (!this.hass) {\n          return nothing;\n        }\n        return html(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      <ha-combo-box\\n        .hass=\", \"\\n        .value=\", \"\\n        .autofocus=\", \"\\n        .label=\", \"\\n        .disabled=\", \"\\n        .required=\", \"\\n        .helper=\", \"\\n        .allowCustomValue=\", \"\\n        item-value-path=\\\"value\\\"\\n        item-label-path=\\\"label\\\"\\n        @opened-changed=\", \"\\n        @value-changed=\", \"\\n      >\\n      </ha-combo-box>\\n    \"])), this.hass, this.value ? computeAttributeNameDisplay(this.hass.localize, this.hass.states[this.entityId], this.hass.entities, this.value) : \"\", this.autofocus, (_this$label = this.label) !== null && _this$label !== void 0 ? _this$label : this.hass.localize(\"ui.components.entity.entity-attribute-picker.attribute\"), this.disabled || !this.entityId, this.required, this.helper, this.allowCustomValue, this._openedChanged, this._valueChanged);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_openedChanged\",\n      value: function _openedChanged(ev) {\n        this._opened = ev.detail.value;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_valueChanged\",\n      value: function _valueChanged(ev) {\n        this.value = ev.detail.value;\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["LitElement","html","nothing","customElement","property","query","state","computeAttributeNameDisplay","HaEntityAttributePicker","_decorate","_initialize","_LitElement","_LitElement2","_inherits","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","_assertThisInitialized","_createClass","F","d","kind","decorators","attribute","key","value","type","Boolean","shouldUpdate","changedProps","has","_opened","updated","_this2","entityState","entityId","hass","states","undefined","_comboBox","items","Object","keys","attributes","filter","_this2$hideAttributes","hideAttributes","includes","map","label","localize","entities","render","_this$label","_templateObject","_taggedTemplateLiteral","autofocus","disabled","required","helper","allowCustomValue","_openedChanged","_valueChanged","ev","detail"],"sources":["/workspaces/frontend/src/components/entity/ha-entity-attribute-picker.ts"],"sourcesContent":["import { HassEntity } from \"home-assistant-js-websocket\";\nimport { LitElement, PropertyValues, html, nothing } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { computeAttributeNameDisplay } from \"../../common/entity/compute_attribute_display\";\nimport { HomeAssistant, ValueChangedEvent } from \"../../types\";\nimport \"../ha-combo-box\";\nimport type { HaComboBox } from \"../ha-combo-box\";\n\nexport type HaEntityPickerEntityFilterFunc = (entityId: HassEntity) => boolean;\n\n@customElement(\"ha-entity-attribute-picker\")\nclass HaEntityAttributePicker extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property() public entityId?: string;\n\n  /**\n   * List of attributes to be hidden.\n   * @type {Array}\n   * @attr hide-attributes\n   */\n  @property({ type: Array, attribute: \"hide-attributes\" })\n  public hideAttributes?: string[];\n\n  @property({ type: Boolean }) public autofocus = false;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = false;\n\n  @property({ type: Boolean, attribute: \"allow-custom-value\" })\n  public allowCustomValue;\n\n  @property() public label?: string;\n\n  @property() public value?: string;\n\n  @property() public helper?: string;\n\n  @state() private _opened = false;\n\n  @query(\"ha-combo-box\", true) private _comboBox!: HaComboBox;\n\n  protected shouldUpdate(changedProps: PropertyValues) {\n    return !(!changedProps.has(\"_opened\") && this._opened);\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    if (changedProps.has(\"_opened\") && this._opened) {\n      const entityState = this.entityId\n        ? this.hass.states[this.entityId]\n        : undefined;\n      (this._comboBox as any).items = entityState\n        ? Object.keys(entityState.attributes)\n            .filter((key) => !this.hideAttributes?.includes(key))\n            .map((key) => ({\n              value: key,\n              label: computeAttributeNameDisplay(\n                this.hass.localize,\n                entityState,\n                this.hass.entities,\n                key\n              ),\n            }))\n        : [];\n    }\n  }\n\n  protected render() {\n    if (!this.hass) {\n      return nothing;\n    }\n\n    return html`\n      <ha-combo-box\n        .hass=${this.hass}\n        .value=${this.value\n          ? computeAttributeNameDisplay(\n              this.hass.localize,\n              this.hass.states[this.entityId!],\n              this.hass.entities,\n              this.value\n            )\n          : \"\"}\n        .autofocus=${this.autofocus}\n        .label=${this.label ??\n        this.hass.localize(\n          \"ui.components.entity.entity-attribute-picker.attribute\"\n        )}\n        .disabled=${this.disabled || !this.entityId}\n        .required=${this.required}\n        .helper=${this.helper}\n        .allowCustomValue=${this.allowCustomValue}\n        item-value-path=\"value\"\n        item-label-path=\"label\"\n        @opened-changed=${this._openedChanged}\n        @value-changed=${this._valueChanged}\n      >\n      </ha-combo-box>\n    `;\n  }\n\n  private _openedChanged(ev: ValueChangedEvent<boolean>) {\n    this._opened = ev.detail.value;\n  }\n\n  private _valueChanged(ev: ValueChangedEvent<string>) {\n    this.value = ev.detail.value;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-entity-attribute-picker\": HaEntityAttributePicker;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}