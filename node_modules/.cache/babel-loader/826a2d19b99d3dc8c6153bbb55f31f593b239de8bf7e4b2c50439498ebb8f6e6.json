{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/helpers/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nvar mdiCogRefresh = \"M18 14.5C19.1 14.5 20.1 14.9 20.8 15.7L22 14.5V18.5H18L19.8 16.7C19.3 16.3 18.7 16 18 16C16.6 16 15.5 17.1 15.5 18.5S16.6 21 18 21C18.8 21 19.5 20.6 20 20H21.7C21.1 21.5 19.7 22.5 18 22.5C15.8 22.5 14 20.7 14 18.5S15.8 14.5 18 14.5M11.5 18.5C11.5 17.4 11.8 16.4 12.2 15.5H12C10.1 15.5 8.5 13.9 8.5 12S10.1 8.5 12 8.5 15.5 10.1 15.5 12C15.5 12.2 15.5 12.4 15.4 12.5C16.2 12.2 17 12 18 12C18.5 12 19 12.1 19.5 12.2V12C19.5 11.7 19.5 11.3 19.4 11L21.5 9.4C21.7 9.2 21.7 9 21.6 8.8L19.6 5.3C19.5 5 19.3 5 19 5L16.5 6C16 5.6 15.4 5.3 14.8 5L14.4 2.3C14.5 2.2 14.2 2 14 2H10C9.8 2 9.5 2.2 9.5 2.4L9.1 5.1C8.5 5.3 8 5.7 7.4 6L5 5C4.7 5 4.5 5 4.3 5.3L2.3 8.8C2.2 9 2.3 9.2 2.5 9.4L4.6 11C4.6 11.3 4.5 11.7 4.5 12S4.5 12.7 4.6 13L2.5 14.7C2.3 14.9 2.3 15.1 2.4 15.3L4.4 18.8C4.5 19 4.7 19 5 19L7.5 18C8 18.4 8.6 18.7 9.2 19L9.6 21.7C9.6 21.9 9.8 22.1 10.1 22.1H12.6C11.9 21 11.5 19.8 11.5 18.5Z\";\nvar mdiDelete = \"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z\";\nvar mdiFamilyTree = \"M12 1A2.5 2.5 0 0 0 9.5 3.5A2.5 2.5 0 0 0 11 5.79V7H7A2 2 0 0 0 5 9V9.71A2.5 2.5 0 0 0 3.5 12A2.5 2.5 0 0 0 5 14.29V15H4A2 2 0 0 0 2 17V18.21A2.5 2.5 0 0 0 .5 20.5A2.5 2.5 0 0 0 3 23A2.5 2.5 0 0 0 5.5 20.5A2.5 2.5 0 0 0 4 18.21V17H8V18.21A2.5 2.5 0 0 0 6.5 20.5A2.5 2.5 0 0 0 9 23A2.5 2.5 0 0 0 11.5 20.5A2.5 2.5 0 0 0 10 18.21V17A2 2 0 0 0 8 15H7V14.29A2.5 2.5 0 0 0 8.5 12A2.5 2.5 0 0 0 7 9.71V9H17V9.71A2.5 2.5 0 0 0 15.5 12A2.5 2.5 0 0 0 17 14.29V15H16A2 2 0 0 0 14 17V18.21A2.5 2.5 0 0 0 12.5 20.5A2.5 2.5 0 0 0 15 23A2.5 2.5 0 0 0 17.5 20.5A2.5 2.5 0 0 0 16 18.21V17H20V18.21A2.5 2.5 0 0 0 18.5 20.5A2.5 2.5 0 0 0 21 23A2.5 2.5 0 0 0 23.5 20.5A2.5 2.5 0 0 0 22 18.21V17A2 2 0 0 0 20 15H19V14.29A2.5 2.5 0 0 0 20.5 12A2.5 2.5 0 0 0 19 9.71V9A2 2 0 0 0 17 7H13V5.79A2.5 2.5 0 0 0 14.5 3.5A2.5 2.5 0 0 0 12 1M12 2.5A1 1 0 0 1 13 3.5A1 1 0 0 1 12 4.5A1 1 0 0 1 11 3.5A1 1 0 0 1 12 2.5M6 11A1 1 0 0 1 7 12A1 1 0 0 1 6 13A1 1 0 0 1 5 12A1 1 0 0 1 6 11M18 11A1 1 0 0 1 19 12A1 1 0 0 1 18 13A1 1 0 0 1 17 12A1 1 0 0 1 18 11M3 19.5A1 1 0 0 1 4 20.5A1 1 0 0 1 3 21.5A1 1 0 0 1 2 20.5A1 1 0 0 1 3 19.5M9 19.5A1 1 0 0 1 10 20.5A1 1 0 0 1 9 21.5A1 1 0 0 1 8 20.5A1 1 0 0 1 9 19.5M15 19.5A1 1 0 0 1 16 20.5A1 1 0 0 1 15 21.5A1 1 0 0 1 14 20.5A1 1 0 0 1 15 19.5M21 19.5A1 1 0 0 1 22 20.5A1 1 0 0 1 21 21.5A1 1 0 0 1 20 20.5A1 1 0 0 1 21 19.5Z\";\nvar mdiGroup = \"M1,1V5H2V19H1V23H5V22H19V23H23V19H22V5H23V1H19V2H5V1M5,4H19V5H20V19H19V20H5V19H4V5H5M6,6V14H9V18H18V9H14V6M8,8H12V12H8M14,11H16V16H11V14H14\";\nvar mdiPlus = \"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z\";\nimport { navigate } from \"../../../../../../common/navigate\";\nimport { fetchZHADevice } from \"../../../../../../data/zha\";\nimport { showConfirmationDialog } from \"../../../../../../dialogs/generic/show-dialog-box\";\nimport { showZHAManageZigbeeDeviceDialog } from \"../../../../integrations/integration-panels/zha/show-dialog-zha-manage-zigbee-device\";\nimport { showZHAReconfigureDeviceDialog } from \"../../../../integrations/integration-panels/zha/show-dialog-zha-reconfigure-device\";\nexport var getZHADeviceActions = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(el, hass, device) {\n    var zigbeeConnection, zhaDevice, actions;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          zigbeeConnection = device.connections.find(function (conn) {\n            return conn[0] === \"zigbee\";\n          });\n          if (zigbeeConnection) {\n            _context2.next = 3;\n            break;\n          }\n          return _context2.abrupt(\"return\", []);\n        case 3:\n          _context2.next = 5;\n          return fetchZHADevice(hass, zigbeeConnection[1]);\n        case 5:\n          zhaDevice = _context2.sent;\n          if (zhaDevice) {\n            _context2.next = 8;\n            break;\n          }\n          return _context2.abrupt(\"return\", []);\n        case 8:\n          actions = [];\n          if (!zhaDevice.active_coordinator) {\n            actions.push({\n              label: hass.localize(\"ui.dialogs.zha_device_info.buttons.reconfigure\"),\n              icon: mdiCogRefresh,\n              action: function action() {\n                return showZHAReconfigureDeviceDialog(el, {\n                  device: zhaDevice\n                });\n              }\n            });\n          }\n          if (zhaDevice.power_source === \"Mains\" && (zhaDevice.device_type === \"Router\" || zhaDevice.device_type === \"Coordinator\")) {\n            actions.push.apply(actions, [{\n              label: hass.localize(\"ui.dialogs.zha_device_info.buttons.add\"),\n              icon: mdiPlus,\n              action: function action() {\n                return navigate(\"/config/zha/add/\".concat(zhaDevice.ieee));\n              }\n            }]);\n          }\n          actions.push.apply(actions, [{\n            label: hass.localize(\"ui.dialogs.zha_device_info.buttons.manage\"),\n            icon: mdiGroup,\n            action: function action() {\n              return showZHAManageZigbeeDeviceDialog(el, {\n                device: zhaDevice\n              });\n            }\n          }, {\n            label: hass.localize(\"ui.dialogs.zha_device_info.buttons.view_network\"),\n            icon: mdiFamilyTree,\n            action: function action() {\n              return navigate(\"/config/zha/visualization/\".concat(zhaDevice.device_reg_id));\n            }\n          }]);\n          if (!zhaDevice.active_coordinator) {\n            actions.push({\n              label: hass.localize(\"ui.dialogs.zha_device_info.buttons.remove\"),\n              icon: mdiDelete,\n              classes: \"warning\",\n              action: function () {\n                var _action = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n                  var confirmed;\n                  return _regeneratorRuntime().wrap(function _callee$(_context) {\n                    while (1) switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return showConfirmationDialog(el, {\n                          text: hass.localize(\"ui.dialogs.zha_device_info.confirmations.remove\")\n                        });\n                      case 2:\n                        confirmed = _context.sent;\n                        if (confirmed) {\n                          _context.next = 5;\n                          break;\n                        }\n                        return _context.abrupt(\"return\");\n                      case 5:\n                        _context.next = 7;\n                        return hass.callService(\"zha\", \"remove\", {\n                          ieee: zhaDevice.ieee\n                        });\n                      case 7:\n                        history.back();\n                      case 8:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }, _callee);\n                }));\n                function action() {\n                  return _action.apply(this, arguments);\n                }\n                return action;\n              }()\n            });\n          }\n          return _context2.abrupt(\"return\", actions);\n        case 14:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function getZHADeviceActions(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["navigate","fetchZHADevice","showConfirmationDialog","showZHAManageZigbeeDeviceDialog","showZHAReconfigureDeviceDialog","getZHADeviceActions","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","el","hass","device","zigbeeConnection","zhaDevice","actions","wrap","_callee2$","_context2","prev","next","connections","find","conn","abrupt","sent","active_coordinator","push","label","localize","icon","mdiCogRefresh","action","power_source","device_type","apply","mdiPlus","concat","ieee","mdiGroup","mdiFamilyTree","device_reg_id","mdiDelete","classes","_action","_callee","confirmed","_callee$","_context","text","callService","history","back","stop","arguments","_x","_x2","_x3"],"sources":["/workspaces/frontend/src/panels/config/devices/device-detail/integration-elements/zha/device-actions.ts"],"sourcesContent":["import {\n  mdiCogRefresh,\n  mdiDelete,\n  mdiFamilyTree,\n  mdiGroup,\n  mdiPlus,\n} from \"@mdi/js\";\nimport { navigate } from \"../../../../../../common/navigate\";\nimport type { DeviceRegistryEntry } from \"../../../../../../data/device_registry\";\nimport { fetchZHADevice } from \"../../../../../../data/zha\";\nimport { showConfirmationDialog } from \"../../../../../../dialogs/generic/show-dialog-box\";\nimport type { HomeAssistant } from \"../../../../../../types\";\nimport { showZHAManageZigbeeDeviceDialog } from \"../../../../integrations/integration-panels/zha/show-dialog-zha-manage-zigbee-device\";\nimport { showZHAReconfigureDeviceDialog } from \"../../../../integrations/integration-panels/zha/show-dialog-zha-reconfigure-device\";\nimport type { DeviceAction } from \"../../../ha-config-device-page\";\n\nexport const getZHADeviceActions = async (\n  el: HTMLElement,\n  hass: HomeAssistant,\n  device: DeviceRegistryEntry\n): Promise<DeviceAction[]> => {\n  const zigbeeConnection = device.connections.find(\n    (conn) => conn[0] === \"zigbee\"\n  );\n\n  if (!zigbeeConnection) {\n    return [];\n  }\n\n  const zhaDevice = await fetchZHADevice(hass, zigbeeConnection[1]);\n\n  if (!zhaDevice) {\n    return [];\n  }\n\n  const actions: DeviceAction[] = [];\n\n  if (!zhaDevice.active_coordinator) {\n    actions.push({\n      label: hass.localize(\"ui.dialogs.zha_device_info.buttons.reconfigure\"),\n      icon: mdiCogRefresh,\n      action: () => showZHAReconfigureDeviceDialog(el, { device: zhaDevice }),\n    });\n  }\n\n  if (\n    zhaDevice.power_source === \"Mains\" &&\n    (zhaDevice.device_type === \"Router\" ||\n      zhaDevice.device_type === \"Coordinator\")\n  ) {\n    actions.push(\n      ...[\n        {\n          label: hass.localize(\"ui.dialogs.zha_device_info.buttons.add\"),\n          icon: mdiPlus,\n          action: () => navigate(`/config/zha/add/${zhaDevice!.ieee}`),\n        },\n      ]\n    );\n  }\n\n  actions.push(\n    ...[\n      {\n        label: hass.localize(\"ui.dialogs.zha_device_info.buttons.manage\"),\n        icon: mdiGroup,\n        action: () =>\n          showZHAManageZigbeeDeviceDialog(el, { device: zhaDevice }),\n      },\n      {\n        label: hass.localize(\"ui.dialogs.zha_device_info.buttons.view_network\"),\n        icon: mdiFamilyTree,\n        action: () =>\n          navigate(`/config/zha/visualization/${zhaDevice!.device_reg_id}`),\n      },\n    ]\n  );\n\n  if (!zhaDevice.active_coordinator) {\n    actions.push({\n      label: hass.localize(\"ui.dialogs.zha_device_info.buttons.remove\"),\n      icon: mdiDelete,\n      classes: \"warning\",\n      action: async () => {\n        const confirmed = await showConfirmationDialog(el, {\n          text: hass.localize(\n            \"ui.dialogs.zha_device_info.confirmations.remove\"\n          ),\n        });\n\n        if (!confirmed) {\n          return;\n        }\n\n        await hass.callService(\"zha\", \"remove\", {\n          ieee: zhaDevice.ieee,\n        });\n\n        history.back();\n      },\n    });\n  }\n\n  return actions;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}