{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/wrapNativeSuper\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\n/* eslint-disable max-classes-per-file */\nimport \"@material/mwc-ripple\";\nimport { noChange } from \"lit\";\nimport { directive, Directive } from \"lit/directive\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { deepEqual } from \"../../../../common/util/deep-equal\";\nimport { isTouch } from \"../../../../util/is_touch\";\nvar ActionHandler = /*#__PURE__*/function (_HTMLElement) {\n  _inherits(ActionHandler, _HTMLElement);\n  function ActionHandler() {\n    var _this;\n    _classCallCheck(this, ActionHandler);\n    _this = _callSuper(this, ActionHandler);\n    _this.holdTime = 500;\n    _this.ripple = void 0;\n    _this.timer = void 0;\n    _this.held = false;\n    _this.cancelled = false;\n    _this.dblClickTimeout = void 0;\n    _this.ripple = document.createElement(\"mwc-ripple\");\n    return _this;\n  }\n  _createClass(ActionHandler, [{\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      var _this2 = this;\n      Object.assign(this.style, {\n        position: \"fixed\",\n        width: isTouch ? \"100px\" : \"50px\",\n        height: isTouch ? \"100px\" : \"50px\",\n        transform: \"translate(-50%, -50%)\",\n        pointerEvents: \"none\",\n        zIndex: \"999\"\n      });\n      this.appendChild(this.ripple);\n      this.ripple.primary = true;\n      [\"touchcancel\", \"mouseout\", \"mouseup\", \"touchmove\", \"mousewheel\", \"wheel\", \"scroll\"].forEach(function (ev) {\n        document.addEventListener(ev, function () {\n          _this2.cancelled = true;\n          if (_this2.timer) {\n            _this2.stopAnimation();\n            clearTimeout(_this2.timer);\n            _this2.timer = undefined;\n          }\n        }, {\n          passive: true\n        });\n      });\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(element) {\n      var _this3 = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (element.actionHandler && deepEqual(options, element.actionHandler.options)) {\n        return;\n      }\n      if (element.actionHandler) {\n        element.removeEventListener(\"touchstart\", element.actionHandler.start);\n        element.removeEventListener(\"touchend\", element.actionHandler.end);\n        element.removeEventListener(\"touchcancel\", element.actionHandler.end);\n        element.removeEventListener(\"mousedown\", element.actionHandler.start);\n        element.removeEventListener(\"click\", element.actionHandler.end);\n        element.removeEventListener(\"keydown\", element.actionHandler.handleKeyDown);\n      } else {\n        element.addEventListener(\"contextmenu\", function (ev) {\n          var e = ev || window.event;\n          if (e.preventDefault) {\n            e.preventDefault();\n          }\n          if (e.stopPropagation) {\n            e.stopPropagation();\n          }\n          e.cancelBubble = true;\n          e.returnValue = false;\n          return false;\n        });\n      }\n      element.actionHandler = {\n        options: options\n      };\n      if (options.disabled) {\n        return;\n      }\n      element.actionHandler.start = function (ev) {\n        _this3.cancelled = false;\n        var x;\n        var y;\n        if (ev.touches) {\n          x = ev.touches[0].clientX;\n          y = ev.touches[0].clientY;\n        } else {\n          x = ev.clientX;\n          y = ev.clientY;\n        }\n        if (options.hasHold) {\n          _this3.held = false;\n          _this3.timer = window.setTimeout(function () {\n            _this3.startAnimation(x, y);\n            _this3.held = true;\n          }, _this3.holdTime);\n        }\n      };\n      element.actionHandler.end = function (ev) {\n        // Don't respond when moved or scrolled while touch\n        if ([\"touchend\", \"touchcancel\"].includes(ev.type) && _this3.cancelled) {\n          return;\n        }\n        var target = ev.target;\n        // Prevent mouse event if touch event\n        if (ev.cancelable) {\n          ev.preventDefault();\n        }\n        if (options.hasHold) {\n          clearTimeout(_this3.timer);\n          _this3.stopAnimation();\n          _this3.timer = undefined;\n        }\n        if (options.hasHold && _this3.held) {\n          fireEvent(target, \"action\", {\n            action: \"hold\"\n          });\n        } else if (options.hasDoubleClick) {\n          if (ev.type === \"click\" && ev.detail < 2 || !_this3.dblClickTimeout) {\n            _this3.dblClickTimeout = window.setTimeout(function () {\n              _this3.dblClickTimeout = undefined;\n              fireEvent(target, \"action\", {\n                action: \"tap\"\n              });\n            }, 250);\n          } else {\n            clearTimeout(_this3.dblClickTimeout);\n            _this3.dblClickTimeout = undefined;\n            fireEvent(target, \"action\", {\n              action: \"double_tap\"\n            });\n          }\n        } else {\n          fireEvent(target, \"action\", {\n            action: \"tap\"\n          });\n        }\n      };\n      element.actionHandler.handleKeyDown = function (ev) {\n        if (![\"Enter\", \" \"].includes(ev.key)) {\n          return;\n        }\n        ev.currentTarget.actionHandler.end(ev);\n      };\n      element.addEventListener(\"touchstart\", element.actionHandler.start, {\n        passive: true\n      });\n      element.addEventListener(\"touchend\", element.actionHandler.end);\n      element.addEventListener(\"touchcancel\", element.actionHandler.end);\n      element.addEventListener(\"mousedown\", element.actionHandler.start, {\n        passive: true\n      });\n      element.addEventListener(\"click\", element.actionHandler.end);\n      element.addEventListener(\"keydown\", element.actionHandler.handleKeyDown);\n    }\n  }, {\n    key: \"startAnimation\",\n    value: function startAnimation(x, y) {\n      Object.assign(this.style, {\n        left: \"\".concat(x, \"px\"),\n        top: \"\".concat(y, \"px\"),\n        display: null\n      });\n      this.ripple.disabled = false;\n      this.ripple.startPress();\n      this.ripple.unbounded = true;\n    }\n  }, {\n    key: \"stopAnimation\",\n    value: function stopAnimation() {\n      this.ripple.endPress();\n      this.ripple.disabled = true;\n      this.style.display = \"none\";\n    }\n  }]);\n  return ActionHandler;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\ncustomElements.define(\"action-handler\", ActionHandler);\nvar getActionHandler = function getActionHandler() {\n  var body = document.body;\n  if (body.querySelector(\"action-handler\")) {\n    return body.querySelector(\"action-handler\");\n  }\n  var actionhandler = document.createElement(\"action-handler\");\n  body.appendChild(actionhandler);\n  return actionhandler;\n};\nexport var actionHandlerBind = function actionHandlerBind(element, options) {\n  var actionhandler = getActionHandler();\n  if (!actionhandler) {\n    return;\n  }\n  actionhandler.bind(element, options);\n};\nexport var actionHandler = directive( /*#__PURE__*/function (_Directive) {\n  _inherits(_class, _Directive);\n  function _class() {\n    _classCallCheck(this, _class);\n    return _callSuper(this, _class, arguments);\n  }\n  _createClass(_class, [{\n    key: \"update\",\n    value: function update(part, _ref) {\n      var _ref2 = _slicedToArray(_ref, 1),\n        options = _ref2[0];\n      actionHandlerBind(part.element, options);\n      return noChange;\n    }\n  }, {\n    key: \"render\",\n    value: function render(_options) {}\n  }]);\n  return _class;\n}(Directive));","map":{"version":3,"names":["noChange","directive","Directive","fireEvent","deepEqual","isTouch","ActionHandler","_HTMLElement","_inherits","_this","_classCallCheck","_callSuper","holdTime","ripple","timer","held","cancelled","dblClickTimeout","document","createElement","_createClass","key","value","connectedCallback","_this2","Object","assign","style","position","width","height","transform","pointerEvents","zIndex","appendChild","primary","forEach","ev","addEventListener","stopAnimation","clearTimeout","undefined","passive","bind","element","_this3","options","arguments","length","actionHandler","removeEventListener","start","end","handleKeyDown","e","window","event","preventDefault","stopPropagation","cancelBubble","returnValue","disabled","x","y","touches","clientX","clientY","hasHold","setTimeout","startAnimation","includes","type","target","cancelable","action","hasDoubleClick","detail","currentTarget","left","concat","top","display","startPress","unbounded","endPress","_wrapNativeSuper","HTMLElement","customElements","define","getActionHandler","body","querySelector","actionhandler","actionHandlerBind","_Directive","_class","update","part","_ref","_ref2","_slicedToArray","render","_options"],"sources":["/workspaces/frontend/src/panels/lovelace/common/directives/action-handler-directive.ts"],"sourcesContent":["/* eslint-disable max-classes-per-file */\nimport \"@material/mwc-ripple\";\nimport type { Ripple } from \"@material/mwc-ripple\";\nimport { noChange } from \"lit\";\nimport {\n  AttributePart,\n  directive,\n  Directive,\n  DirectiveParameters,\n} from \"lit/directive\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { deepEqual } from \"../../../../common/util/deep-equal\";\nimport {\n  ActionHandlerDetail,\n  ActionHandlerOptions,\n} from \"../../../../data/lovelace/action_handler\";\nimport { isTouch } from \"../../../../util/is_touch\";\n\ninterface ActionHandlerType extends HTMLElement {\n  holdTime: number;\n  bind(element: Element, options?: ActionHandlerOptions): void;\n}\ninterface ActionHandlerElement extends HTMLElement {\n  actionHandler?: {\n    options: ActionHandlerOptions;\n    start?: (ev: Event) => void;\n    end?: (ev: Event) => void;\n    handleKeyDown?: (ev: KeyboardEvent) => void;\n  };\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"action-handler\": ActionHandler;\n  }\n  interface HASSDomEvents {\n    action: ActionHandlerDetail;\n  }\n}\n\nclass ActionHandler extends HTMLElement implements ActionHandlerType {\n  public holdTime = 500;\n\n  public ripple: Ripple;\n\n  protected timer?: number;\n\n  protected held = false;\n\n  private cancelled = false;\n\n  private dblClickTimeout?: number;\n\n  constructor() {\n    super();\n    this.ripple = document.createElement(\"mwc-ripple\");\n  }\n\n  public connectedCallback() {\n    Object.assign(this.style, {\n      position: \"fixed\",\n      width: isTouch ? \"100px\" : \"50px\",\n      height: isTouch ? \"100px\" : \"50px\",\n      transform: \"translate(-50%, -50%)\",\n      pointerEvents: \"none\",\n      zIndex: \"999\",\n    });\n\n    this.appendChild(this.ripple);\n    this.ripple.primary = true;\n\n    [\n      \"touchcancel\",\n      \"mouseout\",\n      \"mouseup\",\n      \"touchmove\",\n      \"mousewheel\",\n      \"wheel\",\n      \"scroll\",\n    ].forEach((ev) => {\n      document.addEventListener(\n        ev,\n        () => {\n          this.cancelled = true;\n          if (this.timer) {\n            this.stopAnimation();\n            clearTimeout(this.timer);\n            this.timer = undefined;\n          }\n        },\n        { passive: true }\n      );\n    });\n  }\n\n  public bind(\n    element: ActionHandlerElement,\n    options: ActionHandlerOptions = {}\n  ) {\n    if (\n      element.actionHandler &&\n      deepEqual(options, element.actionHandler.options)\n    ) {\n      return;\n    }\n\n    if (element.actionHandler) {\n      element.removeEventListener(\"touchstart\", element.actionHandler.start!);\n      element.removeEventListener(\"touchend\", element.actionHandler.end!);\n      element.removeEventListener(\"touchcancel\", element.actionHandler.end!);\n\n      element.removeEventListener(\"mousedown\", element.actionHandler.start!);\n      element.removeEventListener(\"click\", element.actionHandler.end!);\n\n      element.removeEventListener(\n        \"keydown\",\n        element.actionHandler.handleKeyDown!\n      );\n    } else {\n      element.addEventListener(\"contextmenu\", (ev: Event) => {\n        const e = ev || window.event;\n        if (e.preventDefault) {\n          e.preventDefault();\n        }\n        if (e.stopPropagation) {\n          e.stopPropagation();\n        }\n        e.cancelBubble = true;\n        e.returnValue = false;\n        return false;\n      });\n    }\n\n    element.actionHandler = { options };\n\n    if (options.disabled) {\n      return;\n    }\n\n    element.actionHandler.start = (ev: Event) => {\n      this.cancelled = false;\n      let x;\n      let y;\n      if ((ev as TouchEvent).touches) {\n        x = (ev as TouchEvent).touches[0].clientX;\n        y = (ev as TouchEvent).touches[0].clientY;\n      } else {\n        x = (ev as MouseEvent).clientX;\n        y = (ev as MouseEvent).clientY;\n      }\n\n      if (options.hasHold) {\n        this.held = false;\n        this.timer = window.setTimeout(() => {\n          this.startAnimation(x, y);\n          this.held = true;\n        }, this.holdTime);\n      }\n    };\n\n    element.actionHandler.end = (ev: Event) => {\n      // Don't respond when moved or scrolled while touch\n      if ([\"touchend\", \"touchcancel\"].includes(ev.type) && this.cancelled) {\n        return;\n      }\n      const target = ev.target as HTMLElement;\n      // Prevent mouse event if touch event\n      if (ev.cancelable) {\n        ev.preventDefault();\n      }\n      if (options.hasHold) {\n        clearTimeout(this.timer);\n        this.stopAnimation();\n        this.timer = undefined;\n      }\n      if (options.hasHold && this.held) {\n        fireEvent(target, \"action\", { action: \"hold\" });\n      } else if (options.hasDoubleClick) {\n        if (\n          (ev.type === \"click\" && (ev as MouseEvent).detail < 2) ||\n          !this.dblClickTimeout\n        ) {\n          this.dblClickTimeout = window.setTimeout(() => {\n            this.dblClickTimeout = undefined;\n            fireEvent(target, \"action\", { action: \"tap\" });\n          }, 250);\n        } else {\n          clearTimeout(this.dblClickTimeout);\n          this.dblClickTimeout = undefined;\n          fireEvent(target, \"action\", { action: \"double_tap\" });\n        }\n      } else {\n        fireEvent(target, \"action\", { action: \"tap\" });\n      }\n    };\n\n    element.actionHandler.handleKeyDown = (ev: KeyboardEvent) => {\n      if (![\"Enter\", \" \"].includes(ev.key)) {\n        return;\n      }\n      (ev.currentTarget as ActionHandlerElement).actionHandler!.end!(ev);\n    };\n\n    element.addEventListener(\"touchstart\", element.actionHandler.start, {\n      passive: true,\n    });\n    element.addEventListener(\"touchend\", element.actionHandler.end);\n    element.addEventListener(\"touchcancel\", element.actionHandler.end);\n\n    element.addEventListener(\"mousedown\", element.actionHandler.start, {\n      passive: true,\n    });\n    element.addEventListener(\"click\", element.actionHandler.end);\n\n    element.addEventListener(\"keydown\", element.actionHandler.handleKeyDown);\n  }\n\n  private startAnimation(x: number, y: number) {\n    Object.assign(this.style, {\n      left: `${x}px`,\n      top: `${y}px`,\n      display: null,\n    });\n    this.ripple.disabled = false;\n    this.ripple.startPress();\n    this.ripple.unbounded = true;\n  }\n\n  private stopAnimation() {\n    this.ripple.endPress();\n    this.ripple.disabled = true;\n    this.style.display = \"none\";\n  }\n}\n\ncustomElements.define(\"action-handler\", ActionHandler);\n\nconst getActionHandler = (): ActionHandlerType => {\n  const body = document.body;\n  if (body.querySelector(\"action-handler\")) {\n    return body.querySelector(\"action-handler\") as ActionHandlerType;\n  }\n\n  const actionhandler = document.createElement(\"action-handler\");\n  body.appendChild(actionhandler);\n\n  return actionhandler as ActionHandlerType;\n};\n\nexport const actionHandlerBind = (\n  element: ActionHandlerElement,\n  options?: ActionHandlerOptions\n) => {\n  const actionhandler: ActionHandlerType = getActionHandler();\n  if (!actionhandler) {\n    return;\n  }\n  actionhandler.bind(element, options);\n};\n\nexport const actionHandler = directive(\n  class extends Directive {\n    update(part: AttributePart, [options]: DirectiveParameters<this>) {\n      actionHandlerBind(part.element as ActionHandlerElement, options);\n      return noChange;\n    }\n\n    render(_options?: ActionHandlerOptions) {}\n  }\n);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}