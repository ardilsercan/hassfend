{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/helpers/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nexport var subscribePollingCollection = function subscribePollingCollection(hass, updateData, interval) {\n  var timeout;\n  var fetchData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return updateData(hass);\n          case 3:\n            _context.prev = 3;\n            timeout = setTimeout(function () {\n              return fetchData();\n            }, interval);\n            return _context.finish(3);\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0,, 3, 6]]);\n    }));\n    return function fetchData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  fetchData();\n  return function () {\n    return clearTimeout(timeout);\n  };\n};","map":{"version":3,"names":["subscribePollingCollection","hass","updateData","interval","timeout","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","setTimeout","finish","stop","apply","arguments","clearTimeout"],"sources":["/workspaces/frontend/src/common/util/subscribe-polling.ts"],"sourcesContent":["import { HomeAssistant } from \"../../types\";\n\nexport const subscribePollingCollection = (\n  hass: HomeAssistant,\n  updateData: (hass: HomeAssistant) => void,\n  interval: number\n) => {\n  let timeout;\n  const fetchData = async () => {\n    try {\n      await updateData(hass);\n    } finally {\n      timeout = setTimeout(() => fetchData(), interval);\n    }\n  };\n  fetchData();\n  return () => clearTimeout(timeout);\n};\n"],"mappings":";;AAEA,OAAO,IAAMA,0BAA0B,GAAG,SAA7BA,0BAA0BA,CACrCC,IAAmB,EACnBC,UAAyC,EACzCC,QAAgB,EACb;EACH,IAAIC,OAAO;EACX,IAAMC,SAAS;IAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA;MAAA,OAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAE,IAAA;YAAA,OAERb,UAAU,CAACD,IAAI,CAAC;UAAA;YAAAY,QAAA,CAAAC,IAAA;YAEtBV,OAAO,GAAGY,UAAU,CAAC;cAAA,OAAMX,SAAS,CAAC,CAAC;YAAA,GAAEF,QAAQ,CAAC;YAAC,OAAAU,QAAA,CAAAI,MAAA;UAAA;UAAA;YAAA,OAAAJ,QAAA,CAAAK,IAAA;QAAA;MAAA,GAAAR,OAAA;IAAA,CAErD;IAAA,gBANKL,SAASA,CAAA;MAAA,OAAAC,IAAA,CAAAa,KAAA,OAAAC,SAAA;IAAA;EAAA,GAMd;EACDf,SAAS,CAAC,CAAC;EACX,OAAO;IAAA,OAAMgB,YAAY,CAACjB,OAAO,CAAC;EAAA;AACpC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}