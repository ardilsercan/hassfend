{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _templateObject, _templateObject2, _templateObject3;\nimport \"core-js/modules/es.array.concat.js\";\nimport \"@material/mwc-button/mwc-button\";\nvar mdiDotsVertical = \"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z\";\nimport { addDays, addMonths, differenceInDays, differenceInMonths, endOfDay, endOfMonth, endOfQuarter, endOfToday, endOfWeek, endOfYear, isFirstDayOfMonth, isLastDayOfMonth, startOfDay, startOfMonth, startOfQuarter, startOfWeek, startOfYear, subDays } from \"date-fns/esm\";\nimport { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { calcDate, calcDateProperty } from \"../../../common/datetime/calc_date\";\nimport { firstWeekdayIndex } from \"../../../common/datetime/first_weekday\";\nimport { formatDate, formatDateMonthYear, formatDateShort, formatDateVeryShort, formatDateYear } from \"../../../common/datetime/format_date\";\nimport { debounce } from \"../../../common/util/debounce\";\nimport \"../../../components/ha-button-menu\";\nimport \"../../../components/ha-check-list-item\";\nimport \"../../../components/ha-date-range-picker\";\nimport \"../../../components/ha-icon-button-next\";\nimport \"../../../components/ha-icon-button-prev\";\nimport { getEnergyDataCollection } from \"../../../data/energy\";\nimport { SubscribeMixin } from \"../../../mixins/subscribe-mixin\";\nimport { loadPolyfillIfNeeded } from \"../../../resources/resize-observer.polyfill\";\nexport var HuiEnergyPeriodSelector = _decorate([customElement(\"hui-energy-period-selector\")], function (_initialize, _SubscribeMixin) {\n  var HuiEnergyPeriodSelector = /*#__PURE__*/function (_SubscribeMixin2) {\n    _inherits(HuiEnergyPeriodSelector, _SubscribeMixin2);\n    function HuiEnergyPeriodSelector() {\n      var _this;\n      _classCallCheck(this, HuiEnergyPeriodSelector);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _callSuper(this, HuiEnergyPeriodSelector, [].concat(args));\n      _initialize(_assertThisInitialized(_this));\n      return _this;\n    }\n    return _createClass(HuiEnergyPeriodSelector);\n  }(_SubscribeMixin);\n  return {\n    F: HuiEnergyPeriodSelector,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"collectionKey\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean,\n        reflect: true\n      })],\n      key: \"narrow\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_startDate\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_endDate\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_ranges\",\n      value: function value() {\n        return {};\n      }\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_compare\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_resizeObserver\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"hassSubscribe\",\n      value: function hassSubscribe() {\n        var _this2 = this;\n        return [getEnergyDataCollection(this.hass, {\n          key: this.collectionKey\n        }).subscribe(function (data) {\n          return _this2._updateDates(data);\n        })];\n      }\n    }, {\n      kind: \"method\",\n      key: \"_measure\",\n      value: function _measure() {\n        this.narrow = this.offsetWidth < 450;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_attachObserver\",\n      value: function () {\n        var _attachObserver2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n          var _this3 = this;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                if (this._resizeObserver) {\n                  _context.next = 4;\n                  break;\n                }\n                _context.next = 3;\n                return loadPolyfillIfNeeded();\n              case 3:\n                this._resizeObserver = new ResizeObserver(debounce(function () {\n                  return _this3._measure();\n                }, 250, false));\n              case 4:\n                this._resizeObserver.observe(this);\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee, this);\n        }));\n        function _attachObserver() {\n          return _attachObserver2.apply(this, arguments);\n        }\n        return _attachObserver;\n      }()\n    }, {\n      kind: \"method\",\n      key: \"firstUpdated\",\n      value: function firstUpdated() {\n        this._attachObserver();\n      }\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        var _this4 = this;\n        _get(_getPrototypeOf(HuiEnergyPeriodSelector.prototype), \"connectedCallback\", this).call(this);\n        this.updateComplete.then(function () {\n          return _this4._attachObserver();\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(HuiEnergyPeriodSelector.prototype), \"disconnectedCallback\", this).call(this);\n        if (this._resizeObserver) {\n          this._resizeObserver.disconnect();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProps) {\n        var _this$hass, _changedProps$get;\n        _get(_getPrototypeOf(HuiEnergyPeriodSelector.prototype), \"willUpdate\", this).call(this, changedProps);\n        if (!this.hasUpdated) {\n          this._measure();\n        }\n        if (!this.hasUpdated || changedProps.has(\"hass\") && ((_this$hass = this.hass) === null || _this$hass === void 0 ? void 0 : _this$hass.localize) !== ((_changedProps$get = changedProps.get(\"hass\")) === null || _changedProps$get === void 0 ? void 0 : _changedProps$get.localize)) {\n          var today = new Date();\n          var weekStartsOn = firstWeekdayIndex(this.hass.locale);\n\n          // pre defined date ranges\n          this._ranges = _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, this.hass.localize(\"ui.components.date-range-picker.ranges.today\"), [calcDate(today, startOfDay, this.hass.locale, this.hass.config, {\n            weekStartsOn: weekStartsOn\n          }), calcDate(today, endOfDay, this.hass.locale, this.hass.config, {\n            weekStartsOn: weekStartsOn\n          })]), this.hass.localize(\"ui.components.date-range-picker.ranges.yesterday\"), [calcDate(calcDate(today, subDays, this.hass.locale, this.hass.config, 1), startOfDay, this.hass.locale, this.hass.config, {\n            weekStartsOn: weekStartsOn\n          }), calcDate(calcDate(today, subDays, this.hass.locale, this.hass.config, 1), endOfDay, this.hass.locale, this.hass.config, {\n            weekStartsOn: weekStartsOn\n          })]), this.hass.localize(\"ui.components.date-range-picker.ranges.this_week\"), [calcDate(today, startOfWeek, this.hass.locale, this.hass.config, {\n            weekStartsOn: weekStartsOn\n          }), calcDate(today, endOfWeek, this.hass.locale, this.hass.config, {\n            weekStartsOn: weekStartsOn\n          })]), this.hass.localize(\"ui.components.date-range-picker.ranges.this_month\"), [calcDate(today, startOfMonth, this.hass.locale, this.hass.config), calcDate(today, endOfMonth, this.hass.locale, this.hass.config)]), this.hass.localize(\"ui.components.date-range-picker.ranges.this_quarter\"), [calcDate(today, startOfQuarter, this.hass.locale, this.hass.config), calcDate(today, endOfQuarter, this.hass.locale, this.hass.config)]), this.hass.localize(\"ui.components.date-range-picker.ranges.this_year\"), [calcDate(today, startOfYear, this.hass.locale, this.hass.config), calcDate(today, endOfYear, this.hass.locale, this.hass.config)]);\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (!this.hass || !this._startDate) {\n          return nothing;\n        }\n        var simpleRange = this._simpleRange(this._startDate, this._endDate, this.hass.locale, this.hass.config);\n        return html(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      <div class=\\\"row\\\">\\n        <div class=\\\"label\\\">\\n          \", \"\\n        </div>\\n        <div class=\\\"time-handle\\\">\\n          <ha-icon-button-prev\\n            .label=\", \"\\n            @click=\", \"\\n          ></ha-icon-button-prev>\\n          <ha-icon-button-next\\n            .label=\", \"\\n            @click=\", \"\\n          ></ha-icon-button-next>\\n          <ha-date-range-picker\\n            .hass=\", \"\\n            .startDate=\", \"\\n            .endDate=\", \"\\n            .ranges=\", \"\\n            @change=\", \"\\n            .timePicker=\", \"\\n            minimal\\n          ></ha-date-range-picker>\\n        </div>\\n\\n        \", \"\\n\\n        <ha-button-menu>\\n          <ha-icon-button\\n            slot=\\\"trigger\\\"\\n            .label=\", \"\\n            .path=\", \"\\n          ></ha-icon-button>\\n          <ha-check-list-item\\n            left\\n            @request-selected=\", \"\\n            .selected=\", \"\\n          >\\n            \", \"\\n          </ha-check-list-item>\\n          <slot name=\\\"overflow-menu\\\"></slot>\\n        </ha-button-menu>\\n      </div>\\n    \"])), simpleRange === \"day\" ? this.narrow ? formatDateShort(this._startDate, this.hass.locale, this.hass.config) : formatDate(this._startDate, this.hass.locale, this.hass.config) : simpleRange === \"month\" ? formatDateMonthYear(this._startDate, this.hass.locale, this.hass.config) : simpleRange === \"year\" ? formatDateYear(this._startDate, this.hass.locale, this.hass.config) : \"\".concat(formatDateVeryShort(this._startDate, this.hass.locale, this.hass.config), \" \\u2013 \").concat(formatDateVeryShort(this._endDate || new Date(), this.hass.locale, this.hass.config)), this.hass.localize(\"ui.panel.lovelace.components.energy_period_selector.previous\"), this._pickPrevious, this.hass.localize(\"ui.panel.lovelace.components.energy_period_selector.next\"), this._pickNext, this.hass, this._startDate, this._endDate || new Date(), this._ranges, this._dateRangeChanged, false, !this.narrow ? html(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"<mwc-button dense outlined @click=\", \">\\n              \", \"\\n            </mwc-button>\"])), this._pickToday, this.hass.localize(\"ui.panel.lovelace.components.energy_period_selector.today\")) : nothing, this.hass.localize(\"ui.common.menu\"), mdiDotsVertical, this._toggleCompare, this._compare, this.hass.localize(\"ui.panel.lovelace.components.energy_period_selector.compare\"));\n      }\n    }, {\n      kind: \"field\",\n      key: \"_simpleRange\",\n      value: function value() {\n        return memoizeOne(function (startDate, endDate, locale, config) {\n          if (differenceInDays(endDate, startDate) === 0) {\n            return \"day\";\n          }\n          if (calcDateProperty(startDate, isFirstDayOfMonth, locale, config) && calcDateProperty(endDate, isLastDayOfMonth, locale, config)) {\n            if (calcDateProperty(endDate, differenceInMonths, locale, config, startDate) === 0) {\n              return \"month\";\n            }\n            if (calcDateProperty(endDate, differenceInMonths, locale, config, startDate) === 2 && startDate.getMonth() % 3 === 0) {\n              return \"quarter\";\n            }\n          }\n          if (calcDateProperty(startDate, isFirstDayOfMonth, locale, config) && calcDateProperty(endDate, isLastDayOfMonth, locale, config) && calcDateProperty(endDate, differenceInMonths, locale, config, startDate) === 11) {\n            return \"year\";\n          }\n          return \"other\";\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_updateCollectionPeriod\",\n      value: function _updateCollectionPeriod() {\n        var energyCollection = getEnergyDataCollection(this.hass, {\n          key: this.collectionKey\n        });\n        energyCollection.setPeriod(this._startDate, this._endDate);\n        energyCollection.refresh();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_dateRangeChanged\",\n      value: function _dateRangeChanged(ev) {\n        var weekStartsOn = firstWeekdayIndex(this.hass.locale);\n        this._startDate = calcDate(ev.detail.startDate, startOfDay, this.hass.locale, this.hass.config, {\n          weekStartsOn: weekStartsOn\n        });\n        this._endDate = calcDate(ev.detail.endDate, endOfDay, this.hass.locale, this.hass.config, {\n          weekStartsOn: weekStartsOn\n        });\n        this._updateCollectionPeriod();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_pickToday\",\n      value: function _pickToday() {\n        if (!this._startDate) return;\n        var range = this._simpleRange(this._startDate, this._endDate, this.hass.locale, this.hass.config);\n        var today = new Date();\n        if (range === \"month\") {\n          this._startDate = calcDate(today, startOfMonth, this.hass.locale, this.hass.config);\n          this._endDate = calcDate(today, endOfMonth, this.hass.locale, this.hass.config);\n        } else if (range === \"quarter\") {\n          this._startDate = calcDate(today, startOfQuarter, this.hass.locale, this.hass.config);\n          this._endDate = calcDate(today, endOfQuarter, this.hass.locale, this.hass.config);\n        } else if (range === \"year\") {\n          this._startDate = calcDate(today, startOfYear, this.hass.locale, this.hass.config);\n          this._endDate = calcDate(today, endOfYear, this.hass.locale, this.hass.config);\n        } else {\n          var weekStartsOn = firstWeekdayIndex(this.hass.locale);\n          var weekStart = calcDate(this._endDate, startOfWeek, this.hass.locale, this.hass.config, {\n            weekStartsOn: weekStartsOn\n          });\n          var weekEnd = calcDate(this._endDate, endOfWeek, this.hass.locale, this.hass.config, {\n            weekStartsOn: weekStartsOn\n          });\n\n          // Check if a single week is selected\n          if (this._startDate.getTime() === weekStart.getTime() && this._endDate.getTime() === weekEnd.getTime()) {\n            // Pick current week\n            this._startDate = calcDate(today, startOfWeek, this.hass.locale, this.hass.config, {\n              weekStartsOn: weekStartsOn\n            });\n            this._endDate = calcDate(today, endOfWeek, this.hass.locale, this.hass.config, {\n              weekStartsOn: weekStartsOn\n            });\n          } else {\n            // Custom date range\n            var difference = calcDateProperty(this._endDate, differenceInDays, this.hass.locale, this.hass.config, this._startDate);\n            this._startDate = calcDate(calcDate(today, subDays, this.hass.locale, this.hass.config, difference), startOfDay, this.hass.locale, this.hass.config, {\n              weekStartsOn: weekStartsOn\n            });\n            this._endDate = calcDate(today, endOfDay, this.hass.locale, this.hass.config, {\n              weekStartsOn: weekStartsOn\n            });\n          }\n        }\n        this._updateCollectionPeriod();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_pickPrevious\",\n      value: function _pickPrevious() {\n        this._shift(false);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_pickNext\",\n      value: function _pickNext() {\n        this._shift(true);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_shift\",\n      value: function _shift(forward) {\n        if (!this._startDate) return;\n        var start;\n        var end;\n        if (calcDateProperty(this._startDate, isFirstDayOfMonth, this.hass.locale, this.hass.config) && calcDateProperty(this._endDate, isLastDayOfMonth, this.hass.locale, this.hass.config)) {\n          // Shift date range with respect to month/year selection\n          var difference = (calcDateProperty(this._endDate, differenceInMonths, this.hass.locale, this.hass.config, this._startDate) + 1) * (forward ? 1 : -1);\n          start = calcDate(this._startDate, addMonths, this.hass.locale, this.hass.config, difference);\n          end = calcDate(calcDate(this._endDate, addMonths, this.hass.locale, this.hass.config, difference), endOfMonth, this.hass.locale, this.hass.config);\n        } else {\n          // Shift date range by period length\n          var _difference = (calcDateProperty(this._endDate, differenceInDays, this.hass.locale, this.hass.config, this._startDate) + 1) * (forward ? 1 : -1);\n          start = calcDate(this._startDate, addDays, this.hass.locale, this.hass.config, _difference);\n          end = calcDate(this._endDate, addDays, this.hass.locale, this.hass.config, _difference);\n        }\n        this._startDate = start;\n        this._endDate = end;\n        this._updateCollectionPeriod();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_updateDates\",\n      value: function _updateDates(energyData) {\n        this._compare = energyData.startCompare !== undefined;\n        this._startDate = energyData.start;\n        this._endDate = energyData.end || endOfToday();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_toggleCompare\",\n      value: function _toggleCompare(ev) {\n        if (ev.detail.source !== \"interaction\") {\n          return;\n        }\n        this._compare = ev.detail.selected;\n        var energyCollection = getEnergyDataCollection(this.hass, {\n          key: this.collectionKey\n        });\n        energyCollection.setCompare(this._compare);\n        energyCollection.refresh();\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return css(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n      .row {\\n        display: flex;\\n        align-items: center;\\n      }\\n      :host .time-handle {\\n        display: flex;\\n        justify-content: flex-end;\\n        align-items: center;\\n      }\\n      :host([narrow]) .time-handle {\\n        margin-left: auto;\\n        margin-inline-start: auto;\\n        margin-inline-end: initial;\\n      }\\n      .label {\\n        display: flex;\\n        align-items: center;\\n        justify-content: flex-end;\\n        font-size: 20px;\\n        margin-left: auto;\\n        margin-inline-start: auto;\\n        margin-inline-end: initial;\\n      }\\n      :host([narrow]) .label {\\n        margin-left: unset;\\n        margin-inline-start: unset;\\n        margin-inline-end: initial;\\n      }\\n      mwc-button {\\n        margin-left: 8px;\\n        margin-inline-start: 8px;\\n        margin-inline-end: initial;\\n        flex-shrink: 0;\\n        --mdc-button-outline-color: currentColor;\\n        --primary-color: currentColor;\\n        --mdc-theme-primary: currentColor;\\n        --mdc-theme-on-primary: currentColor;\\n        --mdc-button-disabled-outline-color: var(--disabled-text-color);\\n        --mdc-button-disabled-ink-color: var(--disabled-text-color);\\n      }\\n    \"])));\n      }\n    }]\n  };\n}, SubscribeMixin(LitElement));","map":{"version":3,"names":["mdiDotsVertical","addDays","addMonths","differenceInDays","differenceInMonths","endOfDay","endOfMonth","endOfQuarter","endOfToday","endOfWeek","endOfYear","isFirstDayOfMonth","isLastDayOfMonth","startOfDay","startOfMonth","startOfQuarter","startOfWeek","startOfYear","subDays","LitElement","css","html","nothing","customElement","property","state","memoizeOne","calcDate","calcDateProperty","firstWeekdayIndex","formatDate","formatDateMonthYear","formatDateShort","formatDateVeryShort","formatDateYear","debounce","getEnergyDataCollection","SubscribeMixin","loadPolyfillIfNeeded","HuiEnergyPeriodSelector","_decorate","_initialize","_SubscribeMixin","_SubscribeMixin2","_inherits","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","_assertThisInitialized","_createClass","F","d","kind","decorators","attribute","key","value","type","Boolean","reflect","hassSubscribe","_this2","hass","collectionKey","subscribe","data","_updateDates","_measure","narrow","offsetWidth","_attachObserver2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this3","wrap","_callee$","_context","prev","next","_resizeObserver","ResizeObserver","observe","stop","_attachObserver","apply","firstUpdated","connectedCallback","_this4","_get","_getPrototypeOf","prototype","call","updateComplete","then","disconnectedCallback","disconnect","willUpdate","changedProps","_this$hass","_changedProps$get","hasUpdated","has","localize","get","today","Date","weekStartsOn","locale","_ranges","_defineProperty","config","render","_startDate","simpleRange","_simpleRange","_endDate","_templateObject","_taggedTemplateLiteral","_pickPrevious","_pickNext","_dateRangeChanged","_templateObject2","_pickToday","_toggleCompare","_compare","startDate","endDate","getMonth","_updateCollectionPeriod","energyCollection","setPeriod","refresh","ev","detail","range","weekStart","weekEnd","getTime","difference","_shift","forward","start","end","energyData","startCompare","undefined","source","selected","setCompare","static","styles","_templateObject3"],"sources":["/workspaces/frontend/src/panels/lovelace/components/hui-energy-period-selector.ts"],"sourcesContent":["import \"@material/mwc-button/mwc-button\";\nimport type { RequestSelectedDetail } from \"@material/mwc-list/mwc-list-item\";\nimport { mdiDotsVertical } from \"@mdi/js\";\nimport {\n  addDays,\n  addMonths,\n  differenceInDays,\n  differenceInMonths,\n  endOfDay,\n  endOfMonth,\n  endOfQuarter,\n  endOfToday,\n  endOfWeek,\n  endOfYear,\n  isFirstDayOfMonth,\n  isLastDayOfMonth,\n  startOfDay,\n  startOfMonth,\n  startOfQuarter,\n  startOfWeek,\n  startOfYear,\n  subDays,\n} from \"date-fns/esm\";\nimport { UnsubscribeFunc } from \"home-assistant-js-websocket\";\nimport {\n  CSSResultGroup,\n  LitElement,\n  PropertyValues,\n  css,\n  html,\n  nothing,\n} from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { calcDate, calcDateProperty } from \"../../../common/datetime/calc_date\";\nimport { firstWeekdayIndex } from \"../../../common/datetime/first_weekday\";\nimport {\n  formatDate,\n  formatDateMonthYear,\n  formatDateShort,\n  formatDateVeryShort,\n  formatDateYear,\n} from \"../../../common/datetime/format_date\";\nimport { debounce } from \"../../../common/util/debounce\";\nimport \"../../../components/ha-button-menu\";\nimport \"../../../components/ha-check-list-item\";\nimport \"../../../components/ha-date-range-picker\";\nimport type { DateRangePickerRanges } from \"../../../components/ha-date-range-picker\";\nimport \"../../../components/ha-icon-button-next\";\nimport \"../../../components/ha-icon-button-prev\";\nimport { EnergyData, getEnergyDataCollection } from \"../../../data/energy\";\nimport { SubscribeMixin } from \"../../../mixins/subscribe-mixin\";\nimport { loadPolyfillIfNeeded } from \"../../../resources/resize-observer.polyfill\";\nimport { HomeAssistant } from \"../../../types\";\n\n@customElement(\"hui-energy-period-selector\")\nexport class HuiEnergyPeriodSelector extends SubscribeMixin(LitElement) {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property() public collectionKey?: string;\n\n  @property({ type: Boolean, reflect: true }) public narrow?;\n\n  @state() _startDate?: Date;\n\n  @state() _endDate?: Date;\n\n  @state() private _ranges: DateRangePickerRanges = {};\n\n  @state() private _compare = false;\n\n  private _resizeObserver?: ResizeObserver;\n\n  public hassSubscribe(): UnsubscribeFunc[] {\n    return [\n      getEnergyDataCollection(this.hass, {\n        key: this.collectionKey,\n      }).subscribe((data) => this._updateDates(data)),\n    ];\n  }\n\n  private _measure() {\n    this.narrow = this.offsetWidth < 450;\n  }\n\n  private async _attachObserver(): Promise<void> {\n    if (!this._resizeObserver) {\n      await loadPolyfillIfNeeded();\n      this._resizeObserver = new ResizeObserver(\n        debounce(() => this._measure(), 250, false)\n      );\n    }\n    this._resizeObserver.observe(this);\n  }\n\n  protected firstUpdated(): void {\n    this._attachObserver();\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this.updateComplete.then(() => this._attachObserver());\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    if (this._resizeObserver) {\n      this._resizeObserver.disconnect();\n    }\n  }\n\n  public willUpdate(changedProps: PropertyValues) {\n    super.willUpdate(changedProps);\n    if (!this.hasUpdated) {\n      this._measure();\n    }\n\n    if (\n      !this.hasUpdated ||\n      (changedProps.has(\"hass\") &&\n        this.hass?.localize !== changedProps.get(\"hass\")?.localize)\n    ) {\n      const today = new Date();\n      const weekStartsOn = firstWeekdayIndex(this.hass.locale);\n\n      // pre defined date ranges\n      this._ranges = {\n        [this.hass.localize(\"ui.components.date-range-picker.ranges.today\")]: [\n          calcDate(today, startOfDay, this.hass.locale, this.hass.config, {\n            weekStartsOn,\n          }),\n          calcDate(today, endOfDay, this.hass.locale, this.hass.config, {\n            weekStartsOn,\n          }),\n        ],\n        [this.hass.localize(\n          \"ui.components.date-range-picker.ranges.yesterday\"\n        )]: [\n          calcDate(\n            calcDate(today, subDays, this.hass.locale, this.hass.config, 1),\n            startOfDay,\n            this.hass.locale,\n            this.hass.config,\n            {\n              weekStartsOn,\n            }\n          ),\n          calcDate(\n            calcDate(today, subDays, this.hass.locale, this.hass.config, 1),\n            endOfDay,\n            this.hass.locale,\n            this.hass.config,\n            {\n              weekStartsOn,\n            }\n          ),\n        ],\n        [this.hass.localize(\n          \"ui.components.date-range-picker.ranges.this_week\"\n        )]: [\n          calcDate(today, startOfWeek, this.hass.locale, this.hass.config, {\n            weekStartsOn,\n          }),\n          calcDate(today, endOfWeek, this.hass.locale, this.hass.config, {\n            weekStartsOn,\n          }),\n        ],\n        [this.hass.localize(\n          \"ui.components.date-range-picker.ranges.this_month\"\n        )]: [\n          calcDate(today, startOfMonth, this.hass.locale, this.hass.config),\n          calcDate(today, endOfMonth, this.hass.locale, this.hass.config),\n        ],\n        [this.hass.localize(\n          \"ui.components.date-range-picker.ranges.this_quarter\"\n        )]: [\n          calcDate(today, startOfQuarter, this.hass.locale, this.hass.config),\n          calcDate(today, endOfQuarter, this.hass.locale, this.hass.config),\n        ],\n        [this.hass.localize(\n          \"ui.components.date-range-picker.ranges.this_year\"\n        )]: [\n          calcDate(today, startOfYear, this.hass.locale, this.hass.config),\n          calcDate(today, endOfYear, this.hass.locale, this.hass.config),\n        ],\n      };\n    }\n  }\n\n  protected render() {\n    if (!this.hass || !this._startDate) {\n      return nothing;\n    }\n\n    const simpleRange = this._simpleRange(\n      this._startDate,\n      this._endDate,\n      this.hass.locale,\n      this.hass.config\n    );\n\n    return html`\n      <div class=\"row\">\n        <div class=\"label\">\n          ${simpleRange === \"day\"\n            ? this.narrow\n              ? formatDateShort(\n                  this._startDate,\n                  this.hass.locale,\n                  this.hass.config\n                )\n              : formatDate(this._startDate, this.hass.locale, this.hass.config)\n            : simpleRange === \"month\"\n              ? formatDateMonthYear(\n                  this._startDate,\n                  this.hass.locale,\n                  this.hass.config\n                )\n              : simpleRange === \"year\"\n                ? formatDateYear(\n                    this._startDate,\n                    this.hass.locale,\n                    this.hass.config\n                  )\n                : `${formatDateVeryShort(\n                    this._startDate,\n                    this.hass.locale,\n                    this.hass.config\n                  )} – ${formatDateVeryShort(\n                    this._endDate || new Date(),\n                    this.hass.locale,\n                    this.hass.config\n                  )}`}\n        </div>\n        <div class=\"time-handle\">\n          <ha-icon-button-prev\n            .label=${this.hass.localize(\n              \"ui.panel.lovelace.components.energy_period_selector.previous\"\n            )}\n            @click=${this._pickPrevious}\n          ></ha-icon-button-prev>\n          <ha-icon-button-next\n            .label=${this.hass.localize(\n              \"ui.panel.lovelace.components.energy_period_selector.next\"\n            )}\n            @click=${this._pickNext}\n          ></ha-icon-button-next>\n          <ha-date-range-picker\n            .hass=${this.hass}\n            .startDate=${this._startDate}\n            .endDate=${this._endDate || new Date()}\n            .ranges=${this._ranges}\n            @change=${this._dateRangeChanged}\n            .timePicker=${false}\n            minimal\n          ></ha-date-range-picker>\n        </div>\n\n        ${!this.narrow\n          ? html`<mwc-button dense outlined @click=${this._pickToday}>\n              ${this.hass.localize(\n                \"ui.panel.lovelace.components.energy_period_selector.today\"\n              )}\n            </mwc-button>`\n          : nothing}\n\n        <ha-button-menu>\n          <ha-icon-button\n            slot=\"trigger\"\n            .label=${this.hass.localize(\"ui.common.menu\")}\n            .path=${mdiDotsVertical}\n          ></ha-icon-button>\n          <ha-check-list-item\n            left\n            @request-selected=${this._toggleCompare}\n            .selected=${this._compare}\n          >\n            ${this.hass.localize(\n              \"ui.panel.lovelace.components.energy_period_selector.compare\"\n            )}\n          </ha-check-list-item>\n          <slot name=\"overflow-menu\"></slot>\n        </ha-button-menu>\n      </div>\n    `;\n  }\n\n  private _simpleRange = memoizeOne(\n    (startDate, endDate, locale, config): string => {\n      if (differenceInDays(endDate!, startDate!) === 0) {\n        return \"day\";\n      }\n      if (\n        (calcDateProperty(\n          startDate,\n          isFirstDayOfMonth,\n          locale,\n          config\n        ) as boolean) &&\n        (calcDateProperty(endDate, isLastDayOfMonth, locale, config) as boolean)\n      ) {\n        if (\n          (calcDateProperty(\n            endDate,\n            differenceInMonths,\n            locale,\n            config,\n            startDate\n          ) as number) === 0\n        ) {\n          return \"month\";\n        }\n        if (\n          (calcDateProperty(\n            endDate,\n            differenceInMonths,\n            locale,\n            config,\n            startDate\n          ) as number) === 2 &&\n          startDate.getMonth() % 3 === 0\n        ) {\n          return \"quarter\";\n        }\n      }\n      if (\n        calcDateProperty(startDate, isFirstDayOfMonth, locale, config) &&\n        calcDateProperty(endDate, isLastDayOfMonth, locale, config) &&\n        calcDateProperty(\n          endDate,\n          differenceInMonths,\n          locale,\n          config,\n          startDate\n        ) === 11\n      ) {\n        return \"year\";\n      }\n      return \"other\";\n    }\n  );\n\n  private _updateCollectionPeriod() {\n    const energyCollection = getEnergyDataCollection(this.hass, {\n      key: this.collectionKey,\n    });\n    energyCollection.setPeriod(this._startDate!, this._endDate!);\n    energyCollection.refresh();\n  }\n\n  private _dateRangeChanged(ev) {\n    const weekStartsOn = firstWeekdayIndex(this.hass.locale);\n    this._startDate = calcDate(\n      ev.detail.startDate,\n      startOfDay,\n      this.hass.locale,\n      this.hass.config,\n      {\n        weekStartsOn,\n      }\n    );\n    this._endDate = calcDate(\n      ev.detail.endDate,\n      endOfDay,\n      this.hass.locale,\n      this.hass.config,\n      {\n        weekStartsOn,\n      }\n    );\n\n    this._updateCollectionPeriod();\n  }\n\n  private _pickToday() {\n    if (!this._startDate) return;\n\n    const range = this._simpleRange(\n      this._startDate,\n      this._endDate,\n      this.hass.locale,\n      this.hass.config\n    );\n    const today = new Date();\n    if (range === \"month\") {\n      this._startDate = calcDate(\n        today,\n        startOfMonth,\n        this.hass.locale,\n        this.hass.config\n      );\n      this._endDate = calcDate(\n        today,\n        endOfMonth,\n        this.hass.locale,\n        this.hass.config\n      );\n    } else if (range === \"quarter\") {\n      this._startDate = calcDate(\n        today,\n        startOfQuarter,\n        this.hass.locale,\n        this.hass.config\n      );\n      this._endDate = calcDate(\n        today,\n        endOfQuarter,\n        this.hass.locale,\n        this.hass.config\n      );\n    } else if (range === \"year\") {\n      this._startDate = calcDate(\n        today,\n        startOfYear,\n        this.hass.locale,\n        this.hass.config\n      );\n      this._endDate = calcDate(\n        today,\n        endOfYear,\n        this.hass.locale,\n        this.hass.config\n      );\n    } else {\n      const weekStartsOn = firstWeekdayIndex(this.hass.locale);\n      const weekStart = calcDate(\n        this._endDate!,\n        startOfWeek,\n        this.hass.locale,\n        this.hass.config,\n        {\n          weekStartsOn,\n        }\n      );\n      const weekEnd = calcDate(\n        this._endDate!,\n        endOfWeek,\n        this.hass.locale,\n        this.hass.config,\n        {\n          weekStartsOn,\n        }\n      );\n\n      // Check if a single week is selected\n      if (\n        this._startDate.getTime() === weekStart.getTime() &&\n        this._endDate!.getTime() === weekEnd.getTime()\n      ) {\n        // Pick current week\n        this._startDate = calcDate(\n          today,\n          startOfWeek,\n          this.hass.locale,\n          this.hass.config,\n          {\n            weekStartsOn,\n          }\n        );\n        this._endDate = calcDate(\n          today,\n          endOfWeek,\n          this.hass.locale,\n          this.hass.config,\n          {\n            weekStartsOn,\n          }\n        );\n      } else {\n        // Custom date range\n        const difference = calcDateProperty(\n          this._endDate!,\n          differenceInDays,\n          this.hass.locale,\n          this.hass.config,\n          this._startDate\n        ) as number;\n        this._startDate = calcDate(\n          calcDate(\n            today,\n            subDays,\n            this.hass.locale,\n            this.hass.config,\n            difference\n          ),\n          startOfDay,\n          this.hass.locale,\n          this.hass.config,\n          {\n            weekStartsOn,\n          }\n        );\n        this._endDate = calcDate(\n          today,\n          endOfDay,\n          this.hass.locale,\n          this.hass.config,\n          {\n            weekStartsOn,\n          }\n        );\n      }\n    }\n\n    this._updateCollectionPeriod();\n  }\n\n  private _pickPrevious() {\n    this._shift(false);\n  }\n\n  private _pickNext() {\n    this._shift(true);\n  }\n\n  private _shift(forward: boolean) {\n    if (!this._startDate) return;\n\n    let start: Date;\n    let end: Date;\n    if (\n      (calcDateProperty(\n        this._startDate,\n        isFirstDayOfMonth,\n        this.hass.locale,\n        this.hass.config\n      ) as boolean) &&\n      (calcDateProperty(\n        this._endDate!,\n        isLastDayOfMonth,\n        this.hass.locale,\n        this.hass.config\n      ) as boolean)\n    ) {\n      // Shift date range with respect to month/year selection\n      const difference =\n        ((calcDateProperty(\n          this._endDate!,\n          differenceInMonths,\n          this.hass.locale,\n          this.hass.config,\n          this._startDate\n        ) as number) +\n          1) *\n        (forward ? 1 : -1);\n      start = calcDate(\n        this._startDate,\n        addMonths,\n        this.hass.locale,\n        this.hass.config,\n        difference\n      );\n      end = calcDate(\n        calcDate(\n          this._endDate!,\n          addMonths,\n          this.hass.locale,\n          this.hass.config,\n          difference\n        ),\n        endOfMonth,\n        this.hass.locale,\n        this.hass.config\n      );\n    } else {\n      // Shift date range by period length\n      const difference =\n        ((calcDateProperty(\n          this._endDate!,\n          differenceInDays,\n          this.hass.locale,\n          this.hass.config,\n          this._startDate\n        ) as number) +\n          1) *\n        (forward ? 1 : -1);\n      start = calcDate(\n        this._startDate,\n        addDays,\n        this.hass.locale,\n        this.hass.config,\n        difference\n      );\n      end = calcDate(\n        this._endDate!,\n        addDays,\n        this.hass.locale,\n        this.hass.config,\n        difference\n      );\n    }\n\n    this._startDate = start;\n    this._endDate = end;\n\n    this._updateCollectionPeriod();\n  }\n\n  private _updateDates(energyData: EnergyData): void {\n    this._compare = energyData.startCompare !== undefined;\n    this._startDate = energyData.start;\n    this._endDate = energyData.end || endOfToday();\n  }\n\n  private _toggleCompare(ev: CustomEvent<RequestSelectedDetail>) {\n    if (ev.detail.source !== \"interaction\") {\n      return;\n    }\n    this._compare = ev.detail.selected;\n    const energyCollection = getEnergyDataCollection(this.hass, {\n      key: this.collectionKey,\n    });\n    energyCollection.setCompare(this._compare);\n    energyCollection.refresh();\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      .row {\n        display: flex;\n        align-items: center;\n      }\n      :host .time-handle {\n        display: flex;\n        justify-content: flex-end;\n        align-items: center;\n      }\n      :host([narrow]) .time-handle {\n        margin-left: auto;\n        margin-inline-start: auto;\n        margin-inline-end: initial;\n      }\n      .label {\n        display: flex;\n        align-items: center;\n        justify-content: flex-end;\n        font-size: 20px;\n        margin-left: auto;\n        margin-inline-start: auto;\n        margin-inline-end: initial;\n      }\n      :host([narrow]) .label {\n        margin-left: unset;\n        margin-inline-start: unset;\n        margin-inline-end: initial;\n      }\n      mwc-button {\n        margin-left: 8px;\n        margin-inline-start: 8px;\n        margin-inline-end: initial;\n        flex-shrink: 0;\n        --mdc-button-outline-color: currentColor;\n        --primary-color: currentColor;\n        --mdc-theme-primary: currentColor;\n        --mdc-theme-on-primary: currentColor;\n        --mdc-button-disabled-outline-color: var(--disabled-text-color);\n        --mdc-button-disabled-ink-color: var(--disabled-text-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-energy-period-selector\": HuiEnergyPeriodSelector;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}