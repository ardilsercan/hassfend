{"ast":null,"code":"import { createStyledHuiElement } from \"../cards/picture-elements/create-styled-hui-element\";\nimport { checkConditionsMet, validateConditionalConfig } from \"../common/validate-condition\";\nclass HuiConditionalElement extends HTMLElement {\n  constructor(...args) {\n    super(...args);\n    this._hass = void 0;\n    this._config = void 0;\n    this._elements = [];\n  }\n  setConfig(config) {\n    if (!config.conditions || !Array.isArray(config.conditions) || !config.elements || !Array.isArray(config.elements) || !validateConditionalConfig(config.conditions)) {\n      throw new Error(\"Invalid configuration\");\n    }\n    if (this._elements.length > 0) {\n      this._elements.forEach(el => {\n        if (el.parentElement) {\n          el.parentElement.removeChild(el);\n        }\n      });\n      this._elements = [];\n    }\n    this._config = config;\n    this._config.elements.forEach(elementConfig => {\n      this._elements.push(createStyledHuiElement(elementConfig));\n    });\n    this.updateElements();\n  }\n  set hass(hass) {\n    this._hass = hass;\n    this.updateElements();\n  }\n  updateElements() {\n    if (!this._hass || !this._config) {\n      return;\n    }\n    const visible = checkConditionsMet(this._config.conditions, this._hass);\n    this._elements.forEach(el => {\n      if (visible) {\n        el.hass = this._hass;\n        if (!el.parentElement) {\n          this.appendChild(el);\n        }\n      } else if (el.parentElement) {\n        el.parentElement.removeChild(el);\n      }\n    });\n  }\n}\ncustomElements.define(\"hui-conditional-element\", HuiConditionalElement);","map":{"version":3,"names":["createStyledHuiElement","checkConditionsMet","validateConditionalConfig","HuiConditionalElement","HTMLElement","constructor","args","_hass","_config","_elements","setConfig","config","conditions","Array","isArray","elements","Error","length","forEach","el","parentElement","removeChild","elementConfig","push","updateElements","hass","visible","appendChild","customElements","define"],"sources":["/Users/sercanardil/Desktop/frontend/src/panels/lovelace/elements/hui-conditional-element.ts"],"sourcesContent":["import { HomeAssistant } from \"../../../types\";\nimport { createStyledHuiElement } from \"../cards/picture-elements/create-styled-hui-element\";\nimport {\n  checkConditionsMet,\n  validateConditionalConfig,\n} from \"../common/validate-condition\";\nimport {\n  ConditionalElementConfig,\n  LovelaceElement,\n  LovelaceElementConfig,\n} from \"./types\";\n\nclass HuiConditionalElement extends HTMLElement implements LovelaceElement {\n  public _hass?: HomeAssistant;\n\n  private _config?: ConditionalElementConfig;\n\n  private _elements: LovelaceElement[] = [];\n\n  public setConfig(config: ConditionalElementConfig): void {\n    if (\n      !config.conditions ||\n      !Array.isArray(config.conditions) ||\n      !config.elements ||\n      !Array.isArray(config.elements) ||\n      !validateConditionalConfig(config.conditions)\n    ) {\n      throw new Error(\"Invalid configuration\");\n    }\n\n    if (this._elements.length > 0) {\n      this._elements.forEach((el: LovelaceElement) => {\n        if (el.parentElement) {\n          el.parentElement.removeChild(el);\n        }\n      });\n\n      this._elements = [];\n    }\n\n    this._config = config;\n\n    this._config.elements.forEach((elementConfig: LovelaceElementConfig) => {\n      this._elements.push(createStyledHuiElement(elementConfig));\n    });\n\n    this.updateElements();\n  }\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n\n    this.updateElements();\n  }\n\n  private updateElements() {\n    if (!this._hass || !this._config) {\n      return;\n    }\n\n    const visible = checkConditionsMet(this._config.conditions, this._hass);\n\n    this._elements.forEach((el: LovelaceElement) => {\n      if (visible) {\n        el.hass = this._hass;\n        if (!el.parentElement) {\n          this.appendChild(el);\n        }\n      } else if (el.parentElement) {\n        el.parentElement.removeChild(el);\n      }\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-conditional-element\": HuiConditionalElement;\n  }\n}\n\ncustomElements.define(\"hui-conditional-element\", HuiConditionalElement);\n"],"mappings":"AACA,SAASA,sBAAsB,QAAQ,qDAAqD;AAC5F,SACEC,kBAAkB,EAClBC,yBAAyB,QACpB,8BAA8B;AAOrC,MAAMC,qBAAqB,SAASC,WAAW,CAA4B;EAAAC,YAAA,GAAAC,IAAA;IAAA,SAAAA,IAAA;IAAA,KAClEC,KAAK;IAAA,KAEJC,OAAO;IAAA,KAEPC,SAAS,GAAsB,EAAE;EAAA;EAElCC,SAASA,CAACC,MAAgC,EAAQ;IACvD,IACE,CAACA,MAAM,CAACC,UAAU,IAClB,CAACC,KAAK,CAACC,OAAO,CAACH,MAAM,CAACC,UAAU,CAAC,IACjC,CAACD,MAAM,CAACI,QAAQ,IAChB,CAACF,KAAK,CAACC,OAAO,CAACH,MAAM,CAACI,QAAQ,CAAC,IAC/B,CAACb,yBAAyB,CAACS,MAAM,CAACC,UAAU,CAAC,EAC7C;MACA,MAAM,IAAII,KAAK,CAAC,uBAAuB,CAAC;IAC1C;IAEA,IAAI,IAAI,CAACP,SAAS,CAACQ,MAAM,GAAG,CAAC,EAAE;MAC7B,IAAI,CAACR,SAAS,CAACS,OAAO,CAAEC,EAAmB,IAAK;QAC9C,IAAIA,EAAE,CAACC,aAAa,EAAE;UACpBD,EAAE,CAACC,aAAa,CAACC,WAAW,CAACF,EAAE,CAAC;QAClC;MACF,CAAC,CAAC;MAEF,IAAI,CAACV,SAAS,GAAG,EAAE;IACrB;IAEA,IAAI,CAACD,OAAO,GAAGG,MAAM;IAErB,IAAI,CAACH,OAAO,CAACO,QAAQ,CAACG,OAAO,CAAEI,aAAoC,IAAK;MACtE,IAAI,CAACb,SAAS,CAACc,IAAI,CAACvB,sBAAsB,CAACsB,aAAa,CAAC,CAAC;IAC5D,CAAC,CAAC;IAEF,IAAI,CAACE,cAAc,CAAC,CAAC;EACvB;EAEA,IAAIC,IAAIA,CAACA,IAAmB,EAAE;IAC5B,IAAI,CAAClB,KAAK,GAAGkB,IAAI;IAEjB,IAAI,CAACD,cAAc,CAAC,CAAC;EACvB;EAEQA,cAAcA,CAAA,EAAG;IACvB,IAAI,CAAC,IAAI,CAACjB,KAAK,IAAI,CAAC,IAAI,CAACC,OAAO,EAAE;MAChC;IACF;IAEA,MAAMkB,OAAO,GAAGzB,kBAAkB,CAAC,IAAI,CAACO,OAAO,CAACI,UAAU,EAAE,IAAI,CAACL,KAAK,CAAC;IAEvE,IAAI,CAACE,SAAS,CAACS,OAAO,CAAEC,EAAmB,IAAK;MAC9C,IAAIO,OAAO,EAAE;QACXP,EAAE,CAACM,IAAI,GAAG,IAAI,CAAClB,KAAK;QACpB,IAAI,CAACY,EAAE,CAACC,aAAa,EAAE;UACrB,IAAI,CAACO,WAAW,CAACR,EAAE,CAAC;QACtB;MACF,CAAC,MAAM,IAAIA,EAAE,CAACC,aAAa,EAAE;QAC3BD,EAAE,CAACC,aAAa,CAACC,WAAW,CAACF,EAAE,CAAC;MAClC;IACF,CAAC,CAAC;EACJ;AACF;AAQAS,cAAc,CAACC,MAAM,CAAC,yBAAyB,EAAE1B,qBAAqB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}