{"ast":null,"code":"import \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.set.difference.v2.js\";\nimport \"core-js/modules/esnext.set.intersection.v2.js\";\nimport \"core-js/modules/esnext.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/esnext.set.is-subset-of.v2.js\";\nimport \"core-js/modules/esnext.set.is-superset-of.v2.js\";\nimport \"core-js/modules/esnext.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/esnext.set.union.v2.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n/** Return an color representing a state. */\n\nimport { UNAVAILABLE } from \"../../data/entity\";\nimport { computeGroupDomain } from \"../../data/group\";\nimport { computeCssVariable } from \"../../resources/css-variables\";\nimport { slugify } from \"../string/slugify\";\nimport { batteryStateColorProperty } from \"./color/battery_color\";\nimport { computeDomain } from \"./compute_domain\";\nimport { stateActive } from \"./state_active\";\nvar STATE_COLORED_DOMAIN = new Set([\"alarm_control_panel\", \"alert\", \"automation\", \"binary_sensor\", \"calendar\", \"camera\", \"climate\", \"cover\", \"device_tracker\", \"fan\", \"group\", \"humidifier\", \"input_boolean\", \"lawn_mower\", \"light\", \"lock\", \"media_player\", \"person\", \"plant\", \"remote\", \"schedule\", \"script\", \"siren\", \"sun\", \"switch\", \"timer\", \"update\", \"vacuum\", \"valve\", \"water_heater\"]);\nexport var stateColorCss = function stateColorCss(stateObj, state) {\n  var compareState = state !== undefined ? state : stateObj === null || stateObj === void 0 ? void 0 : stateObj.state;\n  if (compareState === UNAVAILABLE) {\n    return \"var(--state-unavailable-color)\";\n  }\n  var properties = stateColorProperties(stateObj, state);\n  if (properties) {\n    return computeCssVariable(properties);\n  }\n  return undefined;\n};\nexport var domainStateColorProperties = function domainStateColorProperties(domain, stateObj, state) {\n  var compareState = state !== undefined ? state : stateObj.state;\n  var active = stateActive(stateObj, state);\n  var properties = [];\n  var stateKey = slugify(compareState, \"_\");\n  var activeKey = active ? \"active\" : \"inactive\";\n  var dc = stateObj.attributes.device_class;\n  if (dc) {\n    properties.push(\"--state-\".concat(domain, \"-\").concat(dc, \"-\").concat(stateKey, \"-color\"));\n  }\n  properties.push(\"--state-\".concat(domain, \"-\").concat(stateKey, \"-color\"), \"--state-\".concat(domain, \"-\").concat(activeKey, \"-color\"), \"--state-\".concat(activeKey, \"-color\"));\n  return properties;\n};\nexport var stateColorProperties = function stateColorProperties(stateObj, state) {\n  var compareState = state !== undefined ? state : stateObj === null || stateObj === void 0 ? void 0 : stateObj.state;\n  var domain = computeDomain(stateObj.entity_id);\n  var dc = stateObj.attributes.device_class;\n\n  // Special rules for battery coloring\n  if (domain === \"sensor\" && dc === \"battery\") {\n    var property = batteryStateColorProperty(compareState);\n    if (property) {\n      return [property];\n    }\n  }\n\n  // Special rules for group coloring\n  if (domain === \"group\") {\n    var groupDomain = computeGroupDomain(stateObj);\n    if (groupDomain && STATE_COLORED_DOMAIN.has(groupDomain)) {\n      return domainStateColorProperties(groupDomain, stateObj, state);\n    }\n  }\n  if (STATE_COLORED_DOMAIN.has(domain)) {\n    return domainStateColorProperties(domain, stateObj, state);\n  }\n  return undefined;\n};\nexport var stateColorBrightness = function stateColorBrightness(stateObj) {\n  if (stateObj.attributes.brightness && computeDomain(stateObj.entity_id) !== \"plant\") {\n    // lowest brightness will be around 50% (that's pretty dark)\n    var brightness = stateObj.attributes.brightness;\n    return \"brightness(\".concat((brightness + 245) / 5, \"%)\");\n  }\n  return \"\";\n};","map":{"version":3,"names":["UNAVAILABLE","computeGroupDomain","computeCssVariable","slugify","batteryStateColorProperty","computeDomain","stateActive","STATE_COLORED_DOMAIN","Set","stateColorCss","stateObj","state","compareState","undefined","properties","stateColorProperties","domainStateColorProperties","domain","active","stateKey","activeKey","dc","attributes","device_class","push","concat","entity_id","property","groupDomain","has","stateColorBrightness","brightness"],"sources":["/workspaces/frontend/src/common/entity/state_color.ts"],"sourcesContent":["/** Return an color representing a state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { UNAVAILABLE } from \"../../data/entity\";\nimport { computeGroupDomain, GroupEntity } from \"../../data/group\";\nimport { computeCssVariable } from \"../../resources/css-variables\";\nimport { slugify } from \"../string/slugify\";\nimport { batteryStateColorProperty } from \"./color/battery_color\";\nimport { computeDomain } from \"./compute_domain\";\nimport { stateActive } from \"./state_active\";\n\nconst STATE_COLORED_DOMAIN = new Set([\n  \"alarm_control_panel\",\n  \"alert\",\n  \"automation\",\n  \"binary_sensor\",\n  \"calendar\",\n  \"camera\",\n  \"climate\",\n  \"cover\",\n  \"device_tracker\",\n  \"fan\",\n  \"group\",\n  \"humidifier\",\n  \"input_boolean\",\n  \"lawn_mower\",\n  \"light\",\n  \"lock\",\n  \"media_player\",\n  \"person\",\n  \"plant\",\n  \"remote\",\n  \"schedule\",\n  \"script\",\n  \"siren\",\n  \"sun\",\n  \"switch\",\n  \"timer\",\n  \"update\",\n  \"vacuum\",\n  \"valve\",\n  \"water_heater\",\n]);\n\nexport const stateColorCss = (stateObj: HassEntity, state?: string) => {\n  const compareState = state !== undefined ? state : stateObj?.state;\n  if (compareState === UNAVAILABLE) {\n    return `var(--state-unavailable-color)`;\n  }\n\n  const properties = stateColorProperties(stateObj, state);\n  if (properties) {\n    return computeCssVariable(properties);\n  }\n\n  return undefined;\n};\n\nexport const domainStateColorProperties = (\n  domain: string,\n  stateObj: HassEntity,\n  state?: string\n): string[] => {\n  const compareState = state !== undefined ? state : stateObj.state;\n  const active = stateActive(stateObj, state);\n\n  const properties: string[] = [];\n\n  const stateKey = slugify(compareState, \"_\");\n  const activeKey = active ? \"active\" : \"inactive\";\n\n  const dc = stateObj.attributes.device_class;\n\n  if (dc) {\n    properties.push(`--state-${domain}-${dc}-${stateKey}-color`);\n  }\n\n  properties.push(\n    `--state-${domain}-${stateKey}-color`,\n    `--state-${domain}-${activeKey}-color`,\n    `--state-${activeKey}-color`\n  );\n\n  return properties;\n};\n\nexport const stateColorProperties = (\n  stateObj: HassEntity,\n  state?: string\n): string[] | undefined => {\n  const compareState = state !== undefined ? state : stateObj?.state;\n  const domain = computeDomain(stateObj.entity_id);\n  const dc = stateObj.attributes.device_class;\n\n  // Special rules for battery coloring\n  if (domain === \"sensor\" && dc === \"battery\") {\n    const property = batteryStateColorProperty(compareState);\n    if (property) {\n      return [property];\n    }\n  }\n\n  // Special rules for group coloring\n  if (domain === \"group\") {\n    const groupDomain = computeGroupDomain(stateObj as GroupEntity);\n    if (groupDomain && STATE_COLORED_DOMAIN.has(groupDomain)) {\n      return domainStateColorProperties(groupDomain, stateObj, state);\n    }\n  }\n\n  if (STATE_COLORED_DOMAIN.has(domain)) {\n    return domainStateColorProperties(domain, stateObj, state);\n  }\n\n  return undefined;\n};\n\nexport const stateColorBrightness = (stateObj: HassEntity): string => {\n  if (\n    stateObj.attributes.brightness &&\n    computeDomain(stateObj.entity_id) !== \"plant\"\n  ) {\n    // lowest brightness will be around 50% (that's pretty dark)\n    const brightness = stateObj.attributes.brightness;\n    return `brightness(${(brightness + 245) / 5}%)`;\n  }\n  return \"\";\n};\n"],"mappings":";;;;;;;;;;;;;;AAAA;;AAEA,SAASA,WAAW,QAAQ,mBAAmB;AAC/C,SAASC,kBAAkB,QAAqB,kBAAkB;AAClE,SAASC,kBAAkB,QAAQ,+BAA+B;AAClE,SAASC,OAAO,QAAQ,mBAAmB;AAC3C,SAASC,yBAAyB,QAAQ,uBAAuB;AACjE,SAASC,aAAa,QAAQ,kBAAkB;AAChD,SAASC,WAAW,QAAQ,gBAAgB;AAE5C,IAAMC,oBAAoB,GAAG,IAAIC,GAAG,CAAC,CACnC,qBAAqB,EACrB,OAAO,EACP,YAAY,EACZ,eAAe,EACf,UAAU,EACV,QAAQ,EACR,SAAS,EACT,OAAO,EACP,gBAAgB,EAChB,KAAK,EACL,OAAO,EACP,YAAY,EACZ,eAAe,EACf,YAAY,EACZ,OAAO,EACP,MAAM,EACN,cAAc,EACd,QAAQ,EACR,OAAO,EACP,QAAQ,EACR,UAAU,EACV,QAAQ,EACR,OAAO,EACP,KAAK,EACL,QAAQ,EACR,OAAO,EACP,QAAQ,EACR,QAAQ,EACR,OAAO,EACP,cAAc,CACf,CAAC;AAEF,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,QAAoB,EAAEC,KAAc,EAAK;EACrE,IAAMC,YAAY,GAAGD,KAAK,KAAKE,SAAS,GAAGF,KAAK,GAAGD,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEC,KAAK;EAClE,IAAIC,YAAY,KAAKZ,WAAW,EAAE;IAChC;EACF;EAEA,IAAMc,UAAU,GAAGC,oBAAoB,CAACL,QAAQ,EAAEC,KAAK,CAAC;EACxD,IAAIG,UAAU,EAAE;IACd,OAAOZ,kBAAkB,CAACY,UAAU,CAAC;EACvC;EAEA,OAAOD,SAAS;AAClB,CAAC;AAED,OAAO,IAAMG,0BAA0B,GAAG,SAA7BA,0BAA0BA,CACrCC,MAAc,EACdP,QAAoB,EACpBC,KAAc,EACD;EACb,IAAMC,YAAY,GAAGD,KAAK,KAAKE,SAAS,GAAGF,KAAK,GAAGD,QAAQ,CAACC,KAAK;EACjE,IAAMO,MAAM,GAAGZ,WAAW,CAACI,QAAQ,EAAEC,KAAK,CAAC;EAE3C,IAAMG,UAAoB,GAAG,EAAE;EAE/B,IAAMK,QAAQ,GAAGhB,OAAO,CAACS,YAAY,EAAE,GAAG,CAAC;EAC3C,IAAMQ,SAAS,GAAGF,MAAM,GAAG,QAAQ,GAAG,UAAU;EAEhD,IAAMG,EAAE,GAAGX,QAAQ,CAACY,UAAU,CAACC,YAAY;EAE3C,IAAIF,EAAE,EAAE;IACNP,UAAU,CAACU,IAAI,YAAAC,MAAA,CAAYR,MAAM,OAAAQ,MAAA,CAAIJ,EAAE,OAAAI,MAAA,CAAIN,QAAQ,WAAQ,CAAC;EAC9D;EAEAL,UAAU,CAACU,IAAI,YAAAC,MAAA,CACFR,MAAM,OAAAQ,MAAA,CAAIN,QAAQ,wBAAAM,MAAA,CAClBR,MAAM,OAAAQ,MAAA,CAAIL,SAAS,wBAAAK,MAAA,CACnBL,SAAS,WACtB,CAAC;EAED,OAAON,UAAU;AACnB,CAAC;AAED,OAAO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAC/BL,QAAoB,EACpBC,KAAc,EACW;EACzB,IAAMC,YAAY,GAAGD,KAAK,KAAKE,SAAS,GAAGF,KAAK,GAAGD,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEC,KAAK;EAClE,IAAMM,MAAM,GAAGZ,aAAa,CAACK,QAAQ,CAACgB,SAAS,CAAC;EAChD,IAAML,EAAE,GAAGX,QAAQ,CAACY,UAAU,CAACC,YAAY;;EAE3C;EACA,IAAIN,MAAM,KAAK,QAAQ,IAAII,EAAE,KAAK,SAAS,EAAE;IAC3C,IAAMM,QAAQ,GAAGvB,yBAAyB,CAACQ,YAAY,CAAC;IACxD,IAAIe,QAAQ,EAAE;MACZ,OAAO,CAACA,QAAQ,CAAC;IACnB;EACF;;EAEA;EACA,IAAIV,MAAM,KAAK,OAAO,EAAE;IACtB,IAAMW,WAAW,GAAG3B,kBAAkB,CAACS,QAAuB,CAAC;IAC/D,IAAIkB,WAAW,IAAIrB,oBAAoB,CAACsB,GAAG,CAACD,WAAW,CAAC,EAAE;MACxD,OAAOZ,0BAA0B,CAACY,WAAW,EAAElB,QAAQ,EAAEC,KAAK,CAAC;IACjE;EACF;EAEA,IAAIJ,oBAAoB,CAACsB,GAAG,CAACZ,MAAM,CAAC,EAAE;IACpC,OAAOD,0BAA0B,CAACC,MAAM,EAAEP,QAAQ,EAAEC,KAAK,CAAC;EAC5D;EAEA,OAAOE,SAAS;AAClB,CAAC;AAED,OAAO,IAAMiB,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAIpB,QAAoB,EAAa;EACpE,IACEA,QAAQ,CAACY,UAAU,CAACS,UAAU,IAC9B1B,aAAa,CAACK,QAAQ,CAACgB,SAAS,CAAC,KAAK,OAAO,EAC7C;IACA;IACA,IAAMK,UAAU,GAAGrB,QAAQ,CAACY,UAAU,CAACS,UAAU;IACjD,qBAAAN,MAAA,CAAqB,CAACM,UAAU,GAAG,GAAG,IAAI,CAAC;EAC7C;EACA,OAAO,EAAE;AACX,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}