{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _templateObject;\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { DrawerBase } from \"@material/mwc-drawer/mwc-drawer-base\";\nimport { styles } from \"@material/mwc-drawer/mwc-drawer.css\";\nimport { css } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { mainWindow } from \"../common/dom/get_main_window\";\nvar blockingElements = document.$blockingElements;\nexport var HaDrawer = _decorate([customElement(\"ha-drawer\")], function (_initialize, _DrawerBase) {\n  var HaDrawer = /*#__PURE__*/function (_DrawerBase2) {\n    _inherits(HaDrawer, _DrawerBase2);\n    function HaDrawer() {\n      var _this;\n      _classCallCheck(this, HaDrawer);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _callSuper(this, HaDrawer, [].concat(args));\n      _initialize(_assertThisInitialized(_this));\n      return _this;\n    }\n    return _createClass(HaDrawer);\n  }(_DrawerBase);\n  return {\n    F: HaDrawer,\n    d: [{\n      kind: \"field\",\n      decorators: [property()],\n      key: \"direction\",\n      value: function value() {\n        return \"ltr\";\n      }\n    }, {\n      kind: \"field\",\n      key: \"_mc\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_rtlStyle\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"createAdapter\",\n      value: function createAdapter() {\n        var _this2 = this;\n        return Object.assign(Object.assign({}, _get(_getPrototypeOf(HaDrawer.prototype), \"createAdapter\", this).call(this)), {}, {\n          trapFocus: function trapFocus() {\n            blockingElements.push(_this2);\n            _this2.appContent.inert = true;\n            document.body.style.overflow = \"hidden\";\n          },\n          releaseFocus: function releaseFocus() {\n            blockingElements.remove(_this2);\n            _this2.appContent.inert = false;\n            document.body.style.overflow = \"\";\n          }\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProps) {\n        _get(_getPrototypeOf(HaDrawer.prototype), \"updated\", this).call(this, changedProps);\n        if (changedProps.has(\"direction\")) {\n          if (mainWindow.document.dir === \"rtl\") {\n            this._rtlStyle = document.createElement(\"style\");\n            this._rtlStyle.innerHTML = \"\\n          .mdc-drawer--animate {\\n            transform: translateX(100%);\\n          }\\n          .mdc-drawer--opening {\\n            transform: translateX(0);\\n          }\\n          .mdc-drawer--closing {\\n            transform: translateX(100%);\\n          }\\n        \";\n            this.shadowRoot.appendChild(this._rtlStyle);\n          } else if (this._rtlStyle) {\n            this.shadowRoot.removeChild(this._rtlStyle);\n          }\n        }\n        if (changedProps.has(\"open\") && this.open && this.type === \"modal\") {\n          this._setupSwipe();\n        } else if (this._mc) {\n          this._mc.destroy();\n          this._mc = undefined;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_setupSwipe\",\n      value: function () {\n        var _setupSwipe2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n          var _this3 = this;\n          var hammer;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return import(\"../resources/hammer\");\n              case 2:\n                hammer = _context.sent;\n                this._mc = new hammer.Manager(document, {\n                  touchAction: \"pan-y\"\n                });\n                this._mc.add(new hammer.Swipe({\n                  direction: this.direction === \"rtl\" ? hammer.DIRECTION_RIGHT : hammer.DIRECTION_LEFT\n                }));\n                this._mc.on(\"swipeleft swiperight\", function () {\n                  fireEvent(_this3, \"hass-toggle-menu\", {\n                    open: false\n                  });\n                });\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee, this);\n        }));\n        function _setupSwipe() {\n          return _setupSwipe2.apply(this, arguments);\n        }\n        return _setupSwipe;\n      }()\n    }, {\n      kind: \"field\",\n      static: true,\n      key: \"styles\",\n      value: function value() {\n        return [styles, css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      .mdc-drawer {\\n        position: fixed;\\n        top: 0;\\n        border-color: var(--divider-color, rgba(0, 0, 0, 0.12));\\n        inset-inline-start: 0 !important;\\n        inset-inline-end: initial !important;\\n      }\\n      .mdc-drawer.mdc-drawer--modal.mdc-drawer--open {\\n        z-index: 200;\\n      }\\n      .mdc-drawer-app-content {\\n        overflow: unset;\\n        flex: none;\\n        padding-left: var(--mdc-drawer-width);\\n        padding-inline-start: var(--mdc-drawer-width);\\n        padding-inline-end: initial;\\n        direction: var(--direction);\\n        width: 100%;\\n        box-sizing: border-box;\\n      }\\n    \"])))];\n      }\n    }]\n  };\n}, DrawerBase);","map":{"version":3,"names":["DrawerBase","styles","css","customElement","property","fireEvent","mainWindow","blockingElements","document","$blockingElements","HaDrawer","_decorate","_initialize","_DrawerBase","_DrawerBase2","_inherits","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","_assertThisInitialized","_createClass","F","d","kind","decorators","key","value","createAdapter","_this2","Object","assign","_get","_getPrototypeOf","prototype","call","trapFocus","push","appContent","inert","body","style","overflow","releaseFocus","remove","updated","changedProps","has","dir","_rtlStyle","createElement","innerHTML","shadowRoot","appendChild","removeChild","open","type","_setupSwipe","_mc","destroy","undefined","_setupSwipe2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this3","hammer","wrap","_callee$","_context","prev","next","sent","Manager","touchAction","add","Swipe","direction","DIRECTION_RIGHT","DIRECTION_LEFT","on","stop","apply","static","_templateObject","_taggedTemplateLiteral"],"sources":["/workspaces/frontend/src/components/ha-drawer.ts"],"sourcesContent":["import { DrawerBase } from \"@material/mwc-drawer/mwc-drawer-base\";\nimport { styles } from \"@material/mwc-drawer/mwc-drawer.css\";\nimport { css, PropertyValues } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { mainWindow } from \"../common/dom/get_main_window\";\n\nconst blockingElements = (document as any).$blockingElements;\n\n@customElement(\"ha-drawer\")\nexport class HaDrawer extends DrawerBase {\n  @property() public direction: \"ltr\" | \"rtl\" = \"ltr\";\n\n  private _mc?: HammerManager;\n\n  private _rtlStyle?: HTMLElement;\n\n  protected createAdapter() {\n    return {\n      ...super.createAdapter(),\n      trapFocus: () => {\n        blockingElements.push(this);\n        this.appContent.inert = true;\n        document.body.style.overflow = \"hidden\";\n      },\n      releaseFocus: () => {\n        blockingElements.remove(this);\n        this.appContent.inert = false;\n        document.body.style.overflow = \"\";\n      },\n    };\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n    if (changedProps.has(\"direction\")) {\n      if (mainWindow.document.dir === \"rtl\") {\n        this._rtlStyle = document.createElement(\"style\");\n        this._rtlStyle.innerHTML = `\n          .mdc-drawer--animate {\n            transform: translateX(100%);\n          }\n          .mdc-drawer--opening {\n            transform: translateX(0);\n          }\n          .mdc-drawer--closing {\n            transform: translateX(100%);\n          }\n        `;\n\n        this.shadowRoot!.appendChild(this._rtlStyle);\n      } else if (this._rtlStyle) {\n        this.shadowRoot!.removeChild(this._rtlStyle);\n      }\n    }\n\n    if (changedProps.has(\"open\") && this.open && this.type === \"modal\") {\n      this._setupSwipe();\n    } else if (this._mc) {\n      this._mc.destroy();\n      this._mc = undefined;\n    }\n  }\n\n  private async _setupSwipe() {\n    const hammer = await import(\"../resources/hammer\");\n    this._mc = new hammer.Manager(document, {\n      touchAction: \"pan-y\",\n    });\n    this._mc.add(\n      new hammer.Swipe({\n        direction:\n          this.direction === \"rtl\"\n            ? hammer.DIRECTION_RIGHT\n            : hammer.DIRECTION_LEFT,\n      })\n    );\n    this._mc.on(\"swipeleft swiperight\", () => {\n      fireEvent(this, \"hass-toggle-menu\", { open: false });\n    });\n  }\n\n  static override styles = [\n    styles,\n    css`\n      .mdc-drawer {\n        position: fixed;\n        top: 0;\n        border-color: var(--divider-color, rgba(0, 0, 0, 0.12));\n        inset-inline-start: 0 !important;\n        inset-inline-end: initial !important;\n      }\n      .mdc-drawer.mdc-drawer--modal.mdc-drawer--open {\n        z-index: 200;\n      }\n      .mdc-drawer-app-content {\n        overflow: unset;\n        flex: none;\n        padding-left: var(--mdc-drawer-width);\n        padding-inline-start: var(--mdc-drawer-width);\n        padding-inline-end: initial;\n        direction: var(--direction);\n        width: 100%;\n        box-sizing: border-box;\n      }\n    `,\n  ];\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-drawer\": HaDrawer;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}