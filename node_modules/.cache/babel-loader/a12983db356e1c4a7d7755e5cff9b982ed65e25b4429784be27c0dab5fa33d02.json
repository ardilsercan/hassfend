{"ast":null,"code":"import _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport { ReactiveElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { relativeTime } from \"../common/datetime/relative_time\";\nimport { capitalizeFirstLetter } from \"../common/string/capitalize-first-letter\";\nlet HaRelativeTime = _decorate([customElement(\"ha-relative-time\")], function (_initialize, _ReactiveElement) {\n  class HaRelativeTime extends _ReactiveElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: HaRelativeTime,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"datetime\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"capitalize\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_interval\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(HaRelativeTime.prototype), \"disconnectedCallback\", this).call(this);\n        this._clearInterval();\n      }\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(HaRelativeTime.prototype), \"connectedCallback\", this).call(this);\n        if (this.datetime) {\n          this._startInterval();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"createRenderRoot\",\n      value: function createRenderRoot() {\n        return this;\n      }\n    }, {\n      kind: \"method\",\n      key: \"firstUpdated\",\n      value: function firstUpdated(changedProps) {\n        _get(_getPrototypeOf(HaRelativeTime.prototype), \"firstUpdated\", this).call(this, changedProps);\n        this._updateRelative();\n      }\n    }, {\n      kind: \"method\",\n      key: \"update\",\n      value: function update(changedProps) {\n        _get(_getPrototypeOf(HaRelativeTime.prototype), \"update\", this).call(this, changedProps);\n        this._updateRelative();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_clearInterval\",\n      value: function _clearInterval() {\n        if (this._interval) {\n          window.clearInterval(this._interval);\n          this._interval = undefined;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_startInterval\",\n      value: function _startInterval() {\n        this._clearInterval();\n\n        // update every 60 seconds\n        this._interval = window.setInterval(() => this._updateRelative(), 60000);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_updateRelative\",\n      value: function _updateRelative() {\n        if (!this.datetime) {\n          this.innerHTML = this.hass.localize(\"ui.components.relative_time.never\");\n        } else {\n          const relTime = relativeTime(new Date(this.datetime), this.hass.locale);\n          this.innerHTML = this.capitalize ? capitalizeFirstLetter(relTime) : relTime;\n        }\n      }\n    }]\n  };\n}, ReactiveElement);","map":{"version":3,"names":["ReactiveElement","customElement","property","relativeTime","capitalizeFirstLetter","HaRelativeTime","_decorate","_initialize","_ReactiveElement","constructor","args","F","d","kind","decorators","attribute","key","value","type","Boolean","disconnectedCallback","_get","_getPrototypeOf","prototype","call","_clearInterval","connectedCallback","datetime","_startInterval","createRenderRoot","firstUpdated","changedProps","_updateRelative","update","_interval","window","clearInterval","undefined","setInterval","innerHTML","hass","localize","relTime","Date","locale","capitalize"],"sources":["/workspaces/frontend/src/components/ha-relative-time.ts"],"sourcesContent":["import { PropertyValues, ReactiveElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { relativeTime } from \"../common/datetime/relative_time\";\nimport { capitalizeFirstLetter } from \"../common/string/capitalize-first-letter\";\nimport type { HomeAssistant } from \"../types\";\n\n@customElement(\"ha-relative-time\")\nclass HaRelativeTime extends ReactiveElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public datetime?: string | Date;\n\n  @property({ type: Boolean }) public capitalize = false;\n\n  private _interval?: number;\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._clearInterval();\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    if (this.datetime) {\n      this._startInterval();\n    }\n  }\n\n  protected createRenderRoot() {\n    return this;\n  }\n\n  protected firstUpdated(changedProps: PropertyValues) {\n    super.firstUpdated(changedProps);\n    this._updateRelative();\n  }\n\n  protected update(changedProps: PropertyValues) {\n    super.update(changedProps);\n    this._updateRelative();\n  }\n\n  private _clearInterval(): void {\n    if (this._interval) {\n      window.clearInterval(this._interval);\n      this._interval = undefined;\n    }\n  }\n\n  private _startInterval(): void {\n    this._clearInterval();\n\n    // update every 60 seconds\n    this._interval = window.setInterval(() => this._updateRelative(), 60000);\n  }\n\n  private _updateRelative(): void {\n    if (!this.datetime) {\n      this.innerHTML = this.hass.localize(\"ui.components.relative_time.never\");\n    } else {\n      const relTime = relativeTime(new Date(this.datetime), this.hass.locale);\n      this.innerHTML = this.capitalize\n        ? capitalizeFirstLetter(relTime)\n        : relTime;\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-relative-time\": HaRelativeTime;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}