{"ast":null,"code":"import _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { stopPropagation } from \"../common/dom/stop_propagation\";\nimport { debounce } from \"../common/util/debounce\";\nimport { listTTSVoices } from \"../data/tts\";\nimport \"./ha-list-item\";\nimport \"./ha-select\";\nconst NONE = \"__NONE_OPTION__\";\nexport let HaTTSVoicePicker = _decorate([customElement(\"ha-tts-voice-picker\")], function (_initialize, _LitElement) {\n  class HaTTSVoicePicker extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: HaTTSVoicePicker,\n    d: [{\n      kind: \"field\",\n      decorators: [property()],\n      key: \"value\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"label\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"engineId\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"language\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean,\n        reflect: true\n      })],\n      key: \"disabled\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"required\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_voices\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [query(\"ha-select\")],\n      key: \"_select\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        var _this$value, _this$_voices$;\n        if (!this._voices) {\n          return nothing;\n        }\n        const value = (_this$value = this.value) !== null && _this$value !== void 0 ? _this$value : this.required ? (_this$_voices$ = this._voices[0]) === null || _this$_voices$ === void 0 ? void 0 : _this$_voices$.voice_id : NONE;\n        return html`\n      <ha-select\n        .label=${this.label || this.hass.localize(\"ui.components.tts-voice-picker.voice\")}\n        .value=${value}\n        .required=${this.required}\n        .disabled=${this.disabled}\n        @selected=${this._changed}\n        @closed=${stopPropagation}\n        fixedMenuPosition\n        naturalMenuWidth\n      >\n        ${!this.required ? html`<ha-list-item .value=${NONE}>\n              ${this.hass.localize(\"ui.components.tts-voice-picker.none\")}\n            </ha-list-item>` : nothing}\n        ${this._voices.map(voice => html`<ha-list-item .value=${voice.voice_id}>\n              ${voice.name}\n            </ha-list-item>`)}\n      </ha-select>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProperties) {\n        _get(_getPrototypeOf(HaTTSVoicePicker.prototype), \"willUpdate\", this).call(this, changedProperties);\n        if (!this.hasUpdated) {\n          this._updateVoices();\n        } else if (changedProperties.has(\"language\") || changedProperties.has(\"engineId\")) {\n          this._debouncedUpdateVoices();\n        }\n      }\n    }, {\n      kind: \"field\",\n      key: \"_debouncedUpdateVoices\",\n      value() {\n        return debounce(() => this._updateVoices(), 500);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_updateVoices\",\n      value: async function _updateVoices() {\n        if (!this.engineId || !this.language) {\n          this._voices = undefined;\n          return;\n        }\n        this._voices = (await listTTSVoices(this.hass, this.engineId, this.language)).voices;\n        if (!this.value) {\n          return;\n        }\n        if (!this._voices || !this._voices.find(voice => voice.voice_id === this.value)) {\n          this.value = undefined;\n          fireEvent(this, \"value-changed\", {\n            value: this.value\n          });\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProperties) {\n        var _this$_select;\n        _get(_getPrototypeOf(HaTTSVoicePicker.prototype), \"updated\", this).call(this, changedProperties);\n        if (changedProperties.has(\"_voices\") && ((_this$_select = this._select) === null || _this$_select === void 0 ? void 0 : _this$_select.value) !== this.value) {\n          var _this$_select2, _this$_select3;\n          (_this$_select2 = this._select) === null || _this$_select2 === void 0 || _this$_select2.layoutOptions();\n          fireEvent(this, \"value-changed\", {\n            value: (_this$_select3 = this._select) === null || _this$_select3 === void 0 ? void 0 : _this$_select3.value\n          });\n        }\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return css`\n      ha-select {\n        width: 100%;\n      }\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_changed\",\n      value: function _changed(ev) {\n        const target = ev.target;\n        if (!this.hass || target.value === \"\" || target.value === this.value || this.value === undefined && target.value === NONE) {\n          return;\n        }\n        this.value = target.value === NONE ? undefined : target.value;\n        fireEvent(this, \"value-changed\", {\n          value: this.value\n        });\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["css","html","LitElement","nothing","customElement","property","query","state","fireEvent","stopPropagation","debounce","listTTSVoices","NONE","HaTTSVoicePicker","_decorate","_initialize","_LitElement","constructor","args","F","d","kind","decorators","key","value","attribute","type","Boolean","reflect","render","_this$value","_this$_voices$","_voices","required","voice_id","label","hass","localize","disabled","_changed","map","voice","name","willUpdate","changedProperties","_get","_getPrototypeOf","prototype","call","hasUpdated","_updateVoices","has","_debouncedUpdateVoices","engineId","language","undefined","voices","find","updated","_this$_select","_select","_this$_select2","_this$_select3","layoutOptions","static","styles","ev","target"],"sources":["/Users/sercanardil/Desktop/frontend/src/components/ha-tts-voice-picker.ts"],"sourcesContent":["import {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  nothing,\n  PropertyValues,\n} from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { stopPropagation } from \"../common/dom/stop_propagation\";\nimport { debounce } from \"../common/util/debounce\";\nimport { listTTSVoices, TTSVoice } from \"../data/tts\";\nimport { HomeAssistant } from \"../types\";\nimport \"./ha-list-item\";\nimport \"./ha-select\";\nimport type { HaSelect } from \"./ha-select\";\n\nconst NONE = \"__NONE_OPTION__\";\n\n@customElement(\"ha-tts-voice-picker\")\nexport class HaTTSVoicePicker extends LitElement {\n  @property() public value?: string;\n\n  @property() public label?: string;\n\n  @property() public engineId?: string;\n\n  @property() public language?: string;\n\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean, reflect: true }) public disabled = false;\n\n  @property({ type: Boolean }) public required = false;\n\n  @state() _voices?: TTSVoice[] | null;\n\n  @query(\"ha-select\") private _select?: HaSelect;\n\n  protected render() {\n    if (!this._voices) {\n      return nothing;\n    }\n    const value =\n      this.value ?? (this.required ? this._voices[0]?.voice_id : NONE);\n    return html`\n      <ha-select\n        .label=${this.label ||\n        this.hass!.localize(\"ui.components.tts-voice-picker.voice\")}\n        .value=${value}\n        .required=${this.required}\n        .disabled=${this.disabled}\n        @selected=${this._changed}\n        @closed=${stopPropagation}\n        fixedMenuPosition\n        naturalMenuWidth\n      >\n        ${!this.required\n          ? html`<ha-list-item .value=${NONE}>\n              ${this.hass!.localize(\"ui.components.tts-voice-picker.none\")}\n            </ha-list-item>`\n          : nothing}\n        ${this._voices.map(\n          (voice) =>\n            html`<ha-list-item .value=${voice.voice_id}>\n              ${voice.name}\n            </ha-list-item>`\n        )}\n      </ha-select>\n    `;\n  }\n\n  protected willUpdate(changedProperties: PropertyValues<this>): void {\n    super.willUpdate(changedProperties);\n    if (!this.hasUpdated) {\n      this._updateVoices();\n    } else if (\n      changedProperties.has(\"language\") ||\n      changedProperties.has(\"engineId\")\n    ) {\n      this._debouncedUpdateVoices();\n    }\n  }\n\n  private _debouncedUpdateVoices = debounce(() => this._updateVoices(), 500);\n\n  private async _updateVoices() {\n    if (!this.engineId || !this.language) {\n      this._voices = undefined;\n      return;\n    }\n    this._voices = (\n      await listTTSVoices(this.hass, this.engineId, this.language)\n    ).voices;\n\n    if (!this.value) {\n      return;\n    }\n\n    if (\n      !this._voices ||\n      !this._voices.find((voice) => voice.voice_id === this.value)\n    ) {\n      this.value = undefined;\n      fireEvent(this, \"value-changed\", { value: this.value });\n    }\n  }\n\n  protected updated(changedProperties: PropertyValues<this>) {\n    super.updated(changedProperties);\n    if (\n      changedProperties.has(\"_voices\") &&\n      this._select?.value !== this.value\n    ) {\n      this._select?.layoutOptions();\n      fireEvent(this, \"value-changed\", { value: this._select?.value });\n    }\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      ha-select {\n        width: 100%;\n      }\n    `;\n  }\n\n  private _changed(ev): void {\n    const target = ev.target as HaSelect;\n    if (\n      !this.hass ||\n      target.value === \"\" ||\n      target.value === this.value ||\n      (this.value === undefined && target.value === NONE)\n    ) {\n      return;\n    }\n    this.value = target.value === NONE ? undefined : target.value;\n    fireEvent(this, \"value-changed\", { value: this.value });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-tts-voice-picker\": HaTTSVoicePicker;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}