{"ast":null,"code":"import { StructError } from \"superstruct\";\nexport const handleStructError = (hass, err) => {\n  if (!(err instanceof StructError)) {\n    return {\n      warnings: [err.message],\n      errors: undefined\n    };\n  }\n  const errors = [];\n  const warnings = [];\n  for (const failure of err.failures()) {\n    if (failure.value === undefined) {\n      errors.push(hass.localize(\"ui.errors.config.key_missing\", {\n        key: failure.path.join(\".\")\n      }));\n    } else if (failure.type === \"never\") {\n      warnings.push(hass.localize(\"ui.errors.config.key_not_expected\", {\n        key: failure.path.join(\".\")\n      }));\n    } else if (failure.type === \"union\") {\n      continue;\n    } else if (failure.type === \"enums\") {\n      warnings.push(hass.localize(\"ui.errors.config.key_wrong_type\", {\n        key: failure.path.join(\".\"),\n        type_correct: failure.message.replace(\"Expected \", \"\").split(\", \")[0],\n        type_wrong: JSON.stringify(failure.value)\n      }));\n    } else {\n      warnings.push(hass.localize(\"ui.errors.config.key_wrong_type\", {\n        key: failure.path.join(\".\"),\n        type_correct: failure.refinement || failure.type,\n        type_wrong: JSON.stringify(failure.value)\n      }));\n    }\n  }\n  return {\n    warnings,\n    errors\n  };\n};","map":{"version":3,"names":["StructError","handleStructError","hass","err","warnings","message","errors","undefined","failure","failures","value","push","localize","key","path","join","type","type_correct","replace","split","type_wrong","JSON","stringify","refinement"],"sources":["/workspaces/frontend/src/common/structs/handle-errors.ts"],"sourcesContent":["import { StructError } from \"superstruct\";\nimport type { HomeAssistant } from \"../../types\";\n\nexport const handleStructError = (\n  hass: HomeAssistant,\n  err: Error\n): { warnings: string[]; errors?: string[] } => {\n  if (!(err instanceof StructError)) {\n    return { warnings: [err.message], errors: undefined };\n  }\n  const errors: string[] = [];\n  const warnings: string[] = [];\n  for (const failure of err.failures()) {\n    if (failure.value === undefined) {\n      errors.push(\n        hass.localize(\"ui.errors.config.key_missing\", {\n          key: failure.path.join(\".\"),\n        })\n      );\n    } else if (failure.type === \"never\") {\n      warnings.push(\n        hass.localize(\"ui.errors.config.key_not_expected\", {\n          key: failure.path.join(\".\"),\n        })\n      );\n    } else if (failure.type === \"union\") {\n      continue;\n    } else if (failure.type === \"enums\") {\n      warnings.push(\n        hass.localize(\"ui.errors.config.key_wrong_type\", {\n          key: failure.path.join(\".\"),\n          type_correct: failure.message.replace(\"Expected \", \"\").split(\", \")[0],\n          type_wrong: JSON.stringify(failure.value),\n        })\n      );\n    } else {\n      warnings.push(\n        hass.localize(\"ui.errors.config.key_wrong_type\", {\n          key: failure.path.join(\".\"),\n          type_correct: failure.refinement || failure.type,\n          type_wrong: JSON.stringify(failure.value),\n        })\n      );\n    }\n  }\n  return { warnings, errors };\n};\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,aAAa;AAGzC,OAAO,MAAMC,iBAAiB,GAAGA,CAC/BC,IAAmB,EACnBC,GAAU,KACoC;EAC9C,IAAI,EAAEA,GAAG,YAAYH,WAAW,CAAC,EAAE;IACjC,OAAO;MAAEI,QAAQ,EAAE,CAACD,GAAG,CAACE,OAAO,CAAC;MAAEC,MAAM,EAAEC;IAAU,CAAC;EACvD;EACA,MAAMD,MAAgB,GAAG,EAAE;EAC3B,MAAMF,QAAkB,GAAG,EAAE;EAC7B,KAAK,MAAMI,OAAO,IAAIL,GAAG,CAACM,QAAQ,CAAC,CAAC,EAAE;IACpC,IAAID,OAAO,CAACE,KAAK,KAAKH,SAAS,EAAE;MAC/BD,MAAM,CAACK,IAAI,CACTT,IAAI,CAACU,QAAQ,CAAC,8BAA8B,EAAE;QAC5CC,GAAG,EAAEL,OAAO,CAACM,IAAI,CAACC,IAAI,CAAC,GAAG;MAC5B,CAAC,CACH,CAAC;IACH,CAAC,MAAM,IAAIP,OAAO,CAACQ,IAAI,KAAK,OAAO,EAAE;MACnCZ,QAAQ,CAACO,IAAI,CACXT,IAAI,CAACU,QAAQ,CAAC,mCAAmC,EAAE;QACjDC,GAAG,EAAEL,OAAO,CAACM,IAAI,CAACC,IAAI,CAAC,GAAG;MAC5B,CAAC,CACH,CAAC;IACH,CAAC,MAAM,IAAIP,OAAO,CAACQ,IAAI,KAAK,OAAO,EAAE;MACnC;IACF,CAAC,MAAM,IAAIR,OAAO,CAACQ,IAAI,KAAK,OAAO,EAAE;MACnCZ,QAAQ,CAACO,IAAI,CACXT,IAAI,CAACU,QAAQ,CAAC,iCAAiC,EAAE;QAC/CC,GAAG,EAAEL,OAAO,CAACM,IAAI,CAACC,IAAI,CAAC,GAAG,CAAC;QAC3BE,YAAY,EAAET,OAAO,CAACH,OAAO,CAACa,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,CAACC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACrEC,UAAU,EAAEC,IAAI,CAACC,SAAS,CAACd,OAAO,CAACE,KAAK;MAC1C,CAAC,CACH,CAAC;IACH,CAAC,MAAM;MACLN,QAAQ,CAACO,IAAI,CACXT,IAAI,CAACU,QAAQ,CAAC,iCAAiC,EAAE;QAC/CC,GAAG,EAAEL,OAAO,CAACM,IAAI,CAACC,IAAI,CAAC,GAAG,CAAC;QAC3BE,YAAY,EAAET,OAAO,CAACe,UAAU,IAAIf,OAAO,CAACQ,IAAI;QAChDI,UAAU,EAAEC,IAAI,CAACC,SAAS,CAACd,OAAO,CAACE,KAAK;MAC1C,CAAC,CACH,CAAC;IACH;EACF;EACA,OAAO;IAAEN,QAAQ;IAAEE;EAAO,CAAC;AAC7B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}