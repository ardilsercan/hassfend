{"ast":null,"code":"class DiscoveryStream {\n  constructor() {\n    this.routers = void 0;\n    this.routers = {};\n  }\n  processEvent(streamMessage) {\n    if (streamMessage.type === \"router_discovered\") {\n      this.routers[streamMessage.key] = streamMessage.data;\n    } else if (streamMessage.type === \"router_removed\") {\n      delete this.routers[streamMessage.key];\n    }\n    return Object.values(this.routers);\n  }\n}\nexport const subscribeDiscoverThreadRouters = (hass, callbackFunction) => {\n  const stream = new DiscoveryStream();\n  return hass.connection.subscribeMessage(message => callbackFunction(stream.processEvent(message)), {\n    type: \"thread/discover_routers\"\n  });\n};\nexport const listThreadDataSets = hass => hass.callWS({\n  type: \"thread/list_datasets\"\n});\nexport const getThreadDataSetTLV = (hass, dataset_id) => hass.callWS({\n  type: \"thread/get_dataset_tlv\",\n  dataset_id\n});\nexport const addThreadDataSet = (hass, source, tlv) => hass.callWS({\n  type: \"thread/add_dataset_tlv\",\n  source,\n  tlv\n});\nexport const removeThreadDataSet = (hass, dataset_id) => hass.callWS({\n  type: \"thread/delete_dataset\",\n  dataset_id\n});\nexport const setPreferredThreadDataSet = (hass, dataset_id) => hass.callWS({\n  type: \"thread/set_preferred_dataset\",\n  dataset_id\n});\nexport const setPreferredBorderAgent = (hass, dataset_id, border_agent_id, extended_address) => hass.callWS({\n  type: \"thread/set_preferred_border_agent\",\n  dataset_id,\n  border_agent_id,\n  extended_address\n});","map":{"version":3,"names":["DiscoveryStream","constructor","routers","processEvent","streamMessage","type","key","data","Object","values","subscribeDiscoverThreadRouters","hass","callbackFunction","stream","connection","subscribeMessage","message","listThreadDataSets","callWS","getThreadDataSetTLV","dataset_id","addThreadDataSet","source","tlv","removeThreadDataSet","setPreferredThreadDataSet","setPreferredBorderAgent","border_agent_id","extended_address"],"sources":["/Users/sercanardil/Desktop/frontend/src/data/thread.ts"],"sourcesContent":["import { HomeAssistant } from \"../types\";\n\nexport interface ThreadRouter {\n  addresses: [string];\n  border_agent_id: string | null;\n  brand: \"google\" | \"apple\" | \"homeassistant\";\n  extended_address: string;\n  extended_pan_id: string;\n  model_name: string | null;\n  network_name: string | null;\n  server: string | null;\n  thread_version: string | null;\n  unconfigured: boolean | null;\n  vendor_name: string | null;\n}\n\nexport interface ThreadDataSet {\n  channel: number | null;\n  created: string;\n  dataset_id: string;\n  extended_pan_id: string | null;\n  network_name: string;\n  pan_id: string | null;\n  preferred_border_agent_id: string | null;\n  preferred_extended_address: string | null;\n  preferred: boolean;\n  source: string;\n}\n\nexport interface ThreadRouterDiscoveryEvent {\n  key: string;\n  type: \"router_discovered\" | \"router_removed\";\n  data: ThreadRouter;\n}\n\nclass DiscoveryStream {\n  routers: { [key: string]: ThreadRouter };\n\n  constructor() {\n    this.routers = {};\n  }\n\n  processEvent(streamMessage: ThreadRouterDiscoveryEvent): ThreadRouter[] {\n    if (streamMessage.type === \"router_discovered\") {\n      this.routers[streamMessage.key] = streamMessage.data;\n    } else if (streamMessage.type === \"router_removed\") {\n      delete this.routers[streamMessage.key];\n    }\n    return Object.values(this.routers);\n  }\n}\n\nexport const subscribeDiscoverThreadRouters = (\n  hass: HomeAssistant,\n  callbackFunction: (routers: ThreadRouter[]) => void\n) => {\n  const stream = new DiscoveryStream();\n  return hass.connection.subscribeMessage<ThreadRouterDiscoveryEvent>(\n    (message) => callbackFunction(stream.processEvent(message)),\n    {\n      type: \"thread/discover_routers\",\n    }\n  );\n};\n\nexport const listThreadDataSets = (\n  hass: HomeAssistant\n): Promise<{ datasets: ThreadDataSet[] }> =>\n  hass.callWS({\n    type: \"thread/list_datasets\",\n  });\n\nexport const getThreadDataSetTLV = (\n  hass: HomeAssistant,\n  dataset_id: string\n): Promise<{ tlv: string }> =>\n  hass.callWS({ type: \"thread/get_dataset_tlv\", dataset_id });\n\nexport const addThreadDataSet = (\n  hass: HomeAssistant,\n  source: string,\n  tlv: string\n): Promise<void> =>\n  hass.callWS({\n    type: \"thread/add_dataset_tlv\",\n    source,\n    tlv,\n  });\n\nexport const removeThreadDataSet = (\n  hass: HomeAssistant,\n  dataset_id: string\n): Promise<void> =>\n  hass.callWS({\n    type: \"thread/delete_dataset\",\n    dataset_id,\n  });\n\nexport const setPreferredThreadDataSet = (\n  hass: HomeAssistant,\n  dataset_id: string\n): Promise<void> =>\n  hass.callWS({\n    type: \"thread/set_preferred_dataset\",\n    dataset_id,\n  });\n\nexport const setPreferredBorderAgent = (\n  hass: HomeAssistant,\n  dataset_id: string,\n  border_agent_id: string | null,\n  extended_address: string\n): Promise<void> =>\n  hass.callWS({\n    type: \"thread/set_preferred_border_agent\",\n    dataset_id,\n    border_agent_id,\n    extended_address,\n  });\n"],"mappings":"AAmCA,MAAMA,eAAe,CAAC;EAGpBC,WAAWA,CAAA,EAAG;IAAA,KAFdC,OAAO;IAGL,IAAI,CAACA,OAAO,GAAG,CAAC,CAAC;EACnB;EAEAC,YAAYA,CAACC,aAAyC,EAAkB;IACtE,IAAIA,aAAa,CAACC,IAAI,KAAK,mBAAmB,EAAE;MAC9C,IAAI,CAACH,OAAO,CAACE,aAAa,CAACE,GAAG,CAAC,GAAGF,aAAa,CAACG,IAAI;IACtD,CAAC,MAAM,IAAIH,aAAa,CAACC,IAAI,KAAK,gBAAgB,EAAE;MAClD,OAAO,IAAI,CAACH,OAAO,CAACE,aAAa,CAACE,GAAG,CAAC;IACxC;IACA,OAAOE,MAAM,CAACC,MAAM,CAAC,IAAI,CAACP,OAAO,CAAC;EACpC;AACF;AAEA,OAAO,MAAMQ,8BAA8B,GAAGA,CAC5CC,IAAmB,EACnBC,gBAAmD,KAChD;EACH,MAAMC,MAAM,GAAG,IAAIb,eAAe,CAAC,CAAC;EACpC,OAAOW,IAAI,CAACG,UAAU,CAACC,gBAAgB,CACpCC,OAAO,IAAKJ,gBAAgB,CAACC,MAAM,CAACV,YAAY,CAACa,OAAO,CAAC,CAAC,EAC3D;IACEX,IAAI,EAAE;EACR,CACF,CAAC;AACH,CAAC;AAED,OAAO,MAAMY,kBAAkB,GAC7BN,IAAmB,IAEnBA,IAAI,CAACO,MAAM,CAAC;EACVb,IAAI,EAAE;AACR,CAAC,CAAC;AAEJ,OAAO,MAAMc,mBAAmB,GAAGA,CACjCR,IAAmB,EACnBS,UAAkB,KAElBT,IAAI,CAACO,MAAM,CAAC;EAAEb,IAAI,EAAE,wBAAwB;EAAEe;AAAW,CAAC,CAAC;AAE7D,OAAO,MAAMC,gBAAgB,GAAGA,CAC9BV,IAAmB,EACnBW,MAAc,EACdC,GAAW,KAEXZ,IAAI,CAACO,MAAM,CAAC;EACVb,IAAI,EAAE,wBAAwB;EAC9BiB,MAAM;EACNC;AACF,CAAC,CAAC;AAEJ,OAAO,MAAMC,mBAAmB,GAAGA,CACjCb,IAAmB,EACnBS,UAAkB,KAElBT,IAAI,CAACO,MAAM,CAAC;EACVb,IAAI,EAAE,uBAAuB;EAC7Be;AACF,CAAC,CAAC;AAEJ,OAAO,MAAMK,yBAAyB,GAAGA,CACvCd,IAAmB,EACnBS,UAAkB,KAElBT,IAAI,CAACO,MAAM,CAAC;EACVb,IAAI,EAAE,8BAA8B;EACpCe;AACF,CAAC,CAAC;AAEJ,OAAO,MAAMM,uBAAuB,GAAGA,CACrCf,IAAmB,EACnBS,UAAkB,EAClBO,eAA8B,EAC9BC,gBAAwB,KAExBjB,IAAI,CAACO,MAAM,CAAC;EACVb,IAAI,EAAE,mCAAmC;EACzCe,UAAU;EACVO,eAAe;EACfC;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}