{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/helpers/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { atLeastVersion } from \"../../common/config/version\";\nimport { hassioApiResultExtractor } from \"../hassio/common\";\nexport var supervisorApiCall = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(hass, endpoint, options) {\n    var _options$timeout;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!atLeastVersion(hass.config.version, 2021, 2, 4)) {\n            _context.next = 2;\n            break;\n          }\n          return _context.abrupt(\"return\", hass.callWS({\n            type: \"supervisor/api\",\n            endpoint: endpoint,\n            method: (options === null || options === void 0 ? void 0 : options.method) || \"get\",\n            timeout: (_options$timeout = options === null || options === void 0 ? void 0 : options.timeout) !== null && _options$timeout !== void 0 ? _options$timeout : null,\n            data: options === null || options === void 0 ? void 0 : options.data\n          }));\n        case 2:\n          _context.t0 = hassioApiResultExtractor;\n          _context.next = 5;\n          return hass.callApi(\n          // @ts-ignore\n          (options.method || \"get\").toUpperCase(), \"hassio\".concat(endpoint), options === null || options === void 0 ? void 0 : options.data);\n        case 5:\n          _context.t1 = _context.sent;\n          return _context.abrupt(\"return\", (0, _context.t0)(_context.t1));\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function supervisorApiCall(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["atLeastVersion","hassioApiResultExtractor","supervisorApiCall","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","hass","endpoint","options","_options$timeout","wrap","_callee$","_context","prev","next","config","version","abrupt","callWS","type","method","timeout","data","t0","callApi","toUpperCase","concat","t1","sent","stop","_x","_x2","_x3","apply","arguments"],"sources":["/workspaces/frontend/src/data/supervisor/common.ts"],"sourcesContent":["import { atLeastVersion } from \"../../common/config/version\";\nimport { HomeAssistant } from \"../../types\";\nimport { hassioApiResultExtractor, HassioResponse } from \"../hassio/common\";\n\nexport interface SupervisorApiCallOptions {\n  method?: \"get\" | \"post\" | \"delete\";\n  data?: Record<string, any>;\n  timeout?: number;\n}\n\nexport const supervisorApiCall = async <T>(\n  hass: HomeAssistant,\n  endpoint: string,\n  options?: SupervisorApiCallOptions\n): Promise<T> => {\n  if (atLeastVersion(hass.config.version, 2021, 2, 4)) {\n    // Websockets was added in 2021.2.4\n    return hass.callWS<T>({\n      type: \"supervisor/api\",\n      endpoint,\n      method: options?.method || \"get\",\n      timeout: options?.timeout ?? null,\n      data: options?.data,\n    });\n  }\n  return hassioApiResultExtractor(\n    await hass.callApi<HassioResponse<T>>(\n      // @ts-ignore\n      (options.method || \"get\").toUpperCase(),\n      `hassio${endpoint}`,\n      options?.data\n    )\n  );\n};\n"],"mappings":";;AAAA,SAASA,cAAc,QAAQ,6BAA6B;AAE5D,SAASC,wBAAwB,QAAwB,kBAAkB;AAQ3E,OAAO,IAAMC,iBAAiB;EAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAC/BC,IAAmB,EACnBC,QAAgB,EAChBC,OAAkC;IAAA,IAAAC,gBAAA;IAAA,OAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAA,KAE9BhB,cAAc,CAACQ,IAAI,CAACS,MAAM,CAACC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;YAAAJ,QAAA,CAAAE,IAAA;YAAA;UAAA;UAAA,OAAAF,QAAA,CAAAK,MAAA,WAE1CX,IAAI,CAACY,MAAM,CAAI;YACpBC,IAAI,EAAE,gBAAgB;YACtBZ,QAAQ,EAARA,QAAQ;YACRa,MAAM,EAAE,CAAAZ,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEY,MAAM,KAAI,KAAK;YAChCC,OAAO,GAAAZ,gBAAA,GAAED,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEa,OAAO,cAAAZ,gBAAA,cAAAA,gBAAA,GAAI,IAAI;YACjCa,IAAI,EAAEd,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEc;UACjB,CAAC,CAAC;QAAA;UAAAV,QAAA,CAAAW,EAAA,GAEGxB,wBAAwB;UAAAa,QAAA,CAAAE,IAAA;UAAA,OACvBR,IAAI,CAACkB,OAAO;UAChB;UACA,CAAChB,OAAO,CAACY,MAAM,IAAI,KAAK,EAAEK,WAAW,CAAC,CAAC,WAAAC,MAAA,CAC9BnB,QAAQ,GACjBC,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEc,IACX,CAAC;QAAA;UAAAV,QAAA,CAAAe,EAAA,GAAAf,QAAA,CAAAgB,IAAA;UAAA,OAAAhB,QAAA,CAAAK,MAAA,eAAAL,QAAA,CAAAW,EAAA,EAAAX,QAAA,CAAAe,EAAA;QAAA;QAAA;UAAA,OAAAf,QAAA,CAAAiB,IAAA;MAAA;IAAA,GAAAxB,OAAA;EAAA,CAEJ;EAAA,gBAvBYL,iBAAiBA,CAAA8B,EAAA,EAAAC,GAAA,EAAAC,GAAA;IAAA,OAAA/B,IAAA,CAAAgC,KAAA,OAAAC,SAAA;EAAA;AAAA,GAuB7B"},"metadata":{},"sourceType":"module","externalDependencies":[]}