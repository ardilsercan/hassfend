{"ast":null,"code":"import _typeof from \"@babel/runtime/helpers/typeof\";\nimport _createForOfIteratorHelper from \"@babel/runtime/helpers/createForOfIteratorHelper\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _decorate from \"@babel/runtime/helpers/decorate\";\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13, _templateObject14, _templateObject15, _templateObject16, _templateObject17, _templateObject18, _templateObject19, _templateObject20;\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"@material/mwc-button/mwc-button\";\nimport { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { isComponentLoaded } from \"../../../common/config/is_component_loaded\";\nimport { formatDateTime } from \"../../../common/datetime/format_date_time\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { copyToClipboard } from \"../../../common/util/copy-clipboard\";\nimport { subscribePollingCollection } from \"../../../common/util/subscribe-polling\";\nimport \"../../../components/ha-alert\";\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-circular-progress\";\nimport { createCloseHeading } from \"../../../components/ha-dialog\";\nimport \"../../../components/ha-metric\";\nimport { fetchHassioStats } from \"../../../data/hassio/common\";\nimport { fetchHassioResolution } from \"../../../data/hassio/resolution\";\nimport { domainToName } from \"../../../data/integration\";\nimport { subscribeSystemHealthInfo } from \"../../../data/system_health\";\nimport { showAlertDialog } from \"../../../dialogs/generic/show-dialog-box\";\nimport { haStyleDialog } from \"../../../resources/styles\";\nimport { documentationUrl } from \"../../../util/documentation-url\";\nimport { showToast } from \"../../../util/toast\";\nvar sortKeys = function sortKeys(a, b) {\n  if (a === \"homeassistant\") {\n    return -1;\n  }\n  if (b === \"homeassistant\") {\n    return 1;\n  }\n  if (a < b) {\n    return -1;\n  }\n  if (b < a) {\n    return 1;\n  }\n  return 0;\n};\nexport var UNSUPPORTED_REASON_URL = {};\nexport var UNHEALTHY_REASON_URL = {\n  privileged: \"/more-info/unsupported/privileged\"\n};\nvar DialogSystemInformation = _decorate([customElement(\"dialog-system-information\")], function (_initialize, _LitElement) {\n  var DialogSystemInformation = /*#__PURE__*/function (_LitElement2) {\n    _inherits(DialogSystemInformation, _LitElement2);\n    function DialogSystemInformation() {\n      var _this;\n      _classCallCheck(this, DialogSystemInformation);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _callSuper(this, DialogSystemInformation, [].concat(args));\n      _initialize(_assertThisInitialized(_this));\n      return _this;\n    }\n    return _createClass(DialogSystemInformation);\n  }(_LitElement);\n  return {\n    F: DialogSystemInformation,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_systemInfo\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_resolutionInfo\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_supervisorStats\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_coreStats\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_opened\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_systemHealthSubscription\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_hassIOSubscription\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"showDialog\",\n      value: function showDialog() {\n        this._opened = true;\n        this.hass.loadBackendTranslation(\"system_health\");\n        this._subscribe();\n      }\n    }, {\n      kind: \"method\",\n      key: \"closeDialog\",\n      value: function closeDialog() {\n        this._opened = false;\n        this._unsubscribe();\n        fireEvent(this, \"dialog-closed\", {\n          dialog: this.localName\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_subscribe\",\n      value: function _subscribe() {\n        var _this2 = this;\n        if (isComponentLoaded(this.hass, \"system_health\")) {\n          this._systemHealthSubscription = subscribeSystemHealthInfo(this.hass, function (info) {\n            if (!info) {\n              _this2._systemHealthSubscription = undefined;\n            } else {\n              _this2._systemInfo = info;\n            }\n          });\n        }\n        if (isComponentLoaded(this.hass, \"hassio\")) {\n          this._hassIOSubscription = subscribePollingCollection(this.hass, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n            return _regeneratorRuntime().wrap(function _callee$(_context) {\n              while (1) switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return fetchHassioStats(_this2.hass, \"supervisor\");\n                case 2:\n                  _this2._supervisorStats = _context.sent;\n                  _context.next = 5;\n                  return fetchHassioStats(_this2.hass, \"core\");\n                case 5:\n                  _this2._coreStats = _context.sent;\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }, _callee);\n          })), 10000);\n          fetchHassioResolution(this.hass).then(function (data) {\n            _this2._resolutionInfo = data;\n          });\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_unsubscribe\",\n      value: function _unsubscribe() {\n        var _this$_systemHealthSu, _this$_hassIOSubscrip;\n        (_this$_systemHealthSu = this._systemHealthSubscription) === null || _this$_systemHealthSu === void 0 || _this$_systemHealthSu.then(function (unsubFunc) {\n          return unsubFunc();\n        });\n        this._systemHealthSubscription = undefined;\n        (_this$_hassIOSubscrip = this._hassIOSubscription) === null || _this$_hassIOSubscrip === void 0 || _this$_hassIOSubscrip.call(this);\n        this._hassIOSubscription = undefined;\n        this._systemInfo = undefined;\n        this._resolutionInfo = undefined;\n        this._coreStats = undefined;\n        this._supervisorStats = undefined;\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (!this._opened) {\n          return nothing;\n        }\n        var sections = this._getSections();\n        return html(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      <ha-dialog\\n        open\\n        @closed=\", \"\\n        scrimClickAction\\n        escapeKeyAction\\n        .heading=\", \"\\n      >\\n        <div>\\n          \", \"\\n\\n          <div>\", \"</div>\\n\\n          \", \"\\n        </div>\\n        <mwc-button\\n          slot=\\\"primaryAction\\\"\\n          .label=\", \"\\n          @click=\", \"\\n        ></mwc-button>\\n      </ha-dialog>\\n    \"])), this.closeDialog, createCloseHeading(this.hass, this.hass.localize(\"ui.panel.config.repairs.system_information\")), this._resolutionInfo ? html(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\", \"\\n              \", \" \"])), this._resolutionInfo.unhealthy.length ? html(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"<ha-alert alert-type=\\\"error\\\">\\n                    \", \"\\n                    <mwc-button\\n                      slot=\\\"action\\\"\\n                      .label=\", \"\\n                      @click=\", \"\\n                    >\\n                    </mwc-button\\n                  ></ha-alert>\"])), this.hass.localize(\"ui.dialogs.unhealthy.title\"), this.hass.localize(\"ui.panel.config.common.learn_more\"), this._unhealthyDialog) : \"\", this._resolutionInfo.unsupported.length ? html(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"<ha-alert alert-type=\\\"warning\\\">\\n                    \", \"\\n                    <mwc-button\\n                      slot=\\\"action\\\"\\n                      .label=\", \"\\n                      @click=\", \"\\n                    >\\n                    </mwc-button>\\n                  </ha-alert>\"])), this.hass.localize(\"ui.dialogs.unsupported.title\"), this.hass.localize(\"ui.panel.config.common.learn_more\"), this._unsupportedDialog) : \"\") : \"\", sections, !this._coreStats && !this._supervisorStats ? \"\" : html(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n                <div>\\n                  \", \"\\n                  \", \"\\n                </div>\\n              \"])), this._coreStats ? html(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n                        <h3>\\n                          \", \"\\n                        </h3>\\n                        <ha-metric\\n                          .heading=\", \"\\n                          .value=\", \"\\n                        ></ha-metric>\\n                        <ha-metric\\n                          .heading=\", \"\\n                          .value=\", \"\\n                        ></ha-metric>\\n                      \"])), this.hass.localize(\"ui.panel.config.system_health.core_stats\"), this.hass.localize(\"ui.panel.config.system_health.cpu_usage\"), this._coreStats.cpu_percent, this.hass.localize(\"ui.panel.config.system_health.ram_usage\"), this._coreStats.memory_percent) : \"\", this._supervisorStats ? html(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\\n                        <h3>\\n                          \", \"\\n                        </h3>\\n                        <ha-metric\\n                          .heading=\", \"\\n                          .value=\", \"\\n                        ></ha-metric>\\n                        <ha-metric\\n                          .heading=\", \"\\n                          .value=\", \"\\n                        ></ha-metric>\\n                      \"])), this.hass.localize(\"ui.panel.config.system_health.supervisor_stats\"), this.hass.localize(\"ui.panel.config.system_health.cpu_usage\"), this._supervisorStats.cpu_percent, this.hass.localize(\"ui.panel.config.system_health.ram_usage\"), this._supervisorStats.memory_percent) : \"\"), this.hass.localize(\"ui.panel.config.repairs.copy\"), this._copyInfo);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_unsupportedDialog\",\n      value: function () {\n        var _unsupportedDialog2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n          var _this3 = this;\n          return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n            while (1) switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return showAlertDialog(this, {\n                  title: this.hass.localize(\"ui.dialogs.unsupported.title\"),\n                  text: html(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\", \"\\n        <br /><br />\\n        <ul>\\n          \", \"\\n        </ul>\"])), this.hass.localize(\"ui.dialogs.unsupported.description\"), this._resolutionInfo.unsupported.map(function (reason) {\n                    return html(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"\\n              <li>\\n                <a\\n                  href=\", \"\\n                  target=\\\"_blank\\\"\\n                  rel=\\\"noreferrer\\\"\\n                >\\n                  \", \"\\n                </a>\\n              </li>\\n            \"])), documentationUrl(_this3.hass, UNSUPPORTED_REASON_URL[reason] || \"/more-info/unsupported/\".concat(reason)), _this3.hass.localize(\"ui.dialogs.unsupported.reason.\".concat(reason)) || reason);\n                  }))\n                });\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }, _callee2, this);\n        }));\n        function _unsupportedDialog() {\n          return _unsupportedDialog2.apply(this, arguments);\n        }\n        return _unsupportedDialog;\n      }()\n    }, {\n      kind: \"method\",\n      key: \"_unhealthyDialog\",\n      value: function () {\n        var _unhealthyDialog2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n          var _this4 = this;\n          return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n            while (1) switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return showAlertDialog(this, {\n                  title: this.hass.localize(\"ui.dialogs.unhealthy.title\"),\n                  text: html(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"\", \"\\n        <br /><br />\\n        <ul>\\n          \", \"\\n        </ul>\"])), this.hass.localize(\"ui.dialogs.unhealthy.description\"), this._resolutionInfo.unhealthy.map(function (reason) {\n                    return html(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\"\\n              <li>\\n                <a\\n                  href=\", \"\\n                  target=\\\"_blank\\\"\\n                  rel=\\\"noreferrer\\\"\\n                >\\n                  \", \"\\n                </a>\\n              </li>\\n            \"])), documentationUrl(_this4.hass, UNHEALTHY_REASON_URL[reason] || \"/more-info/unhealthy/\".concat(reason)), _this4.hass.localize(\"ui.dialogs.unhealthy.reason.\".concat(reason)) || reason);\n                  }))\n                });\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }, _callee3, this);\n        }));\n        function _unhealthyDialog() {\n          return _unhealthyDialog2.apply(this, arguments);\n        }\n        return _unhealthyDialog;\n      }()\n    }, {\n      kind: \"method\",\n      key: \"_getSections\",\n      value: function _getSections() {\n        var sections = [];\n        if (!this._systemInfo) {\n          sections.push(html(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"\\n        <div class=\\\"loading-container\\\">\\n          <ha-circular-progress indeterminate></ha-circular-progress>\\n        </div>\\n      \"]))));\n        } else {\n          var domains = Object.keys(this._systemInfo).sort(sortKeys);\n          var _iterator = _createForOfIteratorHelper(domains),\n            _step;\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var domain = _step.value;\n              var domainInfo = this._systemInfo[domain];\n              var keys = [];\n              for (var _i = 0, _Object$keys = Object.keys(domainInfo.info); _i < _Object$keys.length; _i++) {\n                var key = _Object$keys[_i];\n                var value = void 0;\n                if (domainInfo.info[key] && _typeof(domainInfo.info[key]) === \"object\") {\n                  var info = domainInfo.info[key];\n                  if (info.type === \"pending\") {\n                    value = html(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([\"\\n                <ha-circular-progress\\n                  indeterminate\\n                  size=\\\"small\\\"\\n                ></ha-circular-progress>\\n              \"])));\n                  } else if (info.type === \"failed\") {\n                    value = html(_templateObject14 || (_templateObject14 = _taggedTemplateLiteral([\"\\n                <span class=\\\"error\\\">\", \"</span>\", \"\\n              \"])), info.error, !info.more_info ? \"\" : html(_templateObject15 || (_templateObject15 = _taggedTemplateLiteral([\"\\n                      \\u2013\\n                      <a\\n                        href=\", \"\\n                        target=\\\"_blank\\\"\\n                        rel=\\\"noreferrer noopener\\\"\\n                      >\\n                        \", \"\\n                      </a>\\n                    \"])), info.more_info, this.hass.localize(\"ui.panel.config.info.system_health.more_info\")));\n                  } else if (info.type === \"date\") {\n                    value = formatDateTime(new Date(info.value), this.hass.locale, this.hass.config);\n                  }\n                } else {\n                  value = domainInfo.info[key];\n                }\n                keys.push(html(_templateObject16 || (_templateObject16 = _taggedTemplateLiteral([\"\\n            <tr>\\n              <td>\\n                \", \"\\n              </td>\\n              <td>\", \"</td>\\n            </tr>\\n          \"])), this.hass.localize(\"component.\".concat(domain, \".system_health.info.\").concat(key)) || key, value));\n              }\n              if (domain !== \"homeassistant\") {\n                sections.push(html(_templateObject17 || (_templateObject17 = _taggedTemplateLiteral([\"\\n            <div class=\\\"card-header\\\">\\n              <h3>\", \"</h3>\\n              \", \"\\n            </div>\\n          \"])), domainToName(this.hass.localize, domain), !domainInfo.manage_url ? \"\" : html(_templateObject18 || (_templateObject18 = _taggedTemplateLiteral([\"\\n                    <a class=\\\"manage\\\" href=\", \">\\n                      <mwc-button>\\n                        \", \"\\n                      </mwc-button>\\n                    </a>\\n                  \"])), domainInfo.manage_url, this.hass.localize(\"ui.panel.config.info.system_health.manage\"))));\n              }\n              sections.push(html(_templateObject19 || (_templateObject19 = _taggedTemplateLiteral([\"\\n          <table>\\n            \", \"\\n          </table>\\n        \"])), keys));\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n        }\n        return sections;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_copyInfo\",\n      value: function () {\n        var _copyInfo2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n          var haContent, domainParts, _iterator2, _step2, domain, domainInfo, first, parts, _i2, _Object$keys2, key, value, info;\n          return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n            while (1) switch (_context4.prev = _context4.next) {\n              case 0:\n                domainParts = [];\n                _iterator2 = _createForOfIteratorHelper(Object.keys(this._systemInfo).sort(sortKeys));\n                try {\n                  for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                    domain = _step2.value;\n                    domainInfo = this._systemInfo[domain];\n                    first = true;\n                    parts = [\"\".concat(domain !== \"homeassistant\" ? \"<details><summary>\".concat(domainToName(this.hass.localize, domain), \"</summary>\\n\") : \"\")];\n                    for (_i2 = 0, _Object$keys2 = Object.keys(domainInfo.info); _i2 < _Object$keys2.length; _i2++) {\n                      key = _Object$keys2[_i2];\n                      value = void 0;\n                      if (domainInfo.info[key] && _typeof(domainInfo.info[key]) === \"object\") {\n                        info = domainInfo.info[key];\n                        if (info.type === \"pending\") {\n                          value = \"pending\";\n                        } else if (info.type === \"failed\") {\n                          value = \"failed to load: \".concat(info.error);\n                        } else if (info.type === \"date\") {\n                          value = formatDateTime(new Date(info.value), this.hass.locale, this.hass.config);\n                        }\n                      } else {\n                        value = domainInfo.info[key];\n                      }\n                      if (first) {\n                        parts.push(\"\".concat(key, \" | \").concat(value, \"\\n-- | --\"));\n                        first = false;\n                      } else {\n                        parts.push(\"\".concat(key, \" | \").concat(value));\n                      }\n                    }\n                    if (domain === \"homeassistant\") {\n                      haContent = parts.join(\"\\n\");\n                    } else {\n                      domainParts.push(parts.join(\"\\n\"));\n                      if (domain !== \"homeassistant\") {\n                        domainParts.push(\"</details>\");\n                      }\n                    }\n                  }\n                } catch (err) {\n                  _iterator2.e(err);\n                } finally {\n                  _iterator2.f();\n                }\n                _context4.next = 5;\n                return copyToClipboard(\"## \".concat(\"System Information\\n\", haContent, \"\\n\\n\").concat(domainParts.join(\"\\n\\n\")));\n              case 5:\n                showToast(this, {\n                  message: this.hass.localize(\"ui.common.copied_clipboard\")\n                });\n              case 6:\n              case \"end\":\n                return _context4.stop();\n            }\n          }, _callee4, this);\n        }));\n        function _copyInfo() {\n          return _copyInfo2.apply(this, arguments);\n        }\n        return _copyInfo;\n      }()\n    }, {\n      kind: \"field\",\n      static: true,\n      key: \"styles\",\n      value: function value() {\n        return [haStyleDialog, css(_templateObject20 || (_templateObject20 = _taggedTemplateLiteral([\"\\n      ha-alert {\\n        margin-bottom: 16px;\\n        display: block;\\n      }\\n      table {\\n        width: 100%;\\n      }\\n\\n      td:first-child {\\n        width: 45%;\\n      }\\n\\n      td:last-child {\\n        direction: ltr;\\n      }\\n\\n      .loading-container {\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n      }\\n\\n      .card-header {\\n        justify-content: space-between;\\n        display: flex;\\n        align-items: center;\\n      }\\n\\n      .error {\\n        color: var(--error-color);\\n      }\\n\\n      a.manage {\\n        text-decoration: none;\\n      }\\n    \"])))];\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["css","html","LitElement","nothing","customElement","property","state","isComponentLoaded","formatDateTime","fireEvent","copyToClipboard","subscribePollingCollection","createCloseHeading","fetchHassioStats","fetchHassioResolution","domainToName","subscribeSystemHealthInfo","showAlertDialog","haStyleDialog","documentationUrl","showToast","sortKeys","a","b","UNSUPPORTED_REASON_URL","UNHEALTHY_REASON_URL","privileged","DialogSystemInformation","_decorate","_initialize","_LitElement","_LitElement2","_inherits","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","_assertThisInitialized","_createClass","F","d","kind","decorators","attribute","key","value","showDialog","_opened","hass","loadBackendTranslation","_subscribe","closeDialog","_unsubscribe","dialog","localName","_this2","_systemHealthSubscription","info","undefined","_systemInfo","_hassIOSubscription","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","_supervisorStats","sent","_coreStats","stop","then","data","_resolutionInfo","_this$_systemHealthSu","_this$_hassIOSubscrip","unsubFunc","call","render","sections","_getSections","_templateObject","_taggedTemplateLiteral","localize","_templateObject2","unhealthy","_templateObject3","_unhealthyDialog","unsupported","_templateObject4","_unsupportedDialog","_templateObject5","_templateObject6","cpu_percent","memory_percent","_templateObject7","_copyInfo","_unsupportedDialog2","_callee2","_this3","_callee2$","_context2","title","text","_templateObject8","map","reason","_templateObject9","apply","_unhealthyDialog2","_callee3","_this4","_callee3$","_context3","_templateObject10","_templateObject11","push","_templateObject12","domains","Object","keys","sort","_iterator","_createForOfIteratorHelper","_step","s","n","done","domain","domainInfo","_i","_Object$keys","_typeof","type","_templateObject13","_templateObject14","error","more_info","_templateObject15","Date","locale","config","_templateObject16","_templateObject17","manage_url","_templateObject18","_templateObject19","err","e","f","_copyInfo2","_callee4","haContent","domainParts","_iterator2","_step2","first","parts","_i2","_Object$keys2","_callee4$","_context4","join","message","static","_templateObject20"],"sources":["/Users/sercanardil/Desktop/frontend/src/panels/config/repairs/dialog-system-information.ts"],"sourcesContent":["import \"@material/mwc-button/mwc-button\";\nimport { UnsubscribeFunc } from \"home-assistant-js-websocket\";\nimport {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  TemplateResult,\n  nothing,\n} from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { isComponentLoaded } from \"../../../common/config/is_component_loaded\";\nimport { formatDateTime } from \"../../../common/datetime/format_date_time\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { copyToClipboard } from \"../../../common/util/copy-clipboard\";\nimport { subscribePollingCollection } from \"../../../common/util/subscribe-polling\";\nimport \"../../../components/ha-alert\";\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-circular-progress\";\nimport { createCloseHeading } from \"../../../components/ha-dialog\";\nimport \"../../../components/ha-metric\";\nimport { fetchHassioStats, HassioStats } from \"../../../data/hassio/common\";\nimport {\n  fetchHassioResolution,\n  HassioResolution,\n} from \"../../../data/hassio/resolution\";\nimport { domainToName } from \"../../../data/integration\";\nimport {\n  subscribeSystemHealthInfo,\n  SystemCheckValueObject,\n  SystemHealthInfo,\n} from \"../../../data/system_health\";\nimport { showAlertDialog } from \"../../../dialogs/generic/show-dialog-box\";\nimport { haStyleDialog } from \"../../../resources/styles\";\nimport type { HomeAssistant } from \"../../../types\";\nimport { documentationUrl } from \"../../../util/documentation-url\";\nimport { showToast } from \"../../../util/toast\";\n\nconst sortKeys = (a: string, b: string) => {\n  if (a === \"homeassistant\") {\n    return -1;\n  }\n  if (b === \"homeassistant\") {\n    return 1;\n  }\n  if (a < b) {\n    return -1;\n  }\n  if (b < a) {\n    return 1;\n  }\n  return 0;\n};\n\nexport const UNSUPPORTED_REASON_URL = {};\nexport const UNHEALTHY_REASON_URL = {\n  privileged: \"/more-info/unsupported/privileged\",\n};\n\n@customElement(\"dialog-system-information\")\nclass DialogSystemInformation extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @state() private _systemInfo?: SystemHealthInfo;\n\n  @state() private _resolutionInfo?: HassioResolution;\n\n  @state() private _supervisorStats?: HassioStats;\n\n  @state() private _coreStats?: HassioStats;\n\n  @state() private _opened = false;\n\n  private _systemHealthSubscription?: Promise<UnsubscribeFunc>;\n\n  private _hassIOSubscription?: UnsubscribeFunc;\n\n  public showDialog(): void {\n    this._opened = true;\n    this.hass!.loadBackendTranslation(\"system_health\");\n    this._subscribe();\n  }\n\n  public closeDialog() {\n    this._opened = false;\n    this._unsubscribe();\n    fireEvent(this, \"dialog-closed\", { dialog: this.localName });\n  }\n\n  private _subscribe(): void {\n    if (isComponentLoaded(this.hass, \"system_health\")) {\n      this._systemHealthSubscription = subscribeSystemHealthInfo(\n        this.hass,\n        (info) => {\n          if (!info) {\n            this._systemHealthSubscription = undefined;\n          } else {\n            this._systemInfo = info;\n          }\n        }\n      );\n    }\n\n    if (isComponentLoaded(this.hass, \"hassio\")) {\n      this._hassIOSubscription = subscribePollingCollection(\n        this.hass,\n        async () => {\n          this._supervisorStats = await fetchHassioStats(\n            this.hass,\n            \"supervisor\"\n          );\n          this._coreStats = await fetchHassioStats(this.hass, \"core\");\n        },\n        10000\n      );\n\n      fetchHassioResolution(this.hass).then((data) => {\n        this._resolutionInfo = data;\n      });\n    }\n  }\n\n  private _unsubscribe() {\n    this._systemHealthSubscription?.then((unsubFunc) => unsubFunc());\n    this._systemHealthSubscription = undefined;\n    this._hassIOSubscription?.();\n    this._hassIOSubscription = undefined;\n\n    this._systemInfo = undefined;\n    this._resolutionInfo = undefined;\n    this._coreStats = undefined;\n    this._supervisorStats = undefined;\n  }\n\n  protected render() {\n    if (!this._opened) {\n      return nothing;\n    }\n\n    const sections = this._getSections();\n\n    return html`\n      <ha-dialog\n        open\n        @closed=${this.closeDialog}\n        scrimClickAction\n        escapeKeyAction\n        .heading=${createCloseHeading(\n          this.hass,\n          this.hass.localize(\"ui.panel.config.repairs.system_information\")\n        )}\n      >\n        <div>\n          ${this._resolutionInfo\n            ? html`${this._resolutionInfo.unhealthy.length\n                ? html`<ha-alert alert-type=\"error\">\n                    ${this.hass.localize(\"ui.dialogs.unhealthy.title\")}\n                    <mwc-button\n                      slot=\"action\"\n                      .label=${this.hass.localize(\n                        \"ui.panel.config.common.learn_more\"\n                      )}\n                      @click=${this._unhealthyDialog}\n                    >\n                    </mwc-button\n                  ></ha-alert>`\n                : \"\"}\n              ${this._resolutionInfo.unsupported.length\n                ? html`<ha-alert alert-type=\"warning\">\n                    ${this.hass.localize(\"ui.dialogs.unsupported.title\")}\n                    <mwc-button\n                      slot=\"action\"\n                      .label=${this.hass.localize(\n                        \"ui.panel.config.common.learn_more\"\n                      )}\n                      @click=${this._unsupportedDialog}\n                    >\n                    </mwc-button>\n                  </ha-alert>`\n                : \"\"} `\n            : \"\"}\n\n          <div>${sections}</div>\n\n          ${!this._coreStats && !this._supervisorStats\n            ? \"\"\n            : html`\n                <div>\n                  ${this._coreStats\n                    ? html`\n                        <h3>\n                          ${this.hass.localize(\n                            \"ui.panel.config.system_health.core_stats\"\n                          )}\n                        </h3>\n                        <ha-metric\n                          .heading=${this.hass.localize(\n                            \"ui.panel.config.system_health.cpu_usage\"\n                          )}\n                          .value=${this._coreStats.cpu_percent}\n                        ></ha-metric>\n                        <ha-metric\n                          .heading=${this.hass.localize(\n                            \"ui.panel.config.system_health.ram_usage\"\n                          )}\n                          .value=${this._coreStats.memory_percent}\n                        ></ha-metric>\n                      `\n                    : \"\"}\n                  ${this._supervisorStats\n                    ? html`\n                        <h3>\n                          ${this.hass.localize(\n                            \"ui.panel.config.system_health.supervisor_stats\"\n                          )}\n                        </h3>\n                        <ha-metric\n                          .heading=${this.hass.localize(\n                            \"ui.panel.config.system_health.cpu_usage\"\n                          )}\n                          .value=${this._supervisorStats.cpu_percent}\n                        ></ha-metric>\n                        <ha-metric\n                          .heading=${this.hass.localize(\n                            \"ui.panel.config.system_health.ram_usage\"\n                          )}\n                          .value=${this._supervisorStats.memory_percent}\n                        ></ha-metric>\n                      `\n                    : \"\"}\n                </div>\n              `}\n        </div>\n        <mwc-button\n          slot=\"primaryAction\"\n          .label=${this.hass.localize(\"ui.panel.config.repairs.copy\")}\n          @click=${this._copyInfo}\n        ></mwc-button>\n      </ha-dialog>\n    `;\n  }\n\n  private async _unsupportedDialog(): Promise<void> {\n    await showAlertDialog(this, {\n      title: this.hass.localize(\"ui.dialogs.unsupported.title\"),\n      text: html`${this.hass.localize(\"ui.dialogs.unsupported.description\")}\n        <br /><br />\n        <ul>\n          ${this._resolutionInfo!.unsupported.map(\n            (reason) => html`\n              <li>\n                <a\n                  href=${documentationUrl(\n                    this.hass,\n                    UNSUPPORTED_REASON_URL[reason] ||\n                      `/more-info/unsupported/${reason}`\n                  )}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                >\n                  ${this.hass.localize(\n                    `ui.dialogs.unsupported.reason.${reason}`\n                  ) || reason}\n                </a>\n              </li>\n            `\n          )}\n        </ul>`,\n    });\n  }\n\n  private async _unhealthyDialog(): Promise<void> {\n    await showAlertDialog(this, {\n      title: this.hass.localize(\"ui.dialogs.unhealthy.title\"),\n      text: html`${this.hass.localize(\"ui.dialogs.unhealthy.description\")}\n        <br /><br />\n        <ul>\n          ${this._resolutionInfo!.unhealthy.map(\n            (reason) => html`\n              <li>\n                <a\n                  href=${documentationUrl(\n                    this.hass,\n                    UNHEALTHY_REASON_URL[reason] ||\n                      `/more-info/unhealthy/${reason}`\n                  )}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                >\n                  ${this.hass.localize(\n                    `ui.dialogs.unhealthy.reason.${reason}`\n                  ) || reason}\n                </a>\n              </li>\n            `\n          )}\n        </ul>`,\n    });\n  }\n\n  private _getSections(): TemplateResult[] {\n    const sections: TemplateResult[] = [];\n\n    if (!this._systemInfo) {\n      sections.push(html`\n        <div class=\"loading-container\">\n          <ha-circular-progress indeterminate></ha-circular-progress>\n        </div>\n      `);\n    } else {\n      const domains = Object.keys(this._systemInfo).sort(sortKeys);\n      for (const domain of domains) {\n        const domainInfo = this._systemInfo[domain];\n        const keys: TemplateResult[] = [];\n\n        for (const key of Object.keys(domainInfo.info)) {\n          let value: unknown;\n\n          if (\n            domainInfo.info[key] &&\n            typeof domainInfo.info[key] === \"object\"\n          ) {\n            const info = domainInfo.info[key] as SystemCheckValueObject;\n\n            if (info.type === \"pending\") {\n              value = html`\n                <ha-circular-progress\n                  indeterminate\n                  size=\"small\"\n                ></ha-circular-progress>\n              `;\n            } else if (info.type === \"failed\") {\n              value = html`\n                <span class=\"error\">${info.error}</span>${!info.more_info\n                  ? \"\"\n                  : html`\n                      –\n                      <a\n                        href=${info.more_info}\n                        target=\"_blank\"\n                        rel=\"noreferrer noopener\"\n                      >\n                        ${this.hass.localize(\n                          \"ui.panel.config.info.system_health.more_info\"\n                        )}\n                      </a>\n                    `}\n              `;\n            } else if (info.type === \"date\") {\n              value = formatDateTime(\n                new Date(info.value),\n                this.hass.locale,\n                this.hass.config\n              );\n            }\n          } else {\n            value = domainInfo.info[key];\n          }\n\n          keys.push(html`\n            <tr>\n              <td>\n                ${this.hass.localize(\n                  `component.${domain}.system_health.info.${key}`\n                ) || key}\n              </td>\n              <td>${value}</td>\n            </tr>\n          `);\n        }\n        if (domain !== \"homeassistant\") {\n          sections.push(html`\n            <div class=\"card-header\">\n              <h3>${domainToName(this.hass.localize, domain)}</h3>\n              ${!domainInfo.manage_url\n                ? \"\"\n                : html`\n                    <a class=\"manage\" href=${domainInfo.manage_url}>\n                      <mwc-button>\n                        ${this.hass.localize(\n                          \"ui.panel.config.info.system_health.manage\"\n                        )}\n                      </mwc-button>\n                    </a>\n                  `}\n            </div>\n          `);\n        }\n        sections.push(html`\n          <table>\n            ${keys}\n          </table>\n        `);\n      }\n    }\n    return sections;\n  }\n\n  private async _copyInfo(): Promise<void> {\n    let haContent: string | undefined;\n    const domainParts: string[] = [];\n\n    for (const domain of Object.keys(this._systemInfo!).sort(sortKeys)) {\n      const domainInfo = this._systemInfo![domain];\n      let first = true;\n      const parts = [\n        `${\n          domain !== \"homeassistant\"\n            ? `<details><summary>${domainToName(\n                this.hass.localize,\n                domain\n              )}</summary>\\n`\n            : \"\"\n        }`,\n      ];\n\n      for (const key of Object.keys(domainInfo.info)) {\n        let value: unknown;\n\n        if (domainInfo.info[key] && typeof domainInfo.info[key] === \"object\") {\n          const info = domainInfo.info[key] as SystemCheckValueObject;\n\n          if (info.type === \"pending\") {\n            value = \"pending\";\n          } else if (info.type === \"failed\") {\n            value = `failed to load: ${info.error}`;\n          } else if (info.type === \"date\") {\n            value = formatDateTime(\n              new Date(info.value),\n              this.hass.locale,\n              this.hass.config\n            );\n          }\n        } else {\n          value = domainInfo.info[key];\n        }\n        if (first) {\n          parts.push(`${key} | ${value}\\n-- | --`);\n          first = false;\n        } else {\n          parts.push(`${key} | ${value}`);\n        }\n      }\n\n      if (domain === \"homeassistant\") {\n        haContent = parts.join(\"\\n\");\n      } else {\n        domainParts.push(parts.join(\"\\n\"));\n        if (domain !== \"homeassistant\") {\n          domainParts.push(\"</details>\");\n        }\n      }\n    }\n\n    await copyToClipboard(\n      `${\"## \"}System Information\\n${haContent}\\n\\n${domainParts.join(\"\\n\\n\")}`\n    );\n\n    showToast(this, {\n      message: this.hass.localize(\"ui.common.copied_clipboard\"),\n    });\n  }\n\n  static styles: CSSResultGroup = [\n    haStyleDialog,\n    css`\n      ha-alert {\n        margin-bottom: 16px;\n        display: block;\n      }\n      table {\n        width: 100%;\n      }\n\n      td:first-child {\n        width: 45%;\n      }\n\n      td:last-child {\n        direction: ltr;\n      }\n\n      .loading-container {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      .card-header {\n        justify-content: space-between;\n        display: flex;\n        align-items: center;\n      }\n\n      .error {\n        color: var(--error-color);\n      }\n\n      a.manage {\n        text-decoration: none;\n      }\n    `,\n  ];\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"dialog-system-information\": DialogSystemInformation;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}