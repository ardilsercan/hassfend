{"ast":null,"code":"/** Return an color representing a state. */\n\nimport { UNAVAILABLE } from \"../../data/entity\";\nimport { computeGroupDomain } from \"../../data/group\";\nimport { computeCssVariable } from \"../../resources/css-variables\";\nimport { slugify } from \"../string/slugify\";\nimport { batteryStateColorProperty } from \"./color/battery_color\";\nimport { computeDomain } from \"./compute_domain\";\nimport { stateActive } from \"./state_active\";\nconst STATE_COLORED_DOMAIN = new Set([\"alarm_control_panel\", \"alert\", \"automation\", \"binary_sensor\", \"calendar\", \"camera\", \"climate\", \"cover\", \"device_tracker\", \"fan\", \"group\", \"humidifier\", \"input_boolean\", \"lawn_mower\", \"light\", \"lock\", \"media_player\", \"person\", \"plant\", \"remote\", \"schedule\", \"script\", \"siren\", \"sun\", \"switch\", \"timer\", \"update\", \"vacuum\", \"valve\", \"water_heater\"]);\nexport const stateColorCss = (stateObj, state) => {\n  const compareState = state !== undefined ? state : stateObj === null || stateObj === void 0 ? void 0 : stateObj.state;\n  if (compareState === UNAVAILABLE) {\n    return `var(--state-unavailable-color)`;\n  }\n  const properties = stateColorProperties(stateObj, state);\n  if (properties) {\n    return computeCssVariable(properties);\n  }\n  return undefined;\n};\nexport const domainStateColorProperties = (domain, stateObj, state) => {\n  const compareState = state !== undefined ? state : stateObj.state;\n  const active = stateActive(stateObj, state);\n  const properties = [];\n  const stateKey = slugify(compareState, \"_\");\n  const activeKey = active ? \"active\" : \"inactive\";\n  const dc = stateObj.attributes.device_class;\n  if (dc) {\n    properties.push(`--state-${domain}-${dc}-${stateKey}-color`);\n  }\n  properties.push(`--state-${domain}-${stateKey}-color`, `--state-${domain}-${activeKey}-color`, `--state-${activeKey}-color`);\n  return properties;\n};\nexport const stateColorProperties = (stateObj, state) => {\n  const compareState = state !== undefined ? state : stateObj === null || stateObj === void 0 ? void 0 : stateObj.state;\n  const domain = computeDomain(stateObj.entity_id);\n  const dc = stateObj.attributes.device_class;\n\n  // Special rules for battery coloring\n  if (domain === \"sensor\" && dc === \"battery\") {\n    const property = batteryStateColorProperty(compareState);\n    if (property) {\n      return [property];\n    }\n  }\n\n  // Special rules for group coloring\n  if (domain === \"group\") {\n    const groupDomain = computeGroupDomain(stateObj);\n    if (groupDomain && STATE_COLORED_DOMAIN.has(groupDomain)) {\n      return domainStateColorProperties(groupDomain, stateObj, state);\n    }\n  }\n  if (STATE_COLORED_DOMAIN.has(domain)) {\n    return domainStateColorProperties(domain, stateObj, state);\n  }\n  return undefined;\n};\nexport const stateColorBrightness = stateObj => {\n  if (stateObj.attributes.brightness && computeDomain(stateObj.entity_id) !== \"plant\") {\n    // lowest brightness will be around 50% (that's pretty dark)\n    const brightness = stateObj.attributes.brightness;\n    return `brightness(${(brightness + 245) / 5}%)`;\n  }\n  return \"\";\n};","map":{"version":3,"names":["UNAVAILABLE","computeGroupDomain","computeCssVariable","slugify","batteryStateColorProperty","computeDomain","stateActive","STATE_COLORED_DOMAIN","Set","stateColorCss","stateObj","state","compareState","undefined","properties","stateColorProperties","domainStateColorProperties","domain","active","stateKey","activeKey","dc","attributes","device_class","push","entity_id","property","groupDomain","has","stateColorBrightness","brightness"],"sources":["/Users/sercanardil/Desktop/frontend/src/common/entity/state_color.ts"],"sourcesContent":["/** Return an color representing a state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { UNAVAILABLE } from \"../../data/entity\";\nimport { computeGroupDomain, GroupEntity } from \"../../data/group\";\nimport { computeCssVariable } from \"../../resources/css-variables\";\nimport { slugify } from \"../string/slugify\";\nimport { batteryStateColorProperty } from \"./color/battery_color\";\nimport { computeDomain } from \"./compute_domain\";\nimport { stateActive } from \"./state_active\";\n\nconst STATE_COLORED_DOMAIN = new Set([\n  \"alarm_control_panel\",\n  \"alert\",\n  \"automation\",\n  \"binary_sensor\",\n  \"calendar\",\n  \"camera\",\n  \"climate\",\n  \"cover\",\n  \"device_tracker\",\n  \"fan\",\n  \"group\",\n  \"humidifier\",\n  \"input_boolean\",\n  \"lawn_mower\",\n  \"light\",\n  \"lock\",\n  \"media_player\",\n  \"person\",\n  \"plant\",\n  \"remote\",\n  \"schedule\",\n  \"script\",\n  \"siren\",\n  \"sun\",\n  \"switch\",\n  \"timer\",\n  \"update\",\n  \"vacuum\",\n  \"valve\",\n  \"water_heater\",\n]);\n\nexport const stateColorCss = (stateObj: HassEntity, state?: string) => {\n  const compareState = state !== undefined ? state : stateObj?.state;\n  if (compareState === UNAVAILABLE) {\n    return `var(--state-unavailable-color)`;\n  }\n\n  const properties = stateColorProperties(stateObj, state);\n  if (properties) {\n    return computeCssVariable(properties);\n  }\n\n  return undefined;\n};\n\nexport const domainStateColorProperties = (\n  domain: string,\n  stateObj: HassEntity,\n  state?: string\n): string[] => {\n  const compareState = state !== undefined ? state : stateObj.state;\n  const active = stateActive(stateObj, state);\n\n  const properties: string[] = [];\n\n  const stateKey = slugify(compareState, \"_\");\n  const activeKey = active ? \"active\" : \"inactive\";\n\n  const dc = stateObj.attributes.device_class;\n\n  if (dc) {\n    properties.push(`--state-${domain}-${dc}-${stateKey}-color`);\n  }\n\n  properties.push(\n    `--state-${domain}-${stateKey}-color`,\n    `--state-${domain}-${activeKey}-color`,\n    `--state-${activeKey}-color`\n  );\n\n  return properties;\n};\n\nexport const stateColorProperties = (\n  stateObj: HassEntity,\n  state?: string\n): string[] | undefined => {\n  const compareState = state !== undefined ? state : stateObj?.state;\n  const domain = computeDomain(stateObj.entity_id);\n  const dc = stateObj.attributes.device_class;\n\n  // Special rules for battery coloring\n  if (domain === \"sensor\" && dc === \"battery\") {\n    const property = batteryStateColorProperty(compareState);\n    if (property) {\n      return [property];\n    }\n  }\n\n  // Special rules for group coloring\n  if (domain === \"group\") {\n    const groupDomain = computeGroupDomain(stateObj as GroupEntity);\n    if (groupDomain && STATE_COLORED_DOMAIN.has(groupDomain)) {\n      return domainStateColorProperties(groupDomain, stateObj, state);\n    }\n  }\n\n  if (STATE_COLORED_DOMAIN.has(domain)) {\n    return domainStateColorProperties(domain, stateObj, state);\n  }\n\n  return undefined;\n};\n\nexport const stateColorBrightness = (stateObj: HassEntity): string => {\n  if (\n    stateObj.attributes.brightness &&\n    computeDomain(stateObj.entity_id) !== \"plant\"\n  ) {\n    // lowest brightness will be around 50% (that's pretty dark)\n    const brightness = stateObj.attributes.brightness;\n    return `brightness(${(brightness + 245) / 5}%)`;\n  }\n  return \"\";\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}