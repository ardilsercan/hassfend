{"ast":null,"code":"import _decorate from \"@babel/runtime/helpers/decorate\";\nimport { html, LitElement, nothing } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { isComponentLoaded } from \"../common/config/is_component_loaded\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { stringCompare } from \"../common/string/compare\";\nimport { fetchHassioAddonsInfo } from \"../data/hassio/addon\";\nimport \"./ha-alert\";\nimport \"./ha-combo-box\";\nimport \"./ha-list-item\";\nconst rowRenderer = item => html`<ha-list-item twoline graphic=\"icon\">\n    <span>${item.name}</span>\n    <span slot=\"secondary\">${item.slug}</span>\n    ${item.icon ? html`<img\n          alt=\"\"\n          slot=\"graphic\"\n          .src=\"/api/hassio/addons/${item.slug}/icon\"\n        />` : \"\"}\n  </ha-list-item>`;\nlet HaAddonPicker = _decorate([customElement(\"ha-addon-picker\")], function (_initialize, _LitElement) {\n  class HaAddonPicker extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: HaAddonPicker,\n    d: [{\n      kind: \"field\",\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"label\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"value\",\n      value() {\n        return \"\";\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"helper\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_addons\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"disabled\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"required\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [query(\"ha-combo-box\")],\n      key: \"_comboBox\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_error\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"open\",\n      value: function open() {\n        var _this$_comboBox;\n        (_this$_comboBox = this._comboBox) === null || _this$_comboBox === void 0 || _this$_comboBox.open();\n      }\n    }, {\n      kind: \"method\",\n      key: \"focus\",\n      value: function focus() {\n        var _this$_comboBox2;\n        (_this$_comboBox2 = this._comboBox) === null || _this$_comboBox2 === void 0 || _this$_comboBox2.focus();\n      }\n    }, {\n      kind: \"method\",\n      key: \"firstUpdated\",\n      value: function firstUpdated() {\n        this._getAddons();\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (this._error) {\n          return html`<ha-alert alert-type=\"error\">${this._error}</ha-alert>`;\n        }\n        if (!this._addons) {\n          return nothing;\n        }\n        return html`\n      <ha-combo-box\n        .hass=${this.hass}\n        .label=${this.label === undefined && this.hass ? this.hass.localize(\"ui.components.addon-picker.addon\") : this.label}\n        .value=${this._value}\n        .required=${this.required}\n        .disabled=${this.disabled}\n        .helper=${this.helper}\n        .renderer=${rowRenderer}\n        .items=${this._addons}\n        item-value-path=\"slug\"\n        item-id-path=\"slug\"\n        item-label-path=\"name\"\n        @value-changed=${this._addonChanged}\n      ></ha-combo-box>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getAddons\",\n      value: async function _getAddons() {\n        try {\n          if (isComponentLoaded(this.hass, \"hassio\")) {\n            const addonsInfo = await fetchHassioAddonsInfo(this.hass);\n            this._addons = addonsInfo.addons.filter(addon => addon.version).sort((a, b) => stringCompare(a.name, b.name, this.hass.locale.language));\n          } else {\n            this._error = this.hass.localize(\"ui.components.addon-picker.error.no_supervisor\");\n          }\n        } catch (err) {\n          this._error = this.hass.localize(\"ui.components.addon-picker.error.fetch_addons\");\n        }\n      }\n    }, {\n      kind: \"get\",\n      key: \"_value\",\n      value: function _value() {\n        return this.value || \"\";\n      }\n    }, {\n      kind: \"method\",\n      key: \"_addonChanged\",\n      value: function _addonChanged(ev) {\n        ev.stopPropagation();\n        const newValue = ev.detail.value;\n        if (newValue !== this._value) {\n          this._setValue(newValue);\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_setValue\",\n      value: function _setValue(value) {\n        this.value = value;\n        setTimeout(() => {\n          fireEvent(this, \"value-changed\", {\n            value\n          });\n          fireEvent(this, \"change\");\n        }, 0);\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["html","LitElement","nothing","customElement","property","query","state","isComponentLoaded","fireEvent","stringCompare","fetchHassioAddonsInfo","rowRenderer","item","name","slug","icon","HaAddonPicker","_decorate","_initialize","_LitElement","constructor","args","F","d","kind","key","value","decorators","type","Boolean","open","_this$_comboBox","_comboBox","focus","_this$_comboBox2","firstUpdated","_getAddons","render","_error","_addons","hass","label","undefined","localize","_value","required","disabled","helper","_addonChanged","addonsInfo","addons","filter","addon","version","sort","a","b","locale","language","err","ev","stopPropagation","newValue","detail","_setValue","setTimeout"],"sources":["/Users/sercanardil/Desktop/frontend/src/components/ha-addon-picker.ts"],"sourcesContent":["import { ComboBoxLitRenderer } from \"@vaadin/combo-box/lit\";\nimport { html, LitElement, nothing } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { isComponentLoaded } from \"../common/config/is_component_loaded\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { stringCompare } from \"../common/string/compare\";\nimport { fetchHassioAddonsInfo, HassioAddonInfo } from \"../data/hassio/addon\";\nimport { HomeAssistant, ValueChangedEvent } from \"../types\";\nimport \"./ha-alert\";\nimport \"./ha-combo-box\";\nimport type { HaComboBox } from \"./ha-combo-box\";\nimport \"./ha-list-item\";\n\nconst rowRenderer: ComboBoxLitRenderer<HassioAddonInfo> = (item) =>\n  html`<ha-list-item twoline graphic=\"icon\">\n    <span>${item.name}</span>\n    <span slot=\"secondary\">${item.slug}</span>\n    ${item.icon\n      ? html`<img\n          alt=\"\"\n          slot=\"graphic\"\n          .src=\"/api/hassio/addons/${item.slug}/icon\"\n        />`\n      : \"\"}\n  </ha-list-item>`;\n\n@customElement(\"ha-addon-picker\")\nclass HaAddonPicker extends LitElement {\n  public hass!: HomeAssistant;\n\n  @property() public label?: string;\n\n  @property() public value = \"\";\n\n  @property() public helper?: string;\n\n  @state() private _addons?: HassioAddonInfo[];\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = false;\n\n  @query(\"ha-combo-box\") private _comboBox!: HaComboBox;\n\n  @state() private _error?: string;\n\n  public open() {\n    this._comboBox?.open();\n  }\n\n  public focus() {\n    this._comboBox?.focus();\n  }\n\n  protected firstUpdated() {\n    this._getAddons();\n  }\n\n  protected render() {\n    if (this._error) {\n      return html`<ha-alert alert-type=\"error\">${this._error}</ha-alert>`;\n    }\n    if (!this._addons) {\n      return nothing;\n    }\n    return html`\n      <ha-combo-box\n        .hass=${this.hass}\n        .label=${this.label === undefined && this.hass\n          ? this.hass.localize(\"ui.components.addon-picker.addon\")\n          : this.label}\n        .value=${this._value}\n        .required=${this.required}\n        .disabled=${this.disabled}\n        .helper=${this.helper}\n        .renderer=${rowRenderer}\n        .items=${this._addons}\n        item-value-path=\"slug\"\n        item-id-path=\"slug\"\n        item-label-path=\"name\"\n        @value-changed=${this._addonChanged}\n      ></ha-combo-box>\n    `;\n  }\n\n  private async _getAddons() {\n    try {\n      if (isComponentLoaded(this.hass, \"hassio\")) {\n        const addonsInfo = await fetchHassioAddonsInfo(this.hass);\n        this._addons = addonsInfo.addons\n          .filter((addon) => addon.version)\n          .sort((a, b) =>\n            stringCompare(a.name, b.name, this.hass.locale.language)\n          );\n      } else {\n        this._error = this.hass.localize(\n          \"ui.components.addon-picker.error.no_supervisor\"\n        );\n      }\n    } catch (err: any) {\n      this._error = this.hass.localize(\n        \"ui.components.addon-picker.error.fetch_addons\"\n      );\n    }\n  }\n\n  private get _value() {\n    return this.value || \"\";\n  }\n\n  private _addonChanged(ev: ValueChangedEvent<string>) {\n    ev.stopPropagation();\n    const newValue = ev.detail.value;\n\n    if (newValue !== this._value) {\n      this._setValue(newValue);\n    }\n  }\n\n  private _setValue(value: string) {\n    this.value = value;\n    setTimeout(() => {\n      fireEvent(this, \"value-changed\", { value });\n      fireEvent(this, \"change\");\n    }, 0);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-addon-picker\": HaAddonPicker;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}