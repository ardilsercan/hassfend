{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/helpers/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport { computeDomain } from \"../common/entity/compute_domain\";\nimport { computeStateName } from \"../common/entity/compute_state_name\";\nimport { isUnavailableState } from \"./entity\";\nimport { stringCompare } from \"../common/string/compare\";\nexport var TodoItemStatus = /*#__PURE__*/function (TodoItemStatus) {\n  TodoItemStatus[\"NeedsAction\"] = \"needs_action\";\n  TodoItemStatus[\"Completed\"] = \"completed\";\n  return TodoItemStatus;\n}({});\nexport var TodoListEntityFeature = /*#__PURE__*/function (TodoListEntityFeature) {\n  TodoListEntityFeature[TodoListEntityFeature[\"CREATE_TODO_ITEM\"] = 1] = \"CREATE_TODO_ITEM\";\n  TodoListEntityFeature[TodoListEntityFeature[\"DELETE_TODO_ITEM\"] = 2] = \"DELETE_TODO_ITEM\";\n  TodoListEntityFeature[TodoListEntityFeature[\"UPDATE_TODO_ITEM\"] = 4] = \"UPDATE_TODO_ITEM\";\n  TodoListEntityFeature[TodoListEntityFeature[\"MOVE_TODO_ITEM\"] = 8] = \"MOVE_TODO_ITEM\";\n  TodoListEntityFeature[TodoListEntityFeature[\"SET_DUE_DATE_ON_ITEM\"] = 16] = \"SET_DUE_DATE_ON_ITEM\";\n  TodoListEntityFeature[TodoListEntityFeature[\"SET_DUE_DATETIME_ON_ITEM\"] = 32] = \"SET_DUE_DATETIME_ON_ITEM\";\n  TodoListEntityFeature[TodoListEntityFeature[\"SET_DESCRIPTION_ON_ITEM\"] = 64] = \"SET_DESCRIPTION_ON_ITEM\";\n  return TodoListEntityFeature;\n}({});\nexport var getTodoLists = function getTodoLists(hass) {\n  return Object.keys(hass.states).filter(function (entityId) {\n    return computeDomain(entityId) === \"todo\" && !isUnavailableState(hass.states[entityId].state);\n  }).map(function (entityId) {\n    return Object.assign(Object.assign({}, hass.states[entityId]), {}, {\n      entity_id: entityId,\n      name: computeStateName(hass.states[entityId])\n    });\n  }).sort(function (a, b) {\n    return stringCompare(a.name, b.name, hass.locale.language);\n  });\n};\nexport var fetchItems = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(hass, entity_id) {\n    var result;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return hass.callWS({\n            type: \"todo/item/list\",\n            entity_id: entity_id\n          });\n        case 2:\n          result = _context.sent;\n          return _context.abrupt(\"return\", result.items);\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function fetchItems(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var subscribeItems = function subscribeItems(hass, entity_id, callback) {\n  return hass.connection.subscribeMessage(callback, {\n    type: \"todo/item/subscribe\",\n    entity_id: entity_id\n  });\n};\nexport var updateItem = function updateItem(hass, entity_id, item) {\n  var _item$due, _item$due2;\n  return hass.callService(\"todo\", \"update_item\", {\n    item: item.uid,\n    rename: item.summary,\n    status: item.status,\n    description: item.description,\n    due_datetime: (_item$due = item.due) !== null && _item$due !== void 0 && _item$due.includes(\"T\") ? item.due : undefined,\n    due_date: item.due === undefined || (_item$due2 = item.due) !== null && _item$due2 !== void 0 && _item$due2.includes(\"T\") ? undefined : item.due\n  }, {\n    entity_id: entity_id\n  });\n};\nexport var createItem = function createItem(hass, entity_id, item) {\n  var _item$due3, _item$due4;\n  return hass.callService(\"todo\", \"add_item\", {\n    item: item.summary,\n    description: item.description || undefined,\n    due_datetime: (_item$due3 = item.due) !== null && _item$due3 !== void 0 && _item$due3.includes(\"T\") ? item.due : undefined,\n    due_date: item.due === undefined || (_item$due4 = item.due) !== null && _item$due4 !== void 0 && _item$due4.includes(\"T\") ? undefined : item.due\n  }, {\n    entity_id: entity_id\n  });\n};\nexport var deleteItems = function deleteItems(hass, entity_id, uids) {\n  return hass.callService(\"todo\", \"remove_item\", {\n    item: uids\n  }, {\n    entity_id: entity_id\n  });\n};\nexport var moveItem = function moveItem(hass, entity_id, uid, previous_uid) {\n  return hass.callWS({\n    type: \"todo/item/move\",\n    entity_id: entity_id,\n    uid: uid,\n    previous_uid: previous_uid\n  });\n};","map":{"version":3,"names":["computeDomain","computeStateName","isUnavailableState","stringCompare","TodoItemStatus","TodoListEntityFeature","getTodoLists","hass","Object","keys","states","filter","entityId","state","map","assign","entity_id","name","sort","a","b","locale","language","fetchItems","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","result","wrap","_callee$","_context","prev","next","callWS","type","sent","abrupt","items","stop","_x","_x2","apply","arguments","subscribeItems","callback","connection","subscribeMessage","updateItem","item","_item$due","_item$due2","callService","uid","rename","summary","status","description","due_datetime","due","includes","undefined","due_date","createItem","_item$due3","_item$due4","deleteItems","uids","moveItem","previous_uid"],"sources":["/workspaces/frontend/src/data/todo.ts"],"sourcesContent":["import { HomeAssistant, ServiceCallResponse } from \"../types\";\nimport { computeDomain } from \"../common/entity/compute_domain\";\nimport { computeStateName } from \"../common/entity/compute_state_name\";\nimport { isUnavailableState } from \"./entity\";\nimport { stringCompare } from \"../common/string/compare\";\n\nexport interface TodoList {\n  entity_id: string;\n  name: string;\n}\n\nexport const enum TodoItemStatus {\n  NeedsAction = \"needs_action\",\n  Completed = \"completed\",\n}\n\nexport interface TodoItem {\n  uid: string;\n  summary: string;\n  status: TodoItemStatus;\n  description?: string | null;\n  due?: string | null;\n}\n\nexport const enum TodoListEntityFeature {\n  CREATE_TODO_ITEM = 1,\n  DELETE_TODO_ITEM = 2,\n  UPDATE_TODO_ITEM = 4,\n  MOVE_TODO_ITEM = 8,\n  SET_DUE_DATE_ON_ITEM = 16,\n  SET_DUE_DATETIME_ON_ITEM = 32,\n  SET_DESCRIPTION_ON_ITEM = 64,\n}\n\nexport const getTodoLists = (hass: HomeAssistant): TodoList[] =>\n  Object.keys(hass.states)\n    .filter(\n      (entityId) =>\n        computeDomain(entityId) === \"todo\" &&\n        !isUnavailableState(hass.states[entityId].state)\n    )\n    .map((entityId) => ({\n      ...hass.states[entityId],\n      entity_id: entityId,\n      name: computeStateName(hass.states[entityId]),\n    }))\n    .sort((a, b) => stringCompare(a.name, b.name, hass.locale.language));\n\nexport interface TodoItems {\n  items: TodoItem[];\n}\n\nexport const fetchItems = async (\n  hass: HomeAssistant,\n  entity_id: string\n): Promise<TodoItem[]> => {\n  const result = await hass.callWS<TodoItems>({\n    type: \"todo/item/list\",\n    entity_id,\n  });\n  return result.items;\n};\n\nexport const subscribeItems = (\n  hass: HomeAssistant,\n  entity_id: string,\n  callback: (item) => void\n) =>\n  hass.connection.subscribeMessage<any>(callback, {\n    type: \"todo/item/subscribe\",\n    entity_id,\n  });\n\nexport const updateItem = (\n  hass: HomeAssistant,\n  entity_id: string,\n  item: TodoItem\n): Promise<ServiceCallResponse> =>\n  hass.callService(\n    \"todo\",\n    \"update_item\",\n    {\n      item: item.uid,\n      rename: item.summary,\n      status: item.status,\n      description: item.description,\n      due_datetime: item.due?.includes(\"T\") ? item.due : undefined,\n      due_date:\n        item.due === undefined || item.due?.includes(\"T\")\n          ? undefined\n          : item.due,\n    },\n    { entity_id }\n  );\n\nexport const createItem = (\n  hass: HomeAssistant,\n  entity_id: string,\n  item: Omit<TodoItem, \"uid\" | \"status\">\n): Promise<ServiceCallResponse> =>\n  hass.callService(\n    \"todo\",\n    \"add_item\",\n    {\n      item: item.summary,\n      description: item.description || undefined,\n      due_datetime: item.due?.includes(\"T\") ? item.due : undefined,\n      due_date:\n        item.due === undefined || item.due?.includes(\"T\")\n          ? undefined\n          : item.due,\n    },\n    { entity_id }\n  );\n\nexport const deleteItems = (\n  hass: HomeAssistant,\n  entity_id: string,\n  uids: string[]\n): Promise<ServiceCallResponse> =>\n  hass.callService(\n    \"todo\",\n    \"remove_item\",\n    {\n      item: uids,\n    },\n    { entity_id }\n  );\n\nexport const moveItem = (\n  hass: HomeAssistant,\n  entity_id: string,\n  uid: string,\n  previous_uid: string | undefined\n): Promise<void> =>\n  hass.callWS({\n    type: \"todo/item/move\",\n    entity_id,\n    uid,\n    previous_uid,\n  });\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}