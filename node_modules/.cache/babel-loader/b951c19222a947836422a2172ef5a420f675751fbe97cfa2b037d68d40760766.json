{"ast":null,"code":"import _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport { STATE_NOT_RUNNING, STATE_RUNNING, STATE_STARTING } from \"home-assistant-js-websocket\";\nimport { customElement, property } from \"lit/decorators\";\nimport { deepActiveElement } from \"../common/dom/deep-active-element\";\nimport { deepEqual } from \"../common/util/deep-equal\";\nimport { getDefaultPanel } from \"../data/panel\";\nimport { removeLaunchScreen } from \"../util/launch-screen\";\nimport { HassRouterPage } from \"./hass-router-page\";\nconst CACHE_URL_PATHS = [\"lovelace\", \"developer-tools\"];\nconst COMPONENTS = {\n  energy: () => import(\"../panels/energy/ha-panel-energy\"),\n  calendar: () => import(\"../panels/calendar/ha-panel-calendar\"),\n  config: () => import(\"../panels/config/ha-panel-config\"),\n  custom: () => import(\"../panels/custom/ha-panel-custom\"),\n  \"developer-tools\": () => import(\"../panels/developer-tools/ha-panel-developer-tools\"),\n  lovelace: () => import(\"../panels/lovelace/ha-panel-lovelace\"),\n  history: () => import(\"../panels/history/ha-panel-history\"),\n  iframe: () => import(\"../panels/iframe/ha-panel-iframe\"),\n  logbook: () => import(\"../panels/logbook/ha-panel-logbook\"),\n  mailbox: () => import(\"../panels/mailbox/ha-panel-mailbox\"),\n  map: () => import(\"../panels/map/ha-panel-map\"),\n  my: () => import(\"../panels/my/ha-panel-my\"),\n  profile: () => import(\"../panels/profile/ha-panel-profile\"),\n  todo: () => import(\"../panels/todo/ha-panel-todo\"),\n  \"media-browser\": () => import(\"../panels/media-browser/ha-panel-media-browser\")\n};\nlet PartialPanelResolver = _decorate([customElement(\"partial-panel-resolver\")], function (_initialize, _HassRouterPage) {\n  class PartialPanelResolver extends _HassRouterPage {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: PartialPanelResolver,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"narrow\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_waitForStart\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_disconnectedPanel\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_disconnectedActiveElement\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_hiddenTimeout\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"firstUpdated\",\n      value: function firstUpdated(changedProps) {\n        _get(_getPrototypeOf(PartialPanelResolver.prototype), \"firstUpdated\", this).call(this, changedProps);\n\n        // Attach listeners for visibility\n        document.addEventListener(\"visibilitychange\", () => this._checkVisibility(), false);\n        document.addEventListener(\"resume\", () => this._checkVisibility());\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProps) {\n        _get(_getPrototypeOf(PartialPanelResolver.prototype), \"willUpdate\", this).call(this, changedProps);\n        if (!changedProps.has(\"hass\")) {\n          return;\n        }\n        const oldHass = changedProps.get(\"hass\");\n        if (this._waitForStart && (this.hass.config.state === STATE_STARTING || this.hass.config.state === STATE_RUNNING)) {\n          this._waitForStart = false;\n          this.rebuild();\n        }\n        if (this.hass.panels && (!oldHass || oldHass.panels !== this.hass.panels)) {\n          this._updateRoutes(oldHass === null || oldHass === void 0 ? void 0 : oldHass.panels);\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"createLoadingScreen\",\n      value: function createLoadingScreen() {\n        const el = _get(_getPrototypeOf(PartialPanelResolver.prototype), \"createLoadingScreen\", this).call(this);\n        el.rootnav = true;\n        el.hass = this.hass;\n        el.narrow = this.narrow;\n        return el;\n      }\n    }, {\n      kind: \"method\",\n      key: \"updatePageEl\",\n      value: function updatePageEl(el) {\n        const hass = this.hass;\n        el.hass = hass;\n        el.narrow = this.narrow;\n        el.route = this.routeTail;\n        el.panel = hass.panels[this._currentPage];\n      }\n    }, {\n      kind: \"method\",\n      key: \"_checkVisibility\",\n      value: function _checkVisibility() {\n        if (this.hass.suspendWhenHidden === false) {\n          return;\n        }\n        if (document.hidden) {\n          this._onHidden();\n        } else {\n          this._onVisible();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"getRoutes\",\n      value: function getRoutes(panels) {\n        const routes = {};\n        Object.values(panels).forEach(panel => {\n          const data = {\n            tag: `ha-panel-${panel.component_name}`,\n            cache: CACHE_URL_PATHS.includes(panel.url_path)\n          };\n          if (panel.component_name in COMPONENTS) {\n            data.load = COMPONENTS[panel.component_name];\n          }\n          routes[panel.url_path] = data;\n        });\n        return {\n          beforeRender: page => {\n            if (!page || !routes[page]) {\n              return getDefaultPanel(this.hass).url_path;\n            }\n            return undefined;\n          },\n          showLoading: true,\n          routes\n        };\n      }\n    }, {\n      kind: \"method\",\n      key: \"_onHidden\",\n      value: function _onHidden() {\n        this._hiddenTimeout = window.setTimeout(() => {\n          this._hiddenTimeout = undefined;\n          // setTimeout can be delayed in the background and only fire\n          // when we switch to the tab or app again (Hey Android!)\n          if (!document.hidden) {\n            return;\n          }\n          const curPanel = this.hass.panels[this._currentPage];\n          if (this.lastChild &&\n          // iFrames will lose their state when disconnected\n          // Do not disconnect any iframe panel\n          curPanel.component_name !== \"iframe\" && (\n          // Do not disconnect any custom panel that embeds into iframe (ie hassio)\n          curPanel.component_name !== \"custom\" || !curPanel.config._panel_custom.embed_iframe)) {\n            this._disconnectedPanel = this.lastChild;\n            const activeEl = deepActiveElement(this._disconnectedPanel.shadowRoot || undefined);\n            if (activeEl instanceof HTMLElement) {\n              this._disconnectedActiveElement = activeEl;\n            }\n            this.removeChild(this.lastChild);\n          }\n        }, 300000);\n        window.addEventListener(\"focus\", () => this._onVisible(), {\n          once: true\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_onVisible\",\n      value: function _onVisible() {\n        if (this._hiddenTimeout) {\n          clearTimeout(this._hiddenTimeout);\n          this._hiddenTimeout = undefined;\n        }\n        if (this._disconnectedPanel) {\n          this.appendChild(this._disconnectedPanel);\n          this._disconnectedPanel = undefined;\n        }\n        if (this._disconnectedActiveElement) {\n          this._disconnectedActiveElement.focus();\n          this._disconnectedActiveElement = undefined;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_updateRoutes\",\n      value: async function _updateRoutes(oldPanels) {\n        this.routerOptions = this.getRoutes(this.hass.panels);\n        if (!this._waitForStart && this._currentPage && !this.hass.panels[this._currentPage]) {\n          if (this.hass.config.state === STATE_NOT_RUNNING) {\n            this._waitForStart = true;\n            if (this.lastChild) {\n              this.removeChild(this.lastChild);\n            }\n            this.appendChild(this.createLoadingScreen());\n            return;\n          }\n        }\n        if (!oldPanels || !deepEqual(oldPanels[this._currentPage], this.hass.panels[this._currentPage])) {\n          await this.rebuild();\n          await this.pageRendered;\n          removeLaunchScreen();\n        }\n      }\n    }]\n  };\n}, HassRouterPage);","map":{"version":3,"names":["STATE_NOT_RUNNING","STATE_RUNNING","STATE_STARTING","customElement","property","deepActiveElement","deepEqual","getDefaultPanel","removeLaunchScreen","HassRouterPage","CACHE_URL_PATHS","COMPONENTS","energy","calendar","config","custom","developer-tools","lovelace","history","iframe","logbook","mailbox","map","my","profile","todo","media-browser","PartialPanelResolver","_decorate","_initialize","_HassRouterPage","constructor","args","F","d","kind","decorators","attribute","key","value","type","Boolean","firstUpdated","changedProps","_get","_getPrototypeOf","prototype","call","document","addEventListener","_checkVisibility","willUpdate","has","oldHass","get","_waitForStart","hass","state","rebuild","panels","_updateRoutes","createLoadingScreen","el","rootnav","narrow","updatePageEl","route","routeTail","panel","_currentPage","suspendWhenHidden","hidden","_onHidden","_onVisible","getRoutes","routes","Object","values","forEach","data","tag","component_name","cache","includes","url_path","load","beforeRender","page","undefined","showLoading","_hiddenTimeout","window","setTimeout","curPanel","lastChild","_panel_custom","embed_iframe","_disconnectedPanel","activeEl","shadowRoot","HTMLElement","_disconnectedActiveElement","removeChild","once","clearTimeout","appendChild","focus","oldPanels","routerOptions","pageRendered"],"sources":["/Users/sercanardil/Desktop/frontend/src/layouts/partial-panel-resolver.ts"],"sourcesContent":["import {\n  STATE_NOT_RUNNING,\n  STATE_RUNNING,\n  STATE_STARTING,\n} from \"home-assistant-js-websocket\";\nimport { PropertyValues } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { deepActiveElement } from \"../common/dom/deep-active-element\";\nimport { deepEqual } from \"../common/util/deep-equal\";\nimport { getDefaultPanel } from \"../data/panel\";\nimport { CustomPanelInfo } from \"../data/panel_custom\";\nimport { HomeAssistant, Panels } from \"../types\";\nimport { removeLaunchScreen } from \"../util/launch-screen\";\nimport {\n  HassRouterPage,\n  RouteOptions,\n  RouterOptions,\n} from \"./hass-router-page\";\n\nconst CACHE_URL_PATHS = [\"lovelace\", \"developer-tools\"];\nconst COMPONENTS = {\n  energy: () => import(\"../panels/energy/ha-panel-energy\"),\n  calendar: () => import(\"../panels/calendar/ha-panel-calendar\"),\n  config: () => import(\"../panels/config/ha-panel-config\"),\n  custom: () => import(\"../panels/custom/ha-panel-custom\"),\n  \"developer-tools\": () =>\n    import(\"../panels/developer-tools/ha-panel-developer-tools\"),\n  lovelace: () => import(\"../panels/lovelace/ha-panel-lovelace\"),\n  history: () => import(\"../panels/history/ha-panel-history\"),\n  iframe: () => import(\"../panels/iframe/ha-panel-iframe\"),\n  logbook: () => import(\"../panels/logbook/ha-panel-logbook\"),\n  mailbox: () => import(\"../panels/mailbox/ha-panel-mailbox\"),\n  map: () => import(\"../panels/map/ha-panel-map\"),\n  my: () => import(\"../panels/my/ha-panel-my\"),\n  profile: () => import(\"../panels/profile/ha-panel-profile\"),\n  todo: () => import(\"../panels/todo/ha-panel-todo\"),\n  \"media-browser\": () =>\n    import(\"../panels/media-browser/ha-panel-media-browser\"),\n};\n\n@customElement(\"partial-panel-resolver\")\nclass PartialPanelResolver extends HassRouterPage {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean }) public narrow = false;\n\n  private _waitForStart = false;\n\n  private _disconnectedPanel?: HTMLElement;\n\n  private _disconnectedActiveElement?: HTMLElement;\n\n  private _hiddenTimeout?: number;\n\n  protected firstUpdated(changedProps: PropertyValues) {\n    super.firstUpdated(changedProps);\n\n    // Attach listeners for visibility\n    document.addEventListener(\n      \"visibilitychange\",\n      () => this._checkVisibility(),\n      false\n    );\n    document.addEventListener(\"resume\", () => this._checkVisibility());\n  }\n\n  public willUpdate(changedProps: PropertyValues) {\n    super.willUpdate(changedProps);\n\n    if (!changedProps.has(\"hass\")) {\n      return;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as this[\"hass\"];\n\n    if (\n      this._waitForStart &&\n      (this.hass.config.state === STATE_STARTING ||\n        this.hass.config.state === STATE_RUNNING)\n    ) {\n      this._waitForStart = false;\n      this.rebuild();\n    }\n\n    if (this.hass.panels && (!oldHass || oldHass.panels !== this.hass.panels)) {\n      this._updateRoutes(oldHass?.panels);\n    }\n  }\n\n  protected createLoadingScreen() {\n    const el = super.createLoadingScreen();\n    el.rootnav = true;\n    el.hass = this.hass;\n    el.narrow = this.narrow;\n    return el;\n  }\n\n  protected updatePageEl(el) {\n    const hass = this.hass;\n\n    el.hass = hass;\n    el.narrow = this.narrow;\n    el.route = this.routeTail;\n    el.panel = hass.panels[this._currentPage];\n  }\n\n  private _checkVisibility() {\n    if (this.hass.suspendWhenHidden === false) {\n      return;\n    }\n\n    if (document.hidden) {\n      this._onHidden();\n    } else {\n      this._onVisible();\n    }\n  }\n\n  private getRoutes(panels: Panels): RouterOptions {\n    const routes: RouterOptions[\"routes\"] = {};\n    Object.values(panels).forEach((panel) => {\n      const data: RouteOptions = {\n        tag: `ha-panel-${panel.component_name}`,\n        cache: CACHE_URL_PATHS.includes(panel.url_path),\n      };\n      if (panel.component_name in COMPONENTS) {\n        data.load = COMPONENTS[panel.component_name];\n      }\n      routes[panel.url_path] = data;\n    });\n\n    return {\n      beforeRender: (page) => {\n        if (!page || !routes[page]) {\n          return getDefaultPanel(this.hass).url_path;\n        }\n        return undefined;\n      },\n      showLoading: true,\n      routes,\n    };\n  }\n\n  private _onHidden() {\n    this._hiddenTimeout = window.setTimeout(() => {\n      this._hiddenTimeout = undefined;\n      // setTimeout can be delayed in the background and only fire\n      // when we switch to the tab or app again (Hey Android!)\n      if (!document.hidden) {\n        return;\n      }\n      const curPanel = this.hass.panels[this._currentPage];\n      if (\n        this.lastChild &&\n        // iFrames will lose their state when disconnected\n        // Do not disconnect any iframe panel\n        curPanel.component_name !== \"iframe\" &&\n        // Do not disconnect any custom panel that embeds into iframe (ie hassio)\n        (curPanel.component_name !== \"custom\" ||\n          !(curPanel as CustomPanelInfo).config._panel_custom.embed_iframe)\n      ) {\n        this._disconnectedPanel = this.lastChild as HTMLElement;\n        const activeEl = deepActiveElement(\n          this._disconnectedPanel.shadowRoot || undefined\n        );\n        if (activeEl instanceof HTMLElement) {\n          this._disconnectedActiveElement = activeEl;\n        }\n        this.removeChild(this.lastChild);\n      }\n    }, 300000);\n    window.addEventListener(\"focus\", () => this._onVisible(), { once: true });\n  }\n\n  private _onVisible() {\n    if (this._hiddenTimeout) {\n      clearTimeout(this._hiddenTimeout);\n      this._hiddenTimeout = undefined;\n    }\n    if (this._disconnectedPanel) {\n      this.appendChild(this._disconnectedPanel);\n      this._disconnectedPanel = undefined;\n    }\n    if (this._disconnectedActiveElement) {\n      this._disconnectedActiveElement.focus();\n      this._disconnectedActiveElement = undefined;\n    }\n  }\n\n  private async _updateRoutes(oldPanels?: HomeAssistant[\"panels\"]) {\n    this.routerOptions = this.getRoutes(this.hass.panels);\n\n    if (\n      !this._waitForStart &&\n      this._currentPage &&\n      !this.hass.panels[this._currentPage]\n    ) {\n      if (this.hass.config.state === STATE_NOT_RUNNING) {\n        this._waitForStart = true;\n        if (this.lastChild) {\n          this.removeChild(this.lastChild);\n        }\n        this.appendChild(this.createLoadingScreen());\n        return;\n      }\n    }\n\n    if (\n      !oldPanels ||\n      !deepEqual(\n        oldPanels[this._currentPage],\n        this.hass.panels[this._currentPage]\n      )\n    ) {\n      await this.rebuild();\n      await this.pageRendered;\n      removeLaunchScreen();\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"partial-panel-resolver\": PartialPanelResolver;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}