{"ast":null,"code":"import \"core-js/modules/es.object.keys.js\";\nimport { timeCachePromiseFunc } from \"../common/util/time-cache-function-promise\";\nvar fetchEntitySources = function fetchEntitySources(hass) {\n  return hass.callWS({\n    type: \"entity/source\"\n  });\n};\nexport var fetchEntitySourcesWithCache = function fetchEntitySourcesWithCache(hass) {\n  return timeCachePromiseFunc(\"_entitySources\",\n  // cache for 30 seconds\n  30000, fetchEntitySources,\n  // We base the cache on number of states. If number of states\n  // changes we force a refresh\n  function (hass2) {\n    return Object.keys(hass2.states).length;\n  }, hass);\n};","map":{"version":3,"names":["timeCachePromiseFunc","fetchEntitySources","hass","callWS","type","fetchEntitySourcesWithCache","hass2","Object","keys","states","length"],"sources":["/workspaces/frontend/src/data/entity_sources.ts"],"sourcesContent":["import { timeCachePromiseFunc } from \"../common/util/time-cache-function-promise\";\nimport { HomeAssistant } from \"../types\";\n\ninterface EntitySource {\n  domain: string;\n}\n\nexport type EntitySources = Record<string, EntitySource>;\n\nconst fetchEntitySources = (hass: HomeAssistant): Promise<EntitySources> =>\n  hass.callWS({ type: \"entity/source\" });\n\nexport const fetchEntitySourcesWithCache = (\n  hass: HomeAssistant\n): Promise<EntitySources> =>\n  timeCachePromiseFunc(\n    \"_entitySources\",\n    // cache for 30 seconds\n    30000,\n    fetchEntitySources,\n    // We base the cache on number of states. If number of states\n    // changes we force a refresh\n    (hass2) => Object.keys(hass2.states).length,\n    hass\n  );\n"],"mappings":";AAAA,SAASA,oBAAoB,QAAQ,4CAA4C;AASjF,IAAMC,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAIC,IAAmB;EAAA,OAC7CA,IAAI,CAACC,MAAM,CAAC;IAAEC,IAAI,EAAE;EAAgB,CAAC,CAAC;AAAA;AAExC,OAAO,IAAMC,2BAA2B,GAAG,SAA9BA,2BAA2BA,CACtCH,IAAmB;EAAA,OAEnBF,oBAAoB,CAClB,gBAAgB;EAChB;EACA,KAAK,EACLC,kBAAkB;EAClB;EACA;EACA,UAACK,KAAK;IAAA,OAAKC,MAAM,CAACC,IAAI,CAACF,KAAK,CAACG,MAAM,CAAC,CAACC,MAAM;EAAA,GAC3CR,IACF,CAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}