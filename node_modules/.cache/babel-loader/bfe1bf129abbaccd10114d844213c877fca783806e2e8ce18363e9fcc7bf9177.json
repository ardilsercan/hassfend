{"ast":null,"code":"/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n// Style preference for leading underscores.\n// tslint:disable:strip-private-property-underscore\n/**\n * Determines whether a node is an element.\n *\n * @param node Node to check\n */\nexport const isNodeElement = node => {\n  return node.nodeType === Node.ELEMENT_NODE;\n};\nexport function addHasRemoveClass(element) {\n  return {\n    addClass: className => {\n      element.classList.add(className);\n    },\n    removeClass: className => {\n      element.classList.remove(className);\n    },\n    hasClass: className => element.classList.contains(className)\n  };\n}\nlet supportsPassive = false;\nconst fn = () => {};\nconst optionsBlock = {\n  get passive() {\n    supportsPassive = true;\n    return false;\n  }\n};\ndocument.addEventListener('x', fn, optionsBlock);\ndocument.removeEventListener('x', fn);\n/**\n * Do event listeners suport the `passive` option?\n */\nexport const supportsPassiveEventListener = supportsPassive;\nexport const deepActiveElementPath = (doc = window.document) => {\n  let activeElement = doc.activeElement;\n  const path = [];\n  if (!activeElement) {\n    return path;\n  }\n  while (activeElement) {\n    path.push(activeElement);\n    if (activeElement.shadowRoot) {\n      activeElement = activeElement.shadowRoot.activeElement;\n    } else {\n      break;\n    }\n  }\n  return path;\n};\nexport const doesElementContainFocus = element => {\n  const activePath = deepActiveElementPath();\n  if (!activePath.length) {\n    return false;\n  }\n  const deepActiveElement = activePath[activePath.length - 1];\n  const focusEv = new Event('check-if-focused', {\n    bubbles: true,\n    composed: true\n  });\n  let composedPath = [];\n  const listener = ev => {\n    composedPath = ev.composedPath();\n  };\n  document.body.addEventListener('check-if-focused', listener);\n  deepActiveElement.dispatchEvent(focusEv);\n  document.body.removeEventListener('check-if-focused', listener);\n  return composedPath.indexOf(element) !== -1;\n};","map":{"version":3,"names":["isNodeElement","node","nodeType","Node","ELEMENT_NODE","addHasRemoveClass","element","addClass","className","classList","add","removeClass","remove","hasClass","contains","supportsPassive","fn","optionsBlock","passive","document","addEventListener","removeEventListener","supportsPassiveEventListener","deepActiveElementPath","doc","window","activeElement","path","push","shadowRoot","doesElementContainFocus","activePath","length","deepActiveElement","focusEv","Event","bubbles","composed","composedPath","listener","ev","body","dispatchEvent","indexOf"],"sources":["utils.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Style preference for leading underscores.\n// tslint:disable:strip-private-property-underscore\n\n/**\n * Determines whether a node is an element.\n *\n * @param node Node to check\n */\nexport const isNodeElement = (node: Node): node is Element => {\n  return node.nodeType === Node.ELEMENT_NODE;\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type Constructor<T> = new (...args: any[]) => T;\n\nexport function addHasRemoveClass(element: HTMLElement) {\n  return {\n    addClass: (className: string) => {\n      element.classList.add(className);\n    },\n    removeClass: (className: string) => {\n      element.classList.remove(className);\n    },\n    hasClass: (className: string) => element.classList.contains(className),\n  };\n}\n\nlet supportsPassive = false;\nconst fn = () => { /* empty listener */ };\nconst optionsBlock: AddEventListenerOptions = {\n  get passive() {\n    supportsPassive = true;\n    return false;\n  }\n};\ndocument.addEventListener('x', fn, optionsBlock);\ndocument.removeEventListener('x', fn);\n/**\n * Do event listeners suport the `passive` option?\n */\nexport const supportsPassiveEventListener = supportsPassive;\n\nexport const deepActiveElementPath = (doc = window.document): Element[] => {\n  let activeElement = doc.activeElement;\n  const path: Element[] = [];\n\n  if (!activeElement) {\n    return path;\n  }\n\n  while (activeElement) {\n    path.push(activeElement);\n    if (activeElement.shadowRoot) {\n      activeElement = activeElement.shadowRoot.activeElement;\n    } else {\n      break;\n    }\n  }\n\n  return path;\n};\n\nexport const doesElementContainFocus = (element: HTMLElement): boolean => {\n  const activePath = deepActiveElementPath();\n\n  if (!activePath.length) {\n    return false;\n  }\n\n  const deepActiveElement = activePath[activePath.length - 1];\n  const focusEv =\n      new Event('check-if-focused', {bubbles: true, composed: true});\n  let composedPath: EventTarget[] = [];\n  const listener = (ev: Event) => {\n    composedPath = ev.composedPath();\n  };\n\n  document.body.addEventListener('check-if-focused', listener);\n  deepActiveElement.dispatchEvent(focusEv);\n  document.body.removeEventListener('check-if-focused', listener);\n\n  return composedPath.indexOf(element) !== -1;\n};\n\nexport interface RippleInterface {\n  startPress: (e?: Event) => void;\n  endPress: () => void;\n  startFocus: () => void;\n  endFocus: () => void;\n  startHover: () => void;\n  endHover: () => void;\n}\n"],"mappings":"AAAA;;;;;AAMA;AACA;AAEA;;;;;AAKA,OAAO,MAAMA,aAAa,GAAIC,IAAU,IAAqB;EAC3D,OAAOA,IAAI,CAACC,QAAQ,KAAKC,IAAI,CAACC,YAAY;AAC5C,CAAC;AAKD,OAAM,SAAUC,iBAAiBA,CAACC,OAAoB;EACpD,OAAO;IACLC,QAAQ,EAAGC,SAAiB,IAAI;MAC9BF,OAAO,CAACG,SAAS,CAACC,GAAG,CAACF,SAAS,CAAC;IAClC,CAAC;IACDG,WAAW,EAAGH,SAAiB,IAAI;MACjCF,OAAO,CAACG,SAAS,CAACG,MAAM,CAACJ,SAAS,CAAC;IACrC,CAAC;IACDK,QAAQ,EAAGL,SAAiB,IAAKF,OAAO,CAACG,SAAS,CAACK,QAAQ,CAACN,SAAS;GACtE;AACH;AAEA,IAAIO,eAAe,GAAG,KAAK;AAC3B,MAAMC,EAAE,GAAGA,CAAA,KAAK,CAAwB,CAAC;AACzC,MAAMC,YAAY,GAA4B;EAC5C,IAAIC,OAAOA,CAAA;IACTH,eAAe,GAAG,IAAI;IACtB,OAAO,KAAK;EACd;CACD;AACDI,QAAQ,CAACC,gBAAgB,CAAC,GAAG,EAAEJ,EAAE,EAAEC,YAAY,CAAC;AAChDE,QAAQ,CAACE,mBAAmB,CAAC,GAAG,EAAEL,EAAE,CAAC;AACrC;;;AAGA,OAAO,MAAMM,4BAA4B,GAAGP,eAAe;AAE3D,OAAO,MAAMQ,qBAAqB,GAAGA,CAACC,GAAG,GAAGC,MAAM,CAACN,QAAQ,KAAe;EACxE,IAAIO,aAAa,GAAGF,GAAG,CAACE,aAAa;EACrC,MAAMC,IAAI,GAAc,EAAE;EAE1B,IAAI,CAACD,aAAa,EAAE;IAClB,OAAOC,IAAI;;EAGb,OAAOD,aAAa,EAAE;IACpBC,IAAI,CAACC,IAAI,CAACF,aAAa,CAAC;IACxB,IAAIA,aAAa,CAACG,UAAU,EAAE;MAC5BH,aAAa,GAAGA,aAAa,CAACG,UAAU,CAACH,aAAa;KACvD,MAAM;MACL;;;EAIJ,OAAOC,IAAI;AACb,CAAC;AAED,OAAO,MAAMG,uBAAuB,GAAIxB,OAAoB,IAAa;EACvE,MAAMyB,UAAU,GAAGR,qBAAqB,EAAE;EAE1C,IAAI,CAACQ,UAAU,CAACC,MAAM,EAAE;IACtB,OAAO,KAAK;;EAGd,MAAMC,iBAAiB,GAAGF,UAAU,CAACA,UAAU,CAACC,MAAM,GAAG,CAAC,CAAC;EAC3D,MAAME,OAAO,GACT,IAAIC,KAAK,CAAC,kBAAkB,EAAE;IAACC,OAAO,EAAE,IAAI;IAAEC,QAAQ,EAAE;EAAI,CAAC,CAAC;EAClE,IAAIC,YAAY,GAAkB,EAAE;EACpC,MAAMC,QAAQ,GAAIC,EAAS,IAAI;IAC7BF,YAAY,GAAGE,EAAE,CAACF,YAAY,EAAE;EAClC,CAAC;EAEDnB,QAAQ,CAACsB,IAAI,CAACrB,gBAAgB,CAAC,kBAAkB,EAAEmB,QAAQ,CAAC;EAC5DN,iBAAiB,CAACS,aAAa,CAACR,OAAO,CAAC;EACxCf,QAAQ,CAACsB,IAAI,CAACpB,mBAAmB,CAAC,kBAAkB,EAAEkB,QAAQ,CAAC;EAE/D,OAAOD,YAAY,CAACK,OAAO,CAACrC,OAAO,CAAC,KAAK,CAAC,CAAC;AAC7C,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}