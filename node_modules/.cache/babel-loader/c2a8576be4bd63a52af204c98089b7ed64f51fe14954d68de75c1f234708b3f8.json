{"ast":null,"code":"import { computeDomain } from \"../common/entity/compute_domain\";\nexport const computeGroupDomain = stateObj => {\n  const entityIds = stateObj.attributes.entity_id || [];\n  const uniqueDomains = [...new Set(entityIds.map(entityId => computeDomain(entityId)))];\n  return uniqueDomains.length === 1 ? uniqueDomains[0] : undefined;\n};\nexport const subscribePreviewGroup = (hass, flow_id, flow_type, user_input, callback) => hass.connection.subscribeMessage(callback, {\n  type: \"group/start_preview\",\n  flow_id,\n  flow_type,\n  user_input\n});","map":{"version":3,"names":["computeDomain","computeGroupDomain","stateObj","entityIds","attributes","entity_id","uniqueDomains","Set","map","entityId","length","undefined","subscribePreviewGroup","hass","flow_id","flow_type","user_input","callback","connection","subscribeMessage","type"],"sources":["/workspaces/frontend/src/data/group.ts"],"sourcesContent":["import {\n  HassEntityAttributeBase,\n  HassEntityBase,\n  UnsubscribeFunc,\n} from \"home-assistant-js-websocket\";\nimport { computeDomain } from \"../common/entity/compute_domain\";\nimport { HomeAssistant } from \"../types\";\n\ninterface GroupEntityAttributes extends HassEntityAttributeBase {\n  entity_id: string[];\n  order: number;\n  auto?: boolean;\n  view?: boolean;\n  control?: \"hidden\";\n}\nexport interface GroupEntity extends HassEntityBase {\n  attributes: GroupEntityAttributes;\n}\n\nexport interface GroupPreview {\n  state: string;\n  attributes: Record<string, any>;\n}\n\nexport const computeGroupDomain = (\n  stateObj: GroupEntity\n): string | undefined => {\n  const entityIds = stateObj.attributes.entity_id || [];\n  const uniqueDomains = [\n    ...new Set(entityIds.map((entityId) => computeDomain(entityId))),\n  ];\n  return uniqueDomains.length === 1 ? uniqueDomains[0] : undefined;\n};\n\nexport const subscribePreviewGroup = (\n  hass: HomeAssistant,\n  flow_id: string,\n  flow_type: \"config_flow\" | \"options_flow\",\n  user_input: Record<string, any>,\n  callback: (preview: GroupPreview) => void\n): Promise<UnsubscribeFunc> =>\n  hass.connection.subscribeMessage(callback, {\n    type: \"group/start_preview\",\n    flow_id,\n    flow_type,\n    user_input,\n  });\n"],"mappings":"AAKA,SAASA,aAAa,QAAQ,iCAAiC;AAmB/D,OAAO,MAAMC,kBAAkB,GAC7BC,QAAqB,IACE;EACvB,MAAMC,SAAS,GAAGD,QAAQ,CAACE,UAAU,CAACC,SAAS,IAAI,EAAE;EACrD,MAAMC,aAAa,GAAG,CACpB,GAAG,IAAIC,GAAG,CAACJ,SAAS,CAACK,GAAG,CAAEC,QAAQ,IAAKT,aAAa,CAACS,QAAQ,CAAC,CAAC,CAAC,CACjE;EACD,OAAOH,aAAa,CAACI,MAAM,KAAK,CAAC,GAAGJ,aAAa,CAAC,CAAC,CAAC,GAAGK,SAAS;AAClE,CAAC;AAED,OAAO,MAAMC,qBAAqB,GAAGA,CACnCC,IAAmB,EACnBC,OAAe,EACfC,SAAyC,EACzCC,UAA+B,EAC/BC,QAAyC,KAEzCJ,IAAI,CAACK,UAAU,CAACC,gBAAgB,CAACF,QAAQ,EAAE;EACzCG,IAAI,EAAE,qBAAqB;EAC3BN,OAAO;EACPC,SAAS;EACTC;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}