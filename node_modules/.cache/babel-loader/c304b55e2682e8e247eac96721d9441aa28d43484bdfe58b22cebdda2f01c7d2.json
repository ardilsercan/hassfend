{"ast":null,"code":"const mdiHome = \"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z\";\nconst mdiHomeExportOutline = \"M24 13L20 17V14H11V12H20V9L24 13M4 20V12H1L11 3L18 9.3V10H15.79L11 5.69L6 10.19V18H16V16H18V20H4Z\";\nimport { html } from \"lit\";\nimport { styleMap } from \"lit/directives/style-map\";\nimport { stateColorCss } from \"../../../../../common/entity/state_color\";\nimport \"../../../../../components/ha-icon\";\nimport \"../../../../../components/ha-svg-icon\";\nimport \"../../../../../components/tile/ha-tile-badge\";\nfunction getZone(entity, hass) {\n  const state = entity.state;\n  if (state === \"home\" || state === \"not_home\") return undefined;\n  const zones = Object.values(hass.states).filter(stateObj => stateObj.entity_id.startsWith(\"zone.\"));\n  return zones.find(z => state === z.attributes.friendly_name);\n}\nexport const renderPersonBadge = (stateObj, hass) => {\n  const zone = getZone(stateObj, hass);\n  const zoneIcon = zone === null || zone === void 0 ? void 0 : zone.attributes.icon;\n  if (zoneIcon) {\n    return html`\n      <ha-tile-badge\n        style=${styleMap({\n      \"--tile-badge-background-color\": stateColorCss(stateObj)\n    })}\n      >\n        <ha-icon .icon=${zoneIcon}></ha-icon>\n      </ha-tile-badge>\n    `;\n  }\n  const defaultIcon = stateObj.state === \"not_home\" ? mdiHomeExportOutline : mdiHome;\n  return html`\n    <ha-tile-badge\n      style=${styleMap({\n    \"--tile-badge-background-color\": stateColorCss(stateObj)\n  })}\n    >\n      <ha-svg-icon .path=${defaultIcon}></ha-svg-icon>\n    </ha-tile-badge>\n  `;\n};","map":{"version":3,"names":["html","styleMap","stateColorCss","getZone","entity","hass","state","undefined","zones","Object","values","states","filter","stateObj","entity_id","startsWith","find","z","attributes","friendly_name","renderPersonBadge","zone","zoneIcon","icon","defaultIcon","mdiHomeExportOutline","mdiHome"],"sources":["/workspaces/frontend/src/panels/lovelace/cards/tile/badges/tile-badge-person.ts"],"sourcesContent":["import { mdiHome, mdiHomeExportOutline } from \"@mdi/js\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { html } from \"lit\";\nimport { styleMap } from \"lit/directives/style-map\";\nimport { stateColorCss } from \"../../../../../common/entity/state_color\";\nimport \"../../../../../components/ha-icon\";\nimport \"../../../../../components/ha-svg-icon\";\nimport \"../../../../../components/tile/ha-tile-badge\";\nimport { HomeAssistant } from \"../../../../../types\";\nimport { RenderBadgeFunction } from \"./tile-badge\";\n\nfunction getZone(entity: HassEntity, hass: HomeAssistant) {\n  const state = entity.state;\n  if (state === \"home\" || state === \"not_home\") return undefined;\n\n  const zones = Object.values(hass.states).filter((stateObj) =>\n    stateObj.entity_id.startsWith(\"zone.\")\n  );\n\n  return zones.find((z) => state === z.attributes.friendly_name);\n}\n\nexport const renderPersonBadge: RenderBadgeFunction = (stateObj, hass) => {\n  const zone = getZone(stateObj, hass);\n\n  const zoneIcon = zone?.attributes.icon;\n\n  if (zoneIcon) {\n    return html`\n      <ha-tile-badge\n        style=${styleMap({\n          \"--tile-badge-background-color\": stateColorCss(stateObj),\n        })}\n      >\n        <ha-icon .icon=${zoneIcon}></ha-icon>\n      </ha-tile-badge>\n    `;\n  }\n\n  const defaultIcon =\n    stateObj.state === \"not_home\" ? mdiHomeExportOutline : mdiHome;\n\n  return html`\n    <ha-tile-badge\n      style=${styleMap({\n        \"--tile-badge-background-color\": stateColorCss(stateObj),\n      })}\n    >\n      <ha-svg-icon .path=${defaultIcon}></ha-svg-icon>\n    </ha-tile-badge>\n  `;\n};\n"],"mappings":";;AAEA,SAASA,IAAI,QAAQ,KAAK;AAC1B,SAASC,QAAQ,QAAQ,0BAA0B;AACnD,SAASC,aAAa,QAAQ,0CAA0C;AACxE,OAAO,mCAAmC;AAC1C,OAAO,uCAAuC;AAC9C,OAAO,8CAA8C;AAIrD,SAASC,OAAOA,CAACC,MAAkB,EAAEC,IAAmB,EAAE;EACxD,MAAMC,KAAK,GAAGF,MAAM,CAACE,KAAK;EAC1B,IAAIA,KAAK,KAAK,MAAM,IAAIA,KAAK,KAAK,UAAU,EAAE,OAAOC,SAAS;EAE9D,MAAMC,KAAK,GAAGC,MAAM,CAACC,MAAM,CAACL,IAAI,CAACM,MAAM,CAAC,CAACC,MAAM,CAAEC,QAAQ,IACvDA,QAAQ,CAACC,SAAS,CAACC,UAAU,CAAC,OAAO,CACvC,CAAC;EAED,OAAOP,KAAK,CAACQ,IAAI,CAAEC,CAAC,IAAKX,KAAK,KAAKW,CAAC,CAACC,UAAU,CAACC,aAAa,CAAC;AAChE;AAEA,OAAO,MAAMC,iBAAsC,GAAGA,CAACP,QAAQ,EAAER,IAAI,KAAK;EACxE,MAAMgB,IAAI,GAAGlB,OAAO,CAACU,QAAQ,EAAER,IAAI,CAAC;EAEpC,MAAMiB,QAAQ,GAAGD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEH,UAAU,CAACK,IAAI;EAEtC,IAAID,QAAQ,EAAE;IACZ,OAAOtB,IAAK;AAChB;AACA,gBAAgBC,QAAQ,CAAC;MACf,+BAA+B,EAAEC,aAAa,CAACW,QAAQ;IACzD,CAAC,CAAE;AACX;AACA,yBAAyBS,QAAS;AAClC;AACA,KAAK;EACH;EAEA,MAAME,WAAW,GACfX,QAAQ,CAACP,KAAK,KAAK,UAAU,GAAGmB,oBAAoB,GAAGC,OAAO;EAEhE,OAAO1B,IAAK;AACd;AACA,cAAcC,QAAQ,CAAC;IACf,+BAA+B,EAAEC,aAAa,CAACW,QAAQ;EACzD,CAAC,CAAE;AACT;AACA,2BAA2BW,WAAY;AACvC;AACA,GAAG;AACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}