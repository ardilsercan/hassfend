{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/helpers/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.function.name.js\";\nexport var uploadFile = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(hass, file) {\n    var fd, resp, data;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          fd = new FormData();\n          fd.append(\"file\", file);\n          _context.next = 4;\n          return hass.fetchWithAuth(\"/api/file_upload\", {\n            method: \"POST\",\n            body: fd\n          });\n        case 4:\n          resp = _context.sent;\n          if (!(resp.status === 413)) {\n            _context.next = 9;\n            break;\n          }\n          throw new Error(\"Uploaded file is too large (\".concat(file.name, \")\"));\n        case 9:\n          if (!(resp.status !== 200)) {\n            _context.next = 11;\n            break;\n          }\n          throw new Error(\"Unknown error\");\n        case 11:\n          _context.next = 13;\n          return resp.json();\n        case 13:\n          data = _context.sent;\n          return _context.abrupt(\"return\", data.file_id);\n        case 15:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function uploadFile(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var removeFile = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(hass, file_id) {\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          return _context2.abrupt(\"return\", hass.callApi(\"DELETE\", \"file_upload\", {\n            file_id: file_id\n          }));\n        case 1:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function removeFile(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["uploadFile","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","hass","file","fd","resp","data","wrap","_callee$","_context","prev","next","FormData","append","fetchWithAuth","method","body","sent","status","Error","concat","name","json","abrupt","file_id","stop","_x","_x2","apply","arguments","removeFile","_ref2","_callee2","_callee2$","_context2","callApi","_x3","_x4"],"sources":["/Users/sercanardil/Desktop/frontend/src/data/file_upload.ts"],"sourcesContent":["import { HomeAssistant } from \"../types\";\n\nexport const uploadFile = async (hass: HomeAssistant, file: File) => {\n  const fd = new FormData();\n  fd.append(\"file\", file);\n  const resp = await hass.fetchWithAuth(\"/api/file_upload\", {\n    method: \"POST\",\n    body: fd,\n  });\n  if (resp.status === 413) {\n    throw new Error(`Uploaded file is too large (${file.name})`);\n  } else if (resp.status !== 200) {\n    throw new Error(\"Unknown error\");\n  }\n  const data = await resp.json();\n  return data.file_id;\n};\n\nexport const removeFile = async (hass: HomeAssistant, file_id: string) =>\n  hass.callApi(\"DELETE\", \"file_upload\", {\n    file_id,\n  });\n"],"mappings":";;;;AAEA,OAAO,IAAMA,UAAU;EAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,IAAmB,EAAEC,IAAU;IAAA,IAAAC,EAAA,EAAAC,IAAA,EAAAC,IAAA;IAAA,OAAAP,mBAAA,GAAAQ,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UACxDP,EAAE,GAAG,IAAIQ,QAAQ,CAAC,CAAC;UACzBR,EAAE,CAACS,MAAM,CAAC,MAAM,EAAEV,IAAI,CAAC;UAACM,QAAA,CAAAE,IAAA;UAAA,OACLT,IAAI,CAACY,aAAa,CAAC,kBAAkB,EAAE;YACxDC,MAAM,EAAE,MAAM;YACdC,IAAI,EAAEZ;UACR,CAAC,CAAC;QAAA;UAHIC,IAAI,GAAAI,QAAA,CAAAQ,IAAA;UAAA,MAINZ,IAAI,CAACa,MAAM,KAAK,GAAG;YAAAT,QAAA,CAAAE,IAAA;YAAA;UAAA;UAAA,MACf,IAAIQ,KAAK,gCAAAC,MAAA,CAAgCjB,IAAI,CAACkB,IAAI,MAAG,CAAC;QAAA;UAAA,MACnDhB,IAAI,CAACa,MAAM,KAAK,GAAG;YAAAT,QAAA,CAAAE,IAAA;YAAA;UAAA;UAAA,MACtB,IAAIQ,KAAK,CAAC,eAAe,CAAC;QAAA;UAAAV,QAAA,CAAAE,IAAA;UAAA,OAEfN,IAAI,CAACiB,IAAI,CAAC,CAAC;QAAA;UAAxBhB,IAAI,GAAAG,QAAA,CAAAQ,IAAA;UAAA,OAAAR,QAAA,CAAAc,MAAA,WACHjB,IAAI,CAACkB,OAAO;QAAA;QAAA;UAAA,OAAAf,QAAA,CAAAgB,IAAA;MAAA;IAAA,GAAAxB,OAAA;EAAA,CACpB;EAAA,gBAdYL,UAAUA,CAAA8B,EAAA,EAAAC,GAAA;IAAA,OAAA9B,IAAA,CAAA+B,KAAA,OAAAC,SAAA;EAAA;AAAA,GActB;AAED,OAAO,IAAMC,UAAU;EAAA,IAAAC,KAAA,GAAAjC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAgC,SAAO9B,IAAmB,EAAEsB,OAAe;IAAA,OAAAzB,mBAAA,GAAAQ,IAAA,UAAA0B,UAAAC,SAAA;MAAA,kBAAAA,SAAA,CAAAxB,IAAA,GAAAwB,SAAA,CAAAvB,IAAA;QAAA;UAAA,OAAAuB,SAAA,CAAAX,MAAA,WACnErB,IAAI,CAACiC,OAAO,CAAC,QAAQ,EAAE,aAAa,EAAE;YACpCX,OAAO,EAAPA;UACF,CAAC,CAAC;QAAA;QAAA;UAAA,OAAAU,SAAA,CAAAT,IAAA;MAAA;IAAA,GAAAO,QAAA;EAAA;EAAA,gBAHSF,UAAUA,CAAAM,GAAA,EAAAC,GAAA;IAAA,OAAAN,KAAA,CAAAH,KAAA,OAAAC,SAAA;EAAA;AAAA,GAGnB"},"metadata":{},"sourceType":"module","externalDependencies":[]}