{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/helpers/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n// Sets up a Leaflet map on the provided DOM element\n\nexport var setupLeafletMap = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(mapElement) {\n    var Leaflet, map, style, tileLayer;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (mapElement.parentNode) {\n            _context.next = 2;\n            break;\n          }\n          throw new Error(\"Cannot setup Leaflet map on disconnected element\");\n        case 2:\n          _context.next = 4;\n          return import(\"leaflet\");\n        case 4:\n          Leaflet = _context.sent.default;\n          Leaflet.Icon.Default.imagePath = \"/static/images/leaflet/images/\";\n          map = Leaflet.map(mapElement);\n          style = document.createElement(\"link\");\n          style.setAttribute(\"href\", \"/static/images/leaflet/leaflet.css\");\n          style.setAttribute(\"rel\", \"stylesheet\");\n          mapElement.parentNode.appendChild(style);\n          map.setView([52.3731339, 4.8903147], 13);\n          tileLayer = createTileLayer(Leaflet).addTo(map);\n          return _context.abrupt(\"return\", [map, Leaflet, tileLayer]);\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function setupLeafletMap(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var replaceTileLayer = function replaceTileLayer(leaflet, map, tileLayer) {\n  map.removeLayer(tileLayer);\n  tileLayer = createTileLayer(leaflet);\n  tileLayer.addTo(map);\n  return tileLayer;\n};\nvar createTileLayer = function createTileLayer(leaflet) {\n  return leaflet.tileLayer(\"https://basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}\".concat(leaflet.Browser.retina ? \"@2x.png\" : \".png\"), {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n    subdomains: \"abcd\",\n    minZoom: 0,\n    maxZoom: 20\n  });\n};","map":{"version":3,"names":["setupLeafletMap","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","mapElement","Leaflet","map","style","tileLayer","wrap","_callee$","_context","prev","next","parentNode","Error","sent","default","Icon","Default","imagePath","document","createElement","setAttribute","appendChild","setView","createTileLayer","addTo","abrupt","stop","_x","apply","arguments","replaceTileLayer","leaflet","removeLayer","concat","Browser","retina","attribution","subdomains","minZoom","maxZoom"],"sources":["/workspaces/frontend/src/common/dom/setup-leaflet-map.ts"],"sourcesContent":["import type { Map, TileLayer } from \"leaflet\";\n\n// Sets up a Leaflet map on the provided DOM element\nexport type LeafletModuleType = typeof import(\"leaflet\");\nexport type LeafletDrawModuleType = typeof import(\"leaflet-draw\");\n\nexport const setupLeafletMap = async (\n  mapElement: HTMLElement\n): Promise<[Map, LeafletModuleType, TileLayer]> => {\n  if (!mapElement.parentNode) {\n    throw new Error(\"Cannot setup Leaflet map on disconnected element\");\n  }\n  // eslint-disable-next-line\n  const Leaflet = (await import(\"leaflet\")).default as LeafletModuleType;\n  Leaflet.Icon.Default.imagePath = \"/static/images/leaflet/images/\";\n\n  const map = Leaflet.map(mapElement);\n  const style = document.createElement(\"link\");\n  style.setAttribute(\"href\", \"/static/images/leaflet/leaflet.css\");\n  style.setAttribute(\"rel\", \"stylesheet\");\n  mapElement.parentNode.appendChild(style);\n  map.setView([52.3731339, 4.8903147], 13);\n\n  const tileLayer = createTileLayer(Leaflet).addTo(map);\n\n  return [map, Leaflet, tileLayer];\n};\n\nexport const replaceTileLayer = (\n  leaflet: LeafletModuleType,\n  map: Map,\n  tileLayer: TileLayer\n): TileLayer => {\n  map.removeLayer(tileLayer);\n  tileLayer = createTileLayer(leaflet);\n  tileLayer.addTo(map);\n  return tileLayer;\n};\n\nconst createTileLayer = (leaflet: LeafletModuleType): TileLayer =>\n  leaflet.tileLayer(\n    `https://basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}${\n      leaflet.Browser.retina ? \"@2x.png\" : \".png\"\n    }`,\n    {\n      attribution:\n        '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n      subdomains: \"abcd\",\n      minZoom: 0,\n      maxZoom: 20,\n    }\n  );\n"],"mappings":";;;;;;;;;;AAEA;;AAIA,OAAO,IAAMA,eAAe;EAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAC7BC,UAAuB;IAAA,IAAAC,OAAA,EAAAC,GAAA,EAAAC,KAAA,EAAAC,SAAA;IAAA,OAAAP,mBAAA,GAAAQ,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAA,IAElBT,UAAU,CAACU,UAAU;YAAAH,QAAA,CAAAE,IAAA;YAAA;UAAA;UAAA,MAClB,IAAIE,KAAK,CAAC,kDAAkD,CAAC;QAAA;UAAAJ,QAAA,CAAAE,IAAA;UAAA,OAG9C,MAAM,CAAC,SAAS,CAAC;QAAA;UAAlCR,OAAO,GAAAM,QAAA,CAAAK,IAAA,CAA6BC,OAAO;UACjDZ,OAAO,CAACa,IAAI,CAACC,OAAO,CAACC,SAAS,GAAG,gCAAgC;UAE3Dd,GAAG,GAAGD,OAAO,CAACC,GAAG,CAACF,UAAU,CAAC;UAC7BG,KAAK,GAAGc,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;UAC5Cf,KAAK,CAACgB,YAAY,CAAC,MAAM,EAAE,oCAAoC,CAAC;UAChEhB,KAAK,CAACgB,YAAY,CAAC,KAAK,EAAE,YAAY,CAAC;UACvCnB,UAAU,CAACU,UAAU,CAACU,WAAW,CAACjB,KAAK,CAAC;UACxCD,GAAG,CAACmB,OAAO,CAAC,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,EAAE,CAAC;UAElCjB,SAAS,GAAGkB,eAAe,CAACrB,OAAO,CAAC,CAACsB,KAAK,CAACrB,GAAG,CAAC;UAAA,OAAAK,QAAA,CAAAiB,MAAA,WAE9C,CAACtB,GAAG,EAAED,OAAO,EAAEG,SAAS,CAAC;QAAA;QAAA;UAAA,OAAAG,QAAA,CAAAkB,IAAA;MAAA;IAAA,GAAA1B,OAAA;EAAA,CACjC;EAAA,gBApBYL,eAAeA,CAAAgC,EAAA;IAAA,OAAA/B,IAAA,CAAAgC,KAAA,OAAAC,SAAA;EAAA;AAAA,GAoB3B;AAED,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAC3BC,OAA0B,EAC1B5B,GAAQ,EACRE,SAAoB,EACN;EACdF,GAAG,CAAC6B,WAAW,CAAC3B,SAAS,CAAC;EAC1BA,SAAS,GAAGkB,eAAe,CAACQ,OAAO,CAAC;EACpC1B,SAAS,CAACmB,KAAK,CAACrB,GAAG,CAAC;EACpB,OAAOE,SAAS;AAClB,CAAC;AAED,IAAMkB,eAAe,GAAG,SAAlBA,eAAeA,CAAIQ,OAA0B;EAAA,OACjDA,OAAO,CAAC1B,SAAS,iEAAA4B,MAAA,CAEbF,OAAO,CAACG,OAAO,CAACC,MAAM,GAAG,SAAS,GAAG,MAAM,GAE7C;IACEC,WAAW,EACT,uIAAuI;IACzIC,UAAU,EAAE,MAAM;IAClBC,OAAO,EAAE,CAAC;IACVC,OAAO,EAAE;EACX,CACF,CAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}