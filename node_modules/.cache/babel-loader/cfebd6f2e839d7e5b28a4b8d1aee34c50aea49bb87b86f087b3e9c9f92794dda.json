{"ast":null,"code":"import _decorate from \"@babel/runtime/helpers/decorate\";\nimport { LitElement, css, html, nothing } from \"lit\";\nimport { property, state } from \"lit/decorators\";\nimport { dynamicElement } from \"../../../common/dom/dynamic-element-directive\";\nimport { computeGroupDomain } from \"../../../data/group\";\nimport \"../../../state-summary/state-card-content\";\nimport { moreInfoControlStyle } from \"../components/more-info-control-style\";\nimport { domainMoreInfoType, importMoreInfoControl } from \"../state_more_info_control\";\nlet MoreInfoGroup = _decorate(null, function (_initialize, _LitElement) {\n  class MoreInfoGroup extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: MoreInfoGroup,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"stateObj\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_groupDomainStateObj\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_moreInfoType\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProperties) {\n        if (!this.hass || !this.stateObj || !changedProperties.has(\"hass\") && !changedProperties.has(\"stateObj\")) {\n          return;\n        }\n        const states = this.stateObj.attributes.entity_id.map(entity_id => this.hass.states[entity_id]).filter(entityState => entityState);\n        if (!states.length) {\n          this._groupDomainStateObj = undefined;\n          this._moreInfoType = undefined;\n          return;\n        }\n        const baseStateObj = states.find(s => s.state === this.stateObj.state) || states[0];\n        const groupDomain = computeGroupDomain(this.stateObj);\n\n        // Groups need to be filtered out or we'll show content of\n        // first child above the children of the current group\n        if (groupDomain && groupDomain !== \"group\") {\n          this._groupDomainStateObj = {\n            ...baseStateObj,\n            entity_id: this.stateObj.entity_id,\n            last_updated: this.stateObj.last_updated,\n            last_changed: this.stateObj.last_changed,\n            attributes: {\n              ...baseStateObj.attributes,\n              friendly_name: this.stateObj.attributes.friendly_name,\n              entity_id: this.stateObj.attributes.entity_id\n            }\n          };\n          const type = domainMoreInfoType(groupDomain);\n          importMoreInfoControl(type);\n          this._moreInfoType = type === \"hidden\" ? undefined : `more-info-${type}`;\n        } else {\n          this._groupDomainStateObj = undefined;\n          this._moreInfoType = undefined;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (!this.hass || !this.stateObj) {\n          return nothing;\n        }\n        return html`${this._moreInfoType ? dynamicElement(this._moreInfoType, {\n          hass: this.hass,\n          stateObj: this._groupDomainStateObj\n        }) : \"\"}\n    ${this.stateObj.attributes.entity_id.map(entity_id => {\n          const entityState = this.hass.states[entity_id];\n          if (!entityState) {\n            return \"\";\n          }\n          return html`\n        <state-card-content\n          .stateObj=${entityState}\n          .hass=${this.hass}\n        ></state-card-content>\n      `;\n        })}`;\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return [moreInfoControlStyle, css`\n        state-card-content {\n          display: block;\n          margin-top: 8px;\n        }\n      `];\n      }\n    }]\n  };\n}, LitElement);\ncustomElements.define(\"more-info-group\", MoreInfoGroup);","map":{"version":3,"names":["LitElement","css","html","nothing","property","state","dynamicElement","computeGroupDomain","moreInfoControlStyle","domainMoreInfoType","importMoreInfoControl","MoreInfoGroup","_decorate","_initialize","_LitElement","constructor","args","F","d","kind","decorators","attribute","key","value","updated","changedProperties","hass","stateObj","has","states","attributes","entity_id","map","filter","entityState","length","_groupDomainStateObj","undefined","_moreInfoType","baseStateObj","find","s","groupDomain","last_updated","last_changed","friendly_name","type","render","static","styles","customElements","define"],"sources":["/workspaces/frontend/src/dialogs/more-info/controls/more-info-group.ts"],"sourcesContent":["import { HassEntity } from \"home-assistant-js-websocket\";\nimport {\n  CSSResultGroup,\n  LitElement,\n  PropertyValues,\n  css,\n  html,\n  nothing,\n} from \"lit\";\nimport { property, state } from \"lit/decorators\";\nimport { dynamicElement } from \"../../../common/dom/dynamic-element-directive\";\nimport { GroupEntity, computeGroupDomain } from \"../../../data/group\";\nimport \"../../../state-summary/state-card-content\";\nimport { HomeAssistant } from \"../../../types\";\nimport { moreInfoControlStyle } from \"../components/more-info-control-style\";\nimport {\n  domainMoreInfoType,\n  importMoreInfoControl,\n} from \"../state_more_info_control\";\n\nclass MoreInfoGroup extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public stateObj?: GroupEntity;\n\n  @state() private _groupDomainStateObj?: HassEntity;\n\n  @state() private _moreInfoType?: string;\n\n  protected updated(changedProperties: PropertyValues) {\n    if (\n      !this.hass ||\n      !this.stateObj ||\n      (!changedProperties.has(\"hass\") && !changedProperties.has(\"stateObj\"))\n    ) {\n      return;\n    }\n\n    const states = this.stateObj.attributes.entity_id\n      .map((entity_id) => this.hass.states[entity_id])\n      .filter((entityState) => entityState);\n\n    if (!states.length) {\n      this._groupDomainStateObj = undefined;\n      this._moreInfoType = undefined;\n      return;\n    }\n\n    const baseStateObj =\n      states.find((s) => s.state === this.stateObj!.state) || states[0];\n\n    const groupDomain = computeGroupDomain(this.stateObj);\n\n    // Groups need to be filtered out or we'll show content of\n    // first child above the children of the current group\n    if (groupDomain && groupDomain !== \"group\") {\n      this._groupDomainStateObj = {\n        ...baseStateObj,\n        entity_id: this.stateObj.entity_id,\n        last_updated: this.stateObj.last_updated,\n        last_changed: this.stateObj.last_changed,\n        attributes: {\n          ...baseStateObj.attributes,\n          friendly_name: this.stateObj.attributes.friendly_name,\n          entity_id: this.stateObj.attributes.entity_id,\n        },\n      };\n      const type = domainMoreInfoType(groupDomain);\n      importMoreInfoControl(type);\n      this._moreInfoType = type === \"hidden\" ? undefined : `more-info-${type}`;\n    } else {\n      this._groupDomainStateObj = undefined;\n      this._moreInfoType = undefined;\n    }\n  }\n\n  protected render() {\n    if (!this.hass || !this.stateObj) {\n      return nothing;\n    }\n    return html`${this._moreInfoType\n      ? dynamicElement(this._moreInfoType, {\n          hass: this.hass,\n          stateObj: this._groupDomainStateObj,\n        })\n      : \"\"}\n    ${this.stateObj.attributes.entity_id.map((entity_id) => {\n      const entityState = this.hass!.states[entity_id];\n      if (!entityState) {\n        return \"\";\n      }\n      return html`\n        <state-card-content\n          .stateObj=${entityState}\n          .hass=${this.hass}\n        ></state-card-content>\n      `;\n    })}`;\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      moreInfoControlStyle,\n      css`\n        state-card-content {\n          display: block;\n          margin-top: 8px;\n        }\n      `,\n    ];\n  }\n}\n\ncustomElements.define(\"more-info-group\", MoreInfoGroup);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"more-info-group\": MoreInfoGroup;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}