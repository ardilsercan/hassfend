{"ast":null,"code":"import _decorate from \"@babel/runtime/helpers/decorate\";\nimport \"@material/mwc-button/mwc-button\";\nimport { css, html, LitElement } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { getEnergyInfo, saveEnergyPreferences } from \"../../../data/energy\";\nimport { showAlertDialog } from \"../../../dialogs/generic/show-dialog-box\";\nimport { haStyle } from \"../../../resources/styles\";\nimport \"../../config/energy/components/ha-energy-battery-settings\";\nimport \"../../config/energy/components/ha-energy-device-settings\";\nimport \"../../config/energy/components/ha-energy-gas-settings\";\nimport \"../../config/energy/components/ha-energy-grid-settings\";\nimport \"../../config/energy/components/ha-energy-solar-settings\";\nimport \"../../config/energy/components/ha-energy-water-settings\";\nexport let EnergySetupWizard = _decorate([customElement(\"energy-setup-wizard-card\")], function (_initialize, _LitElement) {\n  class EnergySetupWizard extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: EnergySetupWizard,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"lovelace\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_info\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_step\",\n      value() {\n        return 0;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_preferences\",\n      value() {\n        return {\n          energy_sources: [],\n          device_consumption: []\n        };\n      }\n    }, {\n      kind: \"method\",\n      key: \"getCardSize\",\n      value: function getCardSize() {\n        return 10;\n      }\n    }, {\n      kind: \"method\",\n      key: \"setConfig\",\n      value: function setConfig(config) {\n        if (config.preferences) {\n          this._preferences = config.preferences;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"firstUpdated\",\n      value: function firstUpdated() {\n        this.hass.loadFragmentTranslation(\"config\");\n        this._fetchconfig();\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        return html`\n      <p>\n        ${this.hass.localize(\"ui.panel.energy.setup.step\", {\n          step: this._step + 1,\n          steps: 6\n        })}\n      </p>\n      ${this._step === 0 ? html`<ha-energy-grid-settings\n            .hass=${this.hass}\n            .preferences=${this._preferences}\n            @value-changed=${this._prefsChanged}\n          ></ha-energy-grid-settings>` : this._step === 1 ? html`<ha-energy-solar-settings\n              .hass=${this.hass}\n              .preferences=${this._preferences}\n              .info=${this._info}\n              @value-changed=${this._prefsChanged}\n            ></ha-energy-solar-settings>` : this._step === 2 ? html`<ha-energy-battery-settings\n                .hass=${this.hass}\n                .preferences=${this._preferences}\n                @value-changed=${this._prefsChanged}\n              ></ha-energy-battery-settings>` : this._step === 3 ? html`<ha-energy-gas-settings\n                  .hass=${this.hass}\n                  .preferences=${this._preferences}\n                  @value-changed=${this._prefsChanged}\n                ></ha-energy-gas-settings>` : this._step === 4 ? html`<ha-energy-water-settings\n                    .hass=${this.hass}\n                    .preferences=${this._preferences}\n                    @value-changed=${this._prefsChanged}\n                  ></ha-energy-water-settings>` : html`<ha-energy-device-settings\n                    .hass=${this.hass}\n                    .preferences=${this._preferences}\n                    @value-changed=${this._prefsChanged}\n                  ></ha-energy-device-settings>`}\n      <div class=\"buttons\">\n        ${this._step > 0 ? html`<mwc-button outlined @click=${this._back}\n              >${this.hass.localize(\"ui.panel.energy.setup.back\")}</mwc-button\n            >` : html`<div></div>`}\n        ${this._step < 4 ? html`<mwc-button unelevated @click=${this._next}\n              >${this.hass.localize(\"ui.panel.energy.setup.next\")}</mwc-button\n            >` : html`<mwc-button unelevated @click=${this._setupDone}>\n              ${this.hass.localize(\"ui.panel.energy.setup.done\")}\n            </mwc-button>`}\n      </div>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_fetchconfig\",\n      value: async function _fetchconfig() {\n        this._info = await getEnergyInfo(this.hass);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_prefsChanged\",\n      value: function _prefsChanged(ev) {\n        this._preferences = ev.detail.value;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_back\",\n      value: function _back() {\n        if (this._step === 0) {\n          return;\n        }\n        this._step--;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_next\",\n      value: function _next() {\n        if (this._step === 5) {\n          return;\n        }\n        this._step++;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_setupDone\",\n      value: async function _setupDone() {\n        if (!this._preferences) {\n          return;\n        }\n        try {\n          this._preferences = await saveEnergyPreferences(this.hass, this._preferences);\n        } catch (err) {\n          showAlertDialog(this, {\n            title: `Failed to save config: ${err.message}`\n          });\n        }\n        fireEvent(this, \"reload-energy-panel\");\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return [haStyle, css`\n        :host {\n          display: block;\n          padding: 16px;\n          max-width: 700px;\n          margin: 0 auto;\n        }\n        mwc-button {\n          margin-top: 8px;\n        }\n        .buttons {\n          display: flex;\n          justify-content: space-between;\n        }\n      `];\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["css","html","LitElement","customElement","property","state","fireEvent","getEnergyInfo","saveEnergyPreferences","showAlertDialog","haStyle","EnergySetupWizard","_decorate","_initialize","_LitElement","constructor","args","F","d","kind","decorators","attribute","key","value","energy_sources","device_consumption","getCardSize","setConfig","config","preferences","_preferences","firstUpdated","hass","loadFragmentTranslation","_fetchconfig","render","localize","step","_step","steps","_prefsChanged","_info","_back","_next","_setupDone","ev","detail","err","title","message","static","styles"],"sources":["/Users/sercanardil/Desktop/frontend/src/panels/energy/cards/energy-setup-wizard-card.ts"],"sourcesContent":["import \"@material/mwc-button/mwc-button\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport {\n  EnergyInfo,\n  EnergyPreferences,\n  getEnergyInfo,\n  saveEnergyPreferences,\n} from \"../../../data/energy\";\nimport { LovelaceCardConfig } from \"../../../data/lovelace/config/card\";\nimport { showAlertDialog } from \"../../../dialogs/generic/show-dialog-box\";\nimport { haStyle } from \"../../../resources/styles\";\nimport { HomeAssistant } from \"../../../types\";\nimport \"../../config/energy/components/ha-energy-battery-settings\";\nimport \"../../config/energy/components/ha-energy-device-settings\";\nimport \"../../config/energy/components/ha-energy-gas-settings\";\nimport \"../../config/energy/components/ha-energy-grid-settings\";\nimport \"../../config/energy/components/ha-energy-solar-settings\";\nimport \"../../config/energy/components/ha-energy-water-settings\";\nimport { Lovelace, LovelaceCard } from \"../../lovelace/types\";\n\n@customElement(\"energy-setup-wizard-card\")\nexport class EnergySetupWizard extends LitElement implements LovelaceCard {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public lovelace?: Lovelace;\n\n  @state() private _info?: EnergyInfo;\n\n  @state() private _step = 0;\n\n  @state() private _preferences: EnergyPreferences = {\n    energy_sources: [],\n    device_consumption: [],\n  };\n\n  public getCardSize() {\n    return 10;\n  }\n\n  public setConfig(config: LovelaceCardConfig) {\n    if (config.preferences) {\n      this._preferences = config.preferences;\n    }\n  }\n\n  protected firstUpdated() {\n    this.hass.loadFragmentTranslation(\"config\");\n    this._fetchconfig();\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <p>\n        ${this.hass.localize(\"ui.panel.energy.setup.step\", {\n          step: this._step + 1,\n          steps: 6,\n        })}\n      </p>\n      ${this._step === 0\n        ? html`<ha-energy-grid-settings\n            .hass=${this.hass}\n            .preferences=${this._preferences}\n            @value-changed=${this._prefsChanged}\n          ></ha-energy-grid-settings>`\n        : this._step === 1\n          ? html`<ha-energy-solar-settings\n              .hass=${this.hass}\n              .preferences=${this._preferences}\n              .info=${this._info}\n              @value-changed=${this._prefsChanged}\n            ></ha-energy-solar-settings>`\n          : this._step === 2\n            ? html`<ha-energy-battery-settings\n                .hass=${this.hass}\n                .preferences=${this._preferences}\n                @value-changed=${this._prefsChanged}\n              ></ha-energy-battery-settings>`\n            : this._step === 3\n              ? html`<ha-energy-gas-settings\n                  .hass=${this.hass}\n                  .preferences=${this._preferences}\n                  @value-changed=${this._prefsChanged}\n                ></ha-energy-gas-settings>`\n              : this._step === 4\n                ? html`<ha-energy-water-settings\n                    .hass=${this.hass}\n                    .preferences=${this._preferences}\n                    @value-changed=${this._prefsChanged}\n                  ></ha-energy-water-settings>`\n                : html`<ha-energy-device-settings\n                    .hass=${this.hass}\n                    .preferences=${this._preferences}\n                    @value-changed=${this._prefsChanged}\n                  ></ha-energy-device-settings>`}\n      <div class=\"buttons\">\n        ${this._step > 0\n          ? html`<mwc-button outlined @click=${this._back}\n              >${this.hass.localize(\"ui.panel.energy.setup.back\")}</mwc-button\n            >`\n          : html`<div></div>`}\n        ${this._step < 4\n          ? html`<mwc-button unelevated @click=${this._next}\n              >${this.hass.localize(\"ui.panel.energy.setup.next\")}</mwc-button\n            >`\n          : html`<mwc-button unelevated @click=${this._setupDone}>\n              ${this.hass.localize(\"ui.panel.energy.setup.done\")}\n            </mwc-button>`}\n      </div>\n    `;\n  }\n\n  private async _fetchconfig() {\n    this._info = await getEnergyInfo(this.hass);\n  }\n\n  private _prefsChanged(ev: CustomEvent) {\n    this._preferences = ev.detail.value;\n  }\n\n  private _back() {\n    if (this._step === 0) {\n      return;\n    }\n    this._step--;\n  }\n\n  private _next() {\n    if (this._step === 5) {\n      return;\n    }\n    this._step++;\n  }\n\n  private async _setupDone() {\n    if (!this._preferences) {\n      return;\n    }\n    try {\n      this._preferences = await saveEnergyPreferences(\n        this.hass,\n        this._preferences\n      );\n    } catch (err: any) {\n      showAlertDialog(this, { title: `Failed to save config: ${err.message}` });\n    }\n    fireEvent(this, \"reload-energy-panel\");\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      css`\n        :host {\n          display: block;\n          padding: 16px;\n          max-width: 700px;\n          margin: 0 auto;\n        }\n        mwc-button {\n          margin-top: 8px;\n        }\n        .buttons {\n          display: flex;\n          justify-content: space-between;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"energy-setup-wizard-card\": EnergySetupWizard;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}