{"ast":null,"code":"import _decorate from \"@babel/runtime/helpers/decorate\";\nimport { html, LitElement, nothing } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { ensureArray } from \"../../common/array/ensure-array\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { stringCompare } from \"../../common/string/compare\";\nimport { getStatisticIds, getStatisticLabel } from \"../../data/recorder\";\nimport { documentationUrl } from \"../../util/documentation-url\";\nimport \"../ha-combo-box\";\nimport \"../ha-svg-icon\";\nimport \"./state-badge\";\nimport { fuzzyFilterSort } from \"../../common/string/filter/sequence-matching\";\nexport let HaStatisticPicker = _decorate([customElement(\"ha-statistic-picker\")], function (_initialize, _LitElement) {\n  class HaStatisticPicker extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: HaStatisticPicker,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"label\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"value\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: \"statistic-types\"\n      })],\n      key: \"statisticTypes\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean,\n        attribute: \"allow-custom-entity\"\n      })],\n      key: \"allowCustomEntity\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Array\n      })],\n      key: \"statisticIds\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"disabled\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Array,\n        attribute: \"include-statistics-unit-of-measurement\"\n      })],\n      key: \"includeStatisticsUnitOfMeasurement\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: \"include-unit-class\"\n      })],\n      key: \"includeUnitClass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: \"include-device-class\"\n      })],\n      key: \"includeDeviceClass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean,\n        attribute: \"entities-only\"\n      })],\n      key: \"entitiesOnly\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Array,\n        attribute: \"exclude-statistics\"\n      })],\n      key: \"excludeStatistics\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"helpMissingEntityUrl\",\n      value() {\n        return \"/more-info/statistics/\";\n      }\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_opened\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [query(\"ha-combo-box\", true)],\n      key: \"comboBox\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_init\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_statistics\",\n      value() {\n        return [];\n      }\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_filteredItems\",\n      value() {\n        return undefined;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_rowRenderer\",\n      value() {\n        return item => html`<mwc-list-item graphic=\"avatar\" twoline>\n      ${item.state ? html`<state-badge\n            slot=\"graphic\"\n            .stateObj=${item.state}\n            .hass=${this.hass}\n          ></state-badge>` : \"\"}\n      <span>${item.name}</span>\n      <span slot=\"secondary\"\n        >${item.id === \"\" || item.id === \"__missing\" ? html`<a\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              href=${documentationUrl(this.hass, this.helpMissingEntityUrl)}\n              >${this.hass.localize(\"ui.components.statistic-picker.learn_more\")}</a\n            >` : item.id}</span\n      >\n    </mwc-list-item>`;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_getStatistics\",\n      value() {\n        return memoizeOne((statisticIds, includeStatisticsUnitOfMeasurement, includeUnitClass, includeDeviceClass, entitiesOnly, excludeStatistics, value) => {\n          if (!statisticIds.length) {\n            return [{\n              id: \"\",\n              name: this.hass.localize(\"ui.components.statistic-picker.no_statistics\"),\n              strings: []\n            }];\n          }\n          if (includeStatisticsUnitOfMeasurement) {\n            const includeUnits = ensureArray(includeStatisticsUnitOfMeasurement);\n            statisticIds = statisticIds.filter(meta => includeUnits.includes(meta.statistics_unit_of_measurement));\n          }\n          if (includeUnitClass) {\n            const includeUnitClasses = ensureArray(includeUnitClass);\n            statisticIds = statisticIds.filter(meta => includeUnitClasses.includes(meta.unit_class));\n          }\n          if (includeDeviceClass) {\n            const includeDeviceClasses = ensureArray(includeDeviceClass);\n            statisticIds = statisticIds.filter(meta => {\n              const stateObj = this.hass.states[meta.statistic_id];\n              if (!stateObj) {\n                return true;\n              }\n              return includeDeviceClasses.includes(stateObj.attributes.device_class || \"\");\n            });\n          }\n          const output = [];\n          statisticIds.forEach(meta => {\n            if (excludeStatistics && meta.statistic_id !== value && excludeStatistics.includes(meta.statistic_id)) {\n              return;\n            }\n            const entityState = this.hass.states[meta.statistic_id];\n            if (!entityState) {\n              if (!entitiesOnly) {\n                const id = meta.statistic_id;\n                const name = getStatisticLabel(this.hass, meta.statistic_id, meta);\n                output.push({\n                  id,\n                  name,\n                  strings: [id, name]\n                });\n              }\n              return;\n            }\n            const id = meta.statistic_id;\n            const name = getStatisticLabel(this.hass, meta.statistic_id, meta);\n            output.push({\n              id,\n              name,\n              state: entityState,\n              strings: [id, name]\n            });\n          });\n          if (!output.length) {\n            return [{\n              id: \"\",\n              name: this.hass.localize(\"ui.components.statistic-picker.no_match\"),\n              strings: []\n            }];\n          }\n          if (output.length > 1) {\n            output.sort((a, b) => stringCompare(a.name || \"\", b.name || \"\", this.hass.locale.language));\n          }\n          output.push({\n            id: \"__missing\",\n            name: this.hass.localize(\"ui.components.statistic-picker.missing_entity\"),\n            strings: []\n          });\n          return output;\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"open\",\n      value:\n      /**\n       * Show only statistics natively stored with these units of measurements.\n       * @type {Array}\n       * @attr include-statistics-unit-of-measurement\n       */\n\n      /**\n       * Show only statistics with these unit classes.\n       * @attr include-unit-class\n       */\n\n      /**\n       * Show only statistics with these device classes.\n       * @attr include-device-class\n       */\n\n      /**\n       * Show only statistics on entities.\n       * @type {Boolean}\n       * @attr entities-only\n       */\n\n      /**\n       * List of statistics to be excluded.\n       * @type {Array}\n       * @attr exclude-statistics\n       */\n\n      function open() {\n        var _this$comboBox;\n        (_this$comboBox = this.comboBox) === null || _this$comboBox === void 0 || _this$comboBox.open();\n      }\n    }, {\n      kind: \"method\",\n      key: \"focus\",\n      value: function focus() {\n        var _this$comboBox2;\n        (_this$comboBox2 = this.comboBox) === null || _this$comboBox2 === void 0 || _this$comboBox2.focus();\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProps) {\n        if (!this.hasUpdated && !this.statisticIds || changedProps.has(\"statisticTypes\")) {\n          this._getStatisticIds();\n        }\n        if (!this._init && this.statisticIds || changedProps.has(\"_opened\") && this._opened) {\n          this._init = true;\n          if (this.hasUpdated) {\n            this._statistics = this._getStatistics(this.statisticIds, this.includeStatisticsUnitOfMeasurement, this.includeUnitClass, this.includeDeviceClass, this.entitiesOnly, this.excludeStatistics, this.value);\n          } else {\n            this.updateComplete.then(() => {\n              this._statistics = this._getStatistics(this.statisticIds, this.includeStatisticsUnitOfMeasurement, this.includeUnitClass, this.includeDeviceClass, this.entitiesOnly, this.excludeStatistics, this.value);\n            });\n          }\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        var _this$_filteredItems;\n        if (this._statistics.length === 0) {\n          return nothing;\n        }\n        return html`\n      <ha-combo-box\n        .hass=${this.hass}\n        .label=${this.label === undefined && this.hass ? this.hass.localize(\"ui.components.statistic-picker.statistic\") : this.label}\n        .value=${this._value}\n        .renderer=${this._rowRenderer}\n        .disabled=${this.disabled}\n        .allowCustomValue=${this.allowCustomEntity}\n        .items=${this._statistics}\n        .filteredItems=${(_this$_filteredItems = this._filteredItems) !== null && _this$_filteredItems !== void 0 ? _this$_filteredItems : this._statistics}\n        item-value-path=\"id\"\n        item-id-path=\"id\"\n        item-label-path=\"name\"\n        @opened-changed=${this._openedChanged}\n        @value-changed=${this._statisticChanged}\n        @filter-changed=${this._filterChanged}\n      ></ha-combo-box>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getStatisticIds\",\n      value: async function _getStatisticIds() {\n        this.statisticIds = await getStatisticIds(this.hass, this.statisticTypes);\n      }\n    }, {\n      kind: \"get\",\n      key: \"_value\",\n      value: function _value() {\n        return this.value || \"\";\n      }\n    }, {\n      kind: \"method\",\n      key: \"_statisticChanged\",\n      value: function _statisticChanged(ev) {\n        ev.stopPropagation();\n        let newValue = ev.detail.value;\n        if (newValue === \"__missing\") {\n          newValue = \"\";\n        }\n        if (newValue !== this._value) {\n          this._setValue(newValue);\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_openedChanged\",\n      value: function _openedChanged(ev) {\n        this._opened = ev.detail.value;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_filterChanged\",\n      value: function _filterChanged(ev) {\n        const filterString = ev.detail.value.toLowerCase();\n        this._filteredItems = filterString.length ? fuzzyFilterSort(filterString, this._statistics) : undefined;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_setValue\",\n      value: function _setValue(value) {\n        this.value = value;\n        setTimeout(() => {\n          fireEvent(this, \"value-changed\", {\n            value\n          });\n          fireEvent(this, \"change\");\n        }, 0);\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["html","LitElement","nothing","customElement","property","query","state","memoizeOne","ensureArray","fireEvent","stringCompare","getStatisticIds","getStatisticLabel","documentationUrl","fuzzyFilterSort","HaStatisticPicker","_decorate","_initialize","_LitElement","constructor","args","F","d","kind","decorators","attribute","key","value","type","Boolean","Array","undefined","item","hass","name","id","helpMissingEntityUrl","localize","statisticIds","includeStatisticsUnitOfMeasurement","includeUnitClass","includeDeviceClass","entitiesOnly","excludeStatistics","length","strings","includeUnits","filter","meta","includes","statistics_unit_of_measurement","includeUnitClasses","unit_class","includeDeviceClasses","stateObj","states","statistic_id","attributes","device_class","output","forEach","entityState","push","sort","a","b","locale","language","open","_this$comboBox","comboBox","focus","_this$comboBox2","willUpdate","changedProps","hasUpdated","has","_getStatisticIds","_init","_opened","_statistics","_getStatistics","updateComplete","then","render","_this$_filteredItems","label","_value","_rowRenderer","disabled","allowCustomEntity","_filteredItems","_openedChanged","_statisticChanged","_filterChanged","statisticTypes","ev","stopPropagation","newValue","detail","_setValue","filterString","toLowerCase","setTimeout"],"sources":["/workspaces/frontend/src/components/entity/ha-statistic-picker.ts"],"sourcesContent":["import { HassEntity } from \"home-assistant-js-websocket\";\nimport { html, LitElement, nothing, PropertyValues, TemplateResult } from \"lit\";\nimport { ComboBoxLitRenderer } from \"@vaadin/combo-box/lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { ensureArray } from \"../../common/array/ensure-array\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { stringCompare } from \"../../common/string/compare\";\nimport {\n  getStatisticIds,\n  getStatisticLabel,\n  StatisticsMetaData,\n} from \"../../data/recorder\";\nimport { ValueChangedEvent, HomeAssistant } from \"../../types\";\nimport { documentationUrl } from \"../../util/documentation-url\";\nimport \"../ha-combo-box\";\nimport type { HaComboBox } from \"../ha-combo-box\";\nimport \"../ha-svg-icon\";\nimport \"./state-badge\";\nimport {\n  fuzzyFilterSort,\n  ScorableTextItem,\n} from \"../../common/string/filter/sequence-matching\";\n\ninterface StatisticItem extends ScorableTextItem {\n  id: string;\n  name: string;\n  state?: HassEntity;\n}\n\n@customElement(\"ha-statistic-picker\")\nexport class HaStatisticPicker extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property() public label?: string;\n\n  @property() public value?: string;\n\n  @property({ attribute: \"statistic-types\" })\n  public statisticTypes?: \"mean\" | \"sum\";\n\n  @property({ type: Boolean, attribute: \"allow-custom-entity\" })\n  public allowCustomEntity;\n\n  @property({ type: Array }) public statisticIds?: StatisticsMetaData[];\n\n  @property({ type: Boolean }) public disabled = false;\n\n  /**\n   * Show only statistics natively stored with these units of measurements.\n   * @type {Array}\n   * @attr include-statistics-unit-of-measurement\n   */\n  @property({\n    type: Array,\n    attribute: \"include-statistics-unit-of-measurement\",\n  })\n  public includeStatisticsUnitOfMeasurement?: string | string[];\n\n  /**\n   * Show only statistics with these unit classes.\n   * @attr include-unit-class\n   */\n  @property({ attribute: \"include-unit-class\" })\n  public includeUnitClass?: string | string[];\n\n  /**\n   * Show only statistics with these device classes.\n   * @attr include-device-class\n   */\n  @property({ attribute: \"include-device-class\" })\n  public includeDeviceClass?: string | string[];\n\n  /**\n   * Show only statistics on entities.\n   * @type {Boolean}\n   * @attr entities-only\n   */\n  @property({ type: Boolean, attribute: \"entities-only\" })\n  public entitiesOnly = false;\n\n  /**\n   * List of statistics to be excluded.\n   * @type {Array}\n   * @attr exclude-statistics\n   */\n  @property({ type: Array, attribute: \"exclude-statistics\" })\n  public excludeStatistics?: string[];\n\n  @property() public helpMissingEntityUrl = \"/more-info/statistics/\";\n\n  @state() private _opened?: boolean;\n\n  @query(\"ha-combo-box\", true) public comboBox!: HaComboBox;\n\n  private _init = false;\n\n  private _statistics: StatisticItem[] = [];\n\n  @state() private _filteredItems?: StatisticItem[] = undefined;\n\n  private _rowRenderer: ComboBoxLitRenderer<StatisticItem> = (item) =>\n    html`<mwc-list-item graphic=\"avatar\" twoline>\n      ${item.state\n        ? html`<state-badge\n            slot=\"graphic\"\n            .stateObj=${item.state}\n            .hass=${this.hass}\n          ></state-badge>`\n        : \"\"}\n      <span>${item.name}</span>\n      <span slot=\"secondary\"\n        >${item.id === \"\" || item.id === \"__missing\"\n          ? html`<a\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              href=${documentationUrl(this.hass, this.helpMissingEntityUrl)}\n              >${this.hass.localize(\n                \"ui.components.statistic-picker.learn_more\"\n              )}</a\n            >`\n          : item.id}</span\n      >\n    </mwc-list-item>`;\n\n  private _getStatistics = memoizeOne(\n    (\n      statisticIds: StatisticsMetaData[],\n      includeStatisticsUnitOfMeasurement?: string | string[],\n      includeUnitClass?: string | string[],\n      includeDeviceClass?: string | string[],\n      entitiesOnly?: boolean,\n      excludeStatistics?: string[],\n      value?: string\n    ): StatisticItem[] => {\n      if (!statisticIds.length) {\n        return [\n          {\n            id: \"\",\n            name: this.hass.localize(\n              \"ui.components.statistic-picker.no_statistics\"\n            ),\n            strings: [],\n          },\n        ];\n      }\n\n      if (includeStatisticsUnitOfMeasurement) {\n        const includeUnits: (string | null)[] = ensureArray(\n          includeStatisticsUnitOfMeasurement\n        );\n        statisticIds = statisticIds.filter((meta) =>\n          includeUnits.includes(meta.statistics_unit_of_measurement)\n        );\n      }\n      if (includeUnitClass) {\n        const includeUnitClasses: (string | null)[] =\n          ensureArray(includeUnitClass);\n        statisticIds = statisticIds.filter((meta) =>\n          includeUnitClasses.includes(meta.unit_class)\n        );\n      }\n      if (includeDeviceClass) {\n        const includeDeviceClasses: (string | null)[] =\n          ensureArray(includeDeviceClass);\n        statisticIds = statisticIds.filter((meta) => {\n          const stateObj = this.hass.states[meta.statistic_id];\n          if (!stateObj) {\n            return true;\n          }\n          return includeDeviceClasses.includes(\n            stateObj.attributes.device_class || \"\"\n          );\n        });\n      }\n\n      const output: StatisticItem[] = [];\n      statisticIds.forEach((meta) => {\n        if (\n          excludeStatistics &&\n          meta.statistic_id !== value &&\n          excludeStatistics.includes(meta.statistic_id)\n        ) {\n          return;\n        }\n        const entityState = this.hass.states[meta.statistic_id];\n        if (!entityState) {\n          if (!entitiesOnly) {\n            const id = meta.statistic_id;\n            const name = getStatisticLabel(this.hass, meta.statistic_id, meta);\n            output.push({\n              id,\n              name,\n              strings: [id, name],\n            });\n          }\n          return;\n        }\n        const id = meta.statistic_id;\n        const name = getStatisticLabel(this.hass, meta.statistic_id, meta);\n        output.push({\n          id,\n          name,\n          state: entityState,\n          strings: [id, name],\n        });\n      });\n\n      if (!output.length) {\n        return [\n          {\n            id: \"\",\n            name: this.hass.localize(\"ui.components.statistic-picker.no_match\"),\n            strings: [],\n          },\n        ];\n      }\n\n      if (output.length > 1) {\n        output.sort((a, b) =>\n          stringCompare(a.name || \"\", b.name || \"\", this.hass.locale.language)\n        );\n      }\n\n      output.push({\n        id: \"__missing\",\n        name: this.hass.localize(\n          \"ui.components.statistic-picker.missing_entity\"\n        ),\n        strings: [],\n      });\n\n      return output;\n    }\n  );\n\n  public open() {\n    this.comboBox?.open();\n  }\n\n  public focus() {\n    this.comboBox?.focus();\n  }\n\n  public willUpdate(changedProps: PropertyValues) {\n    if (\n      (!this.hasUpdated && !this.statisticIds) ||\n      changedProps.has(\"statisticTypes\")\n    ) {\n      this._getStatisticIds();\n    }\n    if (\n      (!this._init && this.statisticIds) ||\n      (changedProps.has(\"_opened\") && this._opened)\n    ) {\n      this._init = true;\n      if (this.hasUpdated) {\n        this._statistics = this._getStatistics(\n          this.statisticIds!,\n          this.includeStatisticsUnitOfMeasurement,\n          this.includeUnitClass,\n          this.includeDeviceClass,\n          this.entitiesOnly,\n          this.excludeStatistics,\n          this.value\n        );\n      } else {\n        this.updateComplete.then(() => {\n          this._statistics = this._getStatistics(\n            this.statisticIds!,\n            this.includeStatisticsUnitOfMeasurement,\n            this.includeUnitClass,\n            this.includeDeviceClass,\n            this.entitiesOnly,\n            this.excludeStatistics,\n            this.value\n          );\n        });\n      }\n    }\n  }\n\n  protected render(): TemplateResult | typeof nothing {\n    if (this._statistics.length === 0) {\n      return nothing;\n    }\n\n    return html`\n      <ha-combo-box\n        .hass=${this.hass}\n        .label=${this.label === undefined && this.hass\n          ? this.hass.localize(\"ui.components.statistic-picker.statistic\")\n          : this.label}\n        .value=${this._value}\n        .renderer=${this._rowRenderer}\n        .disabled=${this.disabled}\n        .allowCustomValue=${this.allowCustomEntity}\n        .items=${this._statistics}\n        .filteredItems=${this._filteredItems ?? this._statistics}\n        item-value-path=\"id\"\n        item-id-path=\"id\"\n        item-label-path=\"name\"\n        @opened-changed=${this._openedChanged}\n        @value-changed=${this._statisticChanged}\n        @filter-changed=${this._filterChanged}\n      ></ha-combo-box>\n    `;\n  }\n\n  private async _getStatisticIds() {\n    this.statisticIds = await getStatisticIds(this.hass, this.statisticTypes);\n  }\n\n  private get _value() {\n    return this.value || \"\";\n  }\n\n  private _statisticChanged(ev: ValueChangedEvent<string>) {\n    ev.stopPropagation();\n    let newValue = ev.detail.value;\n    if (newValue === \"__missing\") {\n      newValue = \"\";\n    }\n\n    if (newValue !== this._value) {\n      this._setValue(newValue);\n    }\n  }\n\n  private _openedChanged(ev: ValueChangedEvent<boolean>) {\n    this._opened = ev.detail.value;\n  }\n\n  private _filterChanged(ev: CustomEvent): void {\n    const filterString = ev.detail.value.toLowerCase();\n    this._filteredItems = filterString.length\n      ? fuzzyFilterSort<StatisticItem>(filterString, this._statistics)\n      : undefined;\n  }\n\n  private _setValue(value: string) {\n    this.value = value;\n    setTimeout(() => {\n      fireEvent(this, \"value-changed\", { value });\n      fireEvent(this, \"change\");\n    }, 0);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-statistic-picker\": HaStatisticPicker;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}