{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { STATES_OFF } from \"../../../../common/const\";\nimport { computeDomain } from \"../../../../common/entity/compute_domain\";\nexport var turnOnOffEntities = function turnOnOffEntities(hass, entityIds) {\n  var turnOn = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var domainsToCall = {};\n  entityIds.forEach(function (entityId) {\n    if (STATES_OFF.includes(hass.states[entityId].state) === turnOn) {\n      var stateDomain = computeDomain(entityId);\n      var serviceDomain = [\"cover\", \"lock\"].includes(stateDomain) ? stateDomain : \"homeassistant\";\n      if (!(serviceDomain in domainsToCall)) {\n        domainsToCall[serviceDomain] = [];\n      }\n      domainsToCall[serviceDomain].push(entityId);\n    }\n  });\n  Object.keys(domainsToCall).forEach(function (domain) {\n    var service;\n    switch (domain) {\n      case \"lock\":\n        service = turnOn ? \"unlock\" : \"lock\";\n        break;\n      case \"cover\":\n        service = turnOn ? \"open_cover\" : \"close_cover\";\n        break;\n      default:\n        service = turnOn ? \"turn_on\" : \"turn_off\";\n    }\n    var entities = domainsToCall[domain];\n    hass.callService(domain, service, {\n      entity_id: entities\n    });\n  });\n};","map":{"version":3,"names":["STATES_OFF","computeDomain","turnOnOffEntities","hass","entityIds","turnOn","arguments","length","undefined","domainsToCall","forEach","entityId","includes","states","state","stateDomain","serviceDomain","push","Object","keys","domain","service","entities","callService","entity_id"],"sources":["/workspaces/frontend/src/panels/lovelace/common/entity/turn-on-off-entities.ts"],"sourcesContent":["import { STATES_OFF } from \"../../../../common/const\";\nimport { computeDomain } from \"../../../../common/entity/compute_domain\";\nimport { HomeAssistant } from \"../../../../types\";\n\nexport const turnOnOffEntities = (\n  hass: HomeAssistant,\n  entityIds: string[],\n  turnOn = true\n): void => {\n  const domainsToCall = {};\n  entityIds.forEach((entityId) => {\n    if (STATES_OFF.includes(hass.states[entityId].state) === turnOn) {\n      const stateDomain = computeDomain(entityId);\n      const serviceDomain = [\"cover\", \"lock\"].includes(stateDomain)\n        ? stateDomain\n        : \"homeassistant\";\n\n      if (!(serviceDomain in domainsToCall)) {\n        domainsToCall[serviceDomain] = [];\n      }\n      domainsToCall[serviceDomain].push(entityId);\n    }\n  });\n\n  Object.keys(domainsToCall).forEach((domain) => {\n    let service;\n    switch (domain) {\n      case \"lock\":\n        service = turnOn ? \"unlock\" : \"lock\";\n        break;\n      case \"cover\":\n        service = turnOn ? \"open_cover\" : \"close_cover\";\n        break;\n      default:\n        service = turnOn ? \"turn_on\" : \"turn_off\";\n    }\n\n    const entities = domainsToCall[domain];\n    hass.callService(domain, service, { entity_id: entities });\n  });\n};\n"],"mappings":";;;;;;;;AAAA,SAASA,UAAU,QAAQ,0BAA0B;AACrD,SAASC,aAAa,QAAQ,0CAA0C;AAGxE,OAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAC5BC,IAAmB,EACnBC,SAAmB,EAEV;EAAA,IADTC,MAAM,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;EAEb,IAAMG,aAAa,GAAG,CAAC,CAAC;EACxBL,SAAS,CAACM,OAAO,CAAC,UAACC,QAAQ,EAAK;IAC9B,IAAIX,UAAU,CAACY,QAAQ,CAACT,IAAI,CAACU,MAAM,CAACF,QAAQ,CAAC,CAACG,KAAK,CAAC,KAAKT,MAAM,EAAE;MAC/D,IAAMU,WAAW,GAAGd,aAAa,CAACU,QAAQ,CAAC;MAC3C,IAAMK,aAAa,GAAG,CAAC,OAAO,EAAE,MAAM,CAAC,CAACJ,QAAQ,CAACG,WAAW,CAAC,GACzDA,WAAW,GACX,eAAe;MAEnB,IAAI,EAAEC,aAAa,IAAIP,aAAa,CAAC,EAAE;QACrCA,aAAa,CAACO,aAAa,CAAC,GAAG,EAAE;MACnC;MACAP,aAAa,CAACO,aAAa,CAAC,CAACC,IAAI,CAACN,QAAQ,CAAC;IAC7C;EACF,CAAC,CAAC;EAEFO,MAAM,CAACC,IAAI,CAACV,aAAa,CAAC,CAACC,OAAO,CAAC,UAACU,MAAM,EAAK;IAC7C,IAAIC,OAAO;IACX,QAAQD,MAAM;MACZ,KAAK,MAAM;QACTC,OAAO,GAAGhB,MAAM,GAAG,QAAQ,GAAG,MAAM;QACpC;MACF,KAAK,OAAO;QACVgB,OAAO,GAAGhB,MAAM,GAAG,YAAY,GAAG,aAAa;QAC/C;MACF;QACEgB,OAAO,GAAGhB,MAAM,GAAG,SAAS,GAAG,UAAU;IAC7C;IAEA,IAAMiB,QAAQ,GAAGb,aAAa,CAACW,MAAM,CAAC;IACtCjB,IAAI,CAACoB,WAAW,CAACH,MAAM,EAAEC,OAAO,EAAE;MAAEG,SAAS,EAAEF;IAAS,CAAC,CAAC;EAC5D,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}