{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _templateObject, _templateObject2, _templateObject3;\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.values.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { css, html, LitElement } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport \"../ha-input-helper-text\";\nimport \"./ha-map\";\nexport var HaLocationsEditor = _decorate([customElement(\"ha-locations-editor\")], function (_initialize, _LitElement) {\n  var HaLocationsEditor = /*#__PURE__*/function (_LitElement2) {\n    _inherits(HaLocationsEditor, _LitElement2);\n    function HaLocationsEditor() {\n      var _this;\n      _classCallCheck(this, HaLocationsEditor);\n      _this = _callSuper(this, HaLocationsEditor);\n      _initialize(_assertThisInitialized(_this));\n      _this._loadPromise = import(\"leaflet\").then(function (module) {\n        return import(\"leaflet-draw\").then(function () {\n          _this.Leaflet = module.default;\n          _this._updateMarkers();\n          return _this.updateComplete.then(function () {\n            return _this.fitMap();\n          });\n        });\n      });\n      return _this;\n    }\n    return _createClass(HaLocationsEditor);\n  }(_LitElement);\n  return {\n    F: HaLocationsEditor,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"locations\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property()],\n      key: \"helper\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"autoFit\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Number\n      })],\n      key: \"zoom\",\n      value: function value() {\n        return 16;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"darkMode\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_locationMarkers\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [state()],\n      key: \"_circles\",\n      value: function value() {\n        return {};\n      }\n    }, {\n      kind: \"field\",\n      decorators: [query(\"ha-map\", true)],\n      key: \"map\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"Leaflet\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_loadPromise\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"fitMap\",\n      value: function fitMap(options) {\n        this.map.fitMap(options);\n      }\n    }, {\n      kind: \"method\",\n      key: \"fitBounds\",\n      value: function fitBounds(boundingbox, options) {\n        this.map.fitBounds(boundingbox, options);\n      }\n    }, {\n      kind: \"method\",\n      key: \"fitMarker\",\n      value: function () {\n        var _fitMarker = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(id, options) {\n          var marker, circle;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                if (this.Leaflet) {\n                  _context.next = 3;\n                  break;\n                }\n                _context.next = 3;\n                return this._loadPromise;\n              case 3:\n                if (!(!this.map.leafletMap || !this._locationMarkers)) {\n                  _context.next = 5;\n                  break;\n                }\n                return _context.abrupt(\"return\");\n              case 5:\n                marker = this._locationMarkers[id];\n                if (marker) {\n                  _context.next = 8;\n                  break;\n                }\n                return _context.abrupt(\"return\");\n              case 8:\n                if (\"getBounds\" in marker) {\n                  this.map.leafletMap.fitBounds(marker.getBounds());\n                  marker.bringToFront();\n                } else {\n                  circle = this._circles[id];\n                  if (circle) {\n                    this.map.leafletMap.fitBounds(circle.getBounds());\n                  } else {\n                    this.map.leafletMap.setView(marker.getLatLng(), (options === null || options === void 0 ? void 0 : options.zoom) || this.zoom);\n                  }\n                }\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee, this);\n        }));\n        function fitMarker(_x, _x2) {\n          return _fitMarker.apply(this, arguments);\n        }\n        return fitMarker;\n      }()\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        return html(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      <ha-map\\n        .hass=\", \"\\n        .layers=\", \"\\n        .zoom=\", \"\\n        .autoFit=\", \"\\n        ?darkMode=\", \"\\n      ></ha-map>\\n      \", \"\\n    \"])), this.hass, this._getLayers(this._circles, this._locationMarkers), this.zoom, this.autoFit, this.darkMode, this.helper ? html(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"<ha-input-helper-text>\", \"</ha-input-helper-text>\"])), this.helper) : \"\");\n      }\n    }, {\n      kind: \"field\",\n      key: \"_getLayers\",\n      value: function value() {\n        return memoizeOne(function (circles, markers) {\n          var layers = [];\n          Array.prototype.push.apply(layers, Object.values(circles));\n          if (markers) {\n            Array.prototype.push.apply(layers, Object.values(markers));\n          }\n          return layers;\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProps) {\n        _get(_getPrototypeOf(HaLocationsEditor.prototype), \"willUpdate\", this).call(this, changedProps);\n\n        // Still loading.\n        if (!this.Leaflet) {\n          return;\n        }\n        if (changedProps.has(\"locations\")) {\n          this._updateMarkers();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProps) {\n        var _this2 = this;\n        // Still loading.\n        if (!this.Leaflet) {\n          return;\n        }\n        if (changedProps.has(\"locations\")) {\n          var _this$locations;\n          var oldLocations = changedProps.get(\"locations\");\n          var movedLocations = (_this$locations = this.locations) === null || _this$locations === void 0 ? void 0 : _this$locations.filter(function (loc, idx) {\n            var _this2$map$leafletMap, _this2$map$leafletMap2;\n            return !oldLocations[idx] || (loc.latitude !== oldLocations[idx].latitude || loc.longitude !== oldLocations[idx].longitude) && ((_this2$map$leafletMap = _this2.map.leafletMap) === null || _this2$map$leafletMap === void 0 ? void 0 : _this2$map$leafletMap.getBounds().contains({\n              lat: oldLocations[idx].latitude,\n              lng: oldLocations[idx].longitude\n            })) && !((_this2$map$leafletMap2 = _this2.map.leafletMap) !== null && _this2$map$leafletMap2 !== void 0 && _this2$map$leafletMap2.getBounds().contains({\n              lat: loc.latitude,\n              lng: loc.longitude\n            }));\n          });\n          if ((movedLocations === null || movedLocations === void 0 ? void 0 : movedLocations.length) === 1) {\n            var _this$map$leafletMap;\n            (_this$map$leafletMap = this.map.leafletMap) === null || _this$map$leafletMap === void 0 || _this$map$leafletMap.panTo({\n              lat: movedLocations[0].latitude,\n              lng: movedLocations[0].longitude\n            });\n          }\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_updateLocation\",\n      value: function _updateLocation(ev) {\n        var marker = ev.target;\n        var latlng = marker.getLatLng();\n        var longitude = latlng.lng;\n        if (Math.abs(longitude) > 180.0) {\n          // Normalize longitude if map provides values beyond -180 to +180 degrees.\n          longitude = (longitude % 360.0 + 540.0) % 360.0 - 180.0;\n        }\n        var location = [latlng.lat, longitude];\n        fireEvent(this, \"location-updated\", {\n          id: marker.id,\n          location: location\n        }, {\n          bubbles: false\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_updateRadius\",\n      value: function _updateRadius(ev) {\n        var marker = ev.target;\n        var circle = this._locationMarkers[marker.id];\n        fireEvent(this, \"radius-updated\", {\n          id: marker.id,\n          radius: circle.getRadius()\n        }, {\n          bubbles: false\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_markerClicked\",\n      value: function _markerClicked(ev) {\n        var marker = ev.target;\n        fireEvent(this, \"marker-clicked\", {\n          id: marker.id\n        }, {\n          bubbles: false\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_updateMarkers\",\n      value: function _updateMarkers() {\n        var _this3 = this;\n        if (!this.locations || !this.locations.length) {\n          this._circles = {};\n          this._locationMarkers = undefined;\n          return;\n        }\n        var locationMarkers = {};\n        var circles = {};\n        var defaultZoneRadiusColor = getComputedStyle(this).getPropertyValue(\"--accent-color\");\n        this.locations.forEach(function (location) {\n          var icon;\n          if (location.icon || location.iconPath) {\n            // create icon\n            var el = document.createElement(\"div\");\n            el.className = \"named-icon\";\n            if (location.name !== undefined) {\n              el.innerText = location.name;\n            }\n            var iconEl;\n            if (location.icon) {\n              iconEl = document.createElement(\"ha-icon\");\n              iconEl.setAttribute(\"icon\", location.icon);\n            } else {\n              iconEl = document.createElement(\"ha-svg-icon\");\n              iconEl.setAttribute(\"path\", location.iconPath);\n            }\n            el.prepend(iconEl);\n            icon = _this3.Leaflet.divIcon({\n              html: el.outerHTML,\n              iconSize: [24, 24],\n              className: \"light\"\n            });\n          }\n          if (location.radius) {\n            var circle = _this3.Leaflet.circle([location.latitude, location.longitude], {\n              color: location.radius_color || defaultZoneRadiusColor,\n              radius: location.radius\n            });\n            if (location.radius_editable || location.location_editable) {\n              // @ts-ignore\n              circle.editing.enable();\n              circle.addEventListener(\"add\", function () {\n                // @ts-ignore\n                var moveMarker = circle.editing._moveMarker;\n                // @ts-ignore\n                var resizeMarker = circle.editing._resizeMarkers[0];\n                if (icon) {\n                  moveMarker.setIcon(icon);\n                }\n                resizeMarker.id = moveMarker.id = location.id;\n                moveMarker.addEventListener(\"dragend\",\n                // @ts-ignore\n                function (ev) {\n                  return _this3._updateLocation(ev);\n                }).addEventListener(\"click\",\n                // @ts-ignore\n                function (ev) {\n                  return _this3._markerClicked(ev);\n                });\n                if (location.radius_editable) {\n                  resizeMarker.addEventListener(\"dragend\",\n                  // @ts-ignore\n                  function (ev) {\n                    return _this3._updateRadius(ev);\n                  });\n                } else {\n                  resizeMarker.remove();\n                }\n              });\n              locationMarkers[location.id] = circle;\n            } else {\n              circles[location.id] = circle;\n            }\n          }\n          if (!location.radius || !location.radius_editable && !location.location_editable) {\n            var options = {\n              title: location.name,\n              draggable: location.location_editable\n            };\n            if (icon) {\n              options.icon = icon;\n            }\n            var marker = _this3.Leaflet.marker([location.latitude, location.longitude], options).addEventListener(\"dragend\", function (ev) {\n              return _this3._updateLocation(ev);\n            }).addEventListener(\n            // @ts-ignore\n            \"click\",\n            // @ts-ignore\n            function (ev) {\n              return _this3._markerClicked(ev);\n            });\n            marker.id = location.id;\n            locationMarkers[location.id] = marker;\n          }\n        });\n        this._circles = circles;\n        this._locationMarkers = locationMarkers;\n        fireEvent(this, \"markers-updated\");\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return css(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n      ha-map {\\n        display: block;\\n        height: 100%;\\n      }\\n    \"])));\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["css","html","LitElement","customElement","property","query","state","memoizeOne","fireEvent","HaLocationsEditor","_decorate","_initialize","_LitElement","_LitElement2","_inherits","_this","_classCallCheck","_callSuper","_assertThisInitialized","_loadPromise","then","module","Leaflet","default","_updateMarkers","updateComplete","fitMap","_createClass","F","d","kind","decorators","attribute","key","value","type","Boolean","Number","options","map","fitBounds","boundingbox","_fitMarker","_asyncToGenerator","_regeneratorRuntime","mark","_callee","id","marker","circle","wrap","_callee$","_context","prev","next","leafletMap","_locationMarkers","abrupt","getBounds","bringToFront","_circles","setView","getLatLng","zoom","stop","fitMarker","_x","_x2","apply","arguments","render","_templateObject","_taggedTemplateLiteral","hass","_getLayers","autoFit","darkMode","helper","_templateObject2","circles","markers","layers","Array","prototype","push","Object","values","willUpdate","changedProps","_get","_getPrototypeOf","call","has","updated","_this2","_this$locations","oldLocations","get","movedLocations","locations","filter","loc","idx","_this2$map$leafletMap","_this2$map$leafletMap2","latitude","longitude","contains","lat","lng","length","_this$map$leafletMap","panTo","_updateLocation","ev","target","latlng","Math","abs","location","bubbles","_updateRadius","radius","getRadius","_markerClicked","_this3","undefined","locationMarkers","defaultZoneRadiusColor","getComputedStyle","getPropertyValue","forEach","icon","iconPath","el","document","createElement","className","name","innerText","iconEl","setAttribute","prepend","divIcon","outerHTML","iconSize","color","radius_color","radius_editable","location_editable","editing","enable","addEventListener","moveMarker","_moveMarker","resizeMarker","_resizeMarkers","setIcon","remove","title","draggable","static","styles","_templateObject3"],"sources":["/Users/sercanardil/Desktop/frontend/src/components/map/ha-locations-editor.ts"],"sourcesContent":["import type {\n  Circle,\n  DivIcon,\n  DragEndEvent,\n  LatLng,\n  LatLngExpression,\n  Marker,\n  MarkerOptions,\n} from \"leaflet\";\nimport {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n} from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport type { LeafletModuleType } from \"../../common/dom/setup-leaflet-map\";\nimport type { HomeAssistant } from \"../../types\";\nimport \"../ha-input-helper-text\";\nimport \"./ha-map\";\nimport type { HaMap } from \"./ha-map\";\nimport { HaIcon } from \"../ha-icon\";\nimport { HaSvgIcon } from \"../ha-svg-icon\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"location-updated\": { id: string; location: [number, number] };\n    \"markers-updated\": undefined;\n    \"radius-updated\": { id: string; radius: number };\n    \"marker-clicked\": { id: string };\n  }\n}\n\nexport interface MarkerLocation {\n  latitude: number;\n  longitude: number;\n  radius?: number;\n  name?: string;\n  id: string;\n  icon?: string;\n  iconPath?: string;\n  radius_color?: string;\n  location_editable?: boolean;\n  radius_editable?: boolean;\n}\n\n@customElement(\"ha-locations-editor\")\nexport class HaLocationsEditor extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public locations?: MarkerLocation[];\n\n  @property() public helper?: string;\n\n  @property({ type: Boolean }) public autoFit = false;\n\n  @property({ type: Number }) public zoom = 16;\n\n  @property({ type: Boolean }) public darkMode = false;\n\n  @state() private _locationMarkers?: Record<string, Marker | Circle>;\n\n  @state() private _circles: Record<string, Circle> = {};\n\n  @query(\"ha-map\", true) private map!: HaMap;\n\n  private Leaflet?: LeafletModuleType;\n\n  private _loadPromise: Promise<boolean | void>;\n\n  constructor() {\n    super();\n\n    this._loadPromise = import(\"leaflet\").then((module) =>\n      import(\"leaflet-draw\").then(() => {\n        this.Leaflet = module.default as LeafletModuleType;\n        this._updateMarkers();\n        return this.updateComplete.then(() => this.fitMap());\n      })\n    );\n  }\n\n  public fitMap(options?: { zoom?: number; pad?: number }): void {\n    this.map.fitMap(options);\n  }\n\n  public fitBounds(\n    boundingbox: LatLngExpression[],\n    options?: { zoom?: number; pad?: number }\n  ) {\n    this.map.fitBounds(boundingbox, options);\n  }\n\n  public async fitMarker(\n    id: string,\n    options?: { zoom?: number }\n  ): Promise<void> {\n    if (!this.Leaflet) {\n      await this._loadPromise;\n    }\n    if (!this.map.leafletMap || !this._locationMarkers) {\n      return;\n    }\n    const marker = this._locationMarkers[id];\n    if (!marker) {\n      return;\n    }\n    if (\"getBounds\" in marker) {\n      this.map.leafletMap.fitBounds(marker.getBounds());\n      (marker as Circle).bringToFront();\n    } else {\n      const circle = this._circles[id];\n      if (circle) {\n        this.map.leafletMap.fitBounds(circle.getBounds());\n      } else {\n        this.map.leafletMap.setView(\n          marker.getLatLng(),\n          options?.zoom || this.zoom\n        );\n      }\n    }\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-map\n        .hass=${this.hass}\n        .layers=${this._getLayers(this._circles, this._locationMarkers)}\n        .zoom=${this.zoom}\n        .autoFit=${this.autoFit}\n        ?darkMode=${this.darkMode}\n      ></ha-map>\n      ${this.helper\n        ? html`<ha-input-helper-text>${this.helper}</ha-input-helper-text>`\n        : \"\"}\n    `;\n  }\n\n  private _getLayers = memoizeOne(\n    (\n      circles: Record<string, Circle>,\n      markers?: Record<string, Marker | Circle>\n    ): Array<Marker | Circle> => {\n      const layers: Array<Marker | Circle> = [];\n      Array.prototype.push.apply(layers, Object.values(circles));\n      if (markers) {\n        Array.prototype.push.apply(layers, Object.values(markers));\n      }\n      return layers;\n    }\n  );\n\n  public willUpdate(changedProps: PropertyValues): void {\n    super.willUpdate(changedProps);\n\n    // Still loading.\n    if (!this.Leaflet) {\n      return;\n    }\n\n    if (changedProps.has(\"locations\")) {\n      this._updateMarkers();\n    }\n  }\n\n  public updated(changedProps: PropertyValues): void {\n    // Still loading.\n    if (!this.Leaflet) {\n      return;\n    }\n\n    if (changedProps.has(\"locations\")) {\n      const oldLocations = changedProps.get(\"locations\");\n      const movedLocations = this.locations?.filter(\n        (loc, idx) =>\n          !oldLocations[idx] ||\n          ((loc.latitude !== oldLocations[idx].latitude ||\n            loc.longitude !== oldLocations[idx].longitude) &&\n            this.map.leafletMap?.getBounds().contains({\n              lat: oldLocations[idx].latitude,\n              lng: oldLocations[idx].longitude,\n            }) &&\n            !this.map.leafletMap\n              ?.getBounds()\n              .contains({ lat: loc.latitude, lng: loc.longitude }))\n      );\n      if (movedLocations?.length === 1) {\n        this.map.leafletMap?.panTo({\n          lat: movedLocations[0].latitude,\n          lng: movedLocations[0].longitude,\n        });\n      }\n    }\n  }\n\n  private _updateLocation(ev: DragEndEvent) {\n    const marker = ev.target;\n    const latlng: LatLng = marker.getLatLng();\n    let longitude: number = latlng.lng;\n    if (Math.abs(longitude) > 180.0) {\n      // Normalize longitude if map provides values beyond -180 to +180 degrees.\n      longitude = (((longitude % 360.0) + 540.0) % 360.0) - 180.0;\n    }\n    const location: [number, number] = [latlng.lat, longitude];\n    fireEvent(\n      this,\n      \"location-updated\",\n      { id: marker.id, location },\n      { bubbles: false }\n    );\n  }\n\n  private _updateRadius(ev: DragEndEvent) {\n    const marker = ev.target;\n    const circle = this._locationMarkers![marker.id] as Circle;\n    fireEvent(\n      this,\n      \"radius-updated\",\n      { id: marker.id, radius: circle.getRadius() },\n      { bubbles: false }\n    );\n  }\n\n  private _markerClicked(ev: DragEndEvent) {\n    const marker = ev.target;\n    fireEvent(this, \"marker-clicked\", { id: marker.id }, { bubbles: false });\n  }\n\n  private _updateMarkers(): void {\n    if (!this.locations || !this.locations.length) {\n      this._circles = {};\n      this._locationMarkers = undefined;\n      return;\n    }\n\n    const locationMarkers = {};\n    const circles = {};\n\n    const defaultZoneRadiusColor =\n      getComputedStyle(this).getPropertyValue(\"--accent-color\");\n\n    this.locations.forEach((location: MarkerLocation) => {\n      let icon: DivIcon | undefined;\n      if (location.icon || location.iconPath) {\n        // create icon\n        const el = document.createElement(\"div\");\n        el.className = \"named-icon\";\n        if (location.name !== undefined) {\n          el.innerText = location.name;\n        }\n        let iconEl: HaIcon | HaSvgIcon;\n        if (location.icon) {\n          iconEl = document.createElement(\"ha-icon\");\n          iconEl.setAttribute(\"icon\", location.icon);\n        } else {\n          iconEl = document.createElement(\"ha-svg-icon\");\n          iconEl.setAttribute(\"path\", location.iconPath!);\n        }\n        el.prepend(iconEl);\n\n        icon = this.Leaflet!.divIcon({\n          html: el.outerHTML,\n          iconSize: [24, 24],\n          className: \"light\",\n        });\n      }\n      if (location.radius) {\n        const circle = this.Leaflet!.circle(\n          [location.latitude, location.longitude],\n          {\n            color: location.radius_color || defaultZoneRadiusColor,\n            radius: location.radius,\n          }\n        );\n        if (location.radius_editable || location.location_editable) {\n          // @ts-ignore\n          circle.editing.enable();\n          circle.addEventListener(\"add\", () => {\n            // @ts-ignore\n            const moveMarker = circle.editing._moveMarker;\n            // @ts-ignore\n            const resizeMarker = circle.editing._resizeMarkers[0];\n            if (icon) {\n              moveMarker.setIcon(icon);\n            }\n            resizeMarker.id = moveMarker.id = location.id;\n            moveMarker\n              .addEventListener(\n                \"dragend\",\n                // @ts-ignore\n                (ev: DragEndEvent) => this._updateLocation(ev)\n              )\n              .addEventListener(\n                \"click\",\n                // @ts-ignore\n                (ev: MouseEvent) => this._markerClicked(ev)\n              );\n            if (location.radius_editable) {\n              resizeMarker.addEventListener(\n                \"dragend\",\n                // @ts-ignore\n                (ev: DragEndEvent) => this._updateRadius(ev)\n              );\n            } else {\n              resizeMarker.remove();\n            }\n          });\n          locationMarkers[location.id] = circle;\n        } else {\n          circles[location.id] = circle;\n        }\n      }\n      if (\n        !location.radius ||\n        (!location.radius_editable && !location.location_editable)\n      ) {\n        const options: MarkerOptions = {\n          title: location.name,\n          draggable: location.location_editable,\n        };\n\n        if (icon) {\n          options.icon = icon;\n        }\n\n        const marker = this.Leaflet!.marker(\n          [location.latitude, location.longitude],\n          options\n        )\n          .addEventListener(\"dragend\", (ev: DragEndEvent) =>\n            this._updateLocation(ev)\n          )\n          .addEventListener(\n            // @ts-ignore\n            \"click\",\n            // @ts-ignore\n            (ev: MouseEvent) => this._markerClicked(ev)\n          );\n        (marker as any).id = location.id;\n\n        locationMarkers[location.id] = marker;\n      }\n    });\n    this._circles = circles;\n    this._locationMarkers = locationMarkers;\n    fireEvent(this, \"markers-updated\");\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      ha-map {\n        display: block;\n        height: 100%;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-locations-editor\": HaLocationsEditor;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}