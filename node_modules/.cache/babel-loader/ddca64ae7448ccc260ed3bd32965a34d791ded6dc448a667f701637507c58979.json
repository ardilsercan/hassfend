{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _createForOfIteratorHelper from \"@babel/runtime/helpers/createForOfIteratorHelper\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _templateObject, _templateObject2;\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.set.difference.v2.js\";\nimport \"core-js/modules/esnext.set.intersection.v2.js\";\nimport \"core-js/modules/esnext.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/esnext.set.is-subset-of.v2.js\";\nimport \"core-js/modules/esnext.set.is-superset-of.v2.js\";\nimport \"core-js/modules/esnext.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/esnext.set.union.v2.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { __decorate } from \"tslib\";\n// Style preference for leading underscores.\n// tslint:disable:strip-private-property-underscore\nimport './mwc-list-item.js';\nimport { BaseElement } from '@material/mwc-base/base-element.js';\nimport { observer } from '@material/mwc-base/observer.js';\nimport { deepActiveElementPath, doesElementContainFocus, isNodeElement } from '@material/mwc-base/utils.js';\nimport { html } from 'lit';\nimport { property, query, queryAssignedNodes } from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport MDCListFoundation, { isIndexSet } from './mwc-list-foundation.js';\nexport { createSetFromIndex, isEventMulti, isIndexSet } from './mwc-list-foundation.js';\nfunction debounceLayout(callback) {\n  var waitInMS = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 50;\n  var timeoutId;\n  // tslint:disable-next-line\n  return function () {\n    var updateItems = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(function () {\n      callback(updateItems);\n    }, waitInMS);\n  };\n}\nvar isListItem = function isListItem(element) {\n  return element.hasAttribute('mwc-list-item');\n};\nfunction clearAndCreateItemsReadyPromise() {\n  var _this = this;\n  var oldResolver = this.itemsReadyResolver;\n  this.itemsReady = new Promise(function (res) {\n    // TODO(b/175626389): Type '(value: never[] | PromiseLike<never[]>) => void'\n    // is not assignable to type '(value?: never[] | PromiseLike<never[]> |\n    // undefined) => void'.\n    return _this.itemsReadyResolver = res;\n  });\n  oldResolver();\n}\n/**\n * @fires selected {SelectedDetail}\n * @fires action {ActionDetail}\n * @fires items-updated\n */\nexport var ListBase = /*#__PURE__*/function (_BaseElement) {\n  _inherits(ListBase, _BaseElement);\n  function ListBase() {\n    var _this2;\n    _classCallCheck(this, ListBase);\n    _this2 = _callSuper(this, ListBase);\n    _this2.mdcAdapter = null;\n    _this2.mdcFoundationClass = MDCListFoundation;\n    _this2.activatable = false;\n    _this2.multi = false;\n    _this2.wrapFocus = false;\n    _this2.itemRoles = null;\n    _this2.innerRole = null;\n    _this2.innerAriaLabel = null;\n    _this2.rootTabbable = false;\n    _this2.previousTabindex = null;\n    _this2.noninteractive = false;\n    _this2.itemsReadyResolver = function () {\n      //\n    };\n    _this2.itemsReady = Promise.resolve([]);\n    // tslint:enable:ban-ts-ignore\n    _this2.items_ = [];\n    var debouncedFunction = debounceLayout(_this2.layout.bind(_assertThisInitialized(_this2)));\n    _this2.debouncedLayout = function () {\n      var updateItems = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      clearAndCreateItemsReadyPromise.call(_assertThisInitialized(_this2));\n      debouncedFunction(updateItems);\n    };\n    return _this2;\n  }\n  // tslint:disable:ban-ts-ignore\n  _createClass(ListBase, [{\n    key: \"getUpdateComplete\",\n    value: function () {\n      var _getUpdateComplete = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var result;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _get(_getPrototypeOf(ListBase.prototype), \"getUpdateComplete\", this).call(this);\n            case 2:\n              result = _context.sent;\n              _context.next = 5;\n              return this.itemsReady;\n            case 5:\n              return _context.abrupt(\"return\", result);\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function getUpdateComplete() {\n        return _getUpdateComplete.apply(this, arguments);\n      }\n      return getUpdateComplete;\n    }()\n  }, {\n    key: \"items\",\n    get: function get() {\n      return this.items_;\n    }\n  }, {\n    key: \"updateItems\",\n    value: function updateItems() {\n      var _this3 = this;\n      var _a;\n      var nodes = (_a = this.assignedElements) !== null && _a !== void 0 ? _a : [];\n      var listItems = [];\n      var _iterator = _createForOfIteratorHelper(nodes),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var node = _step.value;\n          if (isListItem(node)) {\n            listItems.push(node);\n            node._managingList = this;\n          }\n          if (node.hasAttribute('divider') && !node.hasAttribute('role')) {\n            node.setAttribute('role', 'separator');\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      this.items_ = listItems;\n      var selectedIndices = new Set();\n      this.items_.forEach(function (item, index) {\n        if (_this3.itemRoles) {\n          item.setAttribute('role', _this3.itemRoles);\n        } else {\n          item.removeAttribute('role');\n        }\n        if (item.selected) {\n          selectedIndices.add(index);\n        }\n      });\n      if (this.multi) {\n        this.select(selectedIndices);\n      } else {\n        var index = selectedIndices.size ? selectedIndices.entries().next().value[1] : -1;\n        this.select(index);\n      }\n      var itemsUpdatedEv = new Event('items-updated', {\n        bubbles: true,\n        composed: true\n      });\n      this.dispatchEvent(itemsUpdatedEv);\n    }\n  }, {\n    key: \"selected\",\n    get: function get() {\n      var index = this.index;\n      if (!isIndexSet(index)) {\n        if (index === -1) {\n          return null;\n        }\n        return this.items[index];\n      }\n      var selected = [];\n      var _iterator2 = _createForOfIteratorHelper(index),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var entry = _step2.value;\n          selected.push(this.items[entry]);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      return selected;\n    }\n  }, {\n    key: \"index\",\n    get: function get() {\n      if (this.mdcFoundation) {\n        return this.mdcFoundation.getSelectedIndex();\n      }\n      return -1;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var role = this.innerRole === null ? undefined : this.innerRole;\n      var ariaLabel = this.innerAriaLabel === null ? undefined : this.innerAriaLabel;\n      var tabindex = this.rootTabbable ? '0' : '-1';\n      return html(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      <!-- @ts-ignore -->\\n      <ul\\n          tabindex=\", \"\\n          role=\\\"\", \"\\\"\\n          aria-label=\\\"\", \"\\\"\\n          class=\\\"mdc-deprecated-list\\\"\\n          @keydown=\", \"\\n          @focusin=\", \"\\n          @focusout=\", \"\\n          @request-selected=\", \"\\n          @list-item-rendered=\", \">\\n        <slot></slot>\\n        \", \"\\n      </ul>\\n    \"])), tabindex, ifDefined(role), ifDefined(ariaLabel), this.onKeydown, this.onFocusIn, this.onFocusOut, this.onRequestSelected, this.onListItemConnected, this.renderPlaceholder());\n    }\n  }, {\n    key: \"renderPlaceholder\",\n    value: function renderPlaceholder() {\n      var _a;\n      var nodes = (_a = this.assignedElements) !== null && _a !== void 0 ? _a : [];\n      if (this.emptyMessage !== undefined && nodes.length === 0) {\n        return html(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n        <mwc-list-item noninteractive>\", \"</mwc-list-item>\\n      \"])), this.emptyMessage);\n      }\n      return null;\n    }\n  }, {\n    key: \"firstUpdated\",\n    value: function firstUpdated() {\n      _get(_getPrototypeOf(ListBase.prototype), \"firstUpdated\", this).call(this);\n      if (!this.items.length) {\n        // required because this is called before observers\n        this.mdcFoundation.setMulti(this.multi);\n        // for when children upgrade before list\n        this.layout();\n      }\n    }\n  }, {\n    key: \"onFocusIn\",\n    value: function onFocusIn(evt) {\n      if (this.mdcFoundation && this.mdcRoot) {\n        var index = this.getIndexOfTarget(evt);\n        this.mdcFoundation.handleFocusIn(evt, index);\n      }\n    }\n  }, {\n    key: \"onFocusOut\",\n    value: function onFocusOut(evt) {\n      if (this.mdcFoundation && this.mdcRoot) {\n        var index = this.getIndexOfTarget(evt);\n        this.mdcFoundation.handleFocusOut(evt, index);\n      }\n    }\n  }, {\n    key: \"onKeydown\",\n    value: function onKeydown(evt) {\n      if (this.mdcFoundation && this.mdcRoot) {\n        var index = this.getIndexOfTarget(evt);\n        var target = evt.target;\n        var isRootListItem = isListItem(target);\n        this.mdcFoundation.handleKeydown(evt, isRootListItem, index);\n      }\n    }\n  }, {\n    key: \"onRequestSelected\",\n    value: function onRequestSelected(evt) {\n      if (this.mdcFoundation) {\n        var index = this.getIndexOfTarget(evt);\n        // might happen in shady dom slowness. Recalc children\n        if (index === -1) {\n          this.layout();\n          index = this.getIndexOfTarget(evt);\n          // still not found; may not be mwc-list-item. Unsupported case.\n          if (index === -1) {\n            return;\n          }\n        }\n        var element = this.items[index];\n        if (element.disabled) {\n          return;\n        }\n        var selected = evt.detail.selected;\n        var source = evt.detail.source;\n        this.mdcFoundation.handleSingleSelection(index, source === 'interaction', selected);\n        evt.stopPropagation();\n      }\n    }\n  }, {\n    key: \"getIndexOfTarget\",\n    value: function getIndexOfTarget(evt) {\n      var elements = this.items;\n      var path = evt.composedPath();\n      var _iterator3 = _createForOfIteratorHelper(path),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var pathItem = _step3.value;\n          var index = -1;\n          if (isNodeElement(pathItem) && isListItem(pathItem)) {\n            index = elements.indexOf(pathItem);\n          }\n          if (index !== -1) {\n            return index;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      return -1;\n    }\n  }, {\n    key: \"createAdapter\",\n    value: function createAdapter() {\n      var _this4 = this;\n      this.mdcAdapter = {\n        getListItemCount: function getListItemCount() {\n          if (_this4.mdcRoot) {\n            return _this4.items.length;\n          }\n          return 0;\n        },\n        getFocusedElementIndex: this.getFocusedItemIndex,\n        getAttributeForElementIndex: function getAttributeForElementIndex(index, attr) {\n          var listElement = _this4.mdcRoot;\n          if (!listElement) {\n            return '';\n          }\n          var element = _this4.items[index];\n          return element ? element.getAttribute(attr) : '';\n        },\n        setAttributeForElementIndex: function setAttributeForElementIndex(index, attr, val) {\n          if (!_this4.mdcRoot) {\n            return;\n          }\n          var element = _this4.items[index];\n          if (element) {\n            element.setAttribute(attr, val);\n          }\n        },\n        focusItemAtIndex: function focusItemAtIndex(index) {\n          var element = _this4.items[index];\n          if (element) {\n            element.focus();\n          }\n        },\n        setTabIndexForElementIndex: function setTabIndexForElementIndex(index, value) {\n          var item = _this4.items[index];\n          if (item) {\n            item.tabindex = value;\n          }\n        },\n        notifyAction: function notifyAction(index) {\n          var init = {\n            bubbles: true,\n            composed: true\n          };\n          init.detail = {\n            index: index\n          };\n          var ev = new CustomEvent('action', init);\n          _this4.dispatchEvent(ev);\n        },\n        notifySelected: function notifySelected(index, diff) {\n          var init = {\n            bubbles: true,\n            composed: true\n          };\n          init.detail = {\n            index: index,\n            diff: diff\n          };\n          var ev = new CustomEvent('selected', init);\n          _this4.dispatchEvent(ev);\n        },\n        isFocusInsideList: function isFocusInsideList() {\n          return doesElementContainFocus(_this4);\n        },\n        isRootFocused: function isRootFocused() {\n          var mdcRoot = _this4.mdcRoot;\n          var root = mdcRoot.getRootNode();\n          return root.activeElement === mdcRoot;\n        },\n        setDisabledStateForElementIndex: function setDisabledStateForElementIndex(index, value) {\n          var item = _this4.items[index];\n          if (!item) {\n            return;\n          }\n          item.disabled = value;\n        },\n        getDisabledStateForElementIndex: function getDisabledStateForElementIndex(index) {\n          var item = _this4.items[index];\n          if (!item) {\n            return false;\n          }\n          return item.disabled;\n        },\n        setSelectedStateForElementIndex: function setSelectedStateForElementIndex(index, value) {\n          var item = _this4.items[index];\n          if (!item) {\n            return;\n          }\n          item.selected = value;\n        },\n        getSelectedStateForElementIndex: function getSelectedStateForElementIndex(index) {\n          var item = _this4.items[index];\n          if (!item) {\n            return false;\n          }\n          return item.selected;\n        },\n        setActivatedStateForElementIndex: function setActivatedStateForElementIndex(index, value) {\n          var item = _this4.items[index];\n          if (!item) {\n            return;\n          }\n          item.activated = value;\n        }\n      };\n      return this.mdcAdapter;\n    }\n  }, {\n    key: \"selectUi\",\n    value: function selectUi(index) {\n      var activate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var item = this.items[index];\n      if (item) {\n        item.selected = true;\n        item.activated = activate;\n      }\n    }\n  }, {\n    key: \"deselectUi\",\n    value: function deselectUi(index) {\n      var item = this.items[index];\n      if (item) {\n        item.selected = false;\n        item.activated = false;\n      }\n    }\n  }, {\n    key: \"select\",\n    value: function select(index) {\n      if (!this.mdcFoundation) {\n        return;\n      }\n      this.mdcFoundation.setSelectedIndex(index);\n    }\n  }, {\n    key: \"toggle\",\n    value: function toggle(index, force) {\n      if (this.multi) {\n        this.mdcFoundation.toggleMultiAtIndex(index, force);\n      }\n    }\n  }, {\n    key: \"onListItemConnected\",\n    value: function onListItemConnected(e) {\n      var target = e.target;\n      this.layout(this.items.indexOf(target) === -1);\n    }\n  }, {\n    key: \"layout\",\n    value: function layout() {\n      var updateItems = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (updateItems) {\n        this.updateItems();\n      }\n      var first = this.items[0];\n      var _iterator4 = _createForOfIteratorHelper(this.items),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var item = _step4.value;\n          item.tabindex = -1;\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n      if (first) {\n        if (this.noninteractive) {\n          if (!this.previousTabindex) {\n            this.previousTabindex = first;\n          }\n        } else {\n          first.tabindex = 0;\n        }\n      }\n      this.itemsReadyResolver();\n    }\n  }, {\n    key: \"getFocusedItemIndex\",\n    value: function getFocusedItemIndex() {\n      if (!this.mdcRoot) {\n        return -1;\n      }\n      if (!this.items.length) {\n        return -1;\n      }\n      var activeElementPath = deepActiveElementPath();\n      if (!activeElementPath.length) {\n        return -1;\n      }\n      for (var i = activeElementPath.length - 1; i >= 0; i--) {\n        var activeItem = activeElementPath[i];\n        if (isListItem(activeItem)) {\n          return this.items.indexOf(activeItem);\n        }\n      }\n      return -1;\n    }\n  }, {\n    key: \"focusItemAtIndex\",\n    value: function focusItemAtIndex(index) {\n      var _iterator5 = _createForOfIteratorHelper(this.items),\n        _step5;\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var item = _step5.value;\n          if (item.tabindex === 0) {\n            item.tabindex = -1;\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n      this.items[index].tabindex = 0;\n      this.items[index].focus();\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      var root = this.mdcRoot;\n      if (root) {\n        root.focus();\n      }\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      var root = this.mdcRoot;\n      if (root) {\n        root.blur();\n      }\n    }\n  }]);\n  return ListBase;\n}(BaseElement);\n__decorate([property({\n  type: String\n})], ListBase.prototype, \"emptyMessage\", void 0);\n__decorate([query('.mdc-deprecated-list')], ListBase.prototype, \"mdcRoot\", void 0);\n__decorate([queryAssignedNodes('', true, '*')], ListBase.prototype, \"assignedElements\", void 0);\n__decorate([queryAssignedNodes('', true, '[tabindex=\"0\"]')], ListBase.prototype, \"tabbableElements\", void 0);\n__decorate([property({\n  type: Boolean\n}), observer(function (value) {\n  if (this.mdcFoundation) {\n    this.mdcFoundation.setUseActivatedClass(value);\n  }\n})], ListBase.prototype, \"activatable\", void 0);\n__decorate([property({\n  type: Boolean\n}), observer(function (newValue, oldValue) {\n  if (this.mdcFoundation) {\n    this.mdcFoundation.setMulti(newValue);\n  }\n  if (oldValue !== undefined) {\n    this.layout();\n  }\n})], ListBase.prototype, \"multi\", void 0);\n__decorate([property({\n  type: Boolean\n}), observer(function (value) {\n  if (this.mdcFoundation) {\n    this.mdcFoundation.setWrapFocus(value);\n  }\n})], ListBase.prototype, \"wrapFocus\", void 0);\n__decorate([property({\n  type: String\n}), observer(function (_newValue, oldValue) {\n  if (oldValue !== undefined) {\n    this.updateItems();\n  }\n})], ListBase.prototype, \"itemRoles\", void 0);\n__decorate([property({\n  type: String\n})], ListBase.prototype, \"innerRole\", void 0);\n__decorate([property({\n  type: String\n})], ListBase.prototype, \"innerAriaLabel\", void 0);\n__decorate([property({\n  type: Boolean\n})], ListBase.prototype, \"rootTabbable\", void 0);\n__decorate([property({\n  type: Boolean,\n  reflect: true\n}), observer(function (value) {\n  var _a, _b;\n  if (value) {\n    var tabbable = (_b = (_a = this.tabbableElements) === null || _a === void 0 ? void 0 : _a[0]) !== null && _b !== void 0 ? _b : null;\n    this.previousTabindex = tabbable;\n    if (tabbable) {\n      tabbable.setAttribute('tabindex', '-1');\n    }\n  } else if (!value && this.previousTabindex) {\n    this.previousTabindex.setAttribute('tabindex', '0');\n    this.previousTabindex = null;\n  }\n})], ListBase.prototype, \"noninteractive\", void 0);","map":{"version":3,"names":["BaseElement","observer","deepActiveElementPath","doesElementContainFocus","isNodeElement","html","property","query","queryAssignedNodes","ifDefined","MDCListFoundation","isIndexSet","createSetFromIndex","isEventMulti","debounceLayout","callback","waitInMS","arguments","length","undefined","timeoutId","updateItems","clearTimeout","setTimeout","isListItem","element","hasAttribute","clearAndCreateItemsReadyPromise","_this","oldResolver","itemsReadyResolver","itemsReady","Promise","res","ListBase","_BaseElement","_inherits","_this2","_classCallCheck","_callSuper","mdcAdapter","mdcFoundationClass","activatable","multi","wrapFocus","itemRoles","innerRole","innerAriaLabel","rootTabbable","previousTabindex","noninteractive","resolve","items_","debouncedFunction","layout","bind","_assertThisInitialized","debouncedLayout","call","_createClass","key","value","_getUpdateComplete","_asyncToGenerator","_regeneratorRuntime","mark","_callee","result","wrap","_callee$","_context","prev","next","_get","_getPrototypeOf","prototype","sent","abrupt","stop","getUpdateComplete","apply","get","_this3","nodes","_a","assignedElements","listItems","_iterator","_createForOfIteratorHelper","_step","s","n","done","node","push","_managingList","setAttribute","err","e","f","selectedIndices","Set","forEach","item","index","removeAttribute","selected","add","select","size","entries","itemsUpdatedEv","Event","bubbles","composed","dispatchEvent","items","_iterator2","_step2","entry","mdcFoundation","getSelectedIndex","render","role","ariaLabel","tabindex","_templateObject","_taggedTemplateLiteral","onKeydown","onFocusIn","onFocusOut","onRequestSelected","onListItemConnected","renderPlaceholder","emptyMessage","_templateObject2","firstUpdated","setMulti","evt","mdcRoot","getIndexOfTarget","handleFocusIn","handleFocusOut","target","isRootListItem","handleKeydown","disabled","detail","source","handleSingleSelection","stopPropagation","elements","path","composedPath","_iterator3","_step3","pathItem","indexOf","createAdapter","_this4","getListItemCount","getFocusedElementIndex","getFocusedItemIndex","getAttributeForElementIndex","attr","listElement","getAttribute","setAttributeForElementIndex","val","focusItemAtIndex","focus","setTabIndexForElementIndex","notifyAction","init","ev","CustomEvent","notifySelected","diff","isFocusInsideList","isRootFocused","root","getRootNode","activeElement","setDisabledStateForElementIndex","getDisabledStateForElementIndex","setSelectedStateForElementIndex","getSelectedStateForElementIndex","setActivatedStateForElementIndex","activated","selectUi","activate","deselectUi","setSelectedIndex","toggle","force","toggleMultiAtIndex","first","_iterator4","_step4","activeElementPath","i","activeItem","_iterator5","_step5","blur","__decorate","type","String","Boolean","setUseActivatedClass","newValue","oldValue","setWrapFocus","_newValue","reflect","tabbable","_b","tabbableElements"],"sources":["mwc-list-base.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Style preference for leading underscores.\n// tslint:disable:strip-private-property-underscore\n\nimport './mwc-list-item.js';\n\nimport {BaseElement} from '@material/mwc-base/base-element.js';\nimport {observer} from '@material/mwc-base/observer.js';\nimport {deepActiveElementPath, doesElementContainFocus, isNodeElement} from '@material/mwc-base/utils.js';\nimport {html} from 'lit';\nimport {property, query, queryAssignedNodes} from 'lit/decorators.js';\nimport {ifDefined} from 'lit/directives/if-defined.js';\n\nimport {MDCListAdapter} from './mwc-list-adapter.js';\nimport MDCListFoundation, {ActionDetail, isIndexSet, SelectedDetail} from './mwc-list-foundation.js';\nimport {MWCListIndex} from './mwc-list-foundation.js';\nimport {Layoutable, ListItemBase, RequestSelectedDetail} from './mwc-list-item-base.js';\n\nexport {ActionDetail, createSetFromIndex, isEventMulti, isIndexSet, MultiSelectedEvent, MWCListIndex, SelectedDetail, SelectedEvent, SingleSelectedEvent} from './mwc-list-foundation.js';\n\nfunction debounceLayout(\n    callback: (updateItems: boolean) => void, waitInMS = 50) {\n  let timeoutId: number;\n  // tslint:disable-next-line\n  return function(updateItems = true) {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => {\n                  callback(updateItems);\n                }, waitInMS) as unknown as number;\n  };\n}\n\nconst isListItem = (element: Element): element is ListItemBase => {\n  return element.hasAttribute('mwc-list-item');\n};\n\nfunction clearAndCreateItemsReadyPromise(this: ListBase) {\n  const oldResolver = this.itemsReadyResolver;\n  this.itemsReady = new Promise((res) => {\n    // TODO(b/175626389): Type '(value: never[] | PromiseLike<never[]>) => void'\n    // is not assignable to type '(value?: never[] | PromiseLike<never[]> |\n    // undefined) => void'.\n    return this.itemsReadyResolver = res as any;\n  });\n  oldResolver();\n}\n\n/**\n * @fires selected {SelectedDetail}\n * @fires action {ActionDetail}\n * @fires items-updated\n */\nexport abstract class ListBase extends BaseElement implements Layoutable {\n  protected mdcFoundation!: MDCListFoundation;\n  protected mdcAdapter: MDCListAdapter|null = null;\n\n  protected readonly mdcFoundationClass = MDCListFoundation;\n\n  @property({type: String}) emptyMessage: string|undefined;\n\n  @query('.mdc-deprecated-list') protected mdcRoot!: HTMLElement;\n\n  @queryAssignedNodes('', true, '*')\n  protected assignedElements!: HTMLElement[]|null;\n  @queryAssignedNodes('', true, '[tabindex=\"0\"]')\n  protected tabbableElements!: HTMLElement[]|null;\n\n  @property({type: Boolean})\n  @observer(function(this: ListBase, value: boolean) {\n    if (this.mdcFoundation) {\n      this.mdcFoundation.setUseActivatedClass(value);\n    }\n  })\n  activatable = false;\n\n  @property({type: Boolean})\n  @observer(function(this: ListBase, newValue: boolean, oldValue: boolean) {\n    if (this.mdcFoundation) {\n      this.mdcFoundation.setMulti(newValue);\n    }\n\n    if (oldValue !== undefined) {\n      this.layout();\n    }\n  })\n  multi = false;\n\n  @property({type: Boolean})\n  @observer(function(this: ListBase, value: boolean) {\n    if (this.mdcFoundation) {\n      this.mdcFoundation.setWrapFocus(value);\n    }\n  })\n  wrapFocus = false;\n\n  @property({type: String})\n  @observer(function(this: ListBase, _newValue, oldValue: string|null) {\n    if (oldValue !== undefined) {\n      this.updateItems();\n    }\n  })\n  itemRoles: string|null = null;\n\n  @property({type: String}) innerRole: string|null = null;\n\n  @property({type: String}) innerAriaLabel: string|null = null;\n\n  @property({type: Boolean}) rootTabbable = false;\n\n  protected previousTabindex: Element|null = null;\n\n  @property({type: Boolean, reflect: true})\n  @observer(function(this: ListBase, value: boolean) {\n    if (value) {\n      const tabbable = this.tabbableElements?.[0] ?? null;\n      this.previousTabindex = tabbable;\n      if (tabbable) {\n        tabbable.setAttribute('tabindex', '-1');\n      }\n    } else if (!value && this.previousTabindex) {\n      this.previousTabindex.setAttribute('tabindex', '0');\n      this.previousTabindex = null;\n    }\n  })\n  noninteractive = false;\n\n  debouncedLayout: (updateItems?: boolean) => void | undefined;\n  protected itemsReadyResolver:\n      (value?: (PromiseLike<never[]>|never[]|undefined)) => void =\n          (() => {\n               //\n           }) as(value?: (PromiseLike<unknown[]>|unknown[])) => void;\n\n  constructor() {\n    super();\n    const debouncedFunction = debounceLayout(this.layout.bind(this));\n    this.debouncedLayout = (updateItems = true) => {\n      clearAndCreateItemsReadyPromise.call(this);\n\n      debouncedFunction(updateItems);\n    };\n  }\n\n  itemsReady = Promise.resolve([]);\n\n  // tslint:disable:ban-ts-ignore\n  protected override async getUpdateComplete() {\n    // @ts-ignore\n    const result = await super.getUpdateComplete();\n    await this.itemsReady;\n    return result;\n  }\n  // tslint:enable:ban-ts-ignore\n\n\n  protected items_: ListItemBase[] = [];\n\n  get items(): ListItemBase[] {\n    return this.items_;\n  }\n\n  protected updateItems() {\n    const nodes = this.assignedElements ?? [];\n    const listItems: ListItemBase[] = [];\n\n    for (const node of nodes) {\n      if (isListItem(node)) {\n        listItems.push(node);\n        node._managingList = this;\n      }\n\n      if (node.hasAttribute('divider') && !node.hasAttribute('role')) {\n        node.setAttribute('role', 'separator');\n      }\n    }\n\n    this.items_ = listItems;\n    const selectedIndices = new Set<number>();\n\n    this.items_.forEach((item, index) => {\n      if (this.itemRoles) {\n        item.setAttribute('role', this.itemRoles);\n      } else {\n        item.removeAttribute('role');\n      }\n\n      if (item.selected) {\n        selectedIndices.add(index);\n      }\n    });\n\n    if (this.multi) {\n      this.select(selectedIndices);\n    } else {\n      const index =\n          selectedIndices.size ? selectedIndices.entries().next().value[1] : -1;\n      this.select(index);\n    }\n\n    const itemsUpdatedEv =\n        new Event('items-updated', {bubbles: true, composed: true});\n    this.dispatchEvent(itemsUpdatedEv);\n  }\n\n  get selected(): ListItemBase|ListItemBase[]|null {\n    const index = this.index;\n\n    if (!isIndexSet(index)) {\n      if (index === -1) {\n        return null;\n      }\n\n      return this.items[index];\n    }\n\n    const selected: ListItemBase[] = [];\n\n    for (const entry of index) {\n      selected.push(this.items[entry]);\n    }\n\n    return selected;\n  }\n\n  get index(): MWCListIndex {\n    if (this.mdcFoundation) {\n      return this.mdcFoundation.getSelectedIndex();\n    }\n\n    return -1;\n  }\n\n  override render() {\n    const role = this.innerRole === null ? undefined : this.innerRole;\n    const ariaLabel =\n        this.innerAriaLabel === null ? undefined : this.innerAriaLabel;\n    const tabindex = this.rootTabbable ? '0' : '-1';\n\n    return html`\n      <!-- @ts-ignore -->\n      <ul\n          tabindex=${tabindex}\n          role=\"${ifDefined(role)}\"\n          aria-label=\"${ifDefined(ariaLabel)}\"\n          class=\"mdc-deprecated-list\"\n          @keydown=${this.onKeydown}\n          @focusin=${this.onFocusIn}\n          @focusout=${this.onFocusOut}\n          @request-selected=${this.onRequestSelected}\n          @list-item-rendered=${this.onListItemConnected}>\n        <slot></slot>\n        ${this.renderPlaceholder()}\n      </ul>\n    `;\n  }\n\n  renderPlaceholder() {\n    const nodes = this.assignedElements ?? [];\n    if (this.emptyMessage !== undefined && nodes.length === 0) {\n      return html`\n        <mwc-list-item noninteractive>${this.emptyMessage}</mwc-list-item>\n      `;\n    }\n\n    return null;\n  }\n\n  override firstUpdated() {\n    super.firstUpdated();\n\n    if (!this.items.length) {\n      // required because this is called before observers\n      this.mdcFoundation.setMulti(this.multi);\n      // for when children upgrade before list\n      this.layout();\n    }\n  }\n\n  protected onFocusIn(evt: FocusEvent) {\n    if (this.mdcFoundation && this.mdcRoot) {\n      const index = this.getIndexOfTarget(evt);\n      this.mdcFoundation.handleFocusIn(evt, index);\n    }\n  }\n\n  protected onFocusOut(evt: FocusEvent) {\n    if (this.mdcFoundation && this.mdcRoot) {\n      const index = this.getIndexOfTarget(evt);\n      this.mdcFoundation.handleFocusOut(evt, index);\n    }\n  }\n\n  protected onKeydown(evt: KeyboardEvent) {\n    if (this.mdcFoundation && this.mdcRoot) {\n      const index = this.getIndexOfTarget(evt);\n      const target = evt.target as Element;\n      const isRootListItem = isListItem(target);\n      this.mdcFoundation.handleKeydown(evt, isRootListItem, index);\n    }\n  }\n\n  protected onRequestSelected(evt: CustomEvent<RequestSelectedDetail>) {\n    if (this.mdcFoundation) {\n      let index = this.getIndexOfTarget(evt);\n\n      // might happen in shady dom slowness. Recalc children\n      if (index === -1) {\n        this.layout();\n        index = this.getIndexOfTarget(evt);\n\n        // still not found; may not be mwc-list-item. Unsupported case.\n        if (index === -1) {\n          return;\n        }\n      }\n\n      const element = this.items[index];\n\n      if (element.disabled) {\n        return;\n      }\n\n      const selected = evt.detail.selected;\n      const source = evt.detail.source;\n\n      this.mdcFoundation.handleSingleSelection(\n          index, source === 'interaction', selected);\n\n      evt.stopPropagation();\n    }\n  }\n\n  protected getIndexOfTarget(evt: Event): number {\n    const elements = this.items;\n    const path = evt.composedPath();\n\n    for (const pathItem of path as Node[]) {\n      let index = -1;\n      if (isNodeElement(pathItem) && isListItem(pathItem)) {\n        index = elements.indexOf(pathItem);\n      }\n\n      if (index !== -1) {\n        return index;\n      }\n    }\n\n    return -1;\n  }\n\n  protected createAdapter(): MDCListAdapter {\n    this.mdcAdapter = {\n      getListItemCount: () => {\n        if (this.mdcRoot) {\n          return this.items.length;\n        }\n\n        return 0;\n      },\n      getFocusedElementIndex: this.getFocusedItemIndex,\n      getAttributeForElementIndex: (index, attr) => {\n        const listElement = this.mdcRoot;\n        if (!listElement) {\n          return '';\n        }\n\n        const element = this.items[index];\n        return element ? element.getAttribute(attr) : '';\n      },\n      setAttributeForElementIndex: (index, attr, val) => {\n        if (!this.mdcRoot) {\n          return;\n        }\n\n        const element = this.items[index];\n\n        if (element) {\n          element.setAttribute(attr, val);\n        }\n      },\n      focusItemAtIndex: (index) => {\n        const element = this.items[index];\n        if (element) {\n          element.focus();\n        }\n      },\n      setTabIndexForElementIndex: (index, value) => {\n        const item = this.items[index];\n\n        if (item) {\n          item.tabindex = value;\n        }\n      },\n      notifyAction: (index) => {\n        const init: CustomEventInit = {bubbles: true, composed: true};\n        init.detail = {index};\n        const ev = new CustomEvent<ActionDetail>('action', init);\n        this.dispatchEvent(ev);\n      },\n      notifySelected: (index, diff) => {\n        const init: CustomEventInit = {bubbles: true, composed: true};\n        init.detail = {index, diff};\n        const ev = new CustomEvent<SelectedDetail>('selected', init);\n        this.dispatchEvent(ev);\n      },\n      isFocusInsideList: () => {\n        return doesElementContainFocus(this);\n      },\n      isRootFocused: () => {\n        const mdcRoot = this.mdcRoot;\n        const root = mdcRoot.getRootNode() as unknown as DocumentOrShadowRoot;\n        return root.activeElement === mdcRoot;\n      },\n      setDisabledStateForElementIndex: (index, value) => {\n        const item = this.items[index];\n\n        if (!item) {\n          return;\n        }\n\n        item.disabled = value;\n      },\n      getDisabledStateForElementIndex: (index) => {\n        const item = this.items[index];\n\n        if (!item) {\n          return false;\n        }\n\n        return item.disabled;\n      },\n      setSelectedStateForElementIndex: (index, value) => {\n        const item = this.items[index];\n\n        if (!item) {\n          return;\n        }\n\n        item.selected = value;\n      },\n      getSelectedStateForElementIndex: (index) => {\n        const item = this.items[index];\n\n        if (!item) {\n          return false;\n        }\n\n        return item.selected;\n      },\n      setActivatedStateForElementIndex: (index, value) => {\n        const item = this.items[index];\n\n        if (!item) {\n          return;\n        }\n\n        item.activated = value;\n      },\n    };\n\n    return this.mdcAdapter;\n  }\n\n  protected selectUi(index: number, activate = false) {\n    const item = this.items[index];\n    if (item) {\n      item.selected = true;\n      item.activated = activate;\n    }\n  }\n\n  protected deselectUi(index: number) {\n    const item = this.items[index];\n    if (item) {\n      item.selected = false;\n      item.activated = false;\n    }\n  }\n\n  select(index: MWCListIndex) {\n    if (!this.mdcFoundation) {\n      return;\n    }\n\n    this.mdcFoundation.setSelectedIndex(index);\n  }\n\n  toggle(index: number, force?: boolean) {\n    if (this.multi) {\n      this.mdcFoundation.toggleMultiAtIndex(index, force);\n    }\n  }\n\n  protected onListItemConnected(e: CustomEvent) {\n    const target = e.target as ListItemBase;\n\n    this.layout(this.items.indexOf(target) === -1);\n  }\n\n  layout(updateItems = true) {\n    if (updateItems) {\n      this.updateItems();\n    }\n\n    const first: ListItemBase|undefined = this.items[0];\n\n    for (const item of this.items) {\n      item.tabindex = -1;\n    }\n\n    if (first) {\n      if (this.noninteractive) {\n        if (!this.previousTabindex) {\n          this.previousTabindex = first;\n        }\n      } else {\n        first.tabindex = 0;\n      }\n    }\n\n    this.itemsReadyResolver();\n  }\n\n  getFocusedItemIndex() {\n    if (!this.mdcRoot) {\n      return -1;\n    }\n\n    if (!this.items.length) {\n      return -1;\n    }\n\n    const activeElementPath = deepActiveElementPath();\n\n    if (!activeElementPath.length) {\n      return -1;\n    }\n\n    for (let i = activeElementPath.length - 1; i >= 0; i--) {\n      const activeItem = activeElementPath[i];\n\n      if (isListItem(activeItem)) {\n        return this.items.indexOf(activeItem);\n      }\n    }\n\n    return -1;\n  }\n\n  focusItemAtIndex(index: number) {\n    for (const item of this.items) {\n      if (item.tabindex === 0) {\n        item.tabindex = -1;\n        break;\n      }\n    }\n\n    this.items[index].tabindex = 0;\n    this.items[index].focus();\n  }\n\n  override focus() {\n    const root = this.mdcRoot;\n\n    if (root) {\n      root.focus();\n    }\n  }\n\n  override blur() {\n    const root = this.mdcRoot;\n\n    if (root) {\n      root.blur();\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}