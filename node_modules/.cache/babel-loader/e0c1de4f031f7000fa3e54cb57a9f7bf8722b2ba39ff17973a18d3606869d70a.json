{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport { loadJS, loadModule } from \"../../common/dom/load_resource\";\n// Make sure we only import every JS-based panel once (HTML import has this built-in)\nvar JS_CACHE = {};\nexport var getUrl = function getUrl(panelConfig) {\n  if (panelConfig.html_url) {\n    return {\n      type: \"html\",\n      url: panelConfig.html_url\n    };\n  }\n\n  // if both module and JS provided, base url on frontend build\n  if (panelConfig.module_url && panelConfig.js_url) {\n    if (__BUILD__ === \"latest\") {\n      return {\n        type: \"module\",\n        url: panelConfig.module_url\n      };\n    }\n    return {\n      type: \"js\",\n      url: panelConfig.js_url\n    };\n  }\n  if (panelConfig.module_url) {\n    return {\n      type: \"module\",\n      url: panelConfig.module_url\n    };\n  }\n  return {\n    type: \"js\",\n    url: panelConfig.js_url\n  };\n};\nexport var loadCustomPanel = function loadCustomPanel(panelConfig) {\n  var panelSource = getUrl(panelConfig);\n  if (panelSource.type === \"js\") {\n    if (!(panelSource.url in JS_CACHE)) {\n      JS_CACHE[panelSource.url] = loadJS(panelSource.url);\n    }\n    return JS_CACHE[panelSource.url];\n  }\n  if (panelSource.type === \"module\") {\n    return loadModule(panelSource.url);\n  }\n  return Promise.reject(\"No valid url found in panel config.\");\n};","map":{"version":3,"names":["loadJS","loadModule","JS_CACHE","getUrl","panelConfig","html_url","type","url","module_url","js_url","__BUILD__","loadCustomPanel","panelSource","Promise","reject"],"sources":["/Users/sercanardil/Desktop/frontend/src/util/custom-panel/load-custom-panel.ts"],"sourcesContent":["import { loadJS, loadModule } from \"../../common/dom/load_resource\";\nimport { CustomPanelConfig } from \"../../data/panel_custom\";\n\n// Make sure we only import every JS-based panel once (HTML import has this built-in)\nconst JS_CACHE = {};\n\nexport const getUrl = (\n  panelConfig: CustomPanelConfig\n): { type: \"module\" | \"html\" | \"js\"; url: string } => {\n  if (panelConfig.html_url) {\n    return {\n      type: \"html\",\n      url: panelConfig.html_url,\n    };\n  }\n\n  // if both module and JS provided, base url on frontend build\n  if (panelConfig.module_url && panelConfig.js_url) {\n    if (__BUILD__ === \"latest\") {\n      return {\n        type: \"module\",\n        url: panelConfig.module_url,\n      };\n    }\n\n    return {\n      type: \"js\",\n      url: panelConfig.js_url,\n    };\n  }\n\n  if (panelConfig.module_url) {\n    return {\n      type: \"module\",\n      url: panelConfig.module_url,\n    };\n  }\n\n  return {\n    type: \"js\",\n    url: panelConfig.js_url!,\n  };\n};\n\nexport const loadCustomPanel = (\n  panelConfig: CustomPanelConfig\n): Promise<unknown> => {\n  const panelSource = getUrl(panelConfig);\n\n  if (panelSource.type === \"js\") {\n    if (!(panelSource.url in JS_CACHE)) {\n      JS_CACHE[panelSource.url] = loadJS(panelSource.url);\n    }\n    return JS_CACHE[panelSource.url];\n  }\n  if (panelSource.type === \"module\") {\n    return loadModule(panelSource.url);\n  }\n  return Promise.reject(\"No valid url found in panel config.\");\n};\n"],"mappings":";;AAAA,SAASA,MAAM,EAAEC,UAAU,QAAQ,gCAAgC;AAGnE;AACA,IAAMC,QAAQ,GAAG,CAAC,CAAC;AAEnB,OAAO,IAAMC,MAAM,GAAG,SAATA,MAAMA,CACjBC,WAA8B,EACsB;EACpD,IAAIA,WAAW,CAACC,QAAQ,EAAE;IACxB,OAAO;MACLC,IAAI,EAAE,MAAM;MACZC,GAAG,EAAEH,WAAW,CAACC;IACnB,CAAC;EACH;;EAEA;EACA,IAAID,WAAW,CAACI,UAAU,IAAIJ,WAAW,CAACK,MAAM,EAAE;IAChD,IAAIC,SAAS,KAAK,QAAQ,EAAE;MAC1B,OAAO;QACLJ,IAAI,EAAE,QAAQ;QACdC,GAAG,EAAEH,WAAW,CAACI;MACnB,CAAC;IACH;IAEA,OAAO;MACLF,IAAI,EAAE,IAAI;MACVC,GAAG,EAAEH,WAAW,CAACK;IACnB,CAAC;EACH;EAEA,IAAIL,WAAW,CAACI,UAAU,EAAE;IAC1B,OAAO;MACLF,IAAI,EAAE,QAAQ;MACdC,GAAG,EAAEH,WAAW,CAACI;IACnB,CAAC;EACH;EAEA,OAAO;IACLF,IAAI,EAAE,IAAI;IACVC,GAAG,EAAEH,WAAW,CAACK;EACnB,CAAC;AACH,CAAC;AAED,OAAO,IAAME,eAAe,GAAG,SAAlBA,eAAeA,CAC1BP,WAA8B,EACT;EACrB,IAAMQ,WAAW,GAAGT,MAAM,CAACC,WAAW,CAAC;EAEvC,IAAIQ,WAAW,CAACN,IAAI,KAAK,IAAI,EAAE;IAC7B,IAAI,EAAEM,WAAW,CAACL,GAAG,IAAIL,QAAQ,CAAC,EAAE;MAClCA,QAAQ,CAACU,WAAW,CAACL,GAAG,CAAC,GAAGP,MAAM,CAACY,WAAW,CAACL,GAAG,CAAC;IACrD;IACA,OAAOL,QAAQ,CAACU,WAAW,CAACL,GAAG,CAAC;EAClC;EACA,IAAIK,WAAW,CAACN,IAAI,KAAK,QAAQ,EAAE;IACjC,OAAOL,UAAU,CAACW,WAAW,CAACL,GAAG,CAAC;EACpC;EACA,OAAOM,OAAO,CAACC,MAAM,CAAC,qCAAqC,CAAC;AAC9D,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}