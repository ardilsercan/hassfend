{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _callSuper from \"@babel/runtime/helpers/callSuper\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _decorate from \"@babel/runtime/helpers/decorate\";\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8;\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { css, html, LitElement } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport \"../../../../../components/data-table/ha-data-table\";\nexport var ZHADeviceEndpointDataTable = _decorate([customElement(\"zha-device-endpoint-data-table\")], function (_initialize, _LitElement) {\n  var ZHADeviceEndpointDataTable = /*#__PURE__*/function (_LitElement2) {\n    _inherits(ZHADeviceEndpointDataTable, _LitElement2);\n    function ZHADeviceEndpointDataTable() {\n      var _this;\n      _classCallCheck(this, ZHADeviceEndpointDataTable);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _callSuper(this, ZHADeviceEndpointDataTable, [].concat(args));\n      _initialize(_assertThisInitialized(_this));\n      return _this;\n    }\n    return _createClass(ZHADeviceEndpointDataTable);\n  }(_LitElement);\n  return {\n    F: ZHADeviceEndpointDataTable,\n    d: [{\n      kind: \"field\",\n      decorators: [property({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"narrow\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"selectable\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Array\n      })],\n      key: \"deviceEndpoints\",\n      value: function value() {\n        return [];\n      }\n    }, {\n      kind: \"field\",\n      decorators: [query(\"ha-data-table\", true)],\n      key: \"_dataTable\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_deviceEndpoints\",\n      value: function value() {\n        return memoizeOne(function (deviceEndpoints) {\n          var outputDevices = [];\n          deviceEndpoints.forEach(function (deviceEndpoint) {\n            outputDevices.push({\n              name: deviceEndpoint.device.user_given_name || deviceEndpoint.device.name,\n              model: deviceEndpoint.device.model,\n              manufacturer: deviceEndpoint.device.manufacturer,\n              id: deviceEndpoint.device.ieee + \"_\" + deviceEndpoint.endpoint_id,\n              ieee: deviceEndpoint.device.ieee,\n              endpoint_id: deviceEndpoint.endpoint_id,\n              entities: deviceEndpoint.entities,\n              dev_id: deviceEndpoint.device.device_reg_id\n            });\n          });\n          return outputDevices;\n        });\n      }\n    }, {\n      kind: \"field\",\n      key: \"_columns\",\n      value: function value() {\n        return memoizeOne(function (narrow) {\n          return narrow ? {\n            name: {\n              title: \"Devices\",\n              sortable: true,\n              filterable: true,\n              direction: \"asc\",\n              grows: true,\n              template: function template(device) {\n                return html(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n                <a href=\", \">\\n                  \", \"\\n                </a>\\n              \"])), \"/config/devices/device/\".concat(device.dev_id), device.name);\n              }\n            },\n            endpoint_id: {\n              title: \"Endpoint\",\n              sortable: true,\n              filterable: true\n            }\n          } : {\n            name: {\n              title: \"Name\",\n              sortable: true,\n              filterable: true,\n              direction: \"asc\",\n              grows: true,\n              template: function template(device) {\n                return html(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n                <a href=\", \">\\n                  \", \"\\n                </a>\\n              \"])), \"/config/devices/device/\".concat(device.dev_id), device.name);\n              }\n            },\n            endpoint_id: {\n              title: \"Endpoint\",\n              sortable: true,\n              filterable: true\n            },\n            entities: {\n              title: \"Associated Entities\",\n              sortable: false,\n              filterable: false,\n              width: \"50%\",\n              template: function template(device) {\n                return html(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n                \", \"\\n              \"])), device.entities.length ? device.entities.length > 3 ? html(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\", \"\\n                        <div>And \", \" more...</div>\"])), device.entities.slice(0, 2).map(function (entity) {\n                  return html(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"<div\\n                                style=\\\"overflow: hidden; text-overflow: ellipsis;\\\"\\n                              >\\n                                \", \"\\n                              </div>\"])), entity.name || entity.original_name);\n                }), device.entities.length - 2) : device.entities.map(function (entity) {\n                  return html(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"<div\\n                            style=\\\"overflow: hidden; text-overflow: ellipsis;\\\"\\n                          >\\n                            \", \"\\n                          </div>\"])), entity.name || entity.original_name);\n                }) : \"This endpoint has no associated entities\");\n              }\n            }\n          };\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"clearSelection\",\n      value: function clearSelection() {\n        this._dataTable.clearSelection();\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        return html(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\\n      <ha-data-table\\n        .hass=\", \"\\n        .columns=\", \"\\n        .data=\", \"\\n        .selectable=\", \"\\n        auto-height\\n        .searchLabel=\", \"\\n        .noDataText=\", \"\\n      ></ha-data-table>\\n    \"])), this.hass, this._columns(this.narrow), this._deviceEndpoints(this.deviceEndpoints), this.selectable, this.hass.localize(\"ui.components.data-table.search\"), this.hass.localize(\"ui.components.data-table.no-data\"));\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return [css(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n        .table-cell-text {\\n          word-break: break-word;\\n        }\\n      \"])))];\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["css","html","LitElement","customElement","property","query","memoizeOne","ZHADeviceEndpointDataTable","_decorate","_initialize","_LitElement","_LitElement2","_inherits","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","_assertThisInitialized","_createClass","F","d","kind","decorators","attribute","key","value","type","Boolean","deviceEndpoints","outputDevices","forEach","deviceEndpoint","push","name","device","user_given_name","model","manufacturer","id","ieee","endpoint_id","entities","dev_id","device_reg_id","narrow","title","sortable","filterable","direction","grows","template","_templateObject","_taggedTemplateLiteral","_templateObject2","width","_templateObject3","_templateObject4","slice","map","entity","_templateObject5","original_name","_templateObject6","clearSelection","_dataTable","render","_templateObject7","hass","_columns","_deviceEndpoints","selectable","localize","static","styles","_templateObject8"],"sources":["/workspaces/frontend/src/panels/config/integrations/integration-panels/zha/zha-device-endpoint-data-table.ts"],"sourcesContent":["import { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport \"../../../../../components/data-table/ha-data-table\";\nimport type {\n  DataTableColumnContainer,\n  DataTableRowData,\n  HaDataTable,\n} from \"../../../../../components/data-table/ha-data-table\";\nimport type {\n  ZHADeviceEndpoint,\n  ZHAEntityReference,\n} from \"../../../../../data/zha\";\nimport type { HomeAssistant } from \"../../../../../types\";\n\nexport interface DeviceEndpointRowData extends DataTableRowData {\n  id: string;\n  name: string;\n  model: string;\n  manufacturer: string;\n  endpoint_id: number;\n  entities: ZHAEntityReference[];\n}\n\n@customElement(\"zha-device-endpoint-data-table\")\nexport class ZHADeviceEndpointDataTable extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean }) public narrow = false;\n\n  @property({ type: Boolean }) public selectable = false;\n\n  @property({ type: Array }) public deviceEndpoints: ZHADeviceEndpoint[] = [];\n\n  @query(\"ha-data-table\", true) private _dataTable!: HaDataTable;\n\n  private _deviceEndpoints = memoizeOne(\n    (deviceEndpoints: ZHADeviceEndpoint[]) => {\n      const outputDevices: DeviceEndpointRowData[] = [];\n\n      deviceEndpoints.forEach((deviceEndpoint) => {\n        outputDevices.push({\n          name:\n            deviceEndpoint.device.user_given_name || deviceEndpoint.device.name,\n          model: deviceEndpoint.device.model,\n          manufacturer: deviceEndpoint.device.manufacturer,\n          id: deviceEndpoint.device.ieee + \"_\" + deviceEndpoint.endpoint_id,\n          ieee: deviceEndpoint.device.ieee,\n          endpoint_id: deviceEndpoint.endpoint_id,\n          entities: deviceEndpoint.entities,\n          dev_id: deviceEndpoint.device.device_reg_id,\n        });\n      });\n\n      return outputDevices;\n    }\n  );\n\n  private _columns = memoizeOne(\n    (narrow: boolean): DataTableColumnContainer =>\n      narrow\n        ? {\n            name: {\n              title: \"Devices\",\n              sortable: true,\n              filterable: true,\n              direction: \"asc\",\n              grows: true,\n              template: (device) => html`\n                <a href=${`/config/devices/device/${device.dev_id}`}>\n                  ${device.name}\n                </a>\n              `,\n            },\n            endpoint_id: {\n              title: \"Endpoint\",\n              sortable: true,\n              filterable: true,\n            },\n          }\n        : {\n            name: {\n              title: \"Name\",\n              sortable: true,\n              filterable: true,\n              direction: \"asc\",\n              grows: true,\n              template: (device) => html`\n                <a href=${`/config/devices/device/${device.dev_id}`}>\n                  ${device.name}\n                </a>\n              `,\n            },\n            endpoint_id: {\n              title: \"Endpoint\",\n              sortable: true,\n              filterable: true,\n            },\n            entities: {\n              title: \"Associated Entities\",\n              sortable: false,\n              filterable: false,\n              width: \"50%\",\n              template: (device) => html`\n                ${device.entities.length\n                  ? device.entities.length > 3\n                    ? html`${device.entities\n                          .slice(0, 2)\n                          .map(\n                            (entity) =>\n                              html`<div\n                                style=\"overflow: hidden; text-overflow: ellipsis;\"\n                              >\n                                ${entity.name || entity.original_name}\n                              </div>`\n                          )}\n                        <div>And ${device.entities.length - 2} more...</div>`\n                    : device.entities.map(\n                        (entity) =>\n                          html`<div\n                            style=\"overflow: hidden; text-overflow: ellipsis;\"\n                          >\n                            ${entity.name || entity.original_name}\n                          </div>`\n                      )\n                  : \"This endpoint has no associated entities\"}\n              `,\n            },\n          }\n  );\n\n  public clearSelection() {\n    this._dataTable.clearSelection();\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-data-table\n        .hass=${this.hass}\n        .columns=${this._columns(this.narrow)}\n        .data=${this._deviceEndpoints(this.deviceEndpoints)}\n        .selectable=${this.selectable}\n        auto-height\n        .searchLabel=${this.hass.localize(\"ui.components.data-table.search\")}\n        .noDataText=${this.hass.localize(\"ui.components.data-table.no-data\")}\n      ></ha-data-table>\n    `;\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      css`\n        .table-cell-text {\n          word-break: break-word;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"zha-device-endpoint-data-table\": ZHADeviceEndpointDataTable;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}