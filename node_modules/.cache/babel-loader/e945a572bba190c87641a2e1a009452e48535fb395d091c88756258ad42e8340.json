{"ast":null,"code":"const mdiAlertCircleOutline = \"M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z\";\nconst mdiGauge = \"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12C20,14.4 19,16.5 17.3,18C15.9,16.7 14,16 12,16C10,16 8.2,16.7 6.7,18C5,16.5 4,14.4 4,12A8,8 0 0,1 12,4M14,5.89C13.62,5.9 13.26,6.15 13.1,6.54L11.81,9.77L11.71,10C11,10.13 10.41,10.6 10.14,11.26C9.73,12.29 10.23,13.45 11.26,13.86C12.29,14.27 13.45,13.77 13.86,12.74C14.12,12.08 14,11.32 13.57,10.76L13.67,10.5L14.96,7.29L14.97,7.26C15.17,6.75 14.92,6.17 14.41,5.96C14.28,5.91 14.15,5.89 14,5.89M10,6A1,1 0 0,0 9,7A1,1 0 0,0 10,8A1,1 0 0,0 11,7A1,1 0 0,0 10,6M7,9A1,1 0 0,0 6,10A1,1 0 0,0 7,11A1,1 0 0,0 8,10A1,1 0 0,0 7,9M17,9A1,1 0 0,0 16,10A1,1 0 0,0 17,11A1,1 0 0,0 18,10A1,1 0 0,0 17,9Z\";\nconst mdiWaterPercent = \"M12,3.25C12,3.25 6,10 6,14C6,17.32 8.69,20 12,20A6,6 0 0,0 18,14C18,10 12,3.25 12,3.25M14.47,9.97L15.53,11.03L9.53,17.03L8.47,15.97M9.75,10A1.25,1.25 0 0,1 11,11.25A1.25,1.25 0 0,1 9.75,12.5A1.25,1.25 0 0,1 8.5,11.25A1.25,1.25 0 0,1 9.75,10M14.25,14.5A1.25,1.25 0 0,1 15.5,15.75A1.25,1.25 0 0,1 14.25,17A1.25,1.25 0 0,1 13,15.75A1.25,1.25 0 0,1 14.25,14.5Z\";\nconst mdiWeatherCloudy = \"M6,19A5,5 0 0,1 1,14A5,5 0 0,1 6,9C7,6.65 9.3,5 12,5C15.43,5 18.24,7.66 18.5,11.03L19,11A4,4 0 0,1 23,15A4,4 0 0,1 19,19H6M19,13H17V12A5,5 0 0,0 12,7C9.5,7 7.45,8.82 7.06,11.19C6.73,11.07 6.37,11 6,11A3,3 0 0,0 3,14A3,3 0 0,0 6,17H19A2,2 0 0,0 21,15A2,2 0 0,0 19,13Z\";\nconst mdiWeatherFog = \"M3,15H13A1,1 0 0,1 14,16A1,1 0 0,1 13,17H3A1,1 0 0,1 2,16A1,1 0 0,1 3,15M16,15H21A1,1 0 0,1 22,16A1,1 0 0,1 21,17H16A1,1 0 0,1 15,16A1,1 0 0,1 16,15M1,12A5,5 0 0,1 6,7C7,4.65 9.3,3 12,3C15.43,3 18.24,5.66 18.5,9.03L19,9C21.19,9 22.97,10.76 23,13H21A2,2 0 0,0 19,11H17V10A5,5 0 0,0 12,5C9.5,5 7.45,6.82 7.06,9.19C6.73,9.07 6.37,9 6,9A3,3 0 0,0 3,12C3,12.35 3.06,12.69 3.17,13H1.1L1,12M3,19H5A1,1 0 0,1 6,20A1,1 0 0,1 5,21H3A1,1 0 0,1 2,20A1,1 0 0,1 3,19M8,19H21A1,1 0 0,1 22,20A1,1 0 0,1 21,21H8A1,1 0 0,1 7,20A1,1 0 0,1 8,19Z\";\nconst mdiWeatherHail = \"M6,14A1,1 0 0,1 7,15A1,1 0 0,1 6,16A5,5 0 0,1 1,11A5,5 0 0,1 6,6C7,3.65 9.3,2 12,2C15.43,2 18.24,4.66 18.5,8.03L19,8A4,4 0 0,1 23,12A4,4 0 0,1 19,16H18A1,1 0 0,1 17,15A1,1 0 0,1 18,14H19A2,2 0 0,0 21,12A2,2 0 0,0 19,10H17V9A5,5 0 0,0 12,4C9.5,4 7.45,5.82 7.06,8.19C6.73,8.07 6.37,8 6,8A3,3 0 0,0 3,11A3,3 0 0,0 6,14M10,18A2,2 0 0,1 12,20A2,2 0 0,1 10,22A2,2 0 0,1 8,20A2,2 0 0,1 10,18M14.5,16A1.5,1.5 0 0,1 16,17.5A1.5,1.5 0 0,1 14.5,19A1.5,1.5 0 0,1 13,17.5A1.5,1.5 0 0,1 14.5,16M10.5,12A1.5,1.5 0 0,1 12,13.5A1.5,1.5 0 0,1 10.5,15A1.5,1.5 0 0,1 9,13.5A1.5,1.5 0 0,1 10.5,12Z\";\nconst mdiWeatherLightning = \"M6,16A5,5 0 0,1 1,11A5,5 0 0,1 6,6C7,3.65 9.3,2 12,2C15.43,2 18.24,4.66 18.5,8.03L19,8A4,4 0 0,1 23,12A4,4 0 0,1 19,16H18A1,1 0 0,1 17,15A1,1 0 0,1 18,14H19A2,2 0 0,0 21,12A2,2 0 0,0 19,10H17V9A5,5 0 0,0 12,4C9.5,4 7.45,5.82 7.06,8.19C6.73,8.07 6.37,8 6,8A3,3 0 0,0 3,11A3,3 0 0,0 6,14H7A1,1 0 0,1 8,15A1,1 0 0,1 7,16H6M12,11H15L13,15H15L11.25,22L12,17H9.5L12,11Z\";\nconst mdiWeatherLightningRainy = \"M4.5,13.59C5,13.87 5.14,14.5 4.87,14.96C4.59,15.44 4,15.6 3.5,15.33V15.33C2,14.47 1,12.85 1,11A5,5 0 0,1 6,6C7,3.65 9.3,2 12,2C15.43,2 18.24,4.66 18.5,8.03L19,8A4,4 0 0,1 23,12A4,4 0 0,1 19,16A1,1 0 0,1 18,15A1,1 0 0,1 19,14A2,2 0 0,0 21,12A2,2 0 0,0 19,10H17V9A5,5 0 0,0 12,4C9.5,4 7.45,5.82 7.06,8.19C6.73,8.07 6.37,8 6,8A3,3 0 0,0 3,11C3,12.11 3.6,13.08 4.5,13.6V13.59M9.5,11H12.5L10.5,15H12.5L8.75,22L9.5,17H7L9.5,11M17.5,18.67C17.5,19.96 16.5,21 15.25,21C14,21 13,19.96 13,18.67C13,17.12 15.25,14.5 15.25,14.5C15.25,14.5 17.5,17.12 17.5,18.67Z\";\nconst mdiWeatherNight = \"M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.64 6.35,17.66C9.37,20.67 14.19,20.78 17.33,17.97Z\";\nconst mdiWeatherPartlyCloudy = \"M12.74,5.47C15.1,6.5 16.35,9.03 15.92,11.46C17.19,12.56 18,14.19 18,16V16.17C18.31,16.06 18.65,16 19,16A3,3 0 0,1 22,19A3,3 0 0,1 19,22H6A4,4 0 0,1 2,18A4,4 0 0,1 6,14H6.27C5,12.45 4.6,10.24 5.5,8.26C6.72,5.5 9.97,4.24 12.74,5.47M11.93,7.3C10.16,6.5 8.09,7.31 7.31,9.07C6.85,10.09 6.93,11.22 7.41,12.13C8.5,10.83 10.16,10 12,10C12.7,10 13.38,10.12 14,10.34C13.94,9.06 13.18,7.86 11.93,7.3M13.55,3.64C13,3.4 12.45,3.23 11.88,3.12L14.37,1.82L15.27,4.71C14.76,4.29 14.19,3.93 13.55,3.64M6.09,4.44C5.6,4.79 5.17,5.19 4.8,5.63L4.91,2.82L7.87,3.5C7.25,3.71 6.65,4.03 6.09,4.44M18,9.71C17.91,9.12 17.78,8.55 17.59,8L19.97,9.5L17.92,11.73C18.03,11.08 18.05,10.4 18,9.71M3.04,11.3C3.11,11.9 3.24,12.47 3.43,13L1.06,11.5L3.1,9.28C3,9.93 2.97,10.61 3.04,11.3M19,18H16V16A4,4 0 0,0 12,12A4,4 0 0,0 8,16H6A2,2 0 0,0 4,18A2,2 0 0,0 6,20H19A1,1 0 0,0 20,19A1,1 0 0,0 19,18Z\";\nconst mdiWeatherPouring = \"M9,12C9.53,12.14 9.85,12.69 9.71,13.22L8.41,18.05C8.27,18.59 7.72,18.9 7.19,18.76C6.65,18.62 6.34,18.07 6.5,17.54L7.78,12.71C7.92,12.17 8.47,11.86 9,12M13,12C13.53,12.14 13.85,12.69 13.71,13.22L11.64,20.95C11.5,21.5 10.95,21.8 10.41,21.66C9.88,21.5 9.56,20.97 9.7,20.43L11.78,12.71C11.92,12.17 12.47,11.86 13,12M17,12C17.53,12.14 17.85,12.69 17.71,13.22L16.41,18.05C16.27,18.59 15.72,18.9 15.19,18.76C14.65,18.62 14.34,18.07 14.5,17.54L15.78,12.71C15.92,12.17 16.47,11.86 17,12M17,10V9A5,5 0 0,0 12,4C9.5,4 7.45,5.82 7.06,8.19C6.73,8.07 6.37,8 6,8A3,3 0 0,0 3,11C3,12.11 3.6,13.08 4.5,13.6V13.59C5,13.87 5.14,14.5 4.87,14.96C4.59,15.43 4,15.6 3.5,15.32V15.33C2,14.47 1,12.85 1,11A5,5 0 0,1 6,6C7,3.65 9.3,2 12,2C15.43,2 18.24,4.66 18.5,8.03L19,8A4,4 0 0,1 23,12C23,13.5 22.2,14.77 21,15.46V15.46C20.5,15.73 19.91,15.57 19.63,15.09C19.36,14.61 19.5,14 20,13.72V13.73C20.6,13.39 21,12.74 21,12A2,2 0 0,0 19,10H17Z\";\nconst mdiWeatherRainy = \"M6,14.03A1,1 0 0,1 7,15.03C7,15.58 6.55,16.03 6,16.03C3.24,16.03 1,13.79 1,11.03C1,8.27 3.24,6.03 6,6.03C7,3.68 9.3,2.03 12,2.03C15.43,2.03 18.24,4.69 18.5,8.06L19,8.03A4,4 0 0,1 23,12.03C23,14.23 21.21,16.03 19,16.03H18C17.45,16.03 17,15.58 17,15.03C17,14.47 17.45,14.03 18,14.03H19A2,2 0 0,0 21,12.03A2,2 0 0,0 19,10.03H17V9.03C17,6.27 14.76,4.03 12,4.03C9.5,4.03 7.45,5.84 7.06,8.21C6.73,8.09 6.37,8.03 6,8.03A3,3 0 0,0 3,11.03A3,3 0 0,0 6,14.03M12,14.15C12.18,14.39 12.37,14.66 12.56,14.94C13,15.56 14,17.03 14,18C14,19.11 13.1,20 12,20A2,2 0 0,1 10,18C10,17.03 11,15.56 11.44,14.94C11.63,14.66 11.82,14.4 12,14.15M12,11.03L11.5,11.59C11.5,11.59 10.65,12.55 9.79,13.81C8.93,15.06 8,16.56 8,18A4,4 0 0,0 12,22A4,4 0 0,0 16,18C16,16.56 15.07,15.06 14.21,13.81C13.35,12.55 12.5,11.59 12.5,11.59\";\nconst mdiWeatherSnowy = \"M6,14A1,1 0 0,1 7,15A1,1 0 0,1 6,16A5,5 0 0,1 1,11A5,5 0 0,1 6,6C7,3.65 9.3,2 12,2C15.43,2 18.24,4.66 18.5,8.03L19,8A4,4 0 0,1 23,12A4,4 0 0,1 19,16H18A1,1 0 0,1 17,15A1,1 0 0,1 18,14H19A2,2 0 0,0 21,12A2,2 0 0,0 19,10H17V9A5,5 0 0,0 12,4C9.5,4 7.45,5.82 7.06,8.19C6.73,8.07 6.37,8 6,8A3,3 0 0,0 3,11A3,3 0 0,0 6,14M7.88,18.07L10.07,17.5L8.46,15.88C8.07,15.5 8.07,14.86 8.46,14.46C8.85,14.07 9.5,14.07 9.88,14.46L11.5,16.07L12.07,13.88C12.21,13.34 12.76,13.03 13.29,13.17C13.83,13.31 14.14,13.86 14,14.4L13.41,16.59L15.6,16C16.14,15.86 16.69,16.17 16.83,16.71C16.97,17.24 16.66,17.79 16.12,17.93L13.93,18.5L15.54,20.12C15.93,20.5 15.93,21.15 15.54,21.54C15.15,21.93 14.5,21.93 14.12,21.54L12.5,19.93L11.93,22.12C11.79,22.66 11.24,22.97 10.71,22.83C10.17,22.69 9.86,22.14 10,21.6L10.59,19.41L8.4,20C7.86,20.14 7.31,19.83 7.17,19.29C7.03,18.76 7.34,18.21 7.88,18.07Z\";\nconst mdiWeatherSnowyRainy = \"M18.5,18.67C18.5,19.96 17.5,21 16.25,21C15,21 14,19.96 14,18.67C14,17.12 16.25,14.5 16.25,14.5C16.25,14.5 18.5,17.12 18.5,18.67M4,17.36C3.86,16.82 4.18,16.25 4.73,16.11L7,15.5L5.33,13.86C4.93,13.46 4.93,12.81 5.33,12.4C5.73,12 6.4,12 6.79,12.4L8.45,14.05L9.04,11.8C9.18,11.24 9.75,10.92 10.29,11.07C10.85,11.21 11.17,11.78 11,12.33L10.42,14.58L12.67,14C13.22,13.83 13.79,14.15 13.93,14.71C14.08,15.25 13.76,15.82 13.2,15.96L10.95,16.55L12.6,18.21C13,18.6 13,19.27 12.6,19.67C12.2,20.07 11.54,20.07 11.15,19.67L9.5,18L8.89,20.27C8.75,20.83 8.18,21.14 7.64,21C7.08,20.86 6.77,20.29 6.91,19.74L7.5,17.5L5.26,18.09C4.71,18.23 4.14,17.92 4,17.36M1,11A5,5 0 0,1 6,6C7,3.65 9.3,2 12,2C15.43,2 18.24,4.66 18.5,8.03L19,8A4,4 0 0,1 23,12A4,4 0 0,1 19,16A1,1 0 0,1 18,15A1,1 0 0,1 19,14A2,2 0 0,0 21,12A2,2 0 0,0 19,10H17V9A5,5 0 0,0 12,4C9.5,4 7.45,5.82 7.06,8.19C6.73,8.07 6.37,8 6,8A3,3 0 0,0 3,11C3,11.85 3.35,12.61 3.91,13.16C4.27,13.55 4.26,14.16 3.88,14.54C3.5,14.93 2.85,14.93 2.47,14.54C1.56,13.63 1,12.38 1,11Z\";\nconst mdiWeatherSunny = \"M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,2L14.39,5.42C13.65,5.15 12.84,5 12,5C11.16,5 10.35,5.15 9.61,5.42L12,2M3.34,7L7.5,6.65C6.9,7.16 6.36,7.78 5.94,8.5C5.5,9.24 5.25,10 5.11,10.79L3.34,7M3.36,17L5.12,13.23C5.26,14 5.53,14.78 5.95,15.5C6.37,16.24 6.91,16.86 7.5,17.37L3.36,17M20.65,7L18.88,10.79C18.74,10 18.47,9.23 18.05,8.5C17.63,7.78 17.1,7.15 16.5,6.64L20.65,7M20.64,17L16.5,17.36C17.09,16.85 17.62,16.22 18.04,15.5C18.46,14.77 18.73,14 18.87,13.21L20.64,17M12,22L9.59,18.56C10.33,18.83 11.14,19 12,19C12.82,19 13.63,18.83 14.37,18.56L12,22Z\";\nconst mdiWeatherWindy = \"M4,10A1,1 0 0,1 3,9A1,1 0 0,1 4,8H12A2,2 0 0,0 14,6A2,2 0 0,0 12,4C11.45,4 10.95,4.22 10.59,4.59C10.2,5 9.56,5 9.17,4.59C8.78,4.2 8.78,3.56 9.17,3.17C9.9,2.45 10.9,2 12,2A4,4 0 0,1 16,6A4,4 0 0,1 12,10H4M19,12A1,1 0 0,0 20,11A1,1 0 0,0 19,10C18.72,10 18.47,10.11 18.29,10.29C17.9,10.68 17.27,10.68 16.88,10.29C16.5,9.9 16.5,9.27 16.88,8.88C17.42,8.34 18.17,8 19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14H5A1,1 0 0,1 4,13A1,1 0 0,1 5,12H19M18,18H4A1,1 0 0,1 3,17A1,1 0 0,1 4,16H18A3,3 0 0,1 21,19A3,3 0 0,1 18,22C17.17,22 16.42,21.66 15.88,21.12C15.5,20.73 15.5,20.1 15.88,19.71C16.27,19.32 16.9,19.32 17.29,19.71C17.47,19.89 17.72,20 18,20A1,1 0 0,0 19,19A1,1 0 0,0 18,18Z\";\nconst mdiWeatherWindyVariant = \"M6,6L6.69,6.06C7.32,3.72 9.46,2 12,2A5.5,5.5 0 0,1 17.5,7.5L17.42,8.45C17.88,8.16 18.42,8 19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14H6A4,4 0 0,1 2,10A4,4 0 0,1 6,6M6,8A2,2 0 0,0 4,10A2,2 0 0,0 6,12H19A1,1 0 0,0 20,11A1,1 0 0,0 19,10H15.5V7.5A3.5,3.5 0 0,0 12,4A3.5,3.5 0 0,0 8.5,7.5V8H6M18,18H4A1,1 0 0,1 3,17A1,1 0 0,1 4,16H18A3,3 0 0,1 21,19A3,3 0 0,1 18,22C17.17,22 16.42,21.66 15.88,21.12C15.5,20.73 15.5,20.1 15.88,19.71C16.27,19.32 16.9,19.32 17.29,19.71C17.47,19.89 17.72,20 18,20A1,1 0 0,0 19,19A1,1 0 0,0 18,18Z\";\nimport { css, html, svg } from \"lit\";\nimport { styleMap } from \"lit/directives/style-map\";\nimport { supportsFeature } from \"../common/entity/supports-feature\";\nimport { round } from \"../common/number/round\";\nimport \"../components/ha-svg-icon\";\nexport let WeatherEntityFeature = /*#__PURE__*/function (WeatherEntityFeature) {\n  WeatherEntityFeature[WeatherEntityFeature[\"FORECAST_DAILY\"] = 1] = \"FORECAST_DAILY\";\n  WeatherEntityFeature[WeatherEntityFeature[\"FORECAST_HOURLY\"] = 2] = \"FORECAST_HOURLY\";\n  WeatherEntityFeature[WeatherEntityFeature[\"FORECAST_TWICE_DAILY\"] = 4] = \"FORECAST_TWICE_DAILY\";\n  return WeatherEntityFeature;\n}({});\nexport const weatherSVGs = new Set([\"clear-night\", \"cloudy\", \"fog\", \"lightning\", \"lightning-rainy\", \"partlycloudy\", \"pouring\", \"rainy\", \"hail\", \"snowy\", \"snowy-rainy\", \"sunny\", \"windy\", \"windy-variant\"]);\nexport const weatherIcons = {\n  \"clear-night\": mdiWeatherNight,\n  cloudy: mdiWeatherCloudy,\n  exceptional: mdiAlertCircleOutline,\n  fog: mdiWeatherFog,\n  hail: mdiWeatherHail,\n  lightning: mdiWeatherLightning,\n  \"lightning-rainy\": mdiWeatherLightningRainy,\n  partlycloudy: mdiWeatherPartlyCloudy,\n  pouring: mdiWeatherPouring,\n  rainy: mdiWeatherRainy,\n  snowy: mdiWeatherSnowy,\n  \"snowy-rainy\": mdiWeatherSnowyRainy,\n  sunny: mdiWeatherSunny,\n  windy: mdiWeatherWindy,\n  \"windy-variant\": mdiWeatherWindyVariant\n};\nexport const weatherAttrIcons = {\n  humidity: mdiWaterPercent,\n  wind_bearing: mdiWeatherWindy,\n  wind_speed: mdiWeatherWindy,\n  pressure: mdiGauge,\n  visibility: mdiWeatherFog,\n  precipitation: mdiWeatherRainy\n};\nconst cloudyStates = new Set([\"partlycloudy\", \"cloudy\", \"fog\", \"windy\", \"windy-variant\", \"hail\", \"rainy\", \"snowy\", \"snowy-rainy\", \"pouring\", \"lightning\", \"lightning-rainy\"]);\nconst rainStates = new Set([\"hail\", \"rainy\", \"pouring\"]);\nconst windyStates = new Set([\"windy\", \"windy-variant\"]);\nconst snowyStates = new Set([\"snowy\", \"snowy-rainy\"]);\nconst lightningStates = new Set([\"lightning\", \"lightning-rainy\"]);\nconst cardinalDirections = [\"N\", \"NNE\", \"NE\", \"ENE\", \"E\", \"ESE\", \"SE\", \"SSE\", \"S\", \"SSW\", \"SW\", \"WSW\", \"W\", \"WNW\", \"NW\", \"NNW\", \"N\"];\nconst getWindBearingText = degree => {\n  const degreenum = typeof degree === \"number\" ? degree : parseInt(degree, 10);\n  if (isFinite(degreenum)) {\n    // eslint-disable-next-line no-bitwise\n    return cardinalDirections[((degreenum + 11.25) / 22.5 | 0) % 16];\n  }\n  return typeof degree === \"number\" ? degree.toString() : degree;\n};\nconst getWindBearing = bearing => {\n  if (bearing != null) {\n    return getWindBearingText(bearing);\n  }\n  return \"\";\n};\nexport const getWind = (hass, stateObj, speed, bearing) => {\n  const speedText = speed !== undefined && speed !== null ? hass.formatEntityAttributeValue(stateObj, \"wind_speed\", speed) : \"-\";\n  if (bearing !== undefined && bearing !== null) {\n    const cardinalDirection = getWindBearing(bearing);\n    return `${speedText} (${hass.localize(`ui.card.weather.cardinal_direction.${cardinalDirection.toLowerCase()}`) || cardinalDirection})`;\n  }\n  return speedText;\n};\nexport const getWeatherUnit = (config, stateObj, measure) => {\n  const lengthUnit = config.unit_system.length || \"\";\n  switch (measure) {\n    case \"visibility\":\n      return stateObj.attributes.visibility_unit || lengthUnit;\n    case \"precipitation\":\n      return stateObj.attributes.precipitation_unit || (lengthUnit === \"km\" ? \"mm\" : \"in\");\n    case \"pressure\":\n      return stateObj.attributes.pressure_unit || (lengthUnit === \"km\" ? \"hPa\" : \"inHg\");\n    case \"temperature\":\n    case \"templow\":\n      return stateObj.attributes.temperature_unit || config.unit_system.temperature;\n    case \"wind_speed\":\n      return stateObj.attributes.wind_speed_unit || `${lengthUnit}/h`;\n    case \"humidity\":\n    case \"precipitation_probability\":\n      return \"%\";\n    default:\n      return config.unit_system[measure] || \"\";\n  }\n};\nexport const getSecondaryWeatherAttribute = (hass, stateObj, forecast) => {\n  const extrema = getWeatherExtrema(hass, stateObj, forecast);\n  if (extrema) {\n    return extrema;\n  }\n  let value;\n  let attribute;\n  if (forecast !== null && forecast !== void 0 && forecast.length && forecast[0].precipitation !== undefined && forecast[0].precipitation !== null) {\n    value = forecast[0].precipitation;\n    attribute = \"precipitation\";\n  } else if (\"humidity\" in stateObj.attributes) {\n    value = stateObj.attributes.humidity;\n    attribute = \"humidity\";\n  } else {\n    return undefined;\n  }\n  const weatherAttrIcon = weatherAttrIcons[attribute];\n  const roundedValue = round(value, 1);\n  return html`\n    ${weatherAttrIcon ? html`\n          <ha-svg-icon class=\"attr-icon\" .path=${weatherAttrIcon}></ha-svg-icon>\n        ` : hass.localize(`ui.card.weather.attributes.${attribute}`)}\n    ${hass.formatEntityAttributeValue(stateObj, attribute, roundedValue)}\n  `;\n};\nconst getWeatherExtrema = (hass, stateObj, forecast) => {\n  if (!(forecast !== null && forecast !== void 0 && forecast.length)) {\n    return undefined;\n  }\n  let tempLow;\n  let tempHigh;\n  const today = new Date().getDate();\n  for (const fc of forecast) {\n    if (new Date(fc.datetime).getDate() !== today) {\n      break;\n    }\n    if (!tempHigh || fc.temperature > tempHigh) {\n      tempHigh = fc.temperature;\n    }\n    if (!tempLow || fc.templow && fc.templow < tempLow) {\n      tempLow = fc.templow;\n    }\n    if (!fc.templow && (!tempLow || fc.temperature < tempLow)) {\n      tempLow = fc.temperature;\n    }\n  }\n  if (!tempLow && !tempHigh) {\n    return undefined;\n  }\n  return html`\n    ${tempHigh ? hass.formatEntityAttributeValue(stateObj, \"temperature\", tempHigh) : \"\"}\n    ${tempLow && tempHigh ? \" / \" : \"\"}\n    ${tempLow ? hass.formatEntityAttributeValue(stateObj, \"temperature\", tempLow) : \"\"}\n  `;\n};\nexport const weatherSVGStyles = css`\n  .rain {\n    fill: var(--weather-icon-rain-color, #30b3ff);\n  }\n  .sun {\n    fill: var(--weather-icon-sun-color, #fdd93c);\n  }\n  .moon {\n    fill: var(--weather-icon-moon-color, #fcf497);\n  }\n  .cloud-back {\n    fill: var(--weather-icon-cloud-back-color, #d4d4d4);\n  }\n  .cloud-front {\n    fill: var(--weather-icon-cloud-front-color, #f9f9f9);\n  }\n  .snow {\n    fill: var(--weather-icon-snow-color, #f9f9f9);\n    stroke: var(--weather-icon-snow-stroke-color, #d4d4d4);\n    stroke-width: 1;\n    paint-order: stroke;\n  }\n`;\nconst getWeatherStateSVG = (state, nightTime) => svg`\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 17 17\"\n  >\n  ${state === \"sunny\" ? svg`\n          <path\n            class=\"sun\"\n            d=\"m 14.39303,8.4033507 c 0,3.3114723 -2.684145,5.9956173 -5.9956169,5.9956173 -3.3114716,0 -5.9956168,-2.684145 -5.9956168,-5.9956173 0,-3.311471 2.6841452,-5.995617 5.9956168,-5.995617 3.3114719,0 5.9956169,2.684146 5.9956169,5.995617\"\n          />\n        ` : \"\"}\n  ${state === \"clear-night\" ? svg`\n          <path\n            class=\"moon\"\n            d=\"m 13.502891,11.382935 c -1.011285,1.859223 -2.976664,3.121381 -5.2405751,3.121381 -3.289929,0 -5.953329,-2.663833 -5.953329,-5.9537625 0,-2.263911 1.261724,-4.228856 3.120948,-5.240575 -0.452782,0.842738 -0.712753,1.806363 -0.712753,2.832381 0,3.289928 2.663833,5.9533275 5.9533291,5.9533275 1.026017,0 1.989641,-0.259969 2.83238,-0.712752\"\n          />\n        ` : \"\"}\n  ${state === \"partlycloudy\" && nightTime ? svg`\n          <path\n            class=\"moon\"\n            d=\"m14.981 4.2112c0 1.9244-1.56 3.4844-3.484 3.4844-1.9244 0-3.4844-1.56-3.4844-3.4844s1.56-3.484 3.4844-3.484c1.924 0 3.484 1.5596 3.484 3.484\"\n          />\n        ` : state === \"partlycloudy\" ? svg`\n          <path\n            class=\"sun\"\n            d=\"m14.981 4.2112c0 1.9244-1.56 3.4844-3.484 3.4844-1.9244 0-3.4844-1.56-3.4844-3.4844s1.56-3.484 3.4844-3.484c1.924 0 3.484 1.5596 3.484 3.484\"\n          />\n        ` : \"\"}\n  ${cloudyStates.has(state) ? svg`\n          <path\n            class=\"cloud-back\"\n            d=\"m3.8863 5.035c-0.54892 0.16898-1.04 0.46637-1.4372 0.8636-0.63077 0.63041-1.0206 1.4933-1.0206 2.455 0 1.9251 1.5589 3.4682 3.4837 3.4682h6.9688c1.9251 0 3.484-1.5981 3.484-3.5232 0-1.9251-1.5589-3.5232-3.484-3.5232h-1.0834c-0.25294-1.6916-1.6986-2.9083-3.4463-2.9083-1.7995 0-3.2805 1.4153-3.465 3.1679\"\n          />\n          <path\n            class=\"cloud-front\"\n            d=\"m4.1996 7.6995c-0.33902 0.10407-0.64276 0.28787-0.88794 0.5334-0.39017 0.38982-0.63147 0.92322-0.63147 1.5176 0 1.1896 0.96414 2.1431 2.1537 2.1431h4.3071c1.1896 0 2.153-0.98742 2.153-2.1777 0-1.1896-0.96344-2.1777-2.153-2.1777h-0.66992c-0.15593-1.0449-1.0499-1.7974-2.1297-1.7974-1.112 0-2.0274 0.87524-2.1417 1.9586\"\n          />\n        ` : \"\"}\n  ${rainStates.has(state) ? svg`\n          <path\n            class=\"rain\"\n            d=\"m5.2852 14.734c-0.22401 0.24765-0.57115 0.2988-0.77505 0.11395-0.20391-0.1845-0.18732-0.53481 0.036689-0.78281 0.14817-0.16298 0.59126-0.32914 0.87559-0.42369 0.12453-0.04092 0.22684 0.05186 0.19791 0.17956-0.065617 0.2921-0.18732 0.74965-0.33514 0.91299\"\n          />\n          <path\n            class=\"rain\"\n            d=\"m11.257 14.163c-0.22437 0.24765-0.57115 0.2988-0.77505 0.11395-0.2039-0.1845-0.18768-0.53481 0.03669-0.78281 0.14817-0.16298 0.59126-0.32914 0.8756-0.42369 0.12453-0.04092 0.22684 0.05186 0.19791 0.17956-0.06562 0.2921-0.18732 0.74965-0.33514 0.91299\"\n          />\n          <path\n            class=\"rain\"\n            d=\"m8.432 15.878c-0.15452 0.17039-0.3937 0.20567-0.53446 0.07867-0.14041-0.12735-0.12876-0.36865 0.025753-0.53975 0.10195-0.11218 0.40711-0.22684 0.60325-0.29175 0.085725-0.02858 0.15628 0.03563 0.13652 0.12382-0.045508 0.20108-0.12912 0.51647-0.23107 0.629\"\n          />\n          <path\n            class=\"rain\"\n            d=\"m7.9991 14.118c-0.19226 0.21237-0.49001 0.25612-0.66499 0.09737-0.17462-0.15804-0.16051-0.45861 0.03175-0.67098 0.12665-0.14005 0.50729-0.28293 0.75071-0.36336 0.10689-0.03563 0.19473 0.0441 0.17004 0.15346-0.056092 0.25082-0.16051 0.64347-0.28751 0.78352\"\n          />\n        ` : \"\"}\n  ${state === \"pouring\" ? svg`\n          <path\n            class=\"rain\"\n            d=\"m10.648 16.448c-0.19226 0.21449-0.49001 0.25894-0.66499 0.09878-0.17498-0.16016-0.16087-0.4639 0.03175-0.67874 0.12665-0.14146 0.50694-0.2854 0.75071-0.36724 0.10689-0.03563 0.19473 0.0448 0.17004 0.15558-0.05645 0.25365-0.16051 0.65017-0.28751 0.79163\"\n          />\n          <path\n            class=\"rain\"\n            d=\"m5.9383 16.658c-0.22437 0.25012-0.5715 0.30162-0.77505 0.11501-0.20391-0.18627-0.18768-0.54046 0.036689-0.79093 0.14817-0.1651 0.59126-0.33267 0.87559-0.42827 0.12418-0.04127 0.22648 0.05221 0.19791 0.18168-0.065617 0.29528-0.18732 0.75741-0.33514 0.92251\"\n          />\n        ` : \"\"}\n  ${windyStates.has(state) ? svg`\n          <path\n            class=\"cloud-back\"\n            d=\"m 13.59616,15.30968 c 0,0 -0.09137,-0.0071 -0.250472,-0.0187 -0.158045,-0.01235 -0.381353,-0.02893 -0.64382,-0.05715 -0.262466,-0.02716 -0.564444,-0.06385 -0.877358,-0.124531 -0.156986,-0.03034 -0.315383,-0.06844 -0.473781,-0.111478 -0.157691,-0.04551 -0.313266,-0.09842 -0.463902,-0.161219 l -0.267406,-0.0949 c -0.09984,-0.02646 -0.205669,-0.04904 -0.305153,-0.06738 -0.193322,-0.02716 -0.3838218,-0.03316 -0.5640912,-0.02011 -0.3626556,0.02611 -0.6847417,0.119239 -0.94615,0.226483 -0.2617611,0.108656 -0.4642556,0.230364 -0.600075,0.324203 -0.1358195,0.09419 -0.2049639,0.160514 -0.2049639,0.160514 0,0 0.089958,-0.01623 0.24765,-0.04445 0.1559278,-0.02575 0.3764139,-0.06174 0.6367639,-0.08714 0.2596444,-0.02646 0.5591527,-0.0441 0.8678333,-0.02328 0.076905,0.0035 0.1538111,0.01658 0.2321278,0.02293 0.077611,0.01058 0.1534581,0.02893 0.2314221,0.04022 0.07267,0.01834 0.1397,0.03986 0.213078,0.05644 l 0.238125,0.08925 c 0.09207,0.03281 0.183444,0.07055 0.275872,0.09878 0.09243,0.0261 0.185208,0.05327 0.277636,0.07161 0.184856,0.0388 0.367947,0.06174 0.543983,0.0702 0.353131,0.01905 0.678745,-0.01341 0.951442,-0.06456 0.27305,-0.05292 0.494595,-0.123119 0.646642,-0.181681 0.152047,-0.05785 0.234597,-0.104069 0.234597,-0.104069\"\n          />\n          <path\n            class=\"cloud-back\"\n            d=\"m 4.7519154,13.905801 c 0,0 0.091369,-0.0032 0.2511778,-0.0092 0.1580444,-0.0064 0.3820583,-0.01446 0.6455833,-0.03281 0.2631722,-0.01729 0.5662083,-0.04269 0.8812389,-0.09137 0.1576916,-0.02434 0.3175,-0.05609 0.4776611,-0.09384 0.1591027,-0.03951 0.3167944,-0.08643 0.4699,-0.14358 l 0.2702277,-0.08467 c 0.1008945,-0.02222 0.2074334,-0.04127 0.3072695,-0.05574 0.1943805,-0.01976 0.3848805,-0.0187 0.5651499,0.0014 0.3608917,0.03951 0.67945,0.144639 0.936625,0.261761 0.2575278,0.118534 0.4554364,0.247297 0.5873754,0.346781 0.132291,0.09913 0.198966,0.168275 0.198966,0.168275 0,0 -0.08925,-0.01976 -0.245886,-0.05397 C 9.9423347,14.087088 9.7232597,14.042988 9.4639681,14.00736 9.2057347,13.97173 8.9072848,13.94245 8.5978986,13.95162 c -0.077258,7.06e-4 -0.1541638,0.01058 -0.2328333,0.01411 -0.077964,0.0078 -0.1545166,0.02328 -0.2331861,0.03175 -0.073025,0.01588 -0.1404055,0.03422 -0.2141361,0.04798 l -0.2420055,0.08008 c -0.093486,0.02963 -0.1859139,0.06421 -0.2794,0.0889 C 7.3028516,14.23666 7.2093653,14.2603 7.116232,14.27512 6.9303181,14.30722 6.7465209,14.3231 6.5697792,14.32486 6.2166487,14.33046 5.8924459,14.28605 5.6218654,14.224318 5.3505793,14.161565 5.1318571,14.082895 4.9822793,14.01869 4.8327015,13.95519 4.7519154,13.905801 4.7519154,13.905801\"\n          />\n        ` : \"\"}\n  ${snowyStates.has(state) ? svg`\n          <path\n            class=\"snow\"\n            d=\"m 8.4319893,15.348341 c 0,0.257881 -0.209197,0.467079 -0.467078,0.467079 -0.258586,0 -0.46743,-0.209198 -0.46743,-0.467079 0,-0.258233 0.208844,-0.467431 0.46743,-0.467431 0.257881,0 0.467078,0.209198 0.467078,0.467431\"\n          />\n          <path\n            class=\"snow\"\n            d=\"m 11.263878,14.358553 c 0,0.364067 -0.295275,0.659694 -0.659695,0.659694 -0.364419,0 -0.6596937,-0.295627 -0.6596937,-0.659694 0,-0.364419 0.2952747,-0.659694 0.6596937,-0.659694 0.36442,0 0.659695,0.295275 0.659695,0.659694\"\n          />\n          <path\n            class=\"snow\"\n            d=\"m 5.3252173,13.69847 c 0,0.364419 -0.295275,0.660047 -0.659695,0.660047 -0.364067,0 -0.659694,-0.295628 -0.659694,-0.660047 0,-0.364067 0.295627,-0.659694 0.659694,-0.659694 0.36442,0 0.659695,0.295627 0.659695,0.659694\"\n          />\n        ` : \"\"}\n  ${lightningStates.has(state) ? svg`\n          <path\n            class=\"sun\"\n            d=\"m 9.9252695,10.935875 -1.6483986,2.341014 1.1170184,0.05929 -1.2169864,2.02141 3.0450261,-2.616159 H 9.8864918 L 10.97937,11.294651 10.700323,10.79794 h -0.508706 l -0.2663475,0.137936\"\n          />\n        ` : \"\"}\n  </svg>`;\nexport const getWeatherStateIcon = (state, element, nightTime) => {\n  const userDefinedIcon = getComputedStyle(element).getPropertyValue(`--weather-icon-${state}`);\n  if (userDefinedIcon) {\n    return html`\n      <div\n        style=\"background-size: cover;${styleMap({\n      \"background-image\": userDefinedIcon\n    })}\"\n      ></div>\n    `;\n  }\n  if (weatherSVGs.has(state)) {\n    return html`${getWeatherStateSVG(state, nightTime)}`;\n  }\n  if (state in weatherIcons) {\n    return html`\n      <ha-svg-icon\n        class=\"weather-icon\"\n        .path=${weatherIcons[state]}\n      ></ha-svg-icon>\n    `;\n  }\n  return undefined;\n};\nconst EIGHT_HOURS = 28800000;\nconst DAY_IN_MILLISECONDS = 86400000;\nconst isForecastHourly = forecast => {\n  if (forecast && forecast !== null && forecast !== void 0 && forecast.length && (forecast === null || forecast === void 0 ? void 0 : forecast.length) > 2) {\n    const date1 = new Date(forecast[1].datetime);\n    const date2 = new Date(forecast[2].datetime);\n    const timeDiff = date2.getTime() - date1.getTime();\n    return timeDiff < EIGHT_HOURS;\n  }\n  return undefined;\n};\nconst isForecastTwiceDaily = forecast => {\n  if (forecast && forecast !== null && forecast !== void 0 && forecast.length && (forecast === null || forecast === void 0 ? void 0 : forecast.length) > 2) {\n    const date1 = new Date(forecast[1].datetime);\n    const date2 = new Date(forecast[2].datetime);\n    const timeDiff = date2.getTime() - date1.getTime();\n    return timeDiff < DAY_IN_MILLISECONDS;\n  }\n  return undefined;\n};\nexport const getWeatherConvertibleUnits = hass => hass.callWS({\n  type: \"weather/convertible_units\"\n});\nconst getLegacyForecast = weather_attributes => {\n  if (weather_attributes !== null && weather_attributes !== void 0 && weather_attributes.forecast && weather_attributes.forecast.length > 2) {\n    if (isForecastHourly(weather_attributes.forecast)) {\n      return {\n        forecast: weather_attributes.forecast,\n        type: \"hourly\"\n      };\n    }\n    if (isForecastTwiceDaily(weather_attributes.forecast)) {\n      return {\n        forecast: weather_attributes.forecast,\n        type: \"twice_daily\"\n      };\n    }\n    return {\n      forecast: weather_attributes.forecast,\n      type: \"daily\"\n    };\n  }\n  return undefined;\n};\nexport const getForecast = (weather_attributes, forecast_event, forecast_type) => {\n  var _forecast_event$forec2;\n  if (forecast_type === undefined) {\n    var _forecast_event$forec;\n    if ((forecast_event === null || forecast_event === void 0 ? void 0 : forecast_event.type) !== undefined && forecast_event !== null && forecast_event !== void 0 && forecast_event.forecast && (forecast_event === null || forecast_event === void 0 || (_forecast_event$forec = forecast_event.forecast) === null || _forecast_event$forec === void 0 ? void 0 : _forecast_event$forec.length) > 2) {\n      return {\n        forecast: forecast_event.forecast,\n        type: forecast_event === null || forecast_event === void 0 ? void 0 : forecast_event.type\n      };\n    }\n    return getLegacyForecast(weather_attributes);\n  }\n  if (forecast_type === \"legacy\") {\n    return getLegacyForecast(weather_attributes);\n  }\n  if (forecast_type === (forecast_event === null || forecast_event === void 0 ? void 0 : forecast_event.type) && forecast_event !== null && forecast_event !== void 0 && forecast_event.forecast && (forecast_event === null || forecast_event === void 0 || (_forecast_event$forec2 = forecast_event.forecast) === null || _forecast_event$forec2 === void 0 ? void 0 : _forecast_event$forec2.length) > 2) {\n    return {\n      forecast: forecast_event.forecast,\n      type: forecast_type\n    };\n  }\n  return undefined;\n};\nexport const subscribeForecast = (hass, entity_id, forecast_type, callback) => hass.connection.subscribeMessage(callback, {\n  type: \"weather/subscribe_forecast\",\n  forecast_type,\n  entity_id\n});\nexport const getSupportedForecastTypes = stateObj => {\n  const supported = [];\n  if (supportsFeature(stateObj, WeatherEntityFeature.FORECAST_DAILY)) {\n    supported.push(\"daily\");\n  }\n  if (supportsFeature(stateObj, WeatherEntityFeature.FORECAST_TWICE_DAILY)) {\n    supported.push(\"twice_daily\");\n  }\n  if (supportsFeature(stateObj, WeatherEntityFeature.FORECAST_HOURLY)) {\n    supported.push(\"hourly\");\n  }\n  return supported;\n};\nexport const getDefaultForecastType = stateObj => {\n  if (supportsFeature(stateObj, WeatherEntityFeature.FORECAST_DAILY)) {\n    return \"daily\";\n  }\n  if (supportsFeature(stateObj, WeatherEntityFeature.FORECAST_TWICE_DAILY)) {\n    return \"twice_daily\";\n  }\n  if (supportsFeature(stateObj, WeatherEntityFeature.FORECAST_HOURLY)) {\n    return \"hourly\";\n  }\n  return undefined;\n};","map":{"version":3,"names":["css","html","svg","styleMap","supportsFeature","round","WeatherEntityFeature","weatherSVGs","Set","weatherIcons","mdiWeatherNight","cloudy","mdiWeatherCloudy","exceptional","mdiAlertCircleOutline","fog","mdiWeatherFog","hail","mdiWeatherHail","lightning","mdiWeatherLightning","mdiWeatherLightningRainy","partlycloudy","mdiWeatherPartlyCloudy","pouring","mdiWeatherPouring","rainy","mdiWeatherRainy","snowy","mdiWeatherSnowy","mdiWeatherSnowyRainy","sunny","mdiWeatherSunny","windy","mdiWeatherWindy","mdiWeatherWindyVariant","weatherAttrIcons","humidity","mdiWaterPercent","wind_bearing","wind_speed","pressure","mdiGauge","visibility","precipitation","cloudyStates","rainStates","windyStates","snowyStates","lightningStates","cardinalDirections","getWindBearingText","degree","degreenum","parseInt","isFinite","toString","getWindBearing","bearing","getWind","hass","stateObj","speed","speedText","undefined","formatEntityAttributeValue","cardinalDirection","localize","toLowerCase","getWeatherUnit","config","measure","lengthUnit","unit_system","length","attributes","visibility_unit","precipitation_unit","pressure_unit","temperature_unit","temperature","wind_speed_unit","getSecondaryWeatherAttribute","forecast","extrema","getWeatherExtrema","value","attribute","weatherAttrIcon","roundedValue","tempLow","tempHigh","today","Date","getDate","fc","datetime","templow","weatherSVGStyles","getWeatherStateSVG","state","nightTime","has","getWeatherStateIcon","element","userDefinedIcon","getComputedStyle","getPropertyValue","EIGHT_HOURS","DAY_IN_MILLISECONDS","isForecastHourly","date1","date2","timeDiff","getTime","isForecastTwiceDaily","getWeatherConvertibleUnits","callWS","type","getLegacyForecast","weather_attributes","getForecast","forecast_event","forecast_type","_forecast_event$forec2","_forecast_event$forec","subscribeForecast","entity_id","callback","connection","subscribeMessage","getSupportedForecastTypes","supported","FORECAST_DAILY","push","FORECAST_TWICE_DAILY","FORECAST_HOURLY","getDefaultForecastType"],"sources":["/Users/sercanardil/Desktop/frontend/src/data/weather.ts"],"sourcesContent":["import {\n  mdiAlertCircleOutline,\n  mdiGauge,\n  mdiWaterPercent,\n  mdiWeatherCloudy,\n  mdiWeatherFog,\n  mdiWeatherHail,\n  mdiWeatherLightning,\n  mdiWeatherLightningRainy,\n  mdiWeatherNight,\n  mdiWeatherPartlyCloudy,\n  mdiWeatherPouring,\n  mdiWeatherRainy,\n  mdiWeatherSnowy,\n  mdiWeatherSnowyRainy,\n  mdiWeatherSunny,\n  mdiWeatherWindy,\n  mdiWeatherWindyVariant,\n} from \"@mdi/js\";\nimport {\n  HassConfig,\n  HassEntityAttributeBase,\n  HassEntityBase,\n} from \"home-assistant-js-websocket\";\nimport { SVGTemplateResult, TemplateResult, css, html, svg } from \"lit\";\nimport { styleMap } from \"lit/directives/style-map\";\nimport { supportsFeature } from \"../common/entity/supports-feature\";\nimport { round } from \"../common/number/round\";\nimport \"../components/ha-svg-icon\";\nimport type { HomeAssistant } from \"../types\";\n\nexport const enum WeatherEntityFeature {\n  FORECAST_DAILY = 1,\n  FORECAST_HOURLY = 2,\n  FORECAST_TWICE_DAILY = 4,\n}\n\nexport type ModernForecastType = \"hourly\" | \"daily\" | \"twice_daily\";\n\nexport type ForecastType = ModernForecastType | \"legacy\";\n\ninterface ForecastAttribute {\n  temperature: number;\n  datetime: string;\n  templow?: number;\n  precipitation?: number;\n  precipitation_probability?: number;\n  humidity?: number;\n  condition?: string;\n  is_daytime?: boolean;\n  pressure?: number;\n  wind_speed?: string;\n}\n\ninterface WeatherEntityAttributes extends HassEntityAttributeBase {\n  attribution?: string;\n  humidity?: number;\n  forecast?: ForecastAttribute[];\n  is_daytime?: boolean;\n  pressure?: number;\n  temperature?: number;\n  visibility?: number;\n  wind_bearing?: number | string;\n  wind_speed?: number;\n  precipitation_unit: string;\n  pressure_unit: string;\n  temperature_unit: string;\n  visibility_unit: string;\n  wind_speed_unit: string;\n}\n\nexport interface ForecastEvent {\n  type: \"hourly\" | \"daily\" | \"twice_daily\";\n  forecast: [ForecastAttribute] | null;\n}\n\nexport interface WeatherEntity extends HassEntityBase {\n  attributes: WeatherEntityAttributes;\n}\n\nexport const weatherSVGs = new Set<string>([\n  \"clear-night\",\n  \"cloudy\",\n  \"fog\",\n  \"lightning\",\n  \"lightning-rainy\",\n  \"partlycloudy\",\n  \"pouring\",\n  \"rainy\",\n  \"hail\",\n  \"snowy\",\n  \"snowy-rainy\",\n  \"sunny\",\n  \"windy\",\n  \"windy-variant\",\n]);\n\nexport const weatherIcons = {\n  \"clear-night\": mdiWeatherNight,\n  cloudy: mdiWeatherCloudy,\n  exceptional: mdiAlertCircleOutline,\n  fog: mdiWeatherFog,\n  hail: mdiWeatherHail,\n  lightning: mdiWeatherLightning,\n  \"lightning-rainy\": mdiWeatherLightningRainy,\n  partlycloudy: mdiWeatherPartlyCloudy,\n  pouring: mdiWeatherPouring,\n  rainy: mdiWeatherRainy,\n  snowy: mdiWeatherSnowy,\n  \"snowy-rainy\": mdiWeatherSnowyRainy,\n  sunny: mdiWeatherSunny,\n  windy: mdiWeatherWindy,\n  \"windy-variant\": mdiWeatherWindyVariant,\n};\n\nexport const weatherAttrIcons = {\n  humidity: mdiWaterPercent,\n  wind_bearing: mdiWeatherWindy,\n  wind_speed: mdiWeatherWindy,\n  pressure: mdiGauge,\n  visibility: mdiWeatherFog,\n  precipitation: mdiWeatherRainy,\n};\n\nconst cloudyStates = new Set<string>([\n  \"partlycloudy\",\n  \"cloudy\",\n  \"fog\",\n  \"windy\",\n  \"windy-variant\",\n  \"hail\",\n  \"rainy\",\n  \"snowy\",\n  \"snowy-rainy\",\n  \"pouring\",\n  \"lightning\",\n  \"lightning-rainy\",\n]);\n\nconst rainStates = new Set<string>([\"hail\", \"rainy\", \"pouring\"]);\n\nconst windyStates = new Set<string>([\"windy\", \"windy-variant\"]);\n\nconst snowyStates = new Set<string>([\"snowy\", \"snowy-rainy\"]);\n\nconst lightningStates = new Set<string>([\"lightning\", \"lightning-rainy\"]);\n\nconst cardinalDirections = [\n  \"N\",\n  \"NNE\",\n  \"NE\",\n  \"ENE\",\n  \"E\",\n  \"ESE\",\n  \"SE\",\n  \"SSE\",\n  \"S\",\n  \"SSW\",\n  \"SW\",\n  \"WSW\",\n  \"W\",\n  \"WNW\",\n  \"NW\",\n  \"NNW\",\n  \"N\",\n];\n\nconst getWindBearingText = (degree: number | string): string => {\n  const degreenum = typeof degree === \"number\" ? degree : parseInt(degree, 10);\n  if (isFinite(degreenum)) {\n    // eslint-disable-next-line no-bitwise\n    return cardinalDirections[(((degreenum + 11.25) / 22.5) | 0) % 16];\n  }\n  return typeof degree === \"number\" ? degree.toString() : degree;\n};\n\nconst getWindBearing = (bearing: number | string): string => {\n  if (bearing != null) {\n    return getWindBearingText(bearing);\n  }\n  return \"\";\n};\n\nexport const getWind = (\n  hass: HomeAssistant,\n  stateObj: WeatherEntity,\n  speed?: number,\n  bearing?: number | string\n): string => {\n  const speedText =\n    speed !== undefined && speed !== null\n      ? hass.formatEntityAttributeValue(stateObj, \"wind_speed\", speed)\n      : \"-\";\n  if (bearing !== undefined && bearing !== null) {\n    const cardinalDirection = getWindBearing(bearing);\n    return `${speedText} (${\n      hass.localize(\n        `ui.card.weather.cardinal_direction.${cardinalDirection.toLowerCase()}`\n      ) || cardinalDirection\n    })`;\n  }\n  return speedText;\n};\n\nexport const getWeatherUnit = (\n  config: HassConfig,\n  stateObj: WeatherEntity,\n  measure: string\n): string => {\n  const lengthUnit = config.unit_system.length || \"\";\n  switch (measure) {\n    case \"visibility\":\n      return stateObj.attributes.visibility_unit || lengthUnit;\n    case \"precipitation\":\n      return (\n        stateObj.attributes.precipitation_unit ||\n        (lengthUnit === \"km\" ? \"mm\" : \"in\")\n      );\n    case \"pressure\":\n      return (\n        stateObj.attributes.pressure_unit ||\n        (lengthUnit === \"km\" ? \"hPa\" : \"inHg\")\n      );\n    case \"temperature\":\n    case \"templow\":\n      return (\n        stateObj.attributes.temperature_unit || config.unit_system.temperature\n      );\n    case \"wind_speed\":\n      return stateObj.attributes.wind_speed_unit || `${lengthUnit}/h`;\n    case \"humidity\":\n    case \"precipitation_probability\":\n      return \"%\";\n    default:\n      return config.unit_system[measure] || \"\";\n  }\n};\n\nexport const getSecondaryWeatherAttribute = (\n  hass: HomeAssistant,\n  stateObj: WeatherEntity,\n  forecast: ForecastAttribute[]\n): TemplateResult | undefined => {\n  const extrema = getWeatherExtrema(hass, stateObj, forecast);\n\n  if (extrema) {\n    return extrema;\n  }\n\n  let value: number;\n  let attribute: string;\n\n  if (\n    forecast?.length &&\n    forecast[0].precipitation !== undefined &&\n    forecast[0].precipitation !== null\n  ) {\n    value = forecast[0].precipitation!;\n    attribute = \"precipitation\";\n  } else if (\"humidity\" in stateObj.attributes) {\n    value = stateObj.attributes.humidity!;\n    attribute = \"humidity\";\n  } else {\n    return undefined;\n  }\n\n  const weatherAttrIcon = weatherAttrIcons[attribute];\n\n  const roundedValue = round(value, 1);\n\n  return html`\n    ${weatherAttrIcon\n      ? html`\n          <ha-svg-icon class=\"attr-icon\" .path=${weatherAttrIcon}></ha-svg-icon>\n        `\n      : hass!.localize(`ui.card.weather.attributes.${attribute}`)}\n    ${hass.formatEntityAttributeValue(stateObj, attribute, roundedValue)}\n  `;\n};\n\nconst getWeatherExtrema = (\n  hass: HomeAssistant,\n  stateObj: WeatherEntity,\n  forecast: ForecastAttribute[]\n): TemplateResult | undefined => {\n  if (!forecast?.length) {\n    return undefined;\n  }\n\n  let tempLow: number | undefined;\n  let tempHigh: number | undefined;\n  const today = new Date().getDate();\n\n  for (const fc of forecast!) {\n    if (new Date(fc.datetime).getDate() !== today) {\n      break;\n    }\n    if (!tempHigh || fc.temperature > tempHigh) {\n      tempHigh = fc.temperature;\n    }\n    if (!tempLow || (fc.templow && fc.templow < tempLow)) {\n      tempLow = fc.templow;\n    }\n    if (!fc.templow && (!tempLow || fc.temperature < tempLow)) {\n      tempLow = fc.temperature;\n    }\n  }\n\n  if (!tempLow && !tempHigh) {\n    return undefined;\n  }\n\n  return html`\n    ${tempHigh\n      ? hass.formatEntityAttributeValue(stateObj, \"temperature\", tempHigh)\n      : \"\"}\n    ${tempLow && tempHigh ? \" / \" : \"\"}\n    ${tempLow\n      ? hass.formatEntityAttributeValue(stateObj, \"temperature\", tempLow)\n      : \"\"}\n  `;\n};\n\nexport const weatherSVGStyles = css`\n  .rain {\n    fill: var(--weather-icon-rain-color, #30b3ff);\n  }\n  .sun {\n    fill: var(--weather-icon-sun-color, #fdd93c);\n  }\n  .moon {\n    fill: var(--weather-icon-moon-color, #fcf497);\n  }\n  .cloud-back {\n    fill: var(--weather-icon-cloud-back-color, #d4d4d4);\n  }\n  .cloud-front {\n    fill: var(--weather-icon-cloud-front-color, #f9f9f9);\n  }\n  .snow {\n    fill: var(--weather-icon-snow-color, #f9f9f9);\n    stroke: var(--weather-icon-snow-stroke-color, #d4d4d4);\n    stroke-width: 1;\n    paint-order: stroke;\n  }\n`;\n\nconst getWeatherStateSVG = (\n  state: string,\n  nightTime?: boolean\n): SVGTemplateResult => svg`\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 17 17\"\n  >\n  ${\n    state === \"sunny\"\n      ? svg`\n          <path\n            class=\"sun\"\n            d=\"m 14.39303,8.4033507 c 0,3.3114723 -2.684145,5.9956173 -5.9956169,5.9956173 -3.3114716,0 -5.9956168,-2.684145 -5.9956168,-5.9956173 0,-3.311471 2.6841452,-5.995617 5.9956168,-5.995617 3.3114719,0 5.9956169,2.684146 5.9956169,5.995617\"\n          />\n        `\n      : \"\"\n  }\n  ${\n    state === \"clear-night\"\n      ? svg`\n          <path\n            class=\"moon\"\n            d=\"m 13.502891,11.382935 c -1.011285,1.859223 -2.976664,3.121381 -5.2405751,3.121381 -3.289929,0 -5.953329,-2.663833 -5.953329,-5.9537625 0,-2.263911 1.261724,-4.228856 3.120948,-5.240575 -0.452782,0.842738 -0.712753,1.806363 -0.712753,2.832381 0,3.289928 2.663833,5.9533275 5.9533291,5.9533275 1.026017,0 1.989641,-0.259969 2.83238,-0.712752\"\n          />\n        `\n      : \"\"\n  }\n  ${\n    state === \"partlycloudy\" && nightTime\n      ? svg`\n          <path\n            class=\"moon\"\n            d=\"m14.981 4.2112c0 1.9244-1.56 3.4844-3.484 3.4844-1.9244 0-3.4844-1.56-3.4844-3.4844s1.56-3.484 3.4844-3.484c1.924 0 3.484 1.5596 3.484 3.484\"\n          />\n        `\n      : state === \"partlycloudy\"\n        ? svg`\n          <path\n            class=\"sun\"\n            d=\"m14.981 4.2112c0 1.9244-1.56 3.4844-3.484 3.4844-1.9244 0-3.4844-1.56-3.4844-3.4844s1.56-3.484 3.4844-3.484c1.924 0 3.484 1.5596 3.484 3.484\"\n          />\n        `\n        : \"\"\n  }\n  ${\n    cloudyStates.has(state)\n      ? svg`\n          <path\n            class=\"cloud-back\"\n            d=\"m3.8863 5.035c-0.54892 0.16898-1.04 0.46637-1.4372 0.8636-0.63077 0.63041-1.0206 1.4933-1.0206 2.455 0 1.9251 1.5589 3.4682 3.4837 3.4682h6.9688c1.9251 0 3.484-1.5981 3.484-3.5232 0-1.9251-1.5589-3.5232-3.484-3.5232h-1.0834c-0.25294-1.6916-1.6986-2.9083-3.4463-2.9083-1.7995 0-3.2805 1.4153-3.465 3.1679\"\n          />\n          <path\n            class=\"cloud-front\"\n            d=\"m4.1996 7.6995c-0.33902 0.10407-0.64276 0.28787-0.88794 0.5334-0.39017 0.38982-0.63147 0.92322-0.63147 1.5176 0 1.1896 0.96414 2.1431 2.1537 2.1431h4.3071c1.1896 0 2.153-0.98742 2.153-2.1777 0-1.1896-0.96344-2.1777-2.153-2.1777h-0.66992c-0.15593-1.0449-1.0499-1.7974-2.1297-1.7974-1.112 0-2.0274 0.87524-2.1417 1.9586\"\n          />\n        `\n      : \"\"\n  }\n  ${\n    rainStates.has(state)\n      ? svg`\n          <path\n            class=\"rain\"\n            d=\"m5.2852 14.734c-0.22401 0.24765-0.57115 0.2988-0.77505 0.11395-0.20391-0.1845-0.18732-0.53481 0.036689-0.78281 0.14817-0.16298 0.59126-0.32914 0.87559-0.42369 0.12453-0.04092 0.22684 0.05186 0.19791 0.17956-0.065617 0.2921-0.18732 0.74965-0.33514 0.91299\"\n          />\n          <path\n            class=\"rain\"\n            d=\"m11.257 14.163c-0.22437 0.24765-0.57115 0.2988-0.77505 0.11395-0.2039-0.1845-0.18768-0.53481 0.03669-0.78281 0.14817-0.16298 0.59126-0.32914 0.8756-0.42369 0.12453-0.04092 0.22684 0.05186 0.19791 0.17956-0.06562 0.2921-0.18732 0.74965-0.33514 0.91299\"\n          />\n          <path\n            class=\"rain\"\n            d=\"m8.432 15.878c-0.15452 0.17039-0.3937 0.20567-0.53446 0.07867-0.14041-0.12735-0.12876-0.36865 0.025753-0.53975 0.10195-0.11218 0.40711-0.22684 0.60325-0.29175 0.085725-0.02858 0.15628 0.03563 0.13652 0.12382-0.045508 0.20108-0.12912 0.51647-0.23107 0.629\"\n          />\n          <path\n            class=\"rain\"\n            d=\"m7.9991 14.118c-0.19226 0.21237-0.49001 0.25612-0.66499 0.09737-0.17462-0.15804-0.16051-0.45861 0.03175-0.67098 0.12665-0.14005 0.50729-0.28293 0.75071-0.36336 0.10689-0.03563 0.19473 0.0441 0.17004 0.15346-0.056092 0.25082-0.16051 0.64347-0.28751 0.78352\"\n          />\n        `\n      : \"\"\n  }\n  ${\n    state === \"pouring\"\n      ? svg`\n          <path\n            class=\"rain\"\n            d=\"m10.648 16.448c-0.19226 0.21449-0.49001 0.25894-0.66499 0.09878-0.17498-0.16016-0.16087-0.4639 0.03175-0.67874 0.12665-0.14146 0.50694-0.2854 0.75071-0.36724 0.10689-0.03563 0.19473 0.0448 0.17004 0.15558-0.05645 0.25365-0.16051 0.65017-0.28751 0.79163\"\n          />\n          <path\n            class=\"rain\"\n            d=\"m5.9383 16.658c-0.22437 0.25012-0.5715 0.30162-0.77505 0.11501-0.20391-0.18627-0.18768-0.54046 0.036689-0.79093 0.14817-0.1651 0.59126-0.33267 0.87559-0.42827 0.12418-0.04127 0.22648 0.05221 0.19791 0.18168-0.065617 0.29528-0.18732 0.75741-0.33514 0.92251\"\n          />\n        `\n      : \"\"\n  }\n  ${\n    windyStates.has(state)\n      ? svg`\n          <path\n            class=\"cloud-back\"\n            d=\"m 13.59616,15.30968 c 0,0 -0.09137,-0.0071 -0.250472,-0.0187 -0.158045,-0.01235 -0.381353,-0.02893 -0.64382,-0.05715 -0.262466,-0.02716 -0.564444,-0.06385 -0.877358,-0.124531 -0.156986,-0.03034 -0.315383,-0.06844 -0.473781,-0.111478 -0.157691,-0.04551 -0.313266,-0.09842 -0.463902,-0.161219 l -0.267406,-0.0949 c -0.09984,-0.02646 -0.205669,-0.04904 -0.305153,-0.06738 -0.193322,-0.02716 -0.3838218,-0.03316 -0.5640912,-0.02011 -0.3626556,0.02611 -0.6847417,0.119239 -0.94615,0.226483 -0.2617611,0.108656 -0.4642556,0.230364 -0.600075,0.324203 -0.1358195,0.09419 -0.2049639,0.160514 -0.2049639,0.160514 0,0 0.089958,-0.01623 0.24765,-0.04445 0.1559278,-0.02575 0.3764139,-0.06174 0.6367639,-0.08714 0.2596444,-0.02646 0.5591527,-0.0441 0.8678333,-0.02328 0.076905,0.0035 0.1538111,0.01658 0.2321278,0.02293 0.077611,0.01058 0.1534581,0.02893 0.2314221,0.04022 0.07267,0.01834 0.1397,0.03986 0.213078,0.05644 l 0.238125,0.08925 c 0.09207,0.03281 0.183444,0.07055 0.275872,0.09878 0.09243,0.0261 0.185208,0.05327 0.277636,0.07161 0.184856,0.0388 0.367947,0.06174 0.543983,0.0702 0.353131,0.01905 0.678745,-0.01341 0.951442,-0.06456 0.27305,-0.05292 0.494595,-0.123119 0.646642,-0.181681 0.152047,-0.05785 0.234597,-0.104069 0.234597,-0.104069\"\n          />\n          <path\n            class=\"cloud-back\"\n            d=\"m 4.7519154,13.905801 c 0,0 0.091369,-0.0032 0.2511778,-0.0092 0.1580444,-0.0064 0.3820583,-0.01446 0.6455833,-0.03281 0.2631722,-0.01729 0.5662083,-0.04269 0.8812389,-0.09137 0.1576916,-0.02434 0.3175,-0.05609 0.4776611,-0.09384 0.1591027,-0.03951 0.3167944,-0.08643 0.4699,-0.14358 l 0.2702277,-0.08467 c 0.1008945,-0.02222 0.2074334,-0.04127 0.3072695,-0.05574 0.1943805,-0.01976 0.3848805,-0.0187 0.5651499,0.0014 0.3608917,0.03951 0.67945,0.144639 0.936625,0.261761 0.2575278,0.118534 0.4554364,0.247297 0.5873754,0.346781 0.132291,0.09913 0.198966,0.168275 0.198966,0.168275 0,0 -0.08925,-0.01976 -0.245886,-0.05397 C 9.9423347,14.087088 9.7232597,14.042988 9.4639681,14.00736 9.2057347,13.97173 8.9072848,13.94245 8.5978986,13.95162 c -0.077258,7.06e-4 -0.1541638,0.01058 -0.2328333,0.01411 -0.077964,0.0078 -0.1545166,0.02328 -0.2331861,0.03175 -0.073025,0.01588 -0.1404055,0.03422 -0.2141361,0.04798 l -0.2420055,0.08008 c -0.093486,0.02963 -0.1859139,0.06421 -0.2794,0.0889 C 7.3028516,14.23666 7.2093653,14.2603 7.116232,14.27512 6.9303181,14.30722 6.7465209,14.3231 6.5697792,14.32486 6.2166487,14.33046 5.8924459,14.28605 5.6218654,14.224318 5.3505793,14.161565 5.1318571,14.082895 4.9822793,14.01869 4.8327015,13.95519 4.7519154,13.905801 4.7519154,13.905801\"\n          />\n        `\n      : \"\"\n  }\n  ${\n    snowyStates.has(state)\n      ? svg`\n          <path\n            class=\"snow\"\n            d=\"m 8.4319893,15.348341 c 0,0.257881 -0.209197,0.467079 -0.467078,0.467079 -0.258586,0 -0.46743,-0.209198 -0.46743,-0.467079 0,-0.258233 0.208844,-0.467431 0.46743,-0.467431 0.257881,0 0.467078,0.209198 0.467078,0.467431\"\n          />\n          <path\n            class=\"snow\"\n            d=\"m 11.263878,14.358553 c 0,0.364067 -0.295275,0.659694 -0.659695,0.659694 -0.364419,0 -0.6596937,-0.295627 -0.6596937,-0.659694 0,-0.364419 0.2952747,-0.659694 0.6596937,-0.659694 0.36442,0 0.659695,0.295275 0.659695,0.659694\"\n          />\n          <path\n            class=\"snow\"\n            d=\"m 5.3252173,13.69847 c 0,0.364419 -0.295275,0.660047 -0.659695,0.660047 -0.364067,0 -0.659694,-0.295628 -0.659694,-0.660047 0,-0.364067 0.295627,-0.659694 0.659694,-0.659694 0.36442,0 0.659695,0.295627 0.659695,0.659694\"\n          />\n        `\n      : \"\"\n  }\n  ${\n    lightningStates.has(state)\n      ? svg`\n          <path\n            class=\"sun\"\n            d=\"m 9.9252695,10.935875 -1.6483986,2.341014 1.1170184,0.05929 -1.2169864,2.02141 3.0450261,-2.616159 H 9.8864918 L 10.97937,11.294651 10.700323,10.79794 h -0.508706 l -0.2663475,0.137936\"\n          />\n        `\n      : \"\"\n  }\n  </svg>`;\n\nexport const getWeatherStateIcon = (\n  state: string,\n  element: HTMLElement,\n  nightTime?: boolean\n): TemplateResult | undefined => {\n  const userDefinedIcon = getComputedStyle(element).getPropertyValue(\n    `--weather-icon-${state}`\n  );\n\n  if (userDefinedIcon) {\n    return html`\n      <div\n        style=\"background-size: cover;${styleMap({\n          \"background-image\": userDefinedIcon,\n        })}\"\n      ></div>\n    `;\n  }\n\n  if (weatherSVGs.has(state)) {\n    return html`${getWeatherStateSVG(state, nightTime)}`;\n  }\n\n  if (state in weatherIcons) {\n    return html`\n      <ha-svg-icon\n        class=\"weather-icon\"\n        .path=${weatherIcons[state]}\n      ></ha-svg-icon>\n    `;\n  }\n\n  return undefined;\n};\n\nconst EIGHT_HOURS = 28800000;\nconst DAY_IN_MILLISECONDS = 86400000;\n\nconst isForecastHourly = (\n  forecast?: ForecastAttribute[]\n): boolean | undefined => {\n  if (forecast && forecast?.length && forecast?.length > 2) {\n    const date1 = new Date(forecast[1].datetime);\n    const date2 = new Date(forecast[2].datetime);\n    const timeDiff = date2.getTime() - date1.getTime();\n\n    return timeDiff < EIGHT_HOURS;\n  }\n\n  return undefined;\n};\n\nconst isForecastTwiceDaily = (\n  forecast?: ForecastAttribute[]\n): boolean | undefined => {\n  if (forecast && forecast?.length && forecast?.length > 2) {\n    const date1 = new Date(forecast[1].datetime);\n    const date2 = new Date(forecast[2].datetime);\n    const timeDiff = date2.getTime() - date1.getTime();\n\n    return timeDiff < DAY_IN_MILLISECONDS;\n  }\n\n  return undefined;\n};\n\nexport type WeatherUnits = {\n  precipitation_unit: string[];\n  pressure_unit: string[];\n  temperature_unit: string[];\n  visibility_unit: string[];\n  wind_speed_unit: string[];\n};\n\nexport const getWeatherConvertibleUnits = (\n  hass: HomeAssistant\n): Promise<{ units: WeatherUnits }> =>\n  hass.callWS({\n    type: \"weather/convertible_units\",\n  });\n\nconst getLegacyForecast = (\n  weather_attributes?: WeatherEntityAttributes | undefined\n):\n  | {\n      forecast: ForecastAttribute[];\n      type: \"daily\" | \"hourly\" | \"twice_daily\";\n    }\n  | undefined => {\n  if (weather_attributes?.forecast && weather_attributes.forecast.length > 2) {\n    if (isForecastHourly(weather_attributes.forecast)) {\n      return {\n        forecast: weather_attributes.forecast,\n        type: \"hourly\",\n      };\n    }\n    if (isForecastTwiceDaily(weather_attributes.forecast)) {\n      return {\n        forecast: weather_attributes.forecast,\n        type: \"twice_daily\",\n      };\n    }\n    return { forecast: weather_attributes.forecast, type: \"daily\" };\n  }\n  return undefined;\n};\n\nexport const getForecast = (\n  weather_attributes?: WeatherEntityAttributes | undefined,\n  forecast_event?: ForecastEvent,\n  forecast_type?: ForecastType | undefined\n):\n  | {\n      forecast: ForecastAttribute[];\n      type: \"daily\" | \"hourly\" | \"twice_daily\";\n    }\n  | undefined => {\n  if (forecast_type === undefined) {\n    if (\n      forecast_event?.type !== undefined &&\n      forecast_event?.forecast &&\n      forecast_event?.forecast?.length > 2\n    ) {\n      return { forecast: forecast_event.forecast, type: forecast_event?.type };\n    }\n    return getLegacyForecast(weather_attributes);\n  }\n\n  if (forecast_type === \"legacy\") {\n    return getLegacyForecast(weather_attributes);\n  }\n\n  if (\n    forecast_type === forecast_event?.type &&\n    forecast_event?.forecast &&\n    forecast_event?.forecast?.length > 2\n  ) {\n    return { forecast: forecast_event.forecast, type: forecast_type };\n  }\n\n  return undefined;\n};\n\nexport const subscribeForecast = (\n  hass: HomeAssistant,\n  entity_id: string,\n  forecast_type: ModernForecastType,\n  callback: (forecastevent: ForecastEvent) => void\n) =>\n  hass.connection.subscribeMessage<ForecastEvent>(callback, {\n    type: \"weather/subscribe_forecast\",\n    forecast_type,\n    entity_id,\n  });\n\nexport const getSupportedForecastTypes = (\n  stateObj: HassEntityBase\n): ModernForecastType[] => {\n  const supported: ModernForecastType[] = [];\n  if (supportsFeature(stateObj, WeatherEntityFeature.FORECAST_DAILY)) {\n    supported.push(\"daily\");\n  }\n  if (supportsFeature(stateObj, WeatherEntityFeature.FORECAST_TWICE_DAILY)) {\n    supported.push(\"twice_daily\");\n  }\n  if (supportsFeature(stateObj, WeatherEntityFeature.FORECAST_HOURLY)) {\n    supported.push(\"hourly\");\n  }\n  return supported;\n};\n\nexport const getDefaultForecastType = (stateObj: HassEntityBase) => {\n  if (supportsFeature(stateObj, WeatherEntityFeature.FORECAST_DAILY)) {\n    return \"daily\";\n  }\n  if (supportsFeature(stateObj, WeatherEntityFeature.FORECAST_TWICE_DAILY)) {\n    return \"twice_daily\";\n  }\n  if (supportsFeature(stateObj, WeatherEntityFeature.FORECAST_HOURLY)) {\n    return \"hourly\";\n  }\n  return undefined;\n};\n"],"mappings":"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K,CAAC,GACnBlG,GAAI;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,GACD,EACL;AACH,IACI4C,UAAU,CAACwD,GAAG,CAACF,KAAK,CAAC,GACjBlG,GAAI;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,GACD,EACL;AACH,IACIkG,KAAK,KAAK,SAAS,GACflG,GAAI;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,GACD,EACL;AACH,IACI6C,WAAW,CAACuD,GAAG,CAACF,KAAK,CAAC,GAClBlG,GAAI;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,GACD,EACL;AACH,IACI8C,WAAW,CAACsD,GAAG,CAACF,KAAK,CAAC,GAClBlG,GAAI;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,GACD,EACL;AACH,IACI+C,eAAe,CAACqD,GAAG,CAACF,KAAK,CAAC,GACtBlG,GAAI;AACZ;AACA;AACA;AACA;AACA,SAAS,GACD,EACL;AACH,SAAS;AAET,OAAO,MAAMqG,mBAAmB,GAAGA,CACjCH,KAAa,EACbI,OAAoB,EACpBH,SAAmB,KACY;EAC/B,MAAMI,eAAe,GAAGC,gBAAgB,CAACF,OAAO,CAAC,CAACG,gBAAgB,CAC/D,kBAAiBP,KAAM,EAC1B,CAAC;EAED,IAAIK,eAAe,EAAE;IACnB,OAAOxG,IAAK;AAChB;AACA,wCAAwCE,QAAQ,CAAC;MACvC,kBAAkB,EAAEsG;IACtB,CAAC,CAAE;AACX;AACA,KAAK;EACH;EAEA,IAAIlG,WAAW,CAAC+F,GAAG,CAACF,KAAK,CAAC,EAAE;IAC1B,OAAOnG,IAAK,GAAEkG,kBAAkB,CAACC,KAAK,EAAEC,SAAS,CAAE,EAAC;EACtD;EAEA,IAAID,KAAK,IAAI3F,YAAY,EAAE;IACzB,OAAOR,IAAK;AAChB;AACA;AACA,gBAAgBQ,YAAY,CAAC2F,KAAK,CAA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"},"metadata":{},"sourceType":"module","externalDependencies":[]}