{"ast":null,"code":"import { throttle } from \"../util/throttle\";\nvar throttleReplaceState = throttle(function (value) {\n  history.replaceState({\n    scrollPosition: value\n  }, \"\");\n}, 300);\nexport var restoreScroll = function restoreScroll(selector) {\n  return function (element) {\n    return {\n      kind: \"method\",\n      placement: \"prototype\",\n      key: element.key,\n      descriptor: {\n        set: function set(value) {\n          throttleReplaceState(value);\n          this[\"__\".concat(String(element.key))] = value;\n        },\n        get: function get() {\n          var _history$state;\n          return this[\"__\".concat(String(element.key))] || ((_history$state = history.state) === null || _history$state === void 0 ? void 0 : _history$state.scrollPosition);\n        },\n        enumerable: true,\n        configurable: true\n      },\n      finisher: function finisher(cls) {\n        var connectedCallback = cls.prototype.connectedCallback;\n        cls.prototype.connectedCallback = function () {\n          var _this = this;\n          connectedCallback.call(this);\n          var scrollPos = this[element.key];\n          if (scrollPos) {\n            this.updateComplete.then(function () {\n              var target = _this.renderRoot.querySelector(selector);\n              if (!target) {\n                return;\n              }\n              setTimeout(function () {\n                target.scrollTop = scrollPos;\n              }, 0);\n            });\n          }\n        };\n      }\n    };\n  };\n};","map":{"version":3,"names":["throttle","throttleReplaceState","value","history","replaceState","scrollPosition","restoreScroll","selector","element","kind","placement","key","descriptor","set","concat","String","get","_history$state","state","enumerable","configurable","finisher","cls","connectedCallback","prototype","_this","call","scrollPos","updateComplete","then","target","renderRoot","querySelector","setTimeout","scrollTop"],"sources":["/Users/sercanardil/Desktop/frontend/src/common/decorators/restore-scroll.ts"],"sourcesContent":["import type { LitElement } from \"lit\";\nimport type { ClassElement } from \"../../types\";\nimport { throttle } from \"../util/throttle\";\n\nconst throttleReplaceState = throttle((value) => {\n  history.replaceState({ scrollPosition: value }, \"\");\n}, 300);\n\nexport const restoreScroll =\n  (selector: string): any =>\n  (element: ClassElement) => ({\n    kind: \"method\",\n    placement: \"prototype\",\n    key: element.key,\n    descriptor: {\n      set(this: LitElement, value: number) {\n        throttleReplaceState(value);\n        this[`__${String(element.key)}`] = value;\n      },\n      get(this: LitElement) {\n        return (\n          this[`__${String(element.key)}`] || history.state?.scrollPosition\n        );\n      },\n      enumerable: true,\n      configurable: true,\n    },\n    finisher(cls: typeof LitElement) {\n      const connectedCallback = cls.prototype.connectedCallback;\n      cls.prototype.connectedCallback = function () {\n        connectedCallback.call(this);\n        const scrollPos = this[element.key];\n        if (scrollPos) {\n          this.updateComplete.then(() => {\n            const target = this.renderRoot.querySelector(selector);\n            if (!target) {\n              return;\n            }\n            setTimeout(() => {\n              target.scrollTop = scrollPos;\n            }, 0);\n          });\n        }\n      };\n    },\n  });\n"],"mappings":"AAEA,SAASA,QAAQ,QAAQ,kBAAkB;AAE3C,IAAMC,oBAAoB,GAAGD,QAAQ,CAAC,UAACE,KAAK,EAAK;EAC/CC,OAAO,CAACC,YAAY,CAAC;IAAEC,cAAc,EAAEH;EAAM,CAAC,EAAE,EAAE,CAAC;AACrD,CAAC,EAAE,GAAG,CAAC;AAEP,OAAO,IAAMI,aAAa,GACxB,SADWA,aAAaA,CACvBC,QAAgB;EAAA,OACjB,UAACC,OAAqB;IAAA,OAAM;MAC1BC,IAAI,EAAE,QAAQ;MACdC,SAAS,EAAE,WAAW;MACtBC,GAAG,EAAEH,OAAO,CAACG,GAAG;MAChBC,UAAU,EAAE;QACVC,GAAG,WAAAA,IAAmBX,KAAa,EAAE;UACnCD,oBAAoB,CAACC,KAAK,CAAC;UAC3B,IAAI,MAAAY,MAAA,CAAMC,MAAM,CAACP,OAAO,CAACG,GAAG,CAAC,EAAG,GAAGT,KAAK;QAC1C,CAAC;QACDc,GAAG,WAAAA,IAAA,EAAmB;UAAA,IAAAC,cAAA;UACpB,OACE,IAAI,MAAAH,MAAA,CAAMC,MAAM,CAACP,OAAO,CAACG,GAAG,CAAC,EAAG,MAAAM,cAAA,GAAId,OAAO,CAACe,KAAK,cAAAD,cAAA,uBAAbA,cAAA,CAAeZ,cAAc;QAErE,CAAC;QACDc,UAAU,EAAE,IAAI;QAChBC,YAAY,EAAE;MAChB,CAAC;MACDC,QAAQ,WAAAA,SAACC,GAAsB,EAAE;QAC/B,IAAMC,iBAAiB,GAAGD,GAAG,CAACE,SAAS,CAACD,iBAAiB;QACzDD,GAAG,CAACE,SAAS,CAACD,iBAAiB,GAAG,YAAY;UAAA,IAAAE,KAAA;UAC5CF,iBAAiB,CAACG,IAAI,CAAC,IAAI,CAAC;UAC5B,IAAMC,SAAS,GAAG,IAAI,CAACnB,OAAO,CAACG,GAAG,CAAC;UACnC,IAAIgB,SAAS,EAAE;YACb,IAAI,CAACC,cAAc,CAACC,IAAI,CAAC,YAAM;cAC7B,IAAMC,MAAM,GAAGL,KAAI,CAACM,UAAU,CAACC,aAAa,CAACzB,QAAQ,CAAC;cACtD,IAAI,CAACuB,MAAM,EAAE;gBACX;cACF;cACAG,UAAU,CAAC,YAAM;gBACfH,MAAM,CAACI,SAAS,GAAGP,SAAS;cAC9B,CAAC,EAAE,CAAC,CAAC;YACP,CAAC,CAAC;UACJ;QACF,CAAC;MACH;IACF,CAAC;EAAA,CAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}