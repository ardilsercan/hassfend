{"ast":null,"code":"import _decorate from \"@babel/runtime/helpers/decorate\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n/* eslint-disable lit/prefer-static-styles */\nimport { html, LitElement, nothing } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nexport let HaSortable = _decorate([customElement(\"ha-sortable\")], function (_initialize, _LitElement) {\n  class HaSortable extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: HaSortable,\n    d: [{\n      kind: \"field\",\n      key: \"_sortable\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean\n      })],\n      key: \"disabled\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Array\n      })],\n      key: \"path\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean,\n        attribute: \"no-style\"\n      })],\n      key: \"noStyle\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: String,\n        attribute: \"draggable-selector\"\n      })],\n      key: \"draggableSelector\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: String,\n        attribute: \"handle-selector\"\n      })],\n      key: \"handleSelector\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: String,\n        attribute: \"group\"\n      })],\n      key: \"group\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Number,\n        attribute: \"swap-threshold\"\n      })],\n      key: \"swapThreshold\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [property({\n        type: Boolean,\n        attribute: \"invert-swap\"\n      })],\n      key: \"invertSwap\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProperties) {\n        if (changedProperties.has(\"disabled\")) {\n          if (this.disabled) {\n            this._destroySortable();\n          } else {\n            this._createSortable();\n          }\n        }\n      }\n\n      // Workaround for connectedCallback just after disconnectedCallback (when dragging sortable with sortable children)\n    }, {\n      kind: \"field\",\n      key: \"_shouldBeDestroy\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(HaSortable.prototype), \"disconnectedCallback\", this).call(this);\n        this._shouldBeDestroy = true;\n        setTimeout(() => {\n          if (this._shouldBeDestroy) {\n            this._destroySortable();\n            this._shouldBeDestroy = false;\n          }\n        }, 1);\n      }\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(HaSortable.prototype), \"connectedCallback\", this).call(this);\n        this._shouldBeDestroy = false;\n      }\n    }, {\n      kind: \"method\",\n      key: \"createRenderRoot\",\n      value: function createRenderRoot() {\n        return this;\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (this.noStyle) return nothing;\n        return html`\n      <style>\n        .sortable-fallback {\n          display: none !important;\n        }\n\n        .sortable-ghost {\n          box-shadow: 0 0 0 2px var(--primary-color);\n          background: rgba(var(--rgb-primary-color), 0.25);\n          border-radius: 4px;\n          opacity: 0.4;\n        }\n\n        .sortable-drag {\n          border-radius: 4px;\n          opacity: 1;\n          background: var(--card-background-color);\n          box-shadow: 0px 4px 8px 3px #00000026;\n          cursor: grabbing;\n        }\n      </style>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_createSortable\",\n      value: async function _createSortable() {\n        if (this._sortable) return;\n        const container = this.children[0];\n        if (!container) return;\n        const Sortable = (await import(\"../resources/sortable\")).default;\n        const options = {\n          animation: 150,\n          swapThreshold: 1,\n          onChoose: this._handleChoose,\n          onEnd: this._handleEnd\n        };\n        if (this.draggableSelector) {\n          options.draggable = this.draggableSelector;\n        }\n        if (this.swapThreshold !== undefined) {\n          options.swapThreshold = this.swapThreshold;\n        }\n        if (this.invertSwap !== undefined) {\n          options.invertSwap = this.invertSwap;\n        }\n        if (this.handleSelector) {\n          options.handle = this.handleSelector;\n        }\n        if (this.draggableSelector) {\n          options.draggable = this.draggableSelector;\n        }\n        if (this.group) {\n          options.group = this.group;\n        }\n        this._sortable = new Sortable(container, options);\n      }\n    }, {\n      kind: \"field\",\n      key: \"_handleEnd\",\n      value() {\n        return async evt => {\n          // put back in original location\n          if (evt.item.placeholder) {\n            evt.item.placeholder.replaceWith(evt.item);\n            delete evt.item.placeholder;\n          }\n          const oldIndex = evt.oldIndex;\n          const oldPath = evt.from.parentElement.path;\n          const newIndex = evt.newIndex;\n          const newPath = evt.to.parentElement.path;\n          if (oldIndex === undefined || newIndex === undefined || oldIndex === newIndex && (oldPath === null || oldPath === void 0 ? void 0 : oldPath.join(\".\")) === (newPath === null || newPath === void 0 ? void 0 : newPath.join(\".\"))) {\n            return;\n          }\n          fireEvent(this, \"item-moved\", {\n            oldIndex,\n            newIndex,\n            oldPath,\n            newPath\n          });\n        };\n      }\n    }, {\n      kind: \"field\",\n      key: \"_handleChoose\",\n      value() {\n        return evt => {\n          evt.item.placeholder = document.createComment(\"sort-placeholder\");\n          evt.item.after(evt.item.placeholder);\n        };\n      }\n    }, {\n      kind: \"method\",\n      key: \"_destroySortable\",\n      value: function _destroySortable() {\n        if (!this._sortable) return;\n        this._sortable.destroy();\n        this._sortable = undefined;\n      }\n    }]\n  };\n}, LitElement);","map":{"version":3,"names":["html","LitElement","nothing","customElement","property","fireEvent","HaSortable","_decorate","_initialize","_LitElement","constructor","args","F","d","kind","key","value","decorators","type","Boolean","Array","attribute","String","Number","updated","changedProperties","has","disabled","_destroySortable","_createSortable","disconnectedCallback","_get","_getPrototypeOf","prototype","call","_shouldBeDestroy","setTimeout","connectedCallback","createRenderRoot","render","noStyle","_sortable","container","children","Sortable","default","options","animation","swapThreshold","onChoose","_handleChoose","onEnd","_handleEnd","draggableSelector","draggable","undefined","invertSwap","handleSelector","handle","group","evt","item","placeholder","replaceWith","oldIndex","oldPath","from","parentElement","path","newIndex","newPath","to","join","document","createComment","after","destroy"],"sources":["/Users/sercanardil/Desktop/frontend/src/components/ha-sortable.ts"],"sourcesContent":["/* eslint-disable lit/prefer-static-styles */\nimport { html, LitElement, nothing, PropertyValues } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport type { SortableEvent } from \"sortablejs\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport type { SortableInstance } from \"../resources/sortable\";\nimport { ItemPath } from \"../types\";\n\ndeclare global {\n  interface HASSDomEvents {\n    \"item-moved\": {\n      oldIndex: number;\n      newIndex: number;\n      oldPath?: ItemPath;\n      newPath?: ItemPath;\n    };\n  }\n}\n\n@customElement(\"ha-sortable\")\nexport class HaSortable extends LitElement {\n  private _sortable?: SortableInstance;\n\n  @property({ type: Boolean })\n  public disabled = false;\n\n  @property({ type: Array })\n  public path?: ItemPath;\n\n  @property({ type: Boolean, attribute: \"no-style\" })\n  public noStyle: boolean = false;\n\n  @property({ type: String, attribute: \"draggable-selector\" })\n  public draggableSelector?: string;\n\n  @property({ type: String, attribute: \"handle-selector\" })\n  public handleSelector?: string;\n\n  @property({ type: String, attribute: \"group\" })\n  public group?: string;\n\n  @property({ type: Number, attribute: \"swap-threshold\" })\n  public swapThreshold?: number;\n\n  @property({ type: Boolean, attribute: \"invert-swap\" })\n  public invertSwap?: boolean;\n\n  protected updated(changedProperties: PropertyValues<this>) {\n    if (changedProperties.has(\"disabled\")) {\n      if (this.disabled) {\n        this._destroySortable();\n      } else {\n        this._createSortable();\n      }\n    }\n  }\n\n  // Workaround for connectedCallback just after disconnectedCallback (when dragging sortable with sortable children)\n  private _shouldBeDestroy = false;\n\n  public disconnectedCallback() {\n    super.disconnectedCallback();\n    this._shouldBeDestroy = true;\n    setTimeout(() => {\n      if (this._shouldBeDestroy) {\n        this._destroySortable();\n        this._shouldBeDestroy = false;\n      }\n    }, 1);\n  }\n\n  public connectedCallback() {\n    super.connectedCallback();\n    this._shouldBeDestroy = false;\n  }\n\n  protected createRenderRoot() {\n    return this;\n  }\n\n  protected render() {\n    if (this.noStyle) return nothing;\n    return html`\n      <style>\n        .sortable-fallback {\n          display: none !important;\n        }\n\n        .sortable-ghost {\n          box-shadow: 0 0 0 2px var(--primary-color);\n          background: rgba(var(--rgb-primary-color), 0.25);\n          border-radius: 4px;\n          opacity: 0.4;\n        }\n\n        .sortable-drag {\n          border-radius: 4px;\n          opacity: 1;\n          background: var(--card-background-color);\n          box-shadow: 0px 4px 8px 3px #00000026;\n          cursor: grabbing;\n        }\n      </style>\n    `;\n  }\n\n  private async _createSortable() {\n    if (this._sortable) return;\n    const container = this.children[0] as HTMLElement | undefined;\n\n    if (!container) return;\n\n    const Sortable = (await import(\"../resources/sortable\")).default;\n\n    const options: SortableInstance.Options = {\n      animation: 150,\n      swapThreshold: 1,\n      onChoose: this._handleChoose,\n      onEnd: this._handleEnd,\n    };\n\n    if (this.draggableSelector) {\n      options.draggable = this.draggableSelector;\n    }\n\n    if (this.swapThreshold !== undefined) {\n      options.swapThreshold = this.swapThreshold;\n    }\n    if (this.invertSwap !== undefined) {\n      options.invertSwap = this.invertSwap;\n    }\n    if (this.handleSelector) {\n      options.handle = this.handleSelector;\n    }\n    if (this.draggableSelector) {\n      options.draggable = this.draggableSelector;\n    }\n    if (this.group) {\n      options.group = this.group;\n    }\n\n    this._sortable = new Sortable(container, options);\n  }\n\n  private _handleEnd = async (evt: SortableEvent) => {\n    // put back in original location\n    if ((evt.item as any).placeholder) {\n      (evt.item as any).placeholder.replaceWith(evt.item);\n      delete (evt.item as any).placeholder;\n    }\n\n    const oldIndex = evt.oldIndex;\n    const oldPath = (evt.from.parentElement as HaSortable).path;\n    const newIndex = evt.newIndex;\n    const newPath = (evt.to.parentElement as HaSortable).path;\n\n    if (\n      oldIndex === undefined ||\n      newIndex === undefined ||\n      (oldIndex === newIndex && oldPath?.join(\".\") === newPath?.join(\".\"))\n    ) {\n      return;\n    }\n\n    fireEvent(this, \"item-moved\", {\n      oldIndex,\n      newIndex,\n      oldPath,\n      newPath,\n    });\n  };\n\n  private _handleChoose = (evt: SortableEvent) => {\n    (evt.item as any).placeholder = document.createComment(\"sort-placeholder\");\n    evt.item.after((evt.item as any).placeholder);\n  };\n\n  private _destroySortable() {\n    if (!this._sortable) return;\n    this._sortable.destroy();\n    this._sortable = undefined;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-sortable\": HaSortable;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}