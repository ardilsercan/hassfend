{"ast":null,"code":"import { getGraphColorByIndex } from \"../../../common/color/colors\";\nimport { hex2rgb, lab2hex, rgb2lab } from \"../../../common/color/convert-color\";\nimport { labBrighten } from \"../../../common/color/lab\";\nimport { computeDomain } from \"../../../common/entity/compute_domain\";\nimport { stateColorProperties } from \"../../../common/entity/state_color\";\nimport { UNAVAILABLE, UNKNOWN } from \"../../../data/entity\";\nimport { computeCssValue } from \"../../../resources/css-variables\";\nconst DOMAIN_STATE_SHADES = {\n  media_player: {\n    paused: 0.5,\n    idle: 1\n  },\n  vacuum: {\n    returning: 0.5\n  }\n};\nfunction computeTimelineStateColor(state, computedStyles, stateObj) {\n  var _DOMAIN_STATE_SHADES$;\n  if (!stateObj || state === UNAVAILABLE) {\n    return computeCssValue(\"--history-unavailable-color\", computedStyles);\n  }\n  if (state === UNKNOWN) {\n    return computeCssValue(\"--history-unknown-color\", computedStyles);\n  }\n  const properties = stateColorProperties(stateObj, state);\n  if (!properties) {\n    return undefined;\n  }\n  const rgb = computeCssValue(properties, computedStyles);\n  if (!rgb) return undefined;\n  const domain = computeDomain(stateObj.entity_id);\n  const shade = (_DOMAIN_STATE_SHADES$ = DOMAIN_STATE_SHADES[domain]) === null || _DOMAIN_STATE_SHADES$ === void 0 ? void 0 : _DOMAIN_STATE_SHADES$[state];\n  if (!shade) {\n    return rgb;\n  }\n  return lab2hex(labBrighten(rgb2lab(hex2rgb(rgb)), shade));\n}\nlet colorIndex = 0;\nconst stateColorMap = new Map();\nfunction computeTimeLineGenericColor(state, computedStyles) {\n  if (stateColorMap.has(state)) {\n    return stateColorMap.get(state);\n  }\n  const color = getGraphColorByIndex(colorIndex, computedStyles);\n  colorIndex++;\n  stateColorMap.set(state, color);\n  return color;\n}\nexport function computeTimelineColor(state, computedStyles, stateObj) {\n  return computeTimelineStateColor(state, computedStyles, stateObj) || computeTimeLineGenericColor(state, computedStyles);\n}","map":{"version":3,"names":["getGraphColorByIndex","hex2rgb","lab2hex","rgb2lab","labBrighten","computeDomain","stateColorProperties","UNAVAILABLE","UNKNOWN","computeCssValue","DOMAIN_STATE_SHADES","media_player","paused","idle","vacuum","returning","computeTimelineStateColor","state","computedStyles","stateObj","_DOMAIN_STATE_SHADES$","properties","undefined","rgb","domain","entity_id","shade","colorIndex","stateColorMap","Map","computeTimeLineGenericColor","has","get","color","set","computeTimelineColor"],"sources":["/Users/sercanardil/Desktop/frontend/src/components/chart/timeline-chart/timeline-color.ts"],"sourcesContent":["import { HassEntity } from \"home-assistant-js-websocket\";\nimport { getGraphColorByIndex } from \"../../../common/color/colors\";\nimport { hex2rgb, lab2hex, rgb2lab } from \"../../../common/color/convert-color\";\nimport { labBrighten } from \"../../../common/color/lab\";\nimport { computeDomain } from \"../../../common/entity/compute_domain\";\nimport { stateColorProperties } from \"../../../common/entity/state_color\";\nimport { UNAVAILABLE, UNKNOWN } from \"../../../data/entity\";\nimport { computeCssValue } from \"../../../resources/css-variables\";\n\nconst DOMAIN_STATE_SHADES: Record<string, Record<string, number>> = {\n  media_player: {\n    paused: 0.5,\n    idle: 1,\n  },\n  vacuum: {\n    returning: 0.5,\n  },\n};\n\nfunction computeTimelineStateColor(\n  state: string,\n  computedStyles: CSSStyleDeclaration,\n  stateObj?: HassEntity\n): string | undefined {\n  if (!stateObj || state === UNAVAILABLE) {\n    return computeCssValue(\"--history-unavailable-color\", computedStyles);\n  }\n\n  if (state === UNKNOWN) {\n    return computeCssValue(\"--history-unknown-color\", computedStyles);\n  }\n\n  const properties = stateColorProperties(stateObj, state);\n\n  if (!properties) {\n    return undefined;\n  }\n\n  const rgb = computeCssValue(properties, computedStyles);\n\n  if (!rgb) return undefined;\n\n  const domain = computeDomain(stateObj.entity_id);\n  const shade = DOMAIN_STATE_SHADES[domain]?.[state] as number | number;\n  if (!shade) {\n    return rgb;\n  }\n  return lab2hex(labBrighten(rgb2lab(hex2rgb(rgb)), shade));\n}\n\nlet colorIndex = 0;\nconst stateColorMap: Map<string, string> = new Map();\n\nfunction computeTimeLineGenericColor(\n  state: string,\n  computedStyles: CSSStyleDeclaration\n): string {\n  if (stateColorMap.has(state)) {\n    return stateColorMap.get(state)!;\n  }\n  const color = getGraphColorByIndex(colorIndex, computedStyles);\n  colorIndex++;\n  stateColorMap.set(state, color);\n  return color;\n}\n\nexport function computeTimelineColor(\n  state: string,\n  computedStyles: CSSStyleDeclaration,\n  stateObj?: HassEntity\n): string {\n  return (\n    computeTimelineStateColor(state, computedStyles, stateObj) ||\n    computeTimeLineGenericColor(state, computedStyles)\n  );\n}\n"],"mappings":"AACA,SAASA,oBAAoB,QAAQ,8BAA8B;AACnE,SAASC,OAAO,EAAEC,OAAO,EAAEC,OAAO,QAAQ,qCAAqC;AAC/E,SAASC,WAAW,QAAQ,2BAA2B;AACvD,SAASC,aAAa,QAAQ,uCAAuC;AACrE,SAASC,oBAAoB,QAAQ,oCAAoC;AACzE,SAASC,WAAW,EAAEC,OAAO,QAAQ,sBAAsB;AAC3D,SAASC,eAAe,QAAQ,kCAAkC;AAElE,MAAMC,mBAA2D,GAAG;EAClEC,YAAY,EAAE;IACZC,MAAM,EAAE,GAAG;IACXC,IAAI,EAAE;EACR,CAAC;EACDC,MAAM,EAAE;IACNC,SAAS,EAAE;EACb;AACF,CAAC;AAED,SAASC,yBAAyBA,CAChCC,KAAa,EACbC,cAAmC,EACnCC,QAAqB,EACD;EAAA,IAAAC,qBAAA;EACpB,IAAI,CAACD,QAAQ,IAAIF,KAAK,KAAKV,WAAW,EAAE;IACtC,OAAOE,eAAe,CAAC,6BAA6B,EAAES,cAAc,CAAC;EACvE;EAEA,IAAID,KAAK,KAAKT,OAAO,EAAE;IACrB,OAAOC,eAAe,CAAC,yBAAyB,EAAES,cAAc,CAAC;EACnE;EAEA,MAAMG,UAAU,GAAGf,oBAAoB,CAACa,QAAQ,EAAEF,KAAK,CAAC;EAExD,IAAI,CAACI,UAAU,EAAE;IACf,OAAOC,SAAS;EAClB;EAEA,MAAMC,GAAG,GAAGd,eAAe,CAACY,UAAU,EAAEH,cAAc,CAAC;EAEvD,IAAI,CAACK,GAAG,EAAE,OAAOD,SAAS;EAE1B,MAAME,MAAM,GAAGnB,aAAa,CAACc,QAAQ,CAACM,SAAS,CAAC;EAChD,MAAMC,KAAK,IAAAN,qBAAA,GAAGV,mBAAmB,CAACc,MAAM,CAAC,cAAAJ,qBAAA,uBAA3BA,qBAAA,CAA8BH,KAAK,CAAoB;EACrE,IAAI,CAACS,KAAK,EAAE;IACV,OAAOH,GAAG;EACZ;EACA,OAAOrB,OAAO,CAACE,WAAW,CAACD,OAAO,CAACF,OAAO,CAACsB,GAAG,CAAC,CAAC,EAAEG,KAAK,CAAC,CAAC;AAC3D;AAEA,IAAIC,UAAU,GAAG,CAAC;AAClB,MAAMC,aAAkC,GAAG,IAAIC,GAAG,CAAC,CAAC;AAEpD,SAASC,2BAA2BA,CAClCb,KAAa,EACbC,cAAmC,EAC3B;EACR,IAAIU,aAAa,CAACG,GAAG,CAACd,KAAK,CAAC,EAAE;IAC5B,OAAOW,aAAa,CAACI,GAAG,CAACf,KAAK,CAAC;EACjC;EACA,MAAMgB,KAAK,GAAGjC,oBAAoB,CAAC2B,UAAU,EAAET,cAAc,CAAC;EAC9DS,UAAU,EAAE;EACZC,aAAa,CAACM,GAAG,CAACjB,KAAK,EAAEgB,KAAK,CAAC;EAC/B,OAAOA,KAAK;AACd;AAEA,OAAO,SAASE,oBAAoBA,CAClClB,KAAa,EACbC,cAAmC,EACnCC,QAAqB,EACb;EACR,OACEH,yBAAyB,CAACC,KAAK,EAAEC,cAAc,EAAEC,QAAQ,CAAC,IAC1DW,2BAA2B,CAACb,KAAK,EAAEC,cAAc,CAAC;AAEtD"},"metadata":{},"sourceType":"module","externalDependencies":[]}