{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/helpers/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nexport var subscribeOne = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(conn, subscribe) {\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          return _context.abrupt(\"return\", new Promise(function (resolve) {\n            var unsub = subscribe(conn, function (items) {\n              unsub();\n              resolve(items);\n            });\n          }));\n        case 1:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function subscribeOne(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["subscribeOne","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","conn","subscribe","wrap","_callee$","_context","prev","next","abrupt","Promise","resolve","unsub","items","stop","_x","_x2","apply","arguments"],"sources":["/workspaces/frontend/src/common/util/subscribe-one.ts"],"sourcesContent":["import { Connection, UnsubscribeFunc } from \"home-assistant-js-websocket\";\n\nexport const subscribeOne = async <T>(\n  conn: Connection,\n  subscribe: (\n    conn2: Connection,\n    onChange: (items: T) => void\n  ) => UnsubscribeFunc\n) =>\n  new Promise<T>((resolve) => {\n    const unsub = subscribe(conn, (items) => {\n      unsub();\n      resolve(items);\n    });\n  });\n"],"mappings":";;;;AAEA,OAAO,IAAMA,YAAY;EAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAC1BC,IAAgB,EAChBC,SAGoB;IAAA,OAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAA,OAAAF,QAAA,CAAAG,MAAA,WAEpB,IAAIC,OAAO,CAAI,UAACC,OAAO,EAAK;YAC1B,IAAMC,KAAK,GAAGT,SAAS,CAACD,IAAI,EAAE,UAACW,KAAK,EAAK;cACvCD,KAAK,CAAC,CAAC;cACPD,OAAO,CAACE,KAAK,CAAC;YAChB,CAAC,CAAC;UACJ,CAAC,CAAC;QAAA;QAAA;UAAA,OAAAP,QAAA,CAAAQ,IAAA;MAAA;IAAA,GAAAb,OAAA;EAAA;EAAA,gBAZSL,YAAYA,CAAAmB,EAAA,EAAAC,GAAA;IAAA,OAAAnB,IAAA,CAAAoB,KAAA,OAAAC,SAAA;EAAA;AAAA,GAYrB"},"metadata":{},"sourceType":"module","externalDependencies":[]}