{"ast":null,"code":"import { createCollection } from \"home-assistant-js-websocket\";\nimport { fetchEntityRegistryDisplay } from \"./entity_registry\";\nimport { debounce } from \"../common/util/debounce\";\nvar subscribeEntityRegistryDisplayUpdates = function subscribeEntityRegistryDisplayUpdates(conn, store) {\n  return conn.subscribeEvents(debounce(function () {\n    return fetchEntityRegistryDisplay(conn).then(function (entities) {\n      return store.setState(entities, true);\n    });\n  }, 500, true), \"entity_registry_updated\");\n};\nexport var subscribeEntityRegistryDisplay = function subscribeEntityRegistryDisplay(conn, onChange) {\n  return createCollection(\"_entityRegistryDisplay\", fetchEntityRegistryDisplay, subscribeEntityRegistryDisplayUpdates, conn, onChange);\n};","map":{"version":3,"names":["createCollection","fetchEntityRegistryDisplay","debounce","subscribeEntityRegistryDisplayUpdates","conn","store","subscribeEvents","then","entities","setState","subscribeEntityRegistryDisplay","onChange"],"sources":["/workspaces/frontend/src/data/ws-entity_registry_display.ts"],"sourcesContent":["import { Connection, createCollection } from \"home-assistant-js-websocket\";\nimport { Store } from \"home-assistant-js-websocket/dist/store\";\nimport {\n  EntityRegistryDisplayEntryResponse,\n  fetchEntityRegistryDisplay,\n} from \"./entity_registry\";\nimport { debounce } from \"../common/util/debounce\";\n\nconst subscribeEntityRegistryDisplayUpdates = (\n  conn: Connection,\n  store: Store<EntityRegistryDisplayEntryResponse>\n) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchEntityRegistryDisplay(conn).then((entities) =>\n          store.setState(entities, true)\n        ),\n      500,\n      true\n    ),\n    \"entity_registry_updated\"\n  );\n\nexport const subscribeEntityRegistryDisplay = (\n  conn: Connection,\n  onChange: (entities: EntityRegistryDisplayEntryResponse) => void\n) =>\n  createCollection<EntityRegistryDisplayEntryResponse>(\n    \"_entityRegistryDisplay\",\n    fetchEntityRegistryDisplay,\n    subscribeEntityRegistryDisplayUpdates,\n    conn,\n    onChange\n  );\n"],"mappings":"AAAA,SAAqBA,gBAAgB,QAAQ,6BAA6B;AAE1E,SAEEC,0BAA0B,QACrB,mBAAmB;AAC1B,SAASC,QAAQ,QAAQ,yBAAyB;AAElD,IAAMC,qCAAqC,GAAG,SAAxCA,qCAAqCA,CACzCC,IAAgB,EAChBC,KAAgD;EAAA,OAEhDD,IAAI,CAACE,eAAe,CAClBJ,QAAQ,CACN;IAAA,OACED,0BAA0B,CAACG,IAAI,CAAC,CAACG,IAAI,CAAC,UAACC,QAAQ;MAAA,OAC7CH,KAAK,CAACI,QAAQ,CAACD,QAAQ,EAAE,IAAI,CAAC;IAAA,CAChC,CAAC;EAAA,GACH,GAAG,EACH,IACF,CAAC,EACD,yBACF,CAAC;AAAA;AAEH,OAAO,IAAME,8BAA8B,GAAG,SAAjCA,8BAA8BA,CACzCN,IAAgB,EAChBO,QAAgE;EAAA,OAEhEX,gBAAgB,CACd,wBAAwB,EACxBC,0BAA0B,EAC1BE,qCAAqC,EACrCC,IAAI,EACJO,QACF,CAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}